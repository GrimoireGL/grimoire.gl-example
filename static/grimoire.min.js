!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,o){r.apply(this,[e,t,o].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){n(125),e.exports=n(123)},function(e,t,n){var r=n(3),o=n(25),a=n(13),i=n(14),u=n(26),s="prototype",l=function(e,t,n){var c,f,h,d,p=e&l.F,v=e&l.G,m=e&l.S,y=e&l.P,b=e&l.B,g=v?r:m?r[t]||(r[t]={}):(r[t]||{})[s],_=v?o:o[t]||(o[t]={}),M=_[s]||(_[s]={});v&&(n=t);for(c in n)f=!p&&g&&void 0!==g[c],h=(f?g:n)[c],d=b&&f?u(h,r):y&&"function"==typeof h?u(Function.call,h):h,g&&i(g,c,h,e&l.U),_[c]!=h&&a(_,c,d),y&&M[c]!=h&&(M[c]=h)};r.core=o,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},[340,5],function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var r=n(58)("wks"),o=n(40),a=n(3).Symbol,i="function"==typeof a,u=e.exports=function(e){return r[e]||(r[e]=i&&a[e]||(i?a:o)("Symbol."+e))};u.store=r},[343,4],[349,2,103,24,7],[356,31],[357,20],function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},[345,8,30,7],function(e,t,n){var r=n(3),o=n(13),a=n(11),i=n(40)("src"),u="toString",s=Function[u],l=(""+s).split(u);n(25).inspectSource=function(e){return s.call(e)},(e.exports=function(e,t,n,u){var s="function"==typeof n;s&&(a(n,"name")||o(n,"name",t)),e[t]!==n&&(s&&(a(n,i)||o(n,i,e[t]?""+e[t]:l.join(String(t)))),e===r?e[t]=n:u?e[t]?e[t]=n:o(e,t,n):(delete e[t],o(e,t,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[i]||s.call(this)})},function(e,t,n){var r=n(1),o=n(4),a=n(20),i=/"/g,u=function(e,t,n,r){var o=String(a(e)),u="<"+t;return""!==n&&(u+=" "+n+'="'+String(r).replace(i,"&quot;")+'"'),u+">"+o+"</"+t+">"};e.exports=function(e,t){var n={};n[e]=t(u),r(r.P+r.F*o(function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}),"String",n)}},[355,47,20],function(e,t,n){var r=n(48),o=n(30),a=n(16),i=n(24),u=n(11),s=n(103),l=Object.getOwnPropertyDescriptor;t.f=n(7)?l:function(e,t){if(e=a(e),t=i(t,!0),s)try{return l(e,t)}catch(e){}if(u(e,t))return o(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(11),o=n(10),a=n(79)("IE_PROTO"),i=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?i:null}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(4);e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},function(e,t,n){var r=n(26),o=n(47),a=n(10),i=n(9),u=n(156);e.exports=function(e,t){var n=1==e,s=2==e,l=3==e,c=4==e,f=6==e,h=5==e||f,d=t||u;return function(t,u,p){for(var v,m,y=a(t),b=o(y),g=r(u,p,3),_=i(b.length),M=0,w=n?d(t,_):s?d(t,0):void 0;_>M;M++)if((h||M in b)&&(v=b[M],m=g(v,M,y),e))if(n)w[M]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return M;case 2:w.push(v)}else if(c)return!1;return f?-1:l||c?c:w}}},function(e,t,n){var r=n(1),o=n(25),a=n(4);e.exports=function(e,t){var n=(o.Object||{})[e]||Object[e],i={};i[e]=t(n),r(r.S+r.F*a(function(){n(1)}),"Object",i)}},[358,5],function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},[342,12],function(e,t,n){var r=n(119),o=n(1),a=n(58)("metadata"),i=a.store||(a.store=new(n(122))),u=function(e,t,n){var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}var a=o.get(t);if(!a){if(!n)return;o.set(t,a=new r)}return a},s=function(e,t,n){var r=u(t,n,!1);return void 0!==r&&r.has(e)},l=function(e,t,n){var r=u(t,n,!1);return void 0===r?void 0:r.get(e)},c=function(e,t,n,r){u(n,r,!0).set(e,t)},f=function(e,t){var n=u(e,t,!1),r=[];return n&&n.forEach(function(e,t){r.push(t)}),r},h=function(e){return void 0===e||"symbol"==typeof e?e:String(e)},d=function(e){o(o.S,"Reflect",e)};e.exports={store:i,map:u,has:s,get:l,set:c,keys:f,key:h,exp:d}},function(e,t,n){"use strict";if(n(7)){var r=n(33),o=n(3),a=n(4),i=n(1),u=n(59),s=n(86),l=n(26),c=n(32),f=n(30),h=n(13),d=n(37),p=n(31),v=n(9),m=n(39),y=n(24),b=n(11),g=n(116),_=n(46),M=n(5),w=n(10),x=n(71),S=n(34),E=n(18),I=n(35).f,F=n(88),k=n(40),O=n(6),D=n(22),P=n(49),R=n(80),C=n(89),A=n(43),T=n(55),j=n(38),N=n(64),L=n(96),z=n(8),q=n(17),V=z.f,B=q.f,Y=o.RangeError,G=o.TypeError,W=o.Uint8Array,U="ArrayBuffer",X="Shared"+U,Z="BYTES_PER_ELEMENT",$="prototype",H=Array[$],Q=s.ArrayBuffer,J=s.DataView,K=D(0),ee=D(2),te=D(3),ne=D(4),re=D(5),oe=D(6),ae=P(!0),ie=P(!1),ue=C.values,se=C.keys,le=C.entries,ce=H.lastIndexOf,fe=H.reduce,he=H.reduceRight,de=H.join,pe=H.sort,ve=H.slice,me=H.toString,ye=H.toLocaleString,be=O("iterator"),ge=O("toStringTag"),_e=k("typed_constructor"),Me=k("def_constructor"),we=u.CONSTR,xe=u.TYPED,Se=u.VIEW,Ee="Wrong length!",Ie=D(1,function(e,t){return Re(R(e,e[Me]),t)}),Fe=a(function(){return 1===new W(new Uint16Array([1]).buffer)[0]}),ke=!!W&&!!W[$].set&&a(function(){new W(1).set({})}),Oe=function(e,t){if(void 0===e)throw G(Ee);var n=+e,r=v(e);if(t&&!g(n,r))throw Y(Ee);return r},De=function(e,t){var n=p(e);if(n<0||n%t)throw Y("Wrong offset!");return n},Pe=function(e){if(M(e)&&xe in e)return e;throw G(e+" is not a typed array!")},Re=function(e,t){if(!(M(e)&&_e in e))throw G("It is not a typed array constructor!");return new e(t)},Ce=function(e,t){return Ae(R(e,e[Me]),t)},Ae=function(e,t){for(var n=0,r=t.length,o=Re(e,r);r>n;)o[n]=t[n++];return o},Te=function(e,t,n){V(e,t,{get:function(){return this._d[n]}})},je=function(e){var t,n,r,o,a,i,u=w(e),s=arguments.length,c=s>1?arguments[1]:void 0,f=void 0!==c,h=F(u);if(void 0!=h&&!x(h)){for(i=h.call(u),r=[],t=0;!(a=i.next()).done;t++)r.push(a.value);u=r}for(f&&s>2&&(c=l(c,arguments[2],2)),t=0,n=v(u.length),o=Re(this,n);n>t;t++)o[t]=f?c(u[t],t):u[t];return o},Ne=function(){for(var e=0,t=arguments.length,n=Re(this,t);t>e;)n[e]=arguments[e++];return n},Le=!!W&&a(function(){ye.call(new W(1))}),ze=function(){return ye.apply(Le?ve.call(Pe(this)):Pe(this),arguments)},qe={copyWithin:function(e,t){return L.call(Pe(this),e,t,arguments.length>2?arguments[2]:void 0)},every:function(e){return ne(Pe(this),e,arguments.length>1?arguments[1]:void 0)},fill:function(e){return N.apply(Pe(this),arguments)},filter:function(e){return Ce(this,ee(Pe(this),e,arguments.length>1?arguments[1]:void 0))},find:function(e){return re(Pe(this),e,arguments.length>1?arguments[1]:void 0)},findIndex:function(e){return oe(Pe(this),e,arguments.length>1?arguments[1]:void 0)},forEach:function(e){K(Pe(this),e,arguments.length>1?arguments[1]:void 0)},indexOf:function(e){return ie(Pe(this),e,arguments.length>1?arguments[1]:void 0)},includes:function(e){return ae(Pe(this),e,arguments.length>1?arguments[1]:void 0)},join:function(e){return de.apply(Pe(this),arguments)},lastIndexOf:function(e){return ce.apply(Pe(this),arguments)},map:function(e){return Ie(Pe(this),e,arguments.length>1?arguments[1]:void 0)},reduce:function(e){return fe.apply(Pe(this),arguments)},reduceRight:function(e){return he.apply(Pe(this),arguments)},reverse:function(){for(var e,t=this,n=Pe(t).length,r=Math.floor(n/2),o=0;o<r;)e=t[o],t[o++]=t[--n],t[n]=e;return t},some:function(e){return te(Pe(this),e,arguments.length>1?arguments[1]:void 0)},sort:function(e){return pe.call(Pe(this),e)},subarray:function(e,t){var n=Pe(this),r=n.length,o=m(e,r);return new(R(n,n[Me]))(n.buffer,n.byteOffset+o*n.BYTES_PER_ELEMENT,v((void 0===t?r:m(t,r))-o))}},Ve=function(e,t){return Ce(this,ve.call(Pe(this),e,t))},Be=function(e){Pe(this);var t=De(arguments[1],1),n=this.length,r=w(e),o=v(r.length),a=0;if(o+t>n)throw Y(Ee);for(;a<o;)this[t+a]=r[a++]},Ye={entries:function(){return le.call(Pe(this))},keys:function(){return se.call(Pe(this))},values:function(){return ue.call(Pe(this))}},Ge=function(e,t){return M(e)&&e[xe]&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},We=function(e,t){return Ge(e,t=y(t,!0))?f(2,e[t]):B(e,t)},Ue=function(e,t,n){return!(Ge(e,t=y(t,!0))&&M(n)&&b(n,"value"))||b(n,"get")||b(n,"set")||n.configurable||b(n,"writable")&&!n.writable||b(n,"enumerable")&&!n.enumerable?V(e,t,n):(e[t]=n.value,e)};we||(q.f=We,z.f=Ue),i(i.S+i.F*!we,"Object",{getOwnPropertyDescriptor:We,defineProperty:Ue}),a(function(){me.call({})})&&(me=ye=function(){return de.call(this)});var Xe=d({},qe);d(Xe,Ye),h(Xe,be,Ye.values),d(Xe,{slice:Ve,set:Be,constructor:function(){},toString:me,toLocaleString:ze}),Te(Xe,"buffer","b"),Te(Xe,"byteOffset","o"),Te(Xe,"byteLength","l"),Te(Xe,"length","e"),V(Xe,ge,{get:function(){return this[xe]}}),e.exports=function(e,t,n,s){s=!!s;var l=e+(s?"Clamped":"")+"Array",f="Uint8Array"!=l,d="get"+e,p="set"+e,m=o[l],y=m||{},b=m&&E(m),g=!m||!u.ABV,w={},x=m&&m[$],F=function(e,n){var r=e._d;return r.v[d](n*t+r.o,Fe)},k=function(e,n,r){var o=e._d;s&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),o.v[p](n*t+o.o,r,Fe)},O=function(e,t){V(e,t,{get:function(){return F(this,t)},set:function(e){return k(this,t,e)},enumerable:!0})};g?(m=n(function(e,n,r,o){c(e,m,l,"_d");var a,i,u,s,f=0,d=0;if(M(n)){if(!(n instanceof Q||(s=_(n))==U||s==X))return xe in n?Ae(m,n):je.call(m,n);a=n,d=De(r,t);var p=n.byteLength;if(void 0===o){if(p%t)throw Y(Ee);if(i=p-d,i<0)throw Y(Ee)}else if(i=v(o)*t,i+d>p)throw Y(Ee);u=i/t}else u=Oe(n,!0),i=u*t,a=new Q(i);for(h(e,"_d",{b:a,o:d,l:i,e:u,v:new J(a)});f<u;)O(e,f++)}),x=m[$]=S(Xe),h(x,"constructor",m)):T(function(e){new m(null),new m(e)},!0)||(m=n(function(e,n,r,o){c(e,m,l);var a;return M(n)?n instanceof Q||(a=_(n))==U||a==X?void 0!==o?new y(n,De(r,t),o):void 0!==r?new y(n,De(r,t)):new y(n):xe in n?Ae(m,n):je.call(m,n):new y(Oe(n,f))}),K(b!==Function.prototype?I(y).concat(I(b)):I(y),function(e){e in m||h(m,e,y[e])}),m[$]=x,r||(x.constructor=m));var D=x[be],P=!!D&&("values"==D.name||void 0==D.name),R=Ye.values;h(m,_e,!0),h(x,xe,l),h(x,Se,!0),h(x,Me,m),(s?new m(1)[ge]==l:ge in x)||V(x,ge,{get:function(){return l}}),w[l]=m,i(i.G+i.W+i.F*(m!=y),w),i(i.S,l,{BYTES_PER_ELEMENT:t,from:je,of:Ne}),Z in x||h(x,Z,t),i(i.P,l,qe),j(l),i(i.P+i.F*ke,l,{set:Be}),i(i.P+i.F*!P,l,Ye),i(i.P+i.F*(x.toString!=me),l,{toString:me}),i(i.P+i.F*a(function(){new m(1).slice()}),l,{slice:Ve}),i(i.P+i.F*(a(function(){return[1,2].toLocaleString()!=new m([1,2]).toLocaleString()})||!a(function(){x.toLocaleString.call([1,2])})),l,{toLocaleString:ze}),A[l]=P?D:R,r||P||h(x,be,R)}}else e.exports=function(){}},function(e,t,n){var r=n(40)("meta"),o=n(5),a=n(11),i=n(8).f,u=0,s=Object.isExtensible||function(){return!0},l=!n(4)(function(){return s(Object.preventExtensions({}))}),c=function(e){i(e,r,{value:{i:"O"+ ++u,w:{}}})},f=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!s(e))return"F";if(!t)return"E";c(e)}return e[r].i},h=function(e,t){if(!a(e,r)){if(!s(e))return!0;if(!t)return!1;c(e)}return e[r].w},d=function(e){return l&&p.NEED&&s(e)&&!a(e,r)&&c(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:h,onFreeze:d}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t){e.exports=!1},function(e,t,n){var r=n(2),o=n(109),a=n(67),i=n(79)("IE_PROTO"),u=function(){},s="prototype",l=function(){var e,t=n(66)("iframe"),r=a.length,o="<",i=">";for(t.style.display="none",n(69).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+i+"document.F=Object"+o+"/script"+i),e.close(),l=e.F;r--;)delete l[s][a[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(u[s]=r(e),n=new u,u[s]=null,n[i]=e):n=l(),void 0===t?n:o(n,t)}},function(e,t,n){var r=n(111),o=n(67).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,o)}},[351,111,67],function(e,t,n){var r=n(14);e.exports=function(e,t,n){for(var o in t)r(e,o,t[o],n);return e}},function(e,t,n){"use strict";var r=n(3),o=n(8),a=n(7),i=n(6)("species");e.exports=function(e){var t=r[e];a&&t&&!t[i]&&o.f(t,i,{configurable:!0,get:function(){return this}})}},[354,31],function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(6)("unscopables"),o=Array.prototype;void 0==o[r]&&n(13)(o,r,{}),e.exports=function(e){o[r][e]=!0}},function(e,t,n){var r=n(26),o=n(105),a=n(71),i=n(2),u=n(9),s=n(88),l={},c={},t=e.exports=function(e,t,n,f,h){var d,p,v,m,y=h?function(){return e}:s(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(a(y)){for(d=u(e.length);d>g;g++)if(m=t?b(i(p=e[g])[0],p[1]):b(e[g]),m===l||m===c)return m}else for(v=y.call(e);!(p=v.next()).done;)if(m=o(v,b,p.value,t),m===l||m===c)return m};t.BREAK=l,t.RETURN=c},function(e,t){e.exports={}},function(e,t,n){var r=n(8).f,o=n(11),a=n(6)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){var r=n(1),o=n(20),a=n(4),i=n(84),u="["+i+"]",s="​",l=RegExp("^"+u+u+"*"),c=RegExp(u+u+"*$"),f=function(e,t,n){var o={},u=a(function(){return!!i[e]()||s[e]()!=s}),l=o[e]=u?t(h):i[e];n&&(o[n]=l),r(r.P+r.F*u,"String",o)},h=f.trim=function(e,t){return e=String(o(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(c,"")),e};e.exports=f},function(e,t,n){var r=n(19),o=n(6)("toStringTag"),a="Arguments"==r(function(){return arguments}()),i=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,u;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=i(t=Object(e),o))?n:a?r(t):"Object"==(u=r(t))&&"function"==typeof t.callee?"Arguments":u}},[347,19],function(e,t){t.f={}.propertyIsEnumerable},[341,16,9,39],function(e,t,n){"use strict";var r=n(3),o=n(1),a=n(14),i=n(37),u=n(29),s=n(42),l=n(32),c=n(5),f=n(4),h=n(55),d=n(44),p=n(70);e.exports=function(e,t,n,v,m,y){var b=r[e],g=b,_=m?"set":"add",M=g&&g.prototype,w={},x=function(e){var t=M[e];a(M,e,"delete"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"has"==e?function(e){return!(y&&!c(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return y&&!c(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof g&&(y||M.forEach&&!f(function(){(new g).entries().next()}))){var S=new g,E=S[_](y?{}:-0,1)!=S,I=f(function(){S.has(1)}),F=h(function(e){new g(e)}),k=!y&&f(function(){for(var e=new g,t=5;t--;)e[_](t,t);return!e.has(-0)});F||(g=t(function(t,n){l(t,g,e);var r=p(new b,t,g);return void 0!=n&&s(n,m,r[_],r),r}),g.prototype=M,M.constructor=g),(I||k)&&(x("delete"),x("has"),m&&x("get")),(k||E)&&x(_),y&&M.clear&&delete M.clear}else g=v.getConstructor(t,e,m,_),i(g.prototype,n),u.NEED=!0;return d(g,e),w[e]=g,o(o.G+o.W+o.F*(g!=b),w),y||v.setStrong(g,e,m),g}},function(e,t,n){"use strict";var r=n(13),o=n(14),a=n(4),i=n(20),u=n(6);e.exports=function(e,t,n){var s=u(e),l=n(i,s,""[e]),c=l[0],f=l[1];a(function(){var t={};return t[s]=function(){return 7},7!=""[e](t)})&&(o(String.prototype,e,c),r(RegExp.prototype,s,2==t?function(e,t){return f.call(e,this,t)}:function(e){return f.call(e,this)}))}},function(e,t,n){"use strict";var r=n(2);e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(5),o=n(19),a=n(6)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},function(e,t,n){var r=n(6)("iterator"),o=!1;try{var a=[7][r]();a.return=function(){o=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!o)return!1;var n=!1;try{var a=[7],i=a[r]();i.next=function(){return{done:n=!0}},a[r]=function(){return i},e(a)}catch(e){}return n}},function(e,t,n){e.exports=n(33)||!n(4)(function(){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete n(3)[e]})},function(e,t){t.f=Object.getOwnPropertySymbols},[353,3],function(e,t,n){for(var r,o=n(3),a=n(13),i=n(40),u=i("typed_array"),s=i("view"),l=!(!o.ArrayBuffer||!o.DataView),c=l,f=0,h=9,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");f<h;)(r=o[d[f++]])?(a(r.prototype,u,!0),a(r.prototype,s,!0)):c=!1;e.exports={ABV:l,CONSTR:c,TYPED:u,VIEW:s}},[343,61],4,3,5,function(e,t,n){"use strict";var r=n(10),o=n(39),a=n(9);e.exports=function(e){for(var t=r(this),n=a(t.length),i=arguments.length,u=o(i>1?arguments[1]:void 0,n),s=i>2?arguments[2]:void 0,l=void 0===s?n:o(s,n);l>u;)t[u++]=e;return t}},function(e,t,n){"use strict";var r=n(8),o=n(30);e.exports=function(e,t,n){t in e?r.f(e,t,o(0,n)):e[t]=n}},[344,5,3],function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(6)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,!"/./"[e](t)}catch(e){}}return!0}},function(e,t,n){e.exports=n(3).document&&document.documentElement},function(e,t,n){var r=n(5),o=n(78).set;e.exports=function(e,t,n){var a,i=t.constructor;return i!==n&&"function"==typeof i&&(a=i.prototype)!==n.prototype&&r(a)&&o&&o(e,a),e}},function(e,t,n){var r=n(43),o=n(6)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[o]===e)}},function(e,t,n){var r=n(19);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){"use strict";var r=n(34),o=n(30),a=n(44),i={};n(13)(i,n(6)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(i,{next:o(1,n)}),a(e,t+" Iterator")}},function(e,t,n){"use strict";var r=n(33),o=n(1),a=n(14),i=n(13),u=n(11),s=n(43),l=n(73),c=n(44),f=n(18),h=n(6)("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",v="keys",m="values",y=function(){return this};e.exports=function(e,t,n,b,g,_,M){l(n,t,b);var w,x,S,E=function(e){if(!d&&e in O)return O[e];switch(e){case v:return function(){return new n(this,e)};case m:return function(){return new n(this,e)}}return function(){return new n(this,e)}},I=t+" Iterator",F=g==m,k=!1,O=e.prototype,D=O[h]||O[p]||g&&O[g],P=D||E(g),R=g?F?E("entries"):P:void 0,C="Array"==t?O.entries||D:D;if(C&&(S=f(C.call(new e)),S!==Object.prototype&&(c(S,I,!0),r||u(S,h)||i(S,h,y))),F&&D&&D.name!==m&&(k=!0,P=function(){return D.call(this)}),r&&!M||!d&&!k&&O[h]||i(O,h,P),s[t]=P,s[I]=y,g)if(w={values:F?P:E(m),keys:_?P:E(v),entries:R},M)for(x in w)x in O||a(O,x,w[x]);else o(o.P+o.F*(d||k),t,w);return w}},function(e,t){var n=Math.expm1;e.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:Math.exp(e)-1}:n},function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},function(e,t,n){var r=n(3),o=n(85).set,a=r.MutationObserver||r.WebKitMutationObserver,i=r.process,u=r.Promise,s="process"==n(19)(i);e.exports=function(){var e,t,n,l=function(){var r,o;for(s&&(r=i.domain)&&r.exit();e;){o=e.fn,e=e.next;try{o()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(s)n=function(){i.nextTick(l)};else if(a){var c=!0,f=document.createTextNode("");new a(l).observe(f,{characterData:!0}),n=function(){f.data=c=!c}}else if(u&&u.resolve){var h=u.resolve();n=function(){h.then(l)}}else n=function(){o.call(r,l)};return function(r){var o={fn:r,next:void 0};t&&(t.next=o),e||(e=o,n()),t=o}}},function(e,t,n){var r=n(5),o=n(2),a=function(e,t){if(o(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(26)(Function.call,n(17).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},[352,58,40],function(e,t,n){var r=n(2),o=n(12),a=n(6)("species");e.exports=function(e,t){var n,i=r(e).constructor;return void 0===i||void 0==(n=r(i)[a])?t:o(n)}},function(e,t,n){var r=n(31),o=n(20);e.exports=function(e){return function(t,n){var a,i,u=String(o(t)),s=r(n),l=u.length;return s<0||s>=l?e?"":void 0:(a=u.charCodeAt(s),a<55296||a>56319||s+1===l||(i=u.charCodeAt(s+1))<56320||i>57343?e?u.charAt(s):a:e?u.slice(s,s+2):(a-55296<<10)+(i-56320)+65536)}}},function(e,t,n){var r=n(54),o=n(20);e.exports=function(e,t,n){if(r(t))throw TypeError("String#"+n+" doesn't accept regex!");return String(o(e))}},function(e,t,n){"use strict";var r=n(31),o=n(20);e.exports=function(e){var t=String(o(this)),n="",a=r(e);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(n+=t);return n}},function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(e,t,n){var r,o,a,i=n(26),u=n(53),s=n(69),l=n(66),c=n(3),f=c.process,h=c.setImmediate,d=c.clearImmediate,p=c.MessageChannel,v=0,m={},y="onreadystatechange",b=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},g=function(e){b.call(e.data)};h&&d||(h=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){u("function"==typeof e?e:Function(e),t)},r(v),v},d=function(e){delete m[e]},"process"==n(19)(f)?r=function(e){f.nextTick(i(b,e,1))}:p?(o=new p,a=o.port2,o.port1.onmessage=g,r=i(a.postMessage,a,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts?(r=function(e){c.postMessage(e+"","*")},c.addEventListener("message",g,!1)):r=y in l("script")?function(e){s.appendChild(l("script"))[y]=function(){s.removeChild(this),b.call(e)}}:function(e){setTimeout(i(b,e,1),0)}),e.exports={set:h,clear:d}},function(e,t,n){"use strict";var r=n(3),o=n(7),a=n(33),i=n(59),u=n(13),s=n(37),l=n(4),c=n(32),f=n(31),h=n(9),d=n(35).f,p=n(8).f,v=n(64),m=n(44),y="ArrayBuffer",b="DataView",g="prototype",_="Wrong length!",M="Wrong index!",w=r[y],x=r[b],S=r.Math,E=r.RangeError,I=r.Infinity,F=w,k=S.abs,O=S.pow,D=S.floor,P=S.log,R=S.LN2,C="buffer",A="byteLength",T="byteOffset",j=o?"_b":C,N=o?"_l":A,L=o?"_o":T,z=function(e,t,n){var r,o,a,i=Array(n),u=8*n-t-1,s=(1<<u)-1,l=s>>1,c=23===t?O(2,-24)-O(2,-77):0,f=0,h=e<0||0===e&&1/e<0?1:0;for(e=k(e),e!=e||e===I?(o=e!=e?1:0,r=s):(r=D(P(e)/R),e*(a=O(2,-r))<1&&(r--,a*=2),e+=r+l>=1?c/a:c*O(2,1-l),e*a>=2&&(r++,a/=2),r+l>=s?(o=0,r=s):r+l>=1?(o=(e*a-1)*O(2,t),r+=l):(o=e*O(2,l-1)*O(2,t),r=0));t>=8;i[f++]=255&o,o/=256,t-=8);for(r=r<<t|o,u+=t;u>0;i[f++]=255&r,r/=256,u-=8);return i[--f]|=128*h,i},q=function(e,t,n){var r,o=8*n-t-1,a=(1<<o)-1,i=a>>1,u=o-7,s=n-1,l=e[s--],c=127&l;for(l>>=7;u>0;c=256*c+e[s],s--,u-=8);for(r=c&(1<<-u)-1,c>>=-u,u+=t;u>0;r=256*r+e[s],s--,u-=8);if(0===c)c=1-i;else{if(c===a)return r?NaN:l?-I:I;r+=O(2,t),c-=i}return(l?-1:1)*r*O(2,c-t)},V=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},B=function(e){return[255&e]},Y=function(e){return[255&e,e>>8&255]},G=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},W=function(e){return z(e,52,8)},U=function(e){return z(e,23,4)},X=function(e,t,n){p(e[g],t,{get:function(){return this[n]}})},Z=function(e,t,n,r){var o=+n,a=f(o);if(o!=a||a<0||a+t>e[N])throw E(M);var i=e[j]._b,u=a+e[L],s=i.slice(u,u+t);return r?s:s.reverse()},$=function(e,t,n,r,o,a){var i=+n,u=f(i);if(i!=u||u<0||u+t>e[N])throw E(M);for(var s=e[j]._b,l=u+e[L],c=r(+o),h=0;h<t;h++)s[l+h]=c[a?h:t-h-1]},H=function(e,t){c(e,w,y);var n=+t,r=h(n);if(n!=r)throw E(_);return r};if(i.ABV){if(!l(function(){new w})||!l(function(){new w(.5)})){w=function(e){return new F(H(this,e))};for(var Q,J=w[g]=F[g],K=d(F),ee=0;K.length>ee;)(Q=K[ee++])in w||u(w,Q,F[Q]);a||(J.constructor=w)}var te=new x(new w(2)),ne=x[g].setInt8;te.setInt8(0,2147483648),te.setInt8(1,2147483649),!te.getInt8(0)&&te.getInt8(1)||s(x[g],{setInt8:function(e,t){ne.call(this,e,t<<24>>24)},setUint8:function(e,t){ne.call(this,e,t<<24>>24)}},!0)}else w=function(e){var t=H(this,e);this._b=v.call(Array(t),0),this[N]=t},x=function(e,t,n){c(this,x,b),c(e,w,b);var r=e[N],o=f(t);if(o<0||o>r)throw E("Wrong offset!");if(n=void 0===n?r-o:h(n),o+n>r)throw E(_);this[j]=e,this[L]=o,this[N]=n},o&&(X(w,A,"_l"),X(x,C,"_b"),X(x,A,"_l"),X(x,T,"_o")),s(x[g],{getInt8:function(e){return Z(this,1,e)[0]<<24>>24},getUint8:function(e){return Z(this,1,e)[0]},getInt16:function(e){var t=Z(this,2,e,arguments[1]);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Z(this,2,e,arguments[1]);return t[1]<<8|t[0]},getInt32:function(e){return V(Z(this,4,e,arguments[1]))},getUint32:function(e){return V(Z(this,4,e,arguments[1]))>>>0},getFloat32:function(e){return q(Z(this,4,e,arguments[1]),23,4)},getFloat64:function(e){return q(Z(this,8,e,arguments[1]),52,8)},setInt8:function(e,t){$(this,1,e,B,t)},setUint8:function(e,t){$(this,1,e,B,t)},setInt16:function(e,t){$(this,2,e,Y,t,arguments[2])},setUint16:function(e,t){$(this,2,e,Y,t,arguments[2])},setInt32:function(e,t){$(this,4,e,G,t,arguments[2])},setUint32:function(e,t){$(this,4,e,G,t,arguments[2])},setFloat32:function(e,t){$(this,4,e,U,t,arguments[2])},setFloat64:function(e,t){$(this,8,e,W,t,arguments[2])}});m(w,y),m(x,b),u(x[g],i.VIEW,!0),t[y]=w,t[b]=x},function(e,t,n){var r=n(3),o=n(25),a=n(33),i=n(118),u=n(8).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||u(t,e,{value:i.f(e)})}},function(e,t,n){var r=n(46),o=n(6)("iterator"),a=n(43);e.exports=n(25).getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[r(e)]}},function(e,t,n){"use strict";var r=n(41),o=n(106),a=n(43),i=n(16);e.exports=n(74)(Array,"Array",function(e,t){this._t=i(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,n):"values"==t?o(0,e[n]):o(0,[n,e[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},25,20,[347,132],31,[355,92,91],function(e,t,n){var r=n(19);e.exports=function(e,t){if("number"!=typeof e&&"Number"!=r(e))throw TypeError(t);return+e}},function(e,t,n){"use strict";var r=n(10),o=n(39),a=n(9);e.exports=[].copyWithin||function(e,t){var n=r(this),i=a(n.length),u=o(e,i),s=o(t,i),l=arguments.length>2?arguments[2]:void 0,c=Math.min((void 0===l?i:o(l,i))-s,i-u),f=1;for(s<u&&u<s+c&&(f=-1,s+=c-1,u+=c-1);c-- >0;)s in n?n[u]=n[s]:delete n[u],u+=f,s+=f;return n}},function(e,t,n){var r=n(42);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){var r=n(12),o=n(10),a=n(47),i=n(9);e.exports=function(e,t,n,u,s){r(t);var l=o(e),c=a(l),f=i(l.length),h=s?f-1:0,d=s?-1:1;if(n<2)for(;;){if(h in c){u=c[h],h+=d;break}if(h+=d,s?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;s?h>=0:f>h;h+=d)h in c&&(u=t(u,c[h],h,l));return u}},function(e,t,n){"use strict";var r=n(12),o=n(5),a=n(53),i=[].slice,u={},s=function(e,t,n){if(!(t in u)){for(var r=[],o=0;o<t;o++)r[o]="a["+o+"]";u[t]=Function("F,a","return new F("+r.join(",")+")")}return u[t](e,n)};e.exports=Function.bind||function(e){var t=r(this),n=i.call(arguments,1),u=function(){var r=n.concat(i.call(arguments));return this instanceof u?s(t,r.length,r):a(t,r,e)};return o(t.prototype)&&(u.prototype=t.prototype),u}},function(e,t,n){"use strict";var r=n(8).f,o=n(34),a=n(37),i=n(26),u=n(32),s=n(20),l=n(42),c=n(74),f=n(106),h=n(38),d=n(7),p=n(29).fastKey,v=d?"_s":"size",m=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var f=e(function(e,r){u(e,f,t,"_i"),e._i=o(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&l(r,n,e[c],e)});return a(f.prototype,{clear:function(){for(var e=this,t=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var t=this,n=m(t,e);if(n){var r=n.n,o=n.p;delete t._i[n.i],n.r=!0,o&&(o.n=r),r&&(r.p=o),t._f==n&&(t._f=r),t._l==n&&(t._l=o),t[v]--}return!!n},forEach:function(e){u(this,f,"forEach");for(var t,n=i(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!m(this,e)}}),d&&r(f.prototype,"size",{get:function(){return s(this[v])}}),f},def:function(e,t,n){var r,o,a=m(e,t);return a?a.v=n:(e._l=a={i:o=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=a),r&&(r.n=a),e[v]++,"F"!==o&&(e._i[o]=a)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?f(0,n.k):"values"==t?f(0,n.v):f(0,[n.k,n.v]):(e._t=void 0,f(1))},n?"entries":"values",!n,!0),h(t)}}},function(e,t,n){var r=n(46),o=n(97);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},function(e,t,n){"use strict";var r=n(37),o=n(29).getWeak,a=n(2),i=n(5),u=n(32),s=n(42),l=n(22),c=n(11),f=l(5),h=l(6),d=0,p=function(e){return e._l||(e._l=new v)},v=function(){this.a=[]},m=function(e,t){return f(e.a,function(e){return e[0]===t})};v.prototype={get:function(e){var t=m(this,e);if(t)return t[1]},has:function(e){return!!m(this,e)},set:function(e,t){var n=m(this,e);n?n[1]=t:this.a.push([e,t])},delete:function(e){var t=h(this.a,function(t){return t[0]===e});return~t&&this.a.splice(t,1),!!~t}},e.exports={getConstructor:function(e,t,n,a){var l=e(function(e,r){u(e,l,t,"_i"),e._i=d++,e._l=void 0,void 0!=r&&s(r,n,e[a],e)});return r(l.prototype,{delete:function(e){if(!i(e))return!1;var t=o(e);return t===!0?p(this).delete(e):t&&c(t,this._i)&&delete t[this._i]},has:function(e){if(!i(e))return!1;var t=o(e);return t===!0?p(this).has(e):t&&c(t,this._i)}}),l},def:function(e,t,n){var r=o(a(t),!0);return r===!0?p(e).set(t,n):r[e._i]=n,e},ufstore:p}},[346,7,4,66],function(e,t,n){var r=n(5),o=Math.floor;e.exports=function(e){return!r(e)&&isFinite(e)&&o(e)===e}},function(e,t,n){var r=n(2);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t){e.exports=Math.log1p||function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:Math.log(1+e)}},[348,36,57,48,10,47,4],function(e,t,n){var r=n(8),o=n(2),a=n(36);e.exports=n(7)?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),u=i.length,s=0;u>s;)r.f(e,n=i[s++],t[n]);return e}},function(e,t,n){var r=n(16),o=n(35).f,a={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(e){try{return o(e)}catch(e){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==a.call(e)?u(e):o(r(e))}},[350,11,16,49,79],function(e,t,n){var r=n(36),o=n(16),a=n(48).f;e.exports=function(e){return function(t){for(var n,i=o(t),u=r(i),s=u.length,l=0,c=[];s>l;)a.call(i,n=u[l++])&&c.push(e?[n,i[n]]:i[n]);
return c}}},function(e,t,n){var r=n(35),o=n(57),a=n(2),i=n(3).Reflect;e.exports=i&&i.ownKeys||function(e){var t=r.f(a(e)),n=o.f;return n?t.concat(n(e)):t}},function(e,t,n){var r=n(3).parseFloat,o=n(45).trim;e.exports=1/r(n(84)+"-0")!==-(1/0)?function(e){var t=o(String(e),3),n=r(t);return 0===n&&"-"==t.charAt(0)?-0:n}:r},function(e,t,n){var r=n(3).parseInt,o=n(45).trim,a=n(84),i=/^[\-+]?0[xX]/;e.exports=8!==r(a+"08")||22!==r(a+"0x16")?function(e,t){var n=o(String(e),3);return r(n,t>>>0||(i.test(n)?16:10))}:r},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},function(e,t,n){var r=n(9),o=n(83),a=n(20);e.exports=function(e,t,n,i){var u=String(a(e)),s=u.length,l=void 0===n?" ":String(n),c=r(t);if(c<=s||""==l)return u;var f=c-s,h=o.call(l,Math.ceil(f/l.length));return h.length>f&&(h=h.slice(0,f)),i?h+u:u+h}},function(e,t,n){t.f=n(6)},function(e,t,n){"use strict";var r=n(100);e.exports=n(50)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(this,e);return t&&t.v},set:function(e,t){return r.def(this,0===e?0:e,t)}},r,!0)},function(e,t,n){n(7)&&"g"!=/./g.flags&&n(8).f(RegExp.prototype,"flags",{configurable:!0,get:n(52)})},function(e,t,n){"use strict";var r=n(100);e.exports=n(50)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r,o=n(22)(0),a=n(14),i=n(29),u=n(108),s=n(102),l=n(5),c=i.getWeak,f=Object.isExtensible,h=s.ufstore,d={},p=function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},v={get:function(e){if(l(e)){var t=c(e);return t===!0?h(this).get(e):t?t[this._i]:void 0}},set:function(e,t){return s.def(this,e,t)}},m=e.exports=n(50)("WeakMap",p,v,s,!0,!0);7!=(new m).set((Object.freeze||Object)(d),7).get(d)&&(r=s.getConstructor(p),u(r.prototype,v),i.NEED=!0,o(["delete","has","get","set"],function(e){var t=m.prototype,n=t[e];a(t,e,function(t,o){if(l(t)&&!f(t)){this._f||(this._f=new r);var a=this._f[e](t,o);return"set"==e?this:a}return n.call(this,t,o)})}))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(126),a=r(o),i=n(124),u=r(i),s={},l=(0,u.default)();(0,a.default)(l||{},s),window.GrimoireJS.lib.preset_basic=s,t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(337),n(336),n(335),t.default=function(){}},function(e,t,n){(function(e){"use strict";function t(e,t,n){e[t]||Object[r](e,t,{writable:!0,configurable:!0,value:n})}if(n(334),n(339),n(127),e._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");e._babelPolyfill=!0;var r="defineProperty";t(String.prototype,"padLeft","".padStart),t(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(e){[][e]&&t(Array,e,Function.call.bind([][e]))})}).call(t,function(){return this}())},function(e,t,n){e.exports={default:n(128),__esModule:!0}},function(e,t,n){n(163),e.exports=n(25).RegExp.escape},function(e,t,n){n(154),e.exports=n(90).Object.assign},12,[340,63],[341,94,150,149],19,[342,129],[344,63,62],67,function(e,t,n){var r=n(62),o=n(90),a=n(133),i=n(138),u="prototype",s=function(e,t,n){var l,c,f,h=e&s.F,d=e&s.G,p=e&s.S,v=e&s.P,m=e&s.B,y=e&s.W,b=d?o:o[t]||(o[t]={}),g=b[u],_=d?r:p?r[t]:(r[t]||{})[u];d&&(n=t);for(l in n)c=!h&&_&&void 0!==_[l],c&&l in b||(f=c?_[l]:n[l],b[l]=d&&"function"!=typeof _[l]?n[l]:m&&c?a(f,r):y&&_[l]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t[u]=e[u],t}(f):v&&"function"==typeof f?a(Function.call,f):f,v&&((b.virtual||(b.virtual={}))[l]=f,e&s.R&&g&&!g[l]&&i(g,l,f)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},11,[345,141,146,60],[346,60,61,134],[348,144,142,145,151,92,61],[349,130,139,152,60],57,[350,137,94,131,147],[351,143,135],48,30,[352,148,153],[353,62],[354,93],[356,93],[357,91],[358,63],40,[359,136,140],function(e,t,n){var r=n(5),o=n(72),a=n(6)("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&(t=t[a],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,n){var r=n(155);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){"use strict";var r=n(2),o=n(24),a="number";e.exports=function(e){if("string"!==e&&e!==a&&"default"!==e)throw TypeError("Incorrect hint");return o(r(this),e!=a)}},function(e,t,n){var r=n(36),o=n(57),a=n(48);e.exports=function(e){var t=r(e),n=o.f;if(n)for(var i,u=n(e),s=a.f,l=0;u.length>l;)s.call(e,i=u[l++])&&t.push(i);return t}},function(e,t,n){var r=n(36),o=n(16);e.exports=function(e,t){for(var n,a=o(e),i=r(a),u=i.length,s=0;u>s;)if(a[n=i[s++]]===t)return n}},function(e,t,n){"use strict";var r=n(161),o=n(53),a=n(12);e.exports=function(){for(var e=a(this),t=arguments.length,n=Array(t),i=0,u=r._,s=!1;t>i;)(n[i]=arguments[i++])===u&&(s=!0);return function(){var r,a=this,i=arguments.length,l=0,c=0;if(!s&&!i)return o(e,n,a);if(r=n.slice(),s)for(;t>l;l++)r[l]===u&&(r[l]=arguments[c++]);for(;i>c;)r.push(arguments[c++]);return o(e,r,a)}}},function(e,t,n){e.exports=n(3)},function(e,t){e.exports=function(e,t){var n=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(t).replace(e,n)}}},function(e,t,n){var r=n(1),o=n(162)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(e){return o(e)}})},function(e,t,n){var r=n(1);r(r.P,"Array",{copyWithin:n(96)}),n(41)("copyWithin")},function(e,t,n){"use strict";var r=n(1),o=n(22)(4);r(r.P+r.F*!n(21)([].every,!0),"Array",{every:function(e){return o(this,e,arguments[1])}})},function(e,t,n){var r=n(1);r(r.P,"Array",{fill:n(64)}),n(41)("fill")},function(e,t,n){"use strict";var r=n(1),o=n(22)(2);r(r.P+r.F*!n(21)([].filter,!0),"Array",{filter:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),o=n(22)(6),a="findIndex",i=!0;a in[]&&Array(1)[a](function(){i=!1}),r(r.P+r.F*i,"Array",{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(41)(a)},function(e,t,n){"use strict";var r=n(1),o=n(22)(5),a="find",i=!0;a in[]&&Array(1)[a](function(){i=!1}),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(41)(a)},function(e,t,n){"use strict";var r=n(1),o=n(22)(0),a=n(21)([].forEach,!0);r(r.P+r.F*!a,"Array",{forEach:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(26),o=n(1),a=n(10),i=n(105),u=n(71),s=n(9),l=n(65),c=n(88);o(o.S+o.F*!n(55)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,f,h=a(e),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,m=void 0!==v,y=0,b=c(h);if(m&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==b||d==Array&&u(b))for(t=s(h.length),n=new d(t);t>y;y++)l(n,y,m?v(h[y],y):h[y]);else for(f=b.call(h),n=new d;!(o=f.next()).done;y++)l(n,y,m?i(f,v,[o.value,y],!0):o.value);return n.length=y,n}})},function(e,t,n){"use strict";var r=n(1),o=n(49)(!1),a=[].indexOf,i=!!a&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(i||!n(21)(a)),"Array",{indexOf:function(e){return i?a.apply(this,arguments)||0:o(this,e,arguments[1])}})},function(e,t,n){var r=n(1);r(r.S,"Array",{isArray:n(72)})},function(e,t,n){"use strict";var r=n(1),o=n(16),a=[].join;r(r.P+r.F*(n(47)!=Object||!n(21)(a)),"Array",{join:function(e){return a.call(o(this),void 0===e?",":e)}})},function(e,t,n){"use strict";var r=n(1),o=n(16),a=n(31),i=n(9),u=[].lastIndexOf,s=!!u&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(s||!n(21)(u)),"Array",{lastIndexOf:function(e){if(s)return u.apply(this,arguments)||0;var t=o(this),n=i(t.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,a(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},function(e,t,n){"use strict";var r=n(1),o=n(22)(1);r(r.P+r.F*!n(21)([].map,!0),"Array",{map:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),o=n(65);r(r.S+r.F*n(4)(function(){function e(){}return!(Array.of.call(e)instanceof e)}),"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)o(n,e,arguments[e++]);return n.length=t,n}})},function(e,t,n){"use strict";var r=n(1),o=n(98);r(r.P+r.F*!n(21)([].reduceRight,!0),"Array",{reduceRight:function(e){return o(this,e,arguments.length,arguments[1],!0)}})},function(e,t,n){"use strict";var r=n(1),o=n(98);r(r.P+r.F*!n(21)([].reduce,!0),"Array",{reduce:function(e){return o(this,e,arguments.length,arguments[1],!1)}})},function(e,t,n){"use strict";var r=n(1),o=n(69),a=n(19),i=n(39),u=n(9),s=[].slice;r(r.P+r.F*n(4)(function(){o&&s.call(o)}),"Array",{slice:function(e,t){var n=u(this.length),r=a(this);if(t=void 0===t?n:t,"Array"==r)return s.call(this,e,t);for(var o=i(e,n),l=i(t,n),c=u(l-o),f=Array(c),h=0;h<c;h++)f[h]="String"==r?this.charAt(o+h):this[o+h];return f}})},function(e,t,n){"use strict";var r=n(1),o=n(22)(3);r(r.P+r.F*!n(21)([].some,!0),"Array",{some:function(e){return o(this,e,arguments[1])}})},function(e,t,n){"use strict";var r=n(1),o=n(12),a=n(10),i=n(4),u=[].sort,s=[1,2,3];r(r.P+r.F*(i(function(){s.sort(void 0)})||!i(function(){s.sort(null)})||!n(21)(u)),"Array",{sort:function(e){return void 0===e?u.call(a(this)):u.call(a(this),o(e))}})},function(e,t,n){n(38)("Array")},function(e,t,n){var r=n(1);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(e,t,n){"use strict";var r=n(1),o=n(4),a=Date.prototype.getTime,i=function(e){return e>9?e:"0"+e};r(r.P+r.F*(o(function(){return"0385-07-25T07:06:39.999Z"!=new Date(-5e13-1).toISOString()})||!o(function(){new Date(NaN).toISOString()})),"Date",{toISOString:function(){if(!isFinite(a.call(this)))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),r=t<0?"-":t>9999?"+":"";return r+("00000"+Math.abs(t)).slice(r?-6:-4)+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"."+(n>99?n:"0"+i(n))+"Z"}})},function(e,t,n){"use strict";var r=n(1),o=n(10),a=n(24);r(r.P+r.F*n(4)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(e){var t=o(this),n=a(t);return"number"!=typeof n||isFinite(n)?t.toISOString():null}})},function(e,t,n){var r=n(6)("toPrimitive"),o=Date.prototype;r in o||n(13)(o,r,n(157))},function(e,t,n){var r=Date.prototype,o="Invalid Date",a="toString",i=r[a],u=r.getTime;new Date(NaN)+""!=o&&n(14)(r,a,function(){var e=u.call(this);return e===e?i.call(this):o})},function(e,t,n){var r=n(1);r(r.P,"Function",{bind:n(99)})},function(e,t,n){"use strict";var r=n(5),o=n(18),a=n(6)("hasInstance"),i=Function.prototype;a in i||n(8).f(i,a,{value:function(e){if("function"!=typeof this||!r(e))return!1;if(!r(this.prototype))return e instanceof this;for(;e=o(e);)if(this.prototype===e)return!0;return!1}})},function(e,t,n){var r=n(8).f,o=n(30),a=n(11),i=Function.prototype,u=/^\s*function ([^ (]*)/,s="name",l=Object.isExtensible||function(){return!0};s in i||n(7)&&r(i,s,{configurable:!0,get:function(){try{var e=this,t=(""+e).match(u)[1];return a(e,s)||!l(e)||r(e,s,o(5,t)),t}catch(e){return""}}})},function(e,t,n){var r=n(1),o=n(107),a=Math.sqrt,i=Math.acosh;r(r.S+r.F*!(i&&710==Math.floor(i(Number.MAX_VALUE))&&i(1/0)==1/0),"Math",{acosh:function(e){return(e=+e)<1?NaN:e>94906265.62425156?Math.log(e)+Math.LN2:o(e-1+a(e-1)*a(e+1))}})},function(e,t,n){function r(e){return isFinite(e=+e)&&0!=e?e<0?-r(-e):Math.log(e+Math.sqrt(e*e+1)):e}var o=n(1),a=Math.asinh;o(o.S+o.F*!(a&&1/a(0)>0),"Math",{asinh:r})},function(e,t,n){var r=n(1),o=Math.atanh;r(r.S+r.F*!(o&&1/o(-0)<0),"Math",{atanh:function(e){return 0==(e=+e)?e:Math.log((1+e)/(1-e))/2}})},function(e,t,n){var r=n(1),o=n(76);r(r.S,"Math",{cbrt:function(e){return o(e=+e)*Math.pow(Math.abs(e),1/3)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{clz32:function(e){return(e>>>=0)?31-Math.floor(Math.log(e+.5)*Math.LOG2E):32}})},function(e,t,n){var r=n(1),o=Math.exp;r(r.S,"Math",{cosh:function(e){return(o(e=+e)+o(-e))/2}})},function(e,t,n){var r=n(1),o=n(75);r(r.S+r.F*(o!=Math.expm1),"Math",{expm1:o})},function(e,t,n){var r=n(1),o=n(76),a=Math.pow,i=a(2,-52),u=a(2,-23),s=a(2,127)*(2-u),l=a(2,-126),c=function(e){return e+1/i-1/i};r(r.S,"Math",{fround:function(e){var t,n,r=Math.abs(e),a=o(e);return r<l?a*c(r/l/u)*l*u:(t=(1+u/i)*r,n=t-(t-r),n>s||n!=n?a*(1/0):a*n)}})},function(e,t,n){var r=n(1),o=Math.abs;r(r.S,"Math",{hypot:function(e,t){for(var n,r,a=0,i=0,u=arguments.length,s=0;i<u;)n=o(arguments[i++]),s<n?(r=s/n,a=a*r*r+1,s=n):n>0?(r=n/s,a+=r*r):a+=n;return s===1/0?1/0:s*Math.sqrt(a)}})},function(e,t,n){var r=n(1),o=Math.imul;r(r.S+r.F*n(4)(function(){return o(4294967295,5)!=-5||2!=o.length}),"Math",{imul:function(e,t){var n=65535,r=+e,o=+t,a=n&r,i=n&o;return 0|a*i+((n&r>>>16)*i+a*(n&o>>>16)<<16>>>0)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{log10:function(e){return Math.log(e)/Math.LN10}})},function(e,t,n){var r=n(1);r(r.S,"Math",{log1p:n(107)})},function(e,t,n){var r=n(1);r(r.S,"Math",{log2:function(e){return Math.log(e)/Math.LN2}})},function(e,t,n){var r=n(1);r(r.S,"Math",{sign:n(76)})},function(e,t,n){var r=n(1),o=n(75),a=Math.exp;r(r.S+r.F*n(4)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(e){return Math.abs(e=+e)<1?(o(e)-o(-e))/2:(a(e-1)-a(-e-1))*(Math.E/2)}})},function(e,t,n){var r=n(1),o=n(75),a=Math.exp;r(r.S,"Math",{tanh:function(e){var t=o(e=+e),n=o(-e);return t==1/0?1:n==1/0?-1:(t-n)/(a(e)+a(-e))}})},function(e,t,n){var r=n(1);r(r.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},function(e,t,n){"use strict";var r=n(3),o=n(11),a=n(19),i=n(70),u=n(24),s=n(4),l=n(35).f,c=n(17).f,f=n(8).f,h=n(45).trim,d="Number",p=r[d],v=p,m=p.prototype,y=a(n(34)(m))==d,b="trim"in String.prototype,g=function(e){var t=u(e,!1);if("string"==typeof t&&t.length>2){t=b?t.trim():h(t,3);var n,r,o,a=t.charCodeAt(0);if(43===a||45===a){if(n=t.charCodeAt(2),88===n||120===n)return NaN}else if(48===a){switch(t.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+t}for(var i,s=t.slice(2),l=0,c=s.length;l<c;l++)if(i=s.charCodeAt(l),i<48||i>o)return NaN;return parseInt(s,r)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof p&&(y?s(function(){m.valueOf.call(n)}):a(n)!=d)?i(new v(g(t)),n,p):g(t)};for(var _,M=n(7)?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;M.length>w;w++)o(v,_=M[w])&&!o(p,_)&&f(p,_,c(v,_));p.prototype=m,m.constructor=p,n(14)(r,d,p)}},function(e,t,n){var r=n(1);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(e,t,n){var r=n(1),o=n(3).isFinite;r(r.S,"Number",{isFinite:function(e){return"number"==typeof e&&o(e)}})},function(e,t,n){var r=n(1);r(r.S,"Number",{isInteger:n(104)})},function(e,t,n){var r=n(1);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){var r=n(1),o=n(104),a=Math.abs;r(r.S,"Number",{isSafeInteger:function(e){return o(e)&&a(e)<=9007199254740991}})},function(e,t,n){var r=n(1);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t,n){var r=n(1);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){var r=n(1),o=n(114);r(r.S+r.F*(Number.parseFloat!=o),"Number",{parseFloat:o})},function(e,t,n){var r=n(1),o=n(115);r(r.S+r.F*(Number.parseInt!=o),"Number",{parseInt:o})},function(e,t,n){"use strict";var r=n(1),o=n(31),a=n(95),i=n(83),u=1..toFixed,s=Math.floor,l=[0,0,0,0,0,0],c="Number.toFixed: incorrect invocation!",f="0",h=function(e,t){for(var n=-1,r=t;++n<6;)r+=e*l[n],l[n]=r%1e7,r=s(r/1e7)},d=function(e){for(var t=6,n=0;--t>=0;)n+=l[t],l[t]=s(n/e),n=n%e*1e7},p=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==l[e]){var n=String(l[e]);t=""===t?n:t+i.call(f,7-n.length)+n}return t},v=function(e,t,n){return 0===t?n:t%2===1?v(e,t-1,n*e):v(e*e,t/2,n)},m=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t};r(r.P+r.F*(!!u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(4)(function(){u.call({})})),"Number",{toFixed:function(e){var t,n,r,u,s=a(this,c),l=o(e),y="",b=f;if(l<0||l>20)throw RangeError(c);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(y="-",s=-s),s>1e-21)if(t=m(s*v(2,69,1))-69,n=t<0?s*v(2,-t,1):s/v(2,t,1),n*=4503599627370496,t=52-t,t>0){for(h(0,n),r=l;r>=7;)h(1e7,0),r-=7;for(h(v(10,r,1),0),r=t-1;r>=23;)d(1<<23),r-=23;d(1<<r),h(1,1),d(2),b=p()}else h(0,n),h(1<<-t,0),b=p()+i.call(f,l);return l>0?(u=b.length,b=y+(u<=l?"0."+i.call(f,l-u)+b:b.slice(0,u-l)+"."+b.slice(u-l))):b=y+b,b}})},function(e,t,n){"use strict";var r=n(1),o=n(4),a=n(95),i=1..toPrecision;r(r.P+r.F*(o(function(){return"1"!==i.call(1,void 0)})||!o(function(){i.call({})})),"Number",{toPrecision:function(e){var t=a(this,"Number#toPrecision: incorrect invocation!");return void 0===e?i.call(t):i.call(t,e)}})},[359,1,108],function(e,t,n){var r=n(1);r(r.S,"Object",{create:n(34)})},function(e,t,n){var r=n(1);r(r.S+r.F*!n(7),"Object",{defineProperties:n(109)})},function(e,t,n){var r=n(1);r(r.S+r.F*!n(7),"Object",{defineProperty:n(8).f})},function(e,t,n){var r=n(5),o=n(29).onFreeze;n(23)("freeze",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(16),o=n(17).f;n(23)("getOwnPropertyDescriptor",function(){return function(e,t){return o(r(e),t)}})},function(e,t,n){n(23)("getOwnPropertyNames",function(){return n(110).f})},function(e,t,n){var r=n(10),o=n(18);n(23)("getPrototypeOf",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(5);n(23)("isExtensible",function(e){return function(t){return!!r(t)&&(!e||e(t))}})},function(e,t,n){var r=n(5);n(23)("isFrozen",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(5);n(23)("isSealed",function(e){return function(t){return!r(t)||!!e&&e(t)}})},function(e,t,n){var r=n(1);r(r.S,"Object",{is:n(116)})},function(e,t,n){var r=n(10),o=n(36);n(23)("keys",function(){return function(e){return o(r(e))}})},function(e,t,n){var r=n(5),o=n(29).onFreeze;n(23)("preventExtensions",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(5),o=n(29).onFreeze;n(23)("seal",function(e){return function(t){return e&&r(t)?e(o(t)):t}})},function(e,t,n){var r=n(1);r(r.S,"Object",{setPrototypeOf:n(78).set})},function(e,t,n){"use strict";var r=n(46),o={};o[n(6)("toStringTag")]="z",o+""!="[object z]"&&n(14)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(e,t,n){var r=n(1),o=n(114);r(r.G+r.F*(parseFloat!=o),{parseFloat:o})},function(e,t,n){var r=n(1),o=n(115);r(r.G+r.F*(parseInt!=o),{parseInt:o})},function(e,t,n){"use strict";var r,o,a,i=n(33),u=n(3),s=n(26),l=n(46),c=n(1),f=n(5),h=n(12),d=n(32),p=n(42),v=n(80),m=n(85).set,y=n(77)(),b="Promise",g=u.TypeError,_=u.process,M=u[b],_=u.process,w="process"==l(_),x=function(){},S=!!function(){try{var e=M.resolve(1),t=(e.constructor={})[n(6)("species")]=function(e){e(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),E=function(e,t){return e===t||e===M&&t===a},I=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},F=function(e){return E(M,e)?new k(e):new o(e)},k=o=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw g("Bad Promise constructor");t=e,n=r}),this.resolve=h(t),this.reject=h(n)},O=function(e){try{e()}catch(e){return{error:e}}},D=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,o=1==e._s,a=0,i=function(t){var n,a,i=o?t.ok:t.fail,u=t.resolve,s=t.reject,l=t.domain;try{i?(o||(2==e._h&&C(e),e._h=1),i===!0?n=r:(l&&l.enter(),n=i(r),l&&l.exit()),n===t.promise?s(g("Promise-chain cycle")):(a=I(n))?a.call(n,u,s):u(n)):s(r)}catch(e){s(e)}};n.length>a;)i(n[a++]);e._c=[],e._n=!1,t&&!e._h&&P(e)})}},P=function(e){m.call(u,function(){var t,n,r,o=e._v;if(R(e)&&(t=O(function(){w?_.emit("unhandledRejection",o,e):(n=u.onunhandledrejection)?n({promise:e,reason:o}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",o)}),e._h=w||R(e)?2:1),e._a=void 0,t)throw t.error})},R=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!R(t.promise))return!1;return!0},C=function(e){m.call(u,function(){var t;w?_.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),D(t,!0))},T=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw g("Promise can't be resolved itself");(t=I(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,s(T,r,1),s(A,r,1))}catch(e){A.call(r,e)}}):(n._v=e,n._s=1,D(n,!1))}catch(e){A.call({_w:n,_d:!1},e)}}};S||(M=function(e){d(this,M,b,"_h"),h(e),r.call(this);try{e(s(T,this,1),s(A,this,1))}catch(e){A.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(37)(M.prototype,{then:function(e,t){var n=F(v(this,M));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=w?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),k=function(){var e=new r;this.promise=e,this.resolve=s(T,e,1),this.reject=s(A,e,1)}),c(c.G+c.W+c.F*!S,{Promise:M}),n(44)(M,b),n(38)(b),a=n(25)[b],c(c.S+c.F*!S,b,{reject:function(e){var t=F(this),n=t.reject;return n(e),t.promise}}),c(c.S+c.F*(i||!S),b,{resolve:function(e){if(e instanceof M&&E(e.constructor,this))return e;var t=F(this),n=t.resolve;return n(e),t.promise}}),c(c.S+c.F*!(S&&n(55)(function(e){M.all(e).catch(x)})),b,{all:function(e){var t=this,n=F(t),r=n.resolve,o=n.reject,a=O(function(){var n=[],a=0,i=1;p(e,!1,function(e){var u=a++,s=!1;n.push(void 0),i++,t.resolve(e).then(function(e){s||(s=!0,n[u]=e,--i||r(n))},o)}),--i||r(n)});return a&&o(a.error),n.promise},race:function(e){var t=this,n=F(t),r=n.reject,o=O(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(e,t,n){var r=n(1),o=n(12),a=n(2),i=(n(3).Reflect||{}).apply,u=Function.apply;r(r.S+r.F*!n(4)(function(){i(function(){})}),"Reflect",{apply:function(e,t,n){var r=o(e),s=a(n);return i?i(r,t,s):u.call(r,t,s)}})},function(e,t,n){var r=n(1),o=n(34),a=n(12),i=n(2),u=n(5),s=n(4),l=n(99),c=(n(3).Reflect||{}).construct,f=s(function(){function e(){}return!(c(function(){},[],e)instanceof e)}),h=!s(function(){c(function(){})});r(r.S+r.F*(f||h),"Reflect",{construct:function(e,t){a(e),i(t);var n=arguments.length<3?e:a(arguments[2]);if(h&&!f)return c(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(l.apply(e,r))}var s=n.prototype,d=o(u(s)?s:Object.prototype),p=Function.apply.call(e,d,t);return u(p)?p:d}})},function(e,t,n){var r=n(8),o=n(1),a=n(2),i=n(24);o(o.S+o.F*n(4)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(e,t,n){a(e),t=i(t,!0),a(n);try{return r.f(e,t,n),!0}catch(e){return!1}}})},function(e,t,n){var r=n(1),o=n(17).f,a=n(2);r(r.S,"Reflect",{deleteProperty:function(e,t){var n=o(a(e),t);return!(n&&!n.configurable)&&delete e[t]}})},function(e,t,n){"use strict";var r=n(1),o=n(2),a=function(e){this._t=o(e),this._i=0;var t,n=this._k=[];for(t in e)n.push(t)};n(73)(a,"Object",function(){var e,t=this,n=t._k;do if(t._i>=n.length)return{value:void 0,done:!0};while(!((e=n[t._i++])in t._t));return{value:e,done:!1}}),r(r.S,"Reflect",{enumerate:function(e){return new a(e)}})},function(e,t,n){var r=n(17),o=n(1),a=n(2);o(o.S,"Reflect",{getOwnPropertyDescriptor:function(e,t){return r.f(a(e),t)}})},function(e,t,n){var r=n(1),o=n(18),a=n(2);r(r.S,"Reflect",{getPrototypeOf:function(e){return o(a(e))}})},function(e,t,n){function r(e,t){var n,u,c=arguments.length<3?e:arguments[2];return l(e)===c?e[t]:(n=o.f(e,t))?i(n,"value")?n.value:void 0!==n.get?n.get.call(c):void 0:s(u=a(e))?r(u,t,c):void 0}var o=n(17),a=n(18),i=n(11),u=n(1),s=n(5),l=n(2);u(u.S,"Reflect",{get:r})},function(e,t,n){var r=n(1);r(r.S,"Reflect",{has:function(e,t){return t in e}})},function(e,t,n){var r=n(1),o=n(2),a=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(e){return o(e),!a||a(e)}})},function(e,t,n){var r=n(1);r(r.S,"Reflect",{ownKeys:n(113)})},function(e,t,n){var r=n(1),o=n(2),a=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(e){o(e);try{return a&&a(e),!0}catch(e){return!1}}})},function(e,t,n){var r=n(1),o=n(78);o&&r(r.S,"Reflect",{setPrototypeOf:function(e,t){o.check(e,t);try{return o.set(e,t),!0}catch(e){return!1}}})},function(e,t,n){function r(e,t,n){var s,h,d=arguments.length<4?e:arguments[3],p=a.f(c(e),t);if(!p){if(f(h=i(e)))return r(h,t,n,d);p=l(0)}return u(p,"value")?!(p.writable===!1||!f(d))&&(s=a.f(d,t)||l(0),s.value=n,o.f(d,t,s),!0):void 0!==p.set&&(p.set.call(d,n),!0)}var o=n(8),a=n(17),i=n(18),u=n(11),s=n(1),l=n(30),c=n(2),f=n(5);s(s.S,"Reflect",{set:r})},function(e,t,n){var r=n(3),o=n(70),a=n(8).f,i=n(35).f,u=n(54),s=n(52),l=r.RegExp,c=l,f=l.prototype,h=/a/g,d=/a/g,p=new l(h)!==h;if(n(7)&&(!p||n(4)(function(){return d[n(6)("match")]=!1,l(h)!=h||l(d)==d||"/a/i"!=l(h,"i")}))){l=function(e,t){var n=this instanceof l,r=u(e),a=void 0===t;return!n&&r&&e.constructor===l&&a?e:o(p?new c(r&&!a?e.source:e,t):c((r=e instanceof l)?e.source:e,r&&a?s.call(e):t),n?this:f,l)};for(var v=(function(e){e in l||a(l,e,{configurable:!0,get:function(){return c[e]},set:function(t){c[e]=t}})}),m=i(c),y=0;m.length>y;)v(m[y++]);f.constructor=l,l.prototype=f,n(14)(r,"RegExp",l)}n(38)("RegExp")},function(e,t,n){n(51)("match",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){n(51)("replace",2,function(e,t,n){return[function(r,o){"use strict";var a=e(this),i=void 0==r?void 0:r[t];return void 0!==i?i.call(r,a,o):n.call(String(a),r,o)},n]})},function(e,t,n){n(51)("search",1,function(e,t,n){return[function(n){"use strict";var r=e(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r):new RegExp(n)[t](String(r))},n]})},function(e,t,n){n(51)("split",2,function(e,t,r){"use strict";var o=n(54),a=r,i=[].push,u="split",s="length",l="lastIndex";if("c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[s]||2!="ab"[u](/(?:ab)*/)[s]||4!="."[u](/(.?)(.?)/)[s]||"."[u](/()()/)[s]>1||""[u](/.?/)[s]){var c=void 0===/()??/.exec("")[1];r=function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!o(e))return a.call(n,e,t);var r,u,f,h,d,p=[],v=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,y=void 0===t?4294967295:t>>>0,b=new RegExp(e.source,v+"g");for(c||(r=new RegExp("^"+b.source+"$(?!\\s)",v));(u=b.exec(n))&&(f=u.index+u[0][s],!(f>m&&(p.push(n.slice(m,u.index)),!c&&u[s]>1&&u[0].replace(r,function(){for(d=1;d<arguments[s]-2;d++)void 0===arguments[d]&&(u[d]=void 0)}),u[s]>1&&u.index<n[s]&&i.apply(p,u.slice(1)),h=u[0][s],m=f,p[s]>=y)));)b[l]===u.index&&b[l]++;return m===n[s]?!h&&b.test("")||p.push(""):p.push(n.slice(m)),p[s]>y?p.slice(0,y):p}}else"0"[u](void 0,0)[s]&&(r=function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)});return[function(n,o){var a=e(this),i=void 0==n?void 0:n[t];return void 0!==i?i.call(n,a,o):r.call(String(a),n,o)},r]})},function(e,t,n){"use strict";n(120);var r=n(2),o=n(52),a=n(7),i="toString",u=/./[i],s=function(e){n(14)(RegExp.prototype,i,e,!0)};n(4)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?s(function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!a&&e instanceof RegExp?o.call(e):void 0)}):u.name!=i&&s(function(){return u.call(this)})},function(e,t,n){"use strict";n(15)("anchor",function(e){return function(t){return e(this,"a","name",t)}})},function(e,t,n){"use strict";n(15)("big",function(e){return function(){return e(this,"big","","")}})},function(e,t,n){"use strict";n(15)("blink",function(e){return function(){return e(this,"blink","","")}})},function(e,t,n){"use strict";n(15)("bold",function(e){return function(){return e(this,"b","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(81)(!1);r(r.P,"String",{codePointAt:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(1),o=n(9),a=n(82),i="endsWith",u=""[i];r(r.P+r.F*n(68)(i),"String",{endsWith:function(e){var t=a(this,e,i),n=arguments.length>1?arguments[1]:void 0,r=o(t.length),s=void 0===n?r:Math.min(o(n),r),l=String(e);return u?u.call(t,l,s):t.slice(s-l.length,s)===l}})},function(e,t,n){"use strict";n(15)("fixed",function(e){return function(){return e(this,"tt","","")}})},function(e,t,n){"use strict";n(15)("fontcolor",function(e){return function(t){return e(this,"font","color",t)}})},function(e,t,n){"use strict";n(15)("fontsize",function(e){return function(t){return e(this,"font","size",t)}})},function(e,t,n){var r=n(1),o=n(39),a=String.fromCharCode,i=String.fromCodePoint;r(r.S+r.F*(!!i&&1!=i.length),"String",{fromCodePoint:function(e){for(var t,n=[],r=arguments.length,i=0;r>i;){if(t=+arguments[i++],o(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?a(t):a(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},function(e,t,n){"use strict";var r=n(1),o=n(82),a="includes";r(r.P+r.F*n(68)(a),"String",{includes:function(e){return!!~o(this,e,a).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,n){"use strict";n(15)("italics",function(e){return function(){return e(this,"i","","")}})},function(e,t,n){"use strict";var r=n(81)(!0);n(74)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";n(15)("link",function(e){return function(t){return e(this,"a","href",t)}})},function(e,t,n){var r=n(1),o=n(16),a=n(9);r(r.S,"String",{raw:function(e){for(var t=o(e.raw),n=a(t.length),r=arguments.length,i=[],u=0;n>u;)i.push(String(t[u++])),u<r&&i.push(String(arguments[u]));return i.join("")}})},function(e,t,n){var r=n(1);r(r.P,"String",{repeat:n(83)})},function(e,t,n){"use strict";n(15)("small",function(e){return function(){return e(this,"small","","")}})},function(e,t,n){"use strict";var r=n(1),o=n(9),a=n(82),i="startsWith",u=""[i];r(r.P+r.F*n(68)(i),"String",{startsWith:function(e){var t=a(this,e,i),n=o(Math.min(arguments.length>1?arguments[1]:void 0,t.length)),r=String(e);return u?u.call(t,r,n):t.slice(n,n+r.length)===r}})},function(e,t,n){"use strict";n(15)("strike",function(e){return function(){return e(this,"strike","","")}})},function(e,t,n){"use strict";n(15)("sub",function(e){return function(){return e(this,"sub","","")}})},function(e,t,n){"use strict";n(15)("sup",function(e){return function(){return e(this,"sup","","")}})},function(e,t,n){"use strict";n(45)("trim",function(e){return function(){return e(this,3)}})},function(e,t,n){"use strict";var r=n(3),o=n(11),a=n(7),i=n(1),u=n(14),s=n(29).KEY,l=n(4),c=n(58),f=n(44),h=n(40),d=n(6),p=n(118),v=n(87),m=n(159),y=n(158),b=n(72),g=n(2),_=n(16),M=n(24),w=n(30),x=n(34),S=n(110),E=n(17),I=n(8),F=n(36),k=E.f,O=I.f,D=S.f,P=r.Symbol,R=r.JSON,C=R&&R.stringify,A="prototype",T=d("_hidden"),j=d("toPrimitive"),N={}.propertyIsEnumerable,L=c("symbol-registry"),z=c("symbols"),q=c("op-symbols"),V=Object[A],B="function"==typeof P,Y=r.QObject,G=!Y||!Y[A]||!Y[A].findChild,W=a&&l(function(){
return 7!=x(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=k(V,t);r&&delete V[t],O(e,t,n),r&&e!==V&&O(V,t,r)}:O,U=function(e){var t=z[e]=x(P[A]);return t._k=e,t},X=B&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},Z=function(e,t,n){return e===V&&Z(q,t,n),g(e),t=M(t,!0),g(n),o(z,t)?(n.enumerable?(o(e,T)&&e[T][t]&&(e[T][t]=!1),n=x(n,{enumerable:w(0,!1)})):(o(e,T)||O(e,T,w(1,{})),e[T][t]=!0),W(e,t,n)):O(e,t,n)},$=function(e,t){g(e);for(var n,r=y(t=_(t)),o=0,a=r.length;a>o;)Z(e,n=r[o++],t[n]);return e},H=function(e,t){return void 0===t?x(e):$(x(e),t)},Q=function(e){var t=N.call(this,e=M(e,!0));return!(this===V&&o(z,e)&&!o(q,e))&&(!(t||!o(this,e)||!o(z,e)||o(this,T)&&this[T][e])||t)},J=function(e,t){if(e=_(e),t=M(t,!0),e!==V||!o(z,t)||o(q,t)){var n=k(e,t);return!n||!o(z,t)||o(e,T)&&e[T][t]||(n.enumerable=!0),n}},K=function(e){for(var t,n=D(_(e)),r=[],a=0;n.length>a;)o(z,t=n[a++])||t==T||t==s||r.push(t);return r},ee=function(e){for(var t,n=e===V,r=D(n?q:_(e)),a=[],i=0;r.length>i;)!o(z,t=r[i++])||n&&!o(V,t)||a.push(z[t]);return a};B||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(n){this===V&&t.call(q,n),o(this,T)&&o(this[T],e)&&(this[T][e]=!1),W(this,e,w(1,n))};return a&&G&&W(V,e,{configurable:!0,set:t}),U(e)},u(P[A],"toString",function(){return this._k}),E.f=J,I.f=Z,n(35).f=S.f=K,n(48).f=Q,n(57).f=ee,a&&!n(33)&&u(V,"propertyIsEnumerable",Q,!0),p.f=function(e){return U(d(e))}),i(i.G+i.W+i.F*!B,{Symbol:P});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)d(te[ne++]);for(var te=F(d.store),ne=0;te.length>ne;)v(te[ne++]);i(i.S+i.F*!B,"Symbol",{for:function(e){return o(L,e+="")?L[e]:L[e]=P(e)},keyFor:function(e){if(X(e))return m(L,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!B,"Object",{create:H,defineProperty:Z,defineProperties:$,getOwnPropertyDescriptor:J,getOwnPropertyNames:K,getOwnPropertySymbols:ee}),R&&i(i.S+i.F*(!B||l(function(){var e=P();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!X(e)){for(var t,n,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);return t=r[1],"function"==typeof t&&(n=t),!n&&b(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!X(t))return t}),r[1]=t,C.apply(R,r)}}}),P[A][j]||n(13)(P[A],j,P[A].valueOf),f(P,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){"use strict";var r=n(1),o=n(59),a=n(86),i=n(2),u=n(39),s=n(9),l=n(5),c=n(3).ArrayBuffer,f=n(80),h=a.ArrayBuffer,d=a.DataView,p=o.ABV&&c.isView,v=h.prototype.slice,m=o.VIEW,y="ArrayBuffer";r(r.G+r.W+r.F*(c!==h),{ArrayBuffer:h}),r(r.S+r.F*!o.CONSTR,y,{isView:function(e){return p&&p(e)||l(e)&&m in e}}),r(r.P+r.U+r.F*n(4)(function(){return!new h(2).slice(1,void 0).byteLength}),y,{slice:function(e,t){if(void 0!==v&&void 0===t)return v.call(i(this),e);for(var n=i(this).byteLength,r=u(e,n),o=u(void 0===t?n:t,n),a=new(f(this,h))(s(o-r)),l=new d(this),c=new d(a),p=0;r<o;)c.setUint8(p++,l.getUint8(r++));return a}}),n(38)(y)},function(e,t,n){var r=n(1);r(r.G+r.W+r.F*!n(59).ABV,{DataView:n(86).DataView})},function(e,t,n){n(28)("Float32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Float64",8,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Int16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Int32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Int8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Uint16",2,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Uint32",4,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}})},function(e,t,n){n(28)("Uint8",1,function(e){return function(t,n,r){return e(this,t,n,r)}},!0)},function(e,t,n){"use strict";var r=n(102);n(50)("WeakSet",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(this,e,!0)}},r,!1,!0)},function(e,t,n){"use strict";var r=n(1),o=n(49)(!0);r(r.P,"Array",{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),n(41)("includes")},function(e,t,n){var r=n(1),o=n(77)(),a=n(3).process,i="process"==n(19)(a);r(r.G,{asap:function(e){var t=i&&a.domain;o(t?t.bind(e):e)}})},function(e,t,n){var r=n(1),o=n(19);r(r.S,"Error",{isError:function(e){return"Error"===o(e)}})},function(e,t,n){var r=n(1);r(r.P+r.R,"Map",{toJSON:n(101)("Map")})},function(e,t,n){var r=n(1);r(r.S,"Math",{iaddh:function(e,t,n,r){var o=e>>>0,a=t>>>0,i=n>>>0;return a+(r>>>0)+((o&i|(o|i)&~(o+i>>>0))>>>31)|0}})},function(e,t,n){var r=n(1);r(r.S,"Math",{imulh:function(e,t){var n=65535,r=+e,o=+t,a=r&n,i=o&n,u=r>>16,s=o>>16,l=(u*i>>>0)+(a*i>>>16);return u*s+(l>>16)+((a*s>>>0)+(l&n)>>16)}})},function(e,t,n){var r=n(1);r(r.S,"Math",{isubh:function(e,t,n,r){var o=e>>>0,a=t>>>0,i=n>>>0;return a-(r>>>0)-((~o&i|~(o^i)&o-i>>>0)>>>31)|0}})},function(e,t,n){var r=n(1);r(r.S,"Math",{umulh:function(e,t){var n=65535,r=+e,o=+t,a=r&n,i=o&n,u=r>>>16,s=o>>>16,l=(u*i>>>0)+(a*i>>>16);return u*s+(l>>>16)+((a*s>>>0)+(l&n)>>>16)}})},function(e,t,n){"use strict";var r=n(1),o=n(10),a=n(12),i=n(8);n(7)&&r(r.P+n(56),"Object",{__defineGetter__:function(e,t){i.f(o(this),e,{get:a(t),enumerable:!0,configurable:!0})}})},function(e,t,n){"use strict";var r=n(1),o=n(10),a=n(12),i=n(8);n(7)&&r(r.P+n(56),"Object",{__defineSetter__:function(e,t){i.f(o(this),e,{set:a(t),enumerable:!0,configurable:!0})}})},function(e,t,n){var r=n(1),o=n(112)(!0);r(r.S,"Object",{entries:function(e){return o(e)}})},function(e,t,n){var r=n(1),o=n(113),a=n(16),i=n(17),u=n(65);r(r.S,"Object",{getOwnPropertyDescriptors:function(e){for(var t,n=a(e),r=i.f,s=o(n),l={},c=0;s.length>c;)u(l,t=s[c++],r(n,t));return l}})},function(e,t,n){"use strict";var r=n(1),o=n(10),a=n(24),i=n(18),u=n(17).f;n(7)&&r(r.P+n(56),"Object",{__lookupGetter__:function(e){var t,n=o(this),r=a(e,!0);do if(t=u(n,r))return t.get;while(n=i(n))}})},function(e,t,n){"use strict";var r=n(1),o=n(10),a=n(24),i=n(18),u=n(17).f;n(7)&&r(r.P+n(56),"Object",{__lookupSetter__:function(e){var t,n=o(this),r=a(e,!0);do if(t=u(n,r))return t.set;while(n=i(n))}})},function(e,t,n){var r=n(1),o=n(112)(!1);r(r.S,"Object",{values:function(e){return o(e)}})},function(e,t,n){"use strict";var r=n(1),o=n(3),a=n(25),i=n(77)(),u=n(6)("observable"),s=n(12),l=n(2),c=n(32),f=n(37),h=n(13),d=n(42),p=d.RETURN,v=function(e){return null==e?void 0:s(e)},m=function(e){var t=e._c;t&&(e._c=void 0,t())},y=function(e){return void 0===e._o},b=function(e){y(e)||(e._o=void 0,m(e))},g=function(e,t){l(e),this._c=void 0,this._o=e,e=new _(this);try{var n=t(e),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:s(n),this._c=n)}catch(t){return void e.error(t)}y(this)&&m(this)};g.prototype=f({},{unsubscribe:function(){b(this)}});var _=function(e){this._s=e};_.prototype=f({},{next:function(e){var t=this._s;if(!y(t)){var n=t._o;try{var r=v(n.next);if(r)return r.call(n,e)}catch(e){try{b(t)}finally{throw e}}}},error:function(e){var t=this._s;if(y(t))throw e;var n=t._o;t._o=void 0;try{var r=v(n.error);if(!r)throw e;e=r.call(n,e)}catch(e){try{m(t)}finally{throw e}}return m(t),e},complete:function(e){var t=this._s;if(!y(t)){var n=t._o;t._o=void 0;try{var r=v(n.complete);e=r?r.call(n,e):void 0}catch(e){try{m(t)}finally{throw e}}return m(t),e}}});var M=function(e){c(this,M,"Observable","_f")._f=s(e)};f(M.prototype,{subscribe:function(e){return new g(e,this._f)},forEach:function(e){var t=this;return new(a.Promise||o.Promise)(function(n,r){s(e);var o=t.subscribe({next:function(t){try{return e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:n})})}}),f(M,{from:function(e){var t="function"==typeof this?this:M,n=v(l(e)[u]);if(n){var r=l(n.call(e));return r.constructor===t?r:new t(function(e){return r.subscribe(e)})}return new t(function(t){var n=!1;return i(function(){if(!n){try{if(d(e,!1,function(e){if(t.next(e),n)return p})===p)return}catch(e){if(n)throw e;return void t.error(e)}t.complete()}}),function(){n=!0}})},of:function(){for(var e=0,t=arguments.length,n=Array(t);e<t;)n[e]=arguments[e++];return new("function"==typeof this?this:M)(function(e){var t=!1;return i(function(){if(!t){for(var r=0;r<n.length;++r)if(e.next(n[r]),t)return;e.complete()}}),function(){t=!0}})}}),h(M.prototype,u,function(){return this}),r(r.G,{Observable:M}),n(38)("Observable")},function(e,t,n){var r=n(27),o=n(2),a=r.key,i=r.set;r.exp({defineMetadata:function(e,t,n,r){i(e,t,o(n),a(r))}})},function(e,t,n){var r=n(27),o=n(2),a=r.key,i=r.map,u=r.store;r.exp({deleteMetadata:function(e,t){var n=arguments.length<3?void 0:a(arguments[2]),r=i(o(t),n,!1);if(void 0===r||!r.delete(e))return!1;if(r.size)return!0;var s=u.get(t);return s.delete(n),!!s.size||u.delete(t)}})},function(e,t,n){var r=n(121),o=n(97),a=n(27),i=n(2),u=n(18),s=a.keys,l=a.key,c=function(e,t){var n=s(e,t),a=u(e);if(null===a)return n;var i=c(a,t);return i.length?n.length?o(new r(n.concat(i))):i:n};a.exp({getMetadataKeys:function(e){return c(i(e),arguments.length<2?void 0:l(arguments[1]))}})},function(e,t,n){var r=n(27),o=n(2),a=n(18),i=r.has,u=r.get,s=r.key,l=function(e,t,n){var r=i(e,t,n);if(r)return u(e,t,n);var o=a(t);return null!==o?l(e,o,n):void 0};r.exp({getMetadata:function(e,t){return l(e,o(t),arguments.length<3?void 0:s(arguments[2]))}})},function(e,t,n){var r=n(27),o=n(2),a=r.keys,i=r.key;r.exp({getOwnMetadataKeys:function(e){return a(o(e),arguments.length<2?void 0:i(arguments[1]))}})},function(e,t,n){var r=n(27),o=n(2),a=r.get,i=r.key;r.exp({getOwnMetadata:function(e,t){return a(e,o(t),arguments.length<3?void 0:i(arguments[2]))}})},function(e,t,n){var r=n(27),o=n(2),a=n(18),i=r.has,u=r.key,s=function(e,t,n){var r=i(e,t,n);if(r)return!0;var o=a(t);return null!==o&&s(e,o,n)};r.exp({hasMetadata:function(e,t){return s(e,o(t),arguments.length<3?void 0:u(arguments[2]))}})},function(e,t,n){var r=n(27),o=n(2),a=r.has,i=r.key;r.exp({hasOwnMetadata:function(e,t){return a(e,o(t),arguments.length<3?void 0:i(arguments[2]))}})},function(e,t,n){var r=n(27),o=n(2),a=n(12),i=r.key,u=r.set;r.exp({metadata:function(e,t){return function(n,r){u(e,t,(void 0!==r?o:a)(n),i(r))}}})},function(e,t,n){var r=n(1);r(r.P+r.R,"Set",{toJSON:n(101)("Set")})},function(e,t,n){"use strict";var r=n(1),o=n(81)(!0);r(r.P,"String",{at:function(e){return o(this,e)}})},function(e,t,n){"use strict";var r=n(1),o=n(20),a=n(9),i=n(54),u=n(52),s=RegExp.prototype,l=function(e,t){this._r=e,this._s=t};n(73)(l,"RegExp String",function(){var e=this._r.exec(this._s);return{value:e,done:null===e}}),r(r.P,"String",{matchAll:function(e){if(o(this),!i(e))throw TypeError(e+" is not a regexp!");var t=String(this),n="flags"in s?String(e.flags):u.call(e),r=new RegExp(e.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=a(e.lastIndex),new l(r,t)}})},function(e,t,n){"use strict";var r=n(1),o=n(117);r(r.P,"String",{padEnd:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!1)}})},function(e,t,n){"use strict";var r=n(1),o=n(117);r(r.P,"String",{padStart:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0,!0)}})},function(e,t,n){"use strict";n(45)("trimLeft",function(e){return function(){return e(this,1)}},"trimStart")},function(e,t,n){"use strict";n(45)("trimRight",function(e){return function(){return e(this,2)}},"trimEnd")},function(e,t,n){n(87)("asyncIterator")},function(e,t,n){n(87)("observable")},function(e,t,n){var r=n(1);r(r.S,"System",{global:n(3)})},function(e,t,n){for(var r=n(89),o=n(14),a=n(3),i=n(13),u=n(43),s=n(6),l=s("iterator"),c=s("toStringTag"),f=u.Array,h=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],d=0;d<5;d++){var p,v=h[d],m=a[v],y=m&&m.prototype;if(y){y[l]||i(y,l,f),y[c]||i(y,c,v),u[v]=f;for(p in r)y[p]||o(y,p,r[p],!0)}}},function(e,t,n){var r=n(1),o=n(85);r(r.G+r.B,{setImmediate:o.set,clearImmediate:o.clear})},function(e,t,n){var r=n(3),o=n(1),a=n(53),i=n(160),u=r.navigator,s=!!u&&/MSIE .\./.test(u.userAgent),l=function(e){return s?function(t,n){return e(a(i,[].slice.call(arguments,2),"function"==typeof t?t:Function(t)),n)}:e};o(o.G+o.B+o.F*s,{setTimeout:l(r.setTimeout),setInterval:l(r.setInterval)})},function(e,t,n){n(283),n(222),n(224),n(223),n(226),n(228),n(233),n(227),n(225),n(235),n(234),n(230),n(231),n(229),n(221),n(232),n(236),n(237),n(189),n(191),n(190),n(239),n(238),n(209),n(219),n(220),n(210),n(211),n(212),n(213),n(214),n(215),n(216),n(217),n(218),n(192),n(193),n(194),n(195),n(196),n(197),n(198),n(199),n(200),n(201),n(202),n(203),n(204),n(205),n(206),n(207),n(208),n(270),n(275),n(282),n(273),n(265),n(266),n(271),n(276),n(278),n(261),n(262),n(263),n(264),n(267),n(268),n(269),n(272),n(274),n(277),n(279),n(280),n(281),n(184),n(186),n(185),n(188),n(187),n(173),n(171),n(177),n(174),n(180),n(182),n(170),n(176),n(167),n(181),n(165),n(179),n(178),n(172),n(175),n(164),n(166),n(169),n(168),n(183),n(89),n(255),n(260),n(120),n(256),n(257),n(258),n(259),n(240),n(119),n(121),n(122),n(295),n(284),n(285),n(290),n(293),n(294),n(288),n(291),n(289),n(292),n(286),n(287),n(241),n(242),n(243),n(244),n(245),n(248),n(246),n(247),n(249),n(250),n(251),n(252),n(254),n(253),n(296),n(322),n(325),n(324),n(326),n(327),n(323),n(328),n(329),n(307),n(310),n(306),n(304),n(305),n(308),n(309),n(299),n(321),n(330),n(298),n(300),n(302),n(301),n(303),n(312),n(313),n(315),n(314),n(317),n(316),n(318),n(319),n(320),n(297),n(311),n(333),n(332),n(331),e.exports=n(25)},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),i=n(3),u=r(i),s=n(4),l=r(s),c=n(5),f=r(c),h=n(6),d=r(h),p=n(7),v=r(p),m=n(21),y=r(m),b=n(25),g=r(b),_=n(27),M=r(_),w=n(32),x=r(w),S=n(33),E=r(S),I=n(35),F=r(I),k=n(36),O=r(k),D=n(37),P=r(D),R=n(38),C=r(R),A=n(44),T=r(A),j=n(45),N=r(j),L=n(65),z=r(L),q=n(66),V=r(q),B=n(67),Y=r(B),G=n(69),W=r(G),U=n(71),X=r(U),Z=n(72),$=r(Z),H=n(74),Q=r(H),J=n(76),K=r(J),ee=n(26),te=r(ee),ne=n(77),re=r(ne),oe=n(78),ae=r(oe),ie=n(79),ue=r(ie),se=n(80),le=r(se),ce=n(81),fe=r(ce),he=n(82),de=r(he),pe=n(83),ve=r(pe),me=n(84),ye=r(me),be=n(86),ge=r(be),_e=n(87),Me=r(_e),we=n(88),xe=r(we),Se=n(90),Ee=r(Se),Ie=n(91),Fe=r(Ie),ke=n(93),Oe=r(ke),De=n(94),Pe=r(De),Re=n(96),Ce=r(Re),Ae=n(97),Te=r(Ae),je=n(98),Ne=r(je),Le=n(99),ze=r(Le),qe=n(100),Ve=r(qe),Be=n(101),Ye=r(Be),Ge=n(102),We=r(Ge),Ue=n(103),Xe=r(Ue),Ze=n(105),$e=r(Ze),He=n(106),Qe=r(He),Je=n(107),Ke=r(Je),et=n(108),tt=r(et),nt=n(110),rt=r(nt),ot=n(95),at=r(ot),it=n(112),ut=r(it),st=n(34),lt=r(st),ct=n(111),ft=r(ct),ht=n(48),dt=r(ht),pt=n(114),vt=r(pt),mt=n(53),yt=r(mt),bt=n(57),gt=r(bt),_t=n(47),Mt=r(_t),wt=n(63),xt=r(wt),St=n(46),Et=r(St),It=n(43),Ft=r(It),kt=n(49),Ot=r(kt),Dt=n(39),Pt=r(Dt),Rt=n(104),Ct=r(Rt),At=n(62),Tt=r(At),jt=n(55),Nt=r(jt),Lt=n(52),zt=r(Lt),qt=n(56),Vt=r(qt),Bt=n(50),Yt=r(Bt),Gt=n(51),Wt=r(Gt),Ut=n(60),Xt=r(Ut),Zt=n(58),$t=r(Zt),Ht=n(113),Qt=r(Ht),Jt=n(75),Kt=r(Jt),en=n(31),tn=r(en),nn=n(41),rn=r(nn),on=n(70),an=r(on),un=n(29),sn=r(un),ln=n(40),cn=r(ln),fn=n(28),hn=r(fn),dn=n(42),pn=r(dn),vn=n(85),mn=r(vn),yn=n(118),bn=r(yn),gn={Asset:{AssetLoader:a.default,CacheResolver:u.default,ExternalResourceResolver:l.default,ImageResolver:f.default,TextFileResolver:d.default},Camera:{PerspectiveCamera:v.default},Components:{AssetLoadingManagerComponent:y.default,CameraComponent:g.default,CanvasInitializerComponent:M.default,FullscreenComponent:x.default,GeometryComponent:E.default,GeometryRegistoryComponent:F.default,HTMLBinderComponent:O.default,LoopManagerComponent:P.default,MaterialComponent:C.default,MaterialContainerComponent:T.default,MaterialImporterComponent:N.default,MaterialManagerComponent:z.default,MeshRendererComponent:V.default,MouseCameraControlComponent:Y.default,RenderBufferComponent:W.default,RendererComponent:X.default,RendererManagerComponent:$.default,RenderQuadComponent:Q.default,RenderSceneComponent:K.default,SceneComponent:te.default,TextureBufferComponent:re.default,TextureComponent:ae.default,TransformComponent:ue.default},Constraint:{ChildrenComponentConstraint:le.default,NoChildConstraint:fe.default,ParentConstraint:de.default,RootConstraint:ve.default},Converters:{Angle2DConverter:ye.default,BooleanConverter:ge.default,CanvasSizeConverter:Me.default,Color3Converter:xe.default,Color4Converter:Ee.default,ComponentConverter:Fe.default,EnumConverter:Oe.default,GeometryConverter:Pe.default,MaterialConverter:Ce.default,NumberArrayConverter:Te.default,NumberConverter:Ne.default,ObjectConverter:ze.default,Rotation3Converter:Ve.default,StringArrayConverter:Ye.default,StringConverter:We.default,TextureConverter:Xe.default,Vector2Converter:$e.default,Vector3Converter:Qe.default,Vector4Converter:Ke.default,ViewportConverter:tt.default},Geometry:{DefaultPrimitives:rt.default,Geometry:at.default,GeometryBuilder:ut.default,GeometryFactory:lt.default,GeometryUtility:ft.default},Material:{DefaultMacro:dt.default,DefaultMaterial:vt.default,EnvUniformValueResolver:yt.default,ImportResolver:gt.default,MacroRegistory:Mt.default,Material:xt.default,MaterialFactory:Et.default,Pass:Ft.default,PassFactory:Ot.default,SORTPass:Pt.default,TextureReference:Ct.default,Transformers:{AnnotationRemover:Tt.default,CommentRemover:Nt.default,GLSLUtil:zt.default,ImportTransformer:Vt.default,SORTPassParser:Yt.default,UniformRegisterer:Wt.default,VariableAnnotationRemover:Xt.default,VariableParser:$t.default}},Resource:{Buffer:Qt.default,FrameBuffer:Kt.default,GLExtRequestor:tn.default,Program:rn.default,RenderBuffer:an.default,ResourceBase:sn.default,Shader:cn.default,Texture2D:hn.default,UniformProxy:pn.default},Util:{RotationParser:mn.default}},_n=(0,bn.default)();Object.assign(_n||{},gn),window.GrimoireJS.lib.fundamental=gn,t.default=_n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),l=r(s),c=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},f=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.registerCount=0,e.loadCount=0,e.completeCount=0,e.errorCount=0,e.promise=new Promise(function(t){e._resolve=t}),e}return i(t,e),u(t,[{key:"register",value:function(e){var t=this;return this.registerCount++,new Promise(function(n,r){(function(){return c(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:t.t0=t.sent,n(t.t0),this.loadCount++,t.next=12;break;case 8:t.prev=8,t.t1=t.catch(0),r(t.t1),this.errorCount++;case 12:this.completeCount++,this._checkLoadCompleted();case 14:case"end":return t.stop()}},t,this,[[0,8]])}))}).bind(t)()})}},{key:"_checkLoadCompleted",value:function(){this.emit("progress",this),this.registerCount===this.completeCount&&this._resolve()}}]),t}(l.default);t.default=f},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Base.EEObject},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},a=function(){function e(t){n(this,e),this.toAbsolute=t,this.cache={},this.resolvers={}}return r(e,[{key:"resolve",value:function(e,t){return o(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.toAbsolute(e),!this._cached(r)){n.next=5;break}return n.abrupt("return",this.cache[r]);case 5:if(!this._resolving(r)){n.next=11;break}return n.next=8,this.resolvers[r];case 8:return n.abrupt("return",n.sent);case 11:return this.resolvers[r]=t(r),n.next=14,this.resolvers[r];case 14:return o=n.sent,this._resolved(r,o),n.abrupt("return",o);case 17:case"end":return n.stop()}},n,this)}))}},{key:"_cached",value:function(e){return"undefined"!=typeof this.cache[e]}},{key:"_resolving",value:function(e){return"undefined"!=typeof this.resolvers[e]}},{key:"_resolved",value:function(e,t){delete this.resolvers[e],this.cache[e]=t}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=r(s),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t._toAbsolute))}return i(t,e),u(t,null,[{key:"_toAbsolute",value:function(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname+t.search+t.hash}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageResolver=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(4),c=r(l),f=t.ImageResolver=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"resolve",value:function(e){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resolve",this).call(this,e,function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=function(e){n(e)},r.src=e})})}}]),t}(c.default);t.default=new f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TextFileResolver=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(4),c=r(l),f=t.TextFileResolver=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"resolve",value:function(e){return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resolve",this).call(this,e,function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(e){t(r.responseText)},r.onerror=function(e){n(e)},r.send()})})}}]),t}(c.default);t.default=new f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(8),u=r(i),s=n(9),l=r(s),c=n(10),f=r(c),h=n(11),d=function(){function e(){o(this,e),this._viewMatrix=new f.default,this._projectionMatrix=new f.default,this._invProjectionMatrix=new f.default,this._projectionViewMatrix=new f.default,this._eyeCache=u.default.Zero,this._lookAtCache=u.default.Zero,this._upCache=u.default.Zero}return a(e,[{key:"getViewMatrix",value:function(){return this._viewMatrix}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getInvProjectionMatrix",value:function(){return this._invProjectionMatrix}},{key:"getProjectionViewMatrix",value:function(){return this._projectionViewMatrix}},{key:"getFar",value:function(){return this._far}},{key:"setFar",value:function(e){this._far=e,this._recalculateProjection()}},{key:"getNear",value:function(){return this._near}},{key:"setNear",value:function(e){this._near=e,this._recalculateProjection()}},{key:"getAspect",value:function(){return this._aspect}},{key:"setAspect",value:function(e){this._aspect=e,this._recalculateProjection()}},{key:"getFovy",value:function(){return this._fovy}},{key:"setFovy",value:function(e){this._fovy=e,this._recalculateProjection()}},{key:"updateTransform",value:function(t){h.vec3.transformMat4(this._eyeCache.rawElements,u.default.Zero.rawElements,t.globalTransform.rawElements),h.vec4.transformMat4(this._lookAtCache.rawElements,e._frontOrigin.rawElements,t.globalTransform.rawElements),h.vec3.add(this._lookAtCache.rawElements,this._lookAtCache.rawElements,this._eyeCache.rawElements),h.vec4.transformMat4(this._upCache.rawElements,e._upOrigin.rawElements,t.globalTransform.rawElements),h.mat4.lookAt(this._viewMatrix.rawElements,this._eyeCache.rawElements,this._lookAtCache.rawElements,this._upCache.rawElements),h.mat4.mul(this._projectionViewMatrix.rawElements,this._projectionMatrix.rawElements,this._viewMatrix.rawElements)}},{key:"_recalculateProjection",value:function(){h.mat4.perspective(this._projectionMatrix.rawElements,this._fovy,this._aspect,this._near,this._far),h.mat4.mul(this._projectionViewMatrix.rawElements,this._projectionMatrix.rawElements,this._viewMatrix.rawElements),h.mat4.invert(this._invProjectionMatrix.rawElements,this._projectionMatrix.rawElements)}}]),e}();t.default=d,d._frontOrigin=new l.default(0,0,-1,0),d._upOrigin=new l.default(0,1,0,0)},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Vector3},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Vector4},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Matrix},function(e,t,n){t.glMatrix=n(12),t.mat2=n(13),t.mat2d=n(14),t.mat3=n(15),t.mat4=n(16),t.quat=n(17),t.vec2=n(20),t.vec3=n(18),t.vec4=n(19)},function(e,t){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1;const r=new Function("return this")();n.SIMD_AVAILABLE=n.ARRAY_TYPE===r.Float32Array&&"SIMD"in r,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(e){n.ARRAY_TYPE=e};var o=Math.PI/180;n.toRadian=function(e){return e*o},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},e.exports=n},function(e,t,n){var r=n(12),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.fromValues=function(e,t,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=o,a},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*a-o*r;return i?(i=1/i,e[0]=a*i,e[1]=-r*i,e[2]=-o*i,e[3]=n*i,e):null},o.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},o.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},o.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return e[0]=r*u+a*s,e[1]=o*u+i*s,e[2]=r*l+a*c,e[3]=o*l+i*c,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+a*u,e[1]=o*s+i*u,e[2]=r*-u+a*s,e[3]=o*-u+i*s,e},o.scale=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=n[0],s=n[1];return e[0]=r*u,e[1]=o*u,e[2]=a*s,e[3]=i*s,e},o.fromRotation=function(e,t){
var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},o.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},o.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},e.exports=o},function(e,t,n){var r=n(12),o={};o.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.fromValues=function(e,t,n,o,a,i){var u=new r.ARRAY_TYPE(6);return u[0]=e,u[1]=t,u[2]=n,u[3]=o,u[4]=a,u[5]=i,u},o.set=function(e,t,n,r,o,a,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=n*a-r*o;return s?(s=1/s,e[0]=a*s,e[1]=-r*s,e[2]=-o*s,e[3]=n*s,e[4]=(o*u-a*i)*s,e[5]=(r*i-n*u)*s,e):null},o.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},o.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1],f=n[2],h=n[3],d=n[4],p=n[5];return e[0]=r*l+a*c,e[1]=o*l+i*c,e[2]=r*f+a*h,e[3]=o*f+i*h,e[4]=r*d+a*p+u,e[5]=o*d+i*p+s,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*l,e[1]=o*c+i*l,e[2]=r*-l+a*c,e[3]=o*-l+i*c,e[4]=u,e[5]=s,e},o.scale=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1];return e[0]=r*l,e[1]=o*l,e[2]=a*c,e[3]=i*c,e[4]=u,e[5]=s,e},o.translate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1];return e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=r*l+a*c+u,e[5]=o*l+i*c+s,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},o.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],l=t[0],c=t[1],f=t[2],h=t[3],d=t[4],p=t[5];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))},e.exports=o},function(e,t,n){var r=n(12),o={};o.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},o.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromValues=function(e,t,n,o,a,i,u,s,l){var c=new r.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=o,c[4]=a,c[5]=i,c[6]=u,c[7]=s,c[8]=l,c},o.set=function(e,t,n,r,o,a,i,u,s,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e[6]=u,e[7]=s,e[8]=l,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=c*i-u*l,h=-c*a+u*s,d=l*a-i*s,p=n*f+r*h+o*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*r+o*l)*p,e[2]=(u*r-o*i)*p,e[3]=h*p,e[4]=(c*n-o*s)*p,e[5]=(-u*n+o*a)*p,e[6]=d*p,e[7]=(-l*n+r*s)*p,e[8]=(i*n-r*a)*p,e):null},o.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8];return e[0]=i*c-u*l,e[1]=o*l-r*c,e[2]=r*u-o*i,e[3]=u*s-a*c,e[4]=n*c-o*s,e[5]=o*a-n*u,e[6]=a*l-i*s,e[7]=r*s-n*l,e[8]=n*i-r*a,e},o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5],u=e[6],s=e[7],l=e[8];return t*(l*a-i*s)+n*(-l*o+i*u)+r*(s*o-a*u)},o.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=n[0],d=n[1],p=n[2],v=n[3],m=n[4],y=n[5],b=n[6],g=n[7],_=n[8];return e[0]=h*r+d*i+p*l,e[1]=h*o+d*u+p*c,e[2]=h*a+d*s+p*f,e[3]=v*r+m*i+y*l,e[4]=v*o+m*u+y*c,e[5]=v*a+m*s+y*f,e[6]=b*r+g*i+_*l,e[7]=b*o+g*u+_*c,e[8]=b*a+g*s+_*f,e},o.mul=o.multiply,o.translate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=n[0],d=n[1];return e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=u,e[5]=s,e[6]=h*r+d*i+l,e[7]=h*o+d*u+c,e[8]=h*a+d*s+f,e},o.rotate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=Math.sin(n),d=Math.cos(n);return e[0]=d*r+h*i,e[1]=d*o+h*u,e[2]=d*a+h*s,e[3]=d*i-h*r,e[4]=d*u-h*o,e[5]=d*s-h*a,e[6]=l,e[7]=c,e[8]=f,e},o.scale=function(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n+n,u=r+r,s=o+o,l=n*i,c=r*i,f=r*u,h=o*i,d=o*u,p=o*s,v=a*i,m=a*u,y=a*s;return e[0]=1-f-p,e[3]=c-y,e[6]=h+m,e[1]=c+y,e[4]=1-l-p,e[7]=d-v,e[2]=h-m,e[5]=d+v,e[8]=1-l-f,e},o.normalFromMat4=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],b=n*u-r*i,g=n*s-o*i,_=n*l-a*i,M=r*s-o*u,w=r*l-a*u,x=o*l-a*s,S=c*v-f*p,E=c*m-h*p,I=c*y-d*p,F=f*m-h*v,k=f*y-d*v,O=h*y-d*m,D=b*O-g*k+_*F+M*I-w*E+x*S;return D?(D=1/D,e[0]=(u*O-s*k+l*F)*D,e[1]=(s*I-i*O-l*E)*D,e[2]=(i*k-u*I+l*S)*D,e[3]=(o*k-r*O-a*F)*D,e[4]=(n*O-o*I+a*E)*D,e[5]=(r*I-n*k-a*S)*D,e[6]=(v*x-m*w+y*M)*D,e[7]=(m*_-p*x-y*g)*D,e[8]=(p*w-v*_+y*b)*D,e):null},o.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1],p=t[2],v=t[3],m=t[4],y=t[5],b=e[6],g=t[7],_=t[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-v)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-m)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-y)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-b)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-_)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))},e.exports=o},function(e,t,n){var r=n(12),o={scalar:{},SIMD:{}};o.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.fromValues=function(e,t,n,o,a,i,u,s,l,c,f,h,d,p,v,m){var y=new r.ARRAY_TYPE(16);return y[0]=e,y[1]=t,y[2]=n,y[3]=o,y[4]=a,y[5]=i,y[6]=u,y[7]=s,y[8]=l,y[9]=c,y[10]=f,y[11]=h,y[12]=d,y[13]=p,y[14]=v,y[15]=m,y},o.set=function(e,t,n,r,o,a,i,u,s,l,c,f,h,d,p,v,m){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e[6]=u,e[7]=s,e[8]=l,e[9]=c,e[10]=f,e[11]=h,e[12]=d,e[13]=p,e[14]=v,e[15]=m,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.scalar.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],a=t[6],i=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=o,e[13]=i,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},o.SIMD.transpose=function(e,t){var n,r,o,a,i,u,s,l,c,f;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),i=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(o,a,0,1,4,5),s=SIMD.Float32x4.shuffle(i,u,0,2,4,6),l=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(e,0,s),SIMD.Float32x4.store(e,4,l),i=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(o,a,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),f=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,f),e},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],b=n*u-r*i,g=n*s-o*i,_=n*l-a*i,M=r*s-o*u,w=r*l-a*u,x=o*l-a*s,S=c*v-f*p,E=c*m-h*p,I=c*y-d*p,F=f*m-h*v,k=f*y-d*v,O=h*y-d*m,D=b*O-g*k+_*F+M*I-w*E+x*S;return D?(D=1/D,e[0]=(u*O-s*k+l*F)*D,e[1]=(o*k-r*O-a*F)*D,e[2]=(v*x-m*w+y*M)*D,e[3]=(h*w-f*x-d*M)*D,e[4]=(s*I-i*O-l*E)*D,e[5]=(n*O-o*I+a*E)*D,e[6]=(m*_-p*x-y*g)*D,e[7]=(c*x-h*_+d*g)*D,e[8]=(i*k-u*I+l*S)*D,e[9]=(r*I-n*k-a*S)*D,e[10]=(p*w-v*_+y*b)*D,e[11]=(f*_-c*w-d*b)*D,e[12]=(u*E-i*F-s*S)*D,e[13]=(n*F-r*E+o*S)*D,e[14]=(v*g-p*M-m*b)*D,e[15]=(c*M-f*g+h*b)*D,e):null},o.SIMD.invert=function(e,t){var n,r,o,a,i,u,s,l,c,f,h=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),p=SIMD.Float32x4.load(t,8),v=SIMD.Float32x4.load(t,12);return i=SIMD.Float32x4.shuffle(h,d,0,1,4,5),r=SIMD.Float32x4.shuffle(p,v,0,1,4,5),n=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(h,d,2,3,6,7),a=SIMD.Float32x4.shuffle(p,v,2,3,6,7),o=SIMD.Float32x4.shuffle(i,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,i,1,3,5,7),i=SIMD.Float32x4.mul(o,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(r,i),s=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),c=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),l=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,i)),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),c),f=SIMD.Float32x4.mul(n,u),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),i=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(i,i))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(f,c)),e):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15];return e[0]=u*(h*y-d*m)-f*(s*y-l*m)+v*(s*d-l*h),e[1]=-(r*(h*y-d*m)-f*(o*y-a*m)+v*(o*d-a*h)),e[2]=r*(s*y-l*m)-u*(o*y-a*m)+v*(o*l-a*s),e[3]=-(r*(s*d-l*h)-u*(o*d-a*h)+f*(o*l-a*s)),e[4]=-(i*(h*y-d*m)-c*(s*y-l*m)+p*(s*d-l*h)),e[5]=n*(h*y-d*m)-c*(o*y-a*m)+p*(o*d-a*h),e[6]=-(n*(s*y-l*m)-i*(o*y-a*m)+p*(o*l-a*s)),e[7]=n*(s*d-l*h)-i*(o*d-a*h)+c*(o*l-a*s),e[8]=i*(f*y-d*v)-c*(u*y-l*v)+p*(u*d-l*f),e[9]=-(n*(f*y-d*v)-c*(r*y-a*v)+p*(r*d-a*f)),e[10]=n*(u*y-l*v)-i*(r*y-a*v)+p*(r*l-a*u),e[11]=-(n*(u*d-l*f)-i*(r*d-a*f)+c*(r*l-a*u)),e[12]=-(i*(f*m-h*v)-c*(u*m-s*v)+p*(u*h-s*f)),e[13]=n*(f*m-h*v)-c*(r*m-o*v)+p*(r*h-o*f),e[14]=-(n*(u*m-s*v)-i*(r*m-o*v)+p*(r*s-o*u)),e[15]=n*(u*h-s*f)-i*(r*h-o*f)+c*(r*s-o*u),e},o.SIMD.adjoint=function(e,t){var n,r,o,a,i,u,s,l,c,f,h,d,p;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(o,a,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),l=SIMD.Float32x4.shuffle(o,a,2,3,6,7),s=SIMD.Float32x4.shuffle(c,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,c,1,3,5,7),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(u,c),h=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(u,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),p=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),p),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),p),SIMD.Float32x4.store(e,0,f),SIMD.Float32x4.store(e,4,h),SIMD.Float32x4.store(e,8,d),SIMD.Float32x4.store(e,12,p),e},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5],u=e[6],s=e[7],l=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15],y=t*i-n*a,b=t*u-r*a,g=t*s-o*a,_=n*u-r*i,M=n*s-o*i,w=r*s-o*u,x=l*p-c*d,S=l*v-f*d,E=l*m-h*d,I=c*v-f*p,F=c*m-h*p,k=f*m-h*v;return y*k-b*F+g*I+_*E-M*S+w*x},o.SIMD.multiply=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4.load(n,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(e,0,s);var l=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(e,4,c);var f=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));SIMD.Float32x4.store(e,8,h);var d=SIMD.Float32x4.load(n,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),i))));return SIMD.Float32x4.store(e,12,p),e},o.scalar.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],m=t[13],y=t[14],b=t[15],g=n[0],_=n[1],M=n[2],w=n[3];return e[0]=g*r+_*u+M*f+w*v,e[1]=g*o+_*s+M*h+w*m,e[2]=g*a+_*l+M*d+w*y,e[3]=g*i+_*c+M*p+w*b,g=n[4],_=n[5],M=n[6],w=n[7],e[4]=g*r+_*u+M*f+w*v,e[5]=g*o+_*s+M*h+w*m,e[6]=g*a+_*l+M*d+w*y,e[7]=g*i+_*c+M*p+w*b,g=n[8],_=n[9],M=n[10],w=n[11],e[8]=g*r+_*u+M*f+w*v,e[9]=g*o+_*s+M*h+w*m,e[10]=g*a+_*l+M*d+w*y,e[11]=g*i+_*c+M*p+w*b,g=n[12],_=n[13],M=n[14],w=n[15],e[12]=g*r+_*u+M*f+w*v,e[13]=g*o+_*s+M*h+w*m,e[14]=g*a+_*l+M*d+w*y,e[15]=g*i+_*c+M*p+w*b,e},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(e,t,n){var r,o,a,i,u,s,l,c,f,h,d,p,v=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*y+t[12],e[13]=t[1]*v+t[5]*m+t[9]*y+t[13],e[14]=t[2]*v+t[6]*m+t[10]*y+t[14],e[15]=t[3]*v+t[7]*m+t[11]*y+t[15]):(r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=u,e[5]=s,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=r*v+u*m+f*y+t[12],e[13]=o*v+s*m+h*y+t[13],e[14]=a*v+l*m+d*y+t[14],e[15]=i*v+c*m+p*y+t[15]),e},o.SIMD.translate=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,1,1,1,1)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(a,i)));return SIMD.Float32x4.store(e,12,s),e},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(e,t,n){var r=n[0],o=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.SIMD.scale=function(e,t,n){var r,o,a,i=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),o=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,1,1,1,1))),a=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(e,t,n,o){var a,i,u,s,l,c,f,h,d,p,v,m,y,b,g,_,M,w,x,S,E,I,F,k,O=o[0],D=o[1],P=o[2],R=Math.sqrt(O*O+D*D+P*P);return Math.abs(R)<r.EPSILON?null:(R=1/R,O*=R,D*=R,P*=R,a=Math.sin(n),i=Math.cos(n),u=1-i,s=t[0],l=t[1],c=t[2],f=t[3],h=t[4],d=t[5],p=t[6],v=t[7],m=t[8],y=t[9],b=t[10],g=t[11],_=O*O*u+i,M=D*O*u+P*a,w=P*O*u-D*a,x=O*D*u-P*a,S=D*D*u+i,E=P*D*u+O*a,I=O*P*u+D*a,F=D*P*u-O*a,k=P*P*u+i,e[0]=s*_+h*M+m*w,e[1]=l*_+d*M+y*w,e[2]=c*_+p*M+b*w,e[3]=f*_+v*M+g*w,e[4]=s*x+h*S+m*E,e[5]=l*x+d*S+y*E,e[6]=c*x+p*S+b*E,e[7]=f*x+v*S+g*E,e[8]=s*I+h*F+m*k,e[9]=l*I+d*F+y*k,e[10]=c*I+p*F+b*k,e[11]=f*I+v*F+g*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},o.scalar.rotateX=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[4],i=t[5],u=t[6],s=t[7],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*o+l*r,e[5]=i*o+c*r,e[6]=u*o+f*r,e[7]=s*o+h*r,e[8]=l*o-a*r,e[9]=c*o-i*r,e[10]=f*o-u*r,e[11]=h*o-s*r,e},o.SIMD.rotateX=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),e},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[0],i=t[1],u=t[2],s=t[3],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o-l*r,e[1]=i*o-c*r,e[2]=u*o-f*r,e[3]=s*o-h*r,e[8]=a*r+l*o,e[9]=i*r+c*o,e[10]=u*r+f*o,e[11]=s*r+h*o,e},o.SIMD.rotateY=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(i,o))),e},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[0],i=t[1],u=t[2],s=t[3],l=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o+l*r,e[1]=i*o+c*r,e[2]=u*o+f*r,e[3]=s*o+h*r,e[4]=l*o-a*r,e[5]=c*o-i*r,e[6]=f*o-u*r,e[7]=h*o-s*r,e},o.SIMD.rotateZ=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),e},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotation=function(e,t,n){var o,a,i,u=n[0],s=n[1],l=n[2],c=Math.sqrt(u*u+s*s+l*l);return Math.abs(c)<r.EPSILON?null:(c=1/c,u*=c,s*=c,l*=c,o=Math.sin(t),a=Math.cos(t),i=1-a,e[0]=u*u*i+a,e[1]=s*u*i+l*o,e[2]=l*u*i-s*o,e[3]=0,e[4]=u*s*i-l*o,e[5]=s*s*i+a,e[6]=l*s*i+u*o,e[7]=0,e[8]=u*l*i+s*o,e[9]=s*l*i-u*o,e[10]=l*l*i+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},o.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotationTranslation=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=r+r,s=o+o,l=a+a,c=r*u,f=r*s,h=r*l,d=o*s,p=o*l,v=a*l,m=i*u,y=i*s,b=i*l;return e[0]=1-(d+v),e[1]=f+b,e[2]=h-y,e[3]=0,e[4]=f-b,e[5]=1-(c+v),e[6]=p+m,e[7]=0,e[8]=h+y,e[9]=p-m,e[10]=1-(c+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},o.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},o.fromRotationTranslationScale=function(e,t,n,r){var o=t[0],a=t[1],i=t[2],u=t[3],s=o+o,l=a+a,c=i+i,f=o*s,h=o*l,d=o*c,p=a*l,v=a*c,m=i*c,y=u*s,b=u*l,g=u*c,_=r[0],M=r[1],w=r[2];return e[0]=(1-(p+m))*_,e[1]=(h+g)*_,e[2]=(d-b)*_,e[3]=0,e[4]=(h-g)*M,e[5]=(1-(f+m))*M,e[6]=(v+y)*M,e[7]=0,e[8]=(d+b)*w,e[9]=(v-y)*w,e[10]=(1-(f+p))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.fromRotationTranslationScaleOrigin=function(e,t,n,r,o){var a=t[0],i=t[1],u=t[2],s=t[3],l=a+a,c=i+i,f=u+u,h=a*l,d=a*c,p=a*f,v=i*c,m=i*f,y=u*f,b=s*l,g=s*c,_=s*f,M=r[0],w=r[1],x=r[2],S=o[0],E=o[1],I=o[2];return e[0]=(1-(v+y))*M,e[1]=(d+_)*M,e[2]=(p-g)*M,e[3]=0,e[4]=(d-_)*w,e[5]=(1-(h+y))*w,e[6]=(m+b)*w,e[7]=0,e[8]=(p+g)*x,e[9]=(m-b)*x,e[10]=(1-(h+v))*x,e[11]=0,e[12]=n[0]+S-(e[0]*S+e[4]*E+e[8]*I),e[13]=n[1]+E-(e[1]*S+e[5]*E+e[9]*I),e[14]=n[2]+I-(e[2]*S+e[6]*E+e[10]*I),e[15]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n+n,u=r+r,s=o+o,l=n*i,c=r*i,f=r*u,h=o*i,d=o*u,p=o*s,v=a*i,m=a*u,y=a*s;return e[0]=1-f-p,e[1]=c+y,e[2]=h-m,e[3]=0,e[4]=c-y,e[5]=1-l-p,e[6]=d+v,e[7]=0,e[8]=h+m,e[9]=d-v,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.frustum=function(e,t,n,r,o,a,i){var u=1/(n-t),s=1/(o-r),l=1/(a-i);return e[0]=2*a*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*s,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(o+r)*s,e[10]=(i+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*a*2*l,e[15]=0,e},o.perspective=function(e,t,n,r,o){var a=1/Math.tan(t/2),i=1/(r-o);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*i,e[15]=0,e},o.perspectiveFromFieldOfView=function(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(o+a);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-((i-u)*s*.5),e[9]=(o-a)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},o.ortho=function(e,t,n,r,o,a,i){var u=1/(t-n),s=1/(r-o),l=1/(a-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*u,e[13]=(o+r)*s,e[14]=(i+a)*l,e[15]=1,e},o.lookAt=function(e,t,n,a){var i,u,s,l,c,f,h,d,p,v,m=t[0],y=t[1],b=t[2],g=a[0],_=a[1],M=a[2],w=n[0],x=n[1],S=n[2];return Math.abs(m-w)<r.EPSILON&&Math.abs(y-x)<r.EPSILON&&Math.abs(b-S)<r.EPSILON?o.identity(e):(h=m-w,d=y-x,p=b-S,v=1/Math.sqrt(h*h+d*d+p*p),h*=v,d*=v,p*=v,i=_*p-M*d,u=M*h-g*p,s=g*d-_*h,v=Math.sqrt(i*i+u*u+s*s),v?(v=1/v,i*=v,u*=v,s*=v):(i=0,u=0,s=0),l=d*s-p*u,c=p*i-h*s,f=h*u-d*i,v=Math.sqrt(l*l+c*c+f*f),v?(v=1/v,l*=v,c*=v,f*=v):(l=0,c=0,f=0),e[0]=i,e[1]=l,e[2]=h,e[3]=0,e[4]=u,e[5]=c,e[6]=d,e[7]=0,e[8]=s,e[9]=f,e[10]=p,e[11]=0,e[12]=-(i*m+u*y+s*b),e[13]=-(l*m+c*y+f*b),e[14]=-(h*m+d*y+p*b),
e[15]=1,e)},o.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],b=e[15],g=t[0],_=t[1],M=t[2],w=t[3],x=t[4],S=t[5],E=t[6],I=t[7],F=t[8],k=t[9],O=t[10],D=t[11],P=t[12],R=t[13],C=t[14],A=t[15];return Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-_)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-w)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(u-x)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(s-S)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-E)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-I)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-F)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(h-k)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-O)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-D)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(v-P)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(m-R)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(y-C)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(b-A)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(A))},e.exports=o},function(e,t,n){var r=n(12),o=n(15),a=n(18),i=n(19),u={};u.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.rotationTo=function(){var e=a.create(),t=a.fromValues(1,0,0),n=a.fromValues(0,1,0);return function(r,o,i){var s=a.dot(o,i);return s<-.999999?(a.cross(e,t,o),a.length(e)<1e-6&&a.cross(e,n,o),a.normalize(e,e),u.setAxisAngle(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(a.cross(e,o,i),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var e=o.create();return function(t,n,r,o){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=o[0],e[4]=o[1],e[7]=o[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],u.normalize(t,u.fromMat3(t,e))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},u.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!=r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},u.add=i.add,u.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return e[0]=r*c+i*u+o*l-a*s,e[1]=o*c+i*s+a*u-r*l,e[2]=a*c+i*l+r*s-o*u,e[3]=i*c-r*u-o*s-a*l,e},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(e,t,n){n*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+i*u,e[1]=o*s+a*u,e[2]=a*s-o*u,e[3]=i*s-r*u,e},u.rotateY=function(e,t,n){n*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s-a*u,e[1]=o*s+i*u,e[2]=a*s+r*u,e[3]=i*s-o*u,e},u.rotateZ=function(e,t,n){n*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+o*u,e[1]=o*s-r*u,e[2]=a*s+i*u,e[3]=i*s-a*u,e},u.calculateW=function(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(e,t,n,r){var o,a,i,u,s,l=t[0],c=t[1],f=t[2],h=t[3],d=n[0],p=n[1],v=n[2],m=n[3];return a=l*d+c*p+f*v+h*m,a<0&&(a=-a,d=-d,p=-p,v=-v,m=-m),1-a>1e-6?(o=Math.acos(a),i=Math.sin(o),u=Math.sin((1-r)*o)/i,s=Math.sin(r*o)/i):(u=1-r,s=r),e[0]=u*l+s*d,e[1]=u*c+s*p,e[2]=u*f+s*v,e[3]=u*h+s*m,e},u.sqlerp=function(){var e=u.create(),t=u.create();return function(n,r,o,a,i,s){return u.slerp(e,r,i,s),u.slerp(t,o,a,s),u.slerp(n,e,t,2*s*(1-s)),n}}(),u.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*n+r*r+o*o+a*a,u=i?1/i:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-o*u,e[3]=a*u,e},u.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*a+a]-t[3*i+i]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*a+i]-t[3*i+a])*n,e[a]=(t[3*a+o]+t[3*o+a])*n,e[i]=(t[3*i+o]+t[3*o+i])*n}return e},u.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,e.exports=u},function(e,t,n){var r=n(12),o={};o.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.fromValues=function(e,t,n){var o=new r.ARRAY_TYPE(3);return o[0]=e,o[1]=t,o[2]=n,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],u=n[1],s=n[2];return e[0]=o*s-a*u,e[1]=a*i-r*s,e[2]=r*u-o*i,e},o.lerp=function(e,t,n,r){var o=t[0],a=t[1],i=t[2];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e[2]=i+r*(n[2]-i),e},o.hermite=function(e,t,n,r,o,a){var i=a*a,u=i*(2*a-3)+1,s=i*(a-2)+a,l=i*(a-1),c=i*(3-2*a);return e[0]=t[0]*u+n[0]*s+r[0]*l+o[0]*c,e[1]=t[1]*u+n[1]*s+r[1]*l+o[1]*c,e[2]=t[2]*u+n[2]*s+r[2]*l+o[2]*c,e},o.bezier=function(e,t,n,r,o,a){var i=1-a,u=i*i,s=a*a,l=u*i,c=3*a*u,f=3*s*i,h=s*a;return e[0]=t[0]*l+n[0]*c+r[0]*f+o[0]*h,e[1]=t[1]*l+n[1]*c+r[1]*f+o[1]*h,e[2]=t[2]*l+n[2]*c+r[2]*f+o[2]*h,e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,a=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=o*t,e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,e[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,e[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1],a=t[2];return e[0]=r*n[0]+o*n[3]+a*n[6],e[1]=r*n[1]+o*n[4]+a*n[7],e[2]=r*n[2]+o*n[5]+a*n[8],e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*a-s*o,f=l*o+s*r-i*a,h=l*a+i*o-u*r,d=-i*r-u*o-s*a;return e[0]=c*l+d*-i+f*-s-h*-u,e[1]=f*l+d*-u+h*-i-c*-s,e[2]=h*l+d*-s+c*-u-f*-i,e},o.rotateX=function(e,t,n,r){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},o.rotateY=function(e,t,n,r){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},o.rotateZ=function(e,t,n,r){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,a,i){var u,s;for(n||(n=3),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],a(e,e,i),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),o.angle=function(e,t){var n=o.fromValues(e[0],e[1],e[2]),r=o.fromValues(t[0],t[1],t[2]);o.normalize(n,n),o.normalize(r,r);var a=o.dot(n,r);return a>1?0:Math.acos(a)},o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=t[0],u=t[1],s=t[2];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))},e.exports=o},function(e,t,n){var r=n(12),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=o,a},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+a*a)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+o*o+a*a},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=n*i,e[1]=r*i,e[2]=o*i,e[3]=a*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,n,r){var o=t[0],a=t[1],i=t[2],u=t[3];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e[2]=i+r*(n[2]-i),e[3]=u+r*(n[3]-u),e},o.random=function(e,t){return t=t||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,e[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,e[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,e[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*a-s*o,f=l*o+s*r-i*a,h=l*a+i*o-u*r,d=-i*r-u*o-s*a;return e[0]=c*l+d*-i+f*-s-h*-u,e[1]=f*l+d*-u+h*-i-c*-s,e[2]=h*l+d*-s+c*-u-f*-i,e[3]=t[3],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,a,i){var u,s;for(n||(n=4),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],a(e,e,i),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},e.exports=o},function(e,t,n){var r=n(12),o={};o.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,n){return e[0]=t,e[1]=n,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},o.lerp=function(e,t,n,r){var o=t[0],a=t[1];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},o.transformMat2=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e},o.transformMat2d=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[3]*o+n[6],e[1]=n[1]*r+n[4]*o+n[7],e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,a,i){var u,s;for(n||(n=2),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],a(e,e,i),t[u]=e[0],t[u+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},o.equals=function(e,t){var n=e[0],o=e[1],a=t[0],i=t[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-i)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))},e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(22),l=r(s),c=n(1),f=r(c),h=n(23),d=r(h),p=n(24),v=r(p),m=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},y=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.loader=new f.default,e}return i(t,e),u(t,[{key:"$treeInitialized",value:function(){this.attributes.get("autoStart").Value&&this._autoStart(),this._documentResolver()}},{key:"$awake",value:function(){var e=this;this.companion.set(l.default.ns(this.name.ns)("loader"),this.loader),this.loader.register(new Promise(function(t){e._documentResolver=t}));var t=this.companion.get("canvasContainer");if(this.getValue("enableLoader")){var n=document.createElement("div");n.innerHTML=v.default,n.style.width=n.style.height="100%",t.appendChild(n),this._loaderElement=n}}},{key:"_autoStart",value:function(){return m(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loader.promise;case 2:this._loaderElement&&this._loaderElement.remove(),this.node.emit("asset-load-completed"),this.tree("goml").setAttribute("loopEnabled",!0);case 5:case"end":return e.stop()}},e,this)}))}}]),t}(d.default);t.default=y,y.attributes={loadingProgress:{defaultValue:0,converter:"Number"},autoStart:{defaultValue:!0,converter:"Boolean"},anableLoader:{defaultValue:!1,converter:"Boolean"}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Node.Component},function(e,t){e.exports='<div style="width:100%;height:100%;position: relative;">\n    <div style="width: 55px;height: 55px;border-radius: 100%;border: 5px solid #381794;border-right-color: #FC659D;animation: rotate 1s linear infinite;position: absolute;top: 0;left: 0;right: 0;bottom: 0;margin: auto;"></div>\n</div>\n<style type="text/css">\n    @keyframes rotate {\n        from {\n            transform: rotate(0deg);\n        }\n        to {\n            transform: rotate(360deg);\n        }\n    }\n</style>\n'},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(7),l=r(s),c=n(26),f=r(c),h=n(23),d=r(h),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$awake",value:function(){this.containedScene=t._findContainedScene(this.node);var e=this.camera=new l.default;this.transform=this.node.getComponent("Transform"),this.$transformUpdated(this.transform),this.getAttribute("far").addObserver(function(t){e.setFar(t.Value)},!0),this.getAttribute("near").addObserver(function(t){e.setNear(t.Value)},!0),this.getAttribute("fovy").addObserver(function(t){e.setFovy(t.Value)},!0),this.getAttribute("aspect").addObserver(function(t){e.setAspect(t.Value)},!0),this.getAttribute("autoAspect").boundTo("_autoAspect")}},{key:"updateContainedScene",value:function(e){this.containedScene&&this.containedScene.updateScene(e)}},{key:"renderScene",value:function(e){this.containedScene&&(this._justifyAspect(e),e.sceneDescription=this.containedScene.sceneDescription,e.defaultTexture=this.companion.get("defaultTexture"),this.containedScene.node.broadcastMessage("render",e))}},{key:"$transformUpdated",value:function(e){this.camera&&this.camera.updateTransform(e)}},{key:"_justifyAspect",value:function(e){if(this._autoAspect){var t=e.viewport.Width/e.viewport.Height;this._aspectCache!==t&&(this.setValue("aspect",t),this._aspectCache=t)}}}],[{key:"_findContainedScene",value:function(e){if(e.parent){var n=e.parent.getComponent("Scene");return n&&n instanceof f.default?n:t._findContainedScene(e.parent)}return null}}]),t}(d.default);t.default=p,p.attributes={fovy:{defaultValue:"45d",converter:"Angle2D"},near:{defaultValue:.01,converter:"Number"},far:{defaultValue:200,converter:"Number"},aspect:{defaultValue:1.6,converter:"Number"},autoAspect:{defaultValue:!0,converter:"Boolean"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(23),l=r(s),c=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.sceneDescription={},e}return i(t,e),u(t,[{key:"updateScene",value:function(e){this._lastUpdateIndex!==e&&(this.node.broadcastMessage("update",this.sceneDescription),this._lastUpdateIndex=e)}}]),t}(l.default);t.default=c,c.attributes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(22),c=r(l),f=n(28),h=r(f),d=n(31),p=r(d),v=n(23),m=r(v),y=c.default.ns("HTTP://GRIMOIRE.GL/NS/DEFAULT");!function(e){e[e.Aspect=0]="Aspect",e[e.Fit=1]="Fit",e[e.Manual=2]="Manual"}(u||(u={}));var b=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),s(t,[{key:"$awake",value:function(){var e=this;this._scriptTag=this.companion.get("scriptElement"),this._isContainedInBody(this._scriptTag)&&this._generateCanvas(this._scriptTag),this.attributes.get("width").addObserver(function(t){e._resize()}),this.attributes.get("height").addObserver(function(t){e._resize()})}},{key:"_generateCanvas",value:function(e){var t=this;this.canvas=document.createElement("canvas"),window.addEventListener("resize",function(){return t._onWindowResize()}),this._configureCanvas(this.canvas,e);var n=this._getContext(this.canvas);return this._defaultTexture=new h.default(n),this._defaultTexture.update(0,1,1,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),this.companion.set(y("gl"),n),this.companion.set(y("canvasElement"),this.canvas),this.companion.set(y("GLExtRequestor"),new p.default(n)),this.companion.set(y("defaultTexture"),this._defaultTexture),this.canvas}},{key:"_resize",value:function(e){var t=(this.companion.get("canvasElement"),this.getValue("width")),n=this.getValue("height");if(this._widthMode=this._asResizeMode(t),this._heightMode=this._asResizeMode(n),this._widthMode===this._heightMode&&this._widthMode===u.Aspect)throw new Error("Width and height could not have aspect mode in same time!");this._widthMode===u.Aspect&&(this._ratio=t.aspect),this._heightMode===u.Aspect&&(this._ratio=n.aspect),this._widthMode===u.Manual&&this._applyManualWidth(t.size,e),this._heightMode===u.Manual&&this._applyManualHeight(n.size,e),this._onWindowResize(e)}},{key:"_onWindowResize",value:function(e){var t=this._getParentSize();this._widthMode===u.Fit&&this._applyManualWidth(t.width,e),this._heightMode===u.Fit&&this._applyManualHeight(t.height,e)}},{key:"_applyManualWidth",value:function(e,t){e!==this.canvas.width&&(this.canvas.width=e,this._canvasContainer.style.width=e+"px",t||this.node.broadcastMessage(1,"resizeCanvas"),this._heightMode===u.Aspect&&this._applyManualHeight(e/this._ratio,t))}},{key:"_applyManualHeight",value:function(e,t){e!==this.canvas.height&&(this.canvas.height=e,this._canvasContainer.style.height=e+"px",t||this.node.broadcastMessage(1,"resizeCanvas"),this._widthMode===u.Aspect&&this._applyManualWidth(e*this._ratio,t))}},{key:"_getParentSize",value:function(){var e=this._canvasContainer.parentElement,t=e.getBoundingClientRect();return t}},{key:"_asResizeMode",value:function(e){return"fit"===e.mode?u.Fit:"aspect"===e.mode?u.Aspect:u.Manual}},{key:"_configureCanvas",value:function(e,t){e.style.position="absolute",e.style.top="0px",e.style.left="0px",this._canvasContainer=document.createElement("div"),this._canvasContainer.style.position="relative",this._canvasContainer.style.overflow="hidden",this._canvasContainer.appendChild(e),this.getValue("containerId")&&(this._canvasContainer.id=this.getValue("containerId")),this.getValue("containerClass")&&(this._canvasContainer.className=this.getValue("containerClass")),this.companion.set(y("canvasContainer"),this._canvasContainer),t.parentElement.insertBefore(this._canvasContainer,t.nextSibling),this._resize(!0)}},{key:"_getContext",value:function(e){var t=e.getContext("webgl");return t||(t=e.getContext("webgl-experimental")),t}},{key:"_isContainedInBody",value:function(e){return!!e.parentElement&&("BODY"===e.parentNode.nodeName||this._isContainedInBody(e.parentElement))}}]),t}(m.default);b.attributes={width:{defaultValue:"fit",converter:"CanvasSize"},height:{defaultValue:480,converter:"CanvasSize"},containerId:{defaultValue:void 0,converter:"String"},containerClass:{defaultValue:"gr-container",converter:"String"}},t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r);
},l=n(29),c=r(l),f=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._texParameterChanged=!0,n._magFilter=WebGLRenderingContext.LINEAR,n._minFilter=WebGLRenderingContext.LINEAR,n._wrapS=WebGLRenderingContext.REPEAT,n._wrapT=WebGLRenderingContext.REPEAT,n.texture=e.createTexture(),n}return i(t,e),u(t,[{key:"update",value:function(e,t,n,r,o,a,i,u){this.gl.bindTexture(WebGLRenderingContext.TEXTURE_2D,this.texture);var s=!1,l=void 0,c=void 0,f=void 0;void 0===n?(s=!!t,l=e):(f=e,c=t),void 0===n?l instanceof HTMLImageElement?this.gl.texImage2D(WebGLRenderingContext.TEXTURE_2D,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,this._justifyImage(l)):l instanceof HTMLCanvasElement?this.gl.texImage2D(WebGLRenderingContext.TEXTURE_2D,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,this._justifyCanvas(l)):l instanceof HTMLVideoElement&&this.gl.texImage2D(WebGLRenderingContext.TEXTURE_2D,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,this._justifyVideo(l)):(void 0===i&&(i=null),this.gl.texImage2D(WebGLRenderingContext.TEXTURE_2D,f,o,c,n,r,o,a,i)),this.valid=!0}},{key:"register",value:function(e){this.gl.activeTexture(WebGLRenderingContext.TEXTURE0+e),this.gl.bindTexture(WebGLRenderingContext.TEXTURE_2D,this.texture),this._texParameterChanged&&this._updateTexParameter()}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.gl.deleteTexture(this.texture)}},{key:"_justifyImage",value:function(e){var t=e.naturalWidth,n=e.naturalHeight,r=Math.pow(2,Math.log(Math.min(t,n))/Math.LN2|0);if(t!==n||t!==r){var o=document.createElement("canvas");return o.height=o.width=r,o.getContext("2d").drawImage(e,0,0,t,n,0,0,r,r),o}return e}},{key:"_justifyCanvas",value:function(e){var t=e.width,n=e.height,r=Math.pow(2,Math.log(Math.min(t,n))/Math.LN2|0);return t===n&&t===r||(e.height=e.width=r),e}},{key:"_justifyVideo",value:function(e){var t=e.videoWidth,n=e.videoHeight,r=Math.pow(2,Math.log(Math.min(t,n))/Math.LN2|0);if(t!==n||t!==r){var o=document.createElement("canvas");return o.height=o.width=r,o.getContext("2d").drawImage(e,0,0,t,n,0,0,r,r),o}return e}},{key:"_updateTexParameter",value:function(){this.gl.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGLRenderingContext.TEXTURE_MIN_FILTER,this._minFilter),this.gl.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGLRenderingContext.TEXTURE_MAG_FILTER,this._magFilter),this.gl.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGLRenderingContext.TEXTURE_WRAP_S,this._wrapS),this.gl.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGLRenderingContext.TEXTURE_WRAP_T,this._wrapT),this._texParameterChanged=!1}},{key:"magFilter",get:function(){return this._magFilter},set:function(e){this._magFilter!==e&&(this._texParameterChanged=!0,this._magFilter=e)}},{key:"minFilter",get:function(){return this._minFilter},set:function(e){this._minFilter!==e&&(this._texParameterChanged=!0,this._minFilter=e)}},{key:"wrapS",get:function(){return this._wrapS},set:function(e){this._wrapS!==e&&(this._texParameterChanged=!0,this._wrapS=e)}},{key:"wrapT",get:function(){return this._wrapT},set:function(e){this._wrapT!==e&&(this._texParameterChanged=!0,this._wrapT=e)}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(30),l=r(s),c=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.gl=e,n.destroyed=!1,n.valid=!1,n}return i(t,e),u(t,[{key:"destroy",value:function(){this.destroyed=!0}},{key:"valid",get:function(){return this._valid},set:function(e){var t=this;this._valid!==e&&(this._valid=e,this._valid?this._validResolve(this):this.validPromise=new Promise(function(e){t._validResolve=e}))}}]),t}(l.default);t.default=c},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Base.IDObject},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){n(this,e),this.gl=t,this.extensions={},this._readyExtensions={},this._resolveRequested(),e._requestObserver.push(this._resolveExtensionSafely)}return r(e,[{key:"_resolveRequested",value:function(){var t=this;e._requestedExtensions.forEach(function(e){t._resolveExtensionSafely(e.extensionName)})}},{key:"_resolveExtensionSafely",value:function(t){var n=e._requestedExtensions[e._requestIndexOf(t)];if(!this._resolveExtension(n.extensionName)&&n.isNecessary)throw new Error("A WebGL extension '"+n.extensionName+"' was requested. But that is not supported on this device.")}},{key:"_resolveExtension",value:function(t){if(this._readyExtensions[t])return!0;var n=void 0;return n="undefined"==typeof e._customExtensionResolvers[t]?this.extensions[t]=this.gl.getExtension(t):this.extensions[t]=e._customExtensionResolvers[t](this.gl),this._readyExtensions[t]=void 0!==this.extensions[t],!!this._readyExtensions[t]}}],[{key:"request",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e._requestIndexOf(t);r>-1&&n?e._requestedExtensions[r]={extensionName:t,isNecessary:n}:r===-1&&e._requestedExtensions.push({extensionName:t,isNecessary:n}),e._requestObserver.forEach(function(e){return e(t)})}},{key:"_requestIndexOf",value:function(t){for(var n=0;n<e._requestedExtensions.length;n++)if(e._requestedExtensions[n].extensionName===t)return n;return-1}}]),e}();t.default=o,o._requestedExtensions=[],o._customExtensionResolvers={},o._requestObserver=[],o._customExtensionResolvers.WEBGL_color_buffer_float=function(e){var t=void 0;if(null===e.getExtension("WEBGL_color_buffer_float")){var n=e.createFramebuffer(),r=e.createTexture();e.bindFramebuffer(e.FRAMEBUFFER,n),e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.FLOAT,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),t=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE,e.deleteTexture(r),e.deleteFramebuffer(n)}else t=!0;return t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(23),l=r(s),c=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._fullscreen=!1,e}return i(t,e),u(t,[{key:"$awake",value:function(){var e=this;this.getAttribute("fullscreen").addObserver(function(t){e._fullscreen!==t.Value&&(e._fullscreen=t.Value,e._switchFullscreen())})}},{key:"_switchFullscreen",value:function(){this._fullscreen?this.requestFullscreen(this.companion.get("canvasContainer")):this.exitFullscreen()}},{key:"requestFullscreen",value:function(e){if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.msRequestFullscreen)e.msRequestFullscreen();else{if(!e.requestFullscreen)return void console.error("ご利用のブラウザはフルスクリーン操作に対応していません");e.requestFullscreen()}}},{key:"exitFullscreen",value:function(){document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen()}}]),t}(l.default);t.default=c,c.attributes={fullscreen:{converter:"Boolean",defaultValue:!1}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(34),l=r(s),c=n(23),f=r(c),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$mount",value:function(){var e=this.getValue("type");if(e){var t=this.companion.get("GeometryFactory"),n=l.default.factoryArgumentDeclarations[e],r={};for(var o in n)this.__addAtribute(o,n[o]),r[o]=this.getValue(o);this.geometry=t.instanciate(e,r);var a=this.companion.get("GeometryRegistory"),i=this.getValue("name");if(!i)throw new Error("Name was not specified");a.addGeometry(i,this.geometry)}}}]),t}(f.default);t.default=h,h.attributes={type:{converter:"String",defaultValue:void 0},name:{converter:"String",defaultValue:void 0}}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){n(this,e),this.gl=t}return r(e,[{key:"instanciate",value:function(t,n){var r=e.factoryDelegates[t];if(!r)throw new Error("Can not instanciate unknown geometry type "+t);return r(this.gl,n)}},{key:"instanciateAsDefault",value:function(t){var n=e.factoryArgumentDeclarations[t],r={};for(var o in n){var a=n[o];r[o]=a.defaultValue}return this.instanciate(t,r)}}],[{key:"addType",value:function(t,n,r){e.factoryDelegates[t]=r,e.factoryArgumentDeclarations[t]=n}}]),e}();t.default=o,o.factoryDelegates={},o.factoryArgumentDeclarations={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(34),l=r(s),c=n(23),f=r(c),h=n(22),d=r(h),p=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._geometries={},e}return i(t,e),u(t,[{key:"$awake",value:function(){this._factory=new l.default(this.companion.get("gl")),this.companion.set(this.name,this),this.companion.set(d.default.ns(this.name.ns)("GeometryFactory"),this._factory);var e=!0,t=!1,n=void 0;try{for(var r,o=this.getValue("defaultGeometry")[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value;this.addGeometry(a,this._factory.instanciateAsDefault(a))}}catch(e){t=!0,n=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw n}}}},{key:"addGeometry",value:function(e,t){this._geometries[e]=t}},{key:"removeGeometry",value:function(e){this._geometries[e]&&delete this._geometries[e]}},{key:"getGeometry",value:function(e){return this._geometries[e]}}]),t}(f.default);t.default=p,p.attributes={defaultGeometry:{converter:"StringArray",defaultValue:["quad","cube","sphere"]}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(23),l=r(s),c=n(9),f=r(c),h=n(10),d=r(h),p=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._isFirstCall=!0,e}return i(t,e),u(t,[{key:"$awake",value:function(){this._canvasContainer=this.companion.get("canvasContainer"),this._currentTransform=this.node.getComponent("Transform")}},{key:"$mount",value:function(){this._canvasContainer=this.companion.get("canvasContainer"),this._currentTransform=this.node.getComponent("Transform")}},{key:"$treeInitialized",value:function(){var e=this;this.getAttribute("targetRenderer").addObserver(function(t){e._rendererQuery!==t.Value&&e._onRendererChanged()},!0),this.getAttribute("htmlQuery").addObserver(function(t){e._onQueryChanged(t.Value)},!0)}},{key:"$render",value:function(e){if(this._isFirstCall&&(this._onRendererChanged(),this._isFirstCall=!1),this._queriedElement&&e.caller.node===this._targetNode){var t=e.viewport,n=d.default.transform(this._currentTransform.calcPVM(e.camera.camera),new f.default(0,0,0,1)),r={x:n.X/n.W,y:n.Y/n.W,z:n.Z/n.W};if(r.z>=-1&&r.z<=1){var o={x:t.Left+(r.x+1)/2*t.Width,y:t.Top+(r.y+1)/2*t.Height};this._queriedElement.style.visibility="visible",this._queriedElement.style.left=o.x+"px",this._queriedElement.style.bottom=o.y+"px"}else this._queriedElement.style.visibility="hidden"}}},{key:"_restoreDefault",value:function(){this._canvasContainer.removeChild(this._queriedElement),this._parentCache.appendChild(this._queriedElement);var e=this._queriedElement.style,t=this._styleCache;e.position=t.position,e.left=t.left,e.bottom=t.bottom,e.visibility=t.visibility}},{key:"_beginTrack",value:function(){this._parentCache.removeChild(this._queriedElement),this._canvasContainer.appendChild(this._queriedElement),this._queriedElement.style.position="absolute"}},{key:"_onRendererChanged",value:function(){var e=this,t=!1;this.tree(this.getValue("targetRenderer")).forEach(function(n){return!!t||(e._targetNode=n,void(t=!0))})}},{key:"_onQueryChanged",value:function(e){var t=void 0;if(e&&""!==e&&(t=document.querySelectorAll(e)),this._queriedElement&&this._restoreDefault(),t&&0!==t.length){this._queriedElement=t.item(0);var n=this._queriedElement.style;this._styleCache={position:n.position,visibility:n.visibility,left:n.left,bottom:n.bottom},this._parentCache=this._queriedElement.parentElement,this._beginTrack()}else this._queriedElement=void 0,this._parentCache=void 0}}]),t}(l.default);t.default=p,p.attributes={htmlQuery:{defaultValue:void 0,converter:"String"},targetRenderer:{defaultValue:"render-scene",converter:"String"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(23),l=r(s),c=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._loopActions=[],e._loopIndex=0,e}return i(t,e),u(t,[{key:"$awake",value:function(){var e=this;this.attributes.get("loopEnabled").addObserver(function(t){e._begin()}),this._registerNextLoop=window.requestAnimationFrame?function(){window.requestAnimationFrame(e._loop.bind(e))}:function(){window.setTimeout(e._loop.bind(e),1e3/60)}}},{key:"register",value:function(e,t){this._loopActions.push({action:e,priorty:t}),this._loopActions.sort(function(e,t){return e.priorty-t.priorty})}},{key:"_begin",value:function(){this._registerNextLoop()}},{key:"_loop",value:function(){var e=this;this._loopActions.forEach(function(t){return t.action(e._loopIndex)}),this._loopIndex++,this._registerNextLoop()}}]),t}(l.default);c.attributes={loopEnabled:{defaultValue:!1,converter:"Boolean"}},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(39),c=r(l),f=n(23),h=r(f),d=n(29),p=r(d),v=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},m=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.materialArgs={},e}return i(t,e),s(t,[{key:"$mount",value:function(){var e=this.getValue("type");e&&(this.materialPromise=this.companion.get("MaterialFactory").instanciate(e),this._registerAttributes())}},{key:"_registerAttributes",value:function(){return v(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.materialPromise;case 2:return this.material=e.sent,t=[],this.material.pass.forEach(function(e){if(e instanceof c.default){var r=function(){var r=e,o=function(e){n.__addAtribute(e,r.sort.gomlAttributes[e]),n.attributes.get(e).addObserver(function(t){n.materialArgs[e]=t.Value});var o=n.materialArgs[e]=n.getValue(e);o instanceof p.default&&t.push(o.validPromise)};for(var a in r.sort.gomlAttributes)o(a);var i=!0,s=!1,l=void 0;try{for(var c,f=function(){var e=c.value;switch(e.type){case"int":return n.__addAtribute(e.attributeName,{converter:"Number",defaultValue:e.default}),n.getAttribute(e.attributeName).addObserver(function(t){r.setMacro(e.macroName,""+Math.floor(t.Value))},!0),{v:{v:void 0}};case"bool":return n.__addAtribute(e.attributeName,{converter:"Boolean",defaultValue:e.default}),n.getAttribute(e.attributeName).addObserver(function(t){r.setMacro(e.macroName,t.Value)},!0),{v:{v:void 0}};default:throw new Error("Unexpected macro type "+e.type)}},h=r.sort.macros[Symbol.iterator]();!(i=(c=h.next()).done);i=!0){var d=f();if("object"===("undefined"==typeof d?"undefined":u(d)))return d.v}}catch(e){s=!0,l=e}finally{try{!i&&h.return&&h.return()}finally{if(s)throw l}}}();if("object"===("undefined"==typeof r?"undefined":u(r)))return r.v}}),e.next=7,Promise.all(t);case 7:this.ready=!0;case 8:case"end":return e.stop()}},e,this)}))}}]),t}(h.default);t.default=m,m.attributes={type:{converter:"String",defaultValue:void 0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(40),l=r(s),c=n(41),f=r(c),h=n(43),d=r(h),p=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.factory=e,r.sort=n,r._macroValues={},r.attributes=Object.keys(n.attributes),r.gl=e.gl,r.fs=new l.default(r.gl,WebGLRenderingContext.FRAGMENT_SHADER),r.vs=new l.default(r.gl,WebGLRenderingContext.VERTEX_SHADER),r.program=new f.default(r.gl),e.macro.addObserver(function(){r._updateProgram()}),r._updateProgram(),r}return i(t,e),u(t,[{key:"setMacro",value:function(e,t){"boolean"==typeof t?this._macroValues[e]=t?"":null:this._macroValues[e]=t,this._updateProgram()}},{key:"getMacro",value:function(e){return this._macroValues[e]}},{key:"__beforeDraw",value:function(e){for(var t in this.sort.gomlAttributes)this.sort.gomlAttributes[t].register(this.program.uniforms,e);var n=!0,r=!1,o=void 0;try{for(var a,i=this.sort.systemRegisterers[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value;u(this.program.uniforms,e)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}var s=!0,l=!1,c=void 0;try{for(var f,h=this.sort.configurator[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var d=f.value;d(this.gl)}}catch(e){l=!0,c=e}finally{try{!s&&h.return&&h.return()}finally{if(l)throw c}}}},{key:"_updateProgram",value:function(){this.fs.update(this._generateShaderCode("FS")),this.vs.update(this._generateShaderCode("VS")),this.program.update([this.vs,this.fs])}},{key:"_generateShaderCode",value:function(e){return"#define "+e+"\n"+this.factory.shaderHeader+"\n"+this.factory.macro.macroString+"\n"+this._getMaterialMacro()+"\n/*BEGINNING OF USER CODE*/\n"+this.sort.shaderSource}},{key:"_getMaterialMacro",value:function(){var e="";for(var t in this._macroValues)null!==this._macroValues[t]&&(e+="#define "+t+" "+this._macroValues[t]+"\n");return e}}]),t}(d.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(29),c=r(l),f=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.type=n,i.sourceCode=r,i.shader=e.createShader(n),r&&i.update(r),i}return i(t,e),u(t,[{key:"update",value:function(e){if(this.gl.shaderSource(this.shader,e),this.gl.compileShader(this.shader),!this.gl.getShaderParameter(this.shader,WebGLRenderingContext.COMPILE_STATUS))throw new Error("Compiling shader failed.\nSourceCode:\n"+e+"\n\nErrorCode:"+this.gl.getShaderInfoLog(this.shader));this.sourceCode=e,this.valid=!0}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.gl.deleteShader(this.shader)}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(42),c=r(l),f=n(29),h=r(f),d=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._uniformLocations={},n._attributeLocations={},n.uniforms=new c.default(n),n.program=e.createProgram(),n}return i(t,e),u(t,[{key:"update",value:function(e){var t=this;if(this.valid){var n=this.gl.getAttachedShaders(this.program);n.forEach(function(e){return t.gl.detachShader(t.program,e)})}if(e.forEach(function(e){t.gl.attachShader(t.program,e.shader)}),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,WebGLRenderingContext.LINK_STATUS)){var r=this.gl.getProgramInfoLog(this.program);throw new Error("LINK FAILED\n"+r)}this.valid=!0}},{key:"use",value:function(){this.gl.useProgram(this.program),this.uniforms.onUse()}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.gl.deleteProgram(this.program)}},{key:"findAttributeLocation",value:function(e){return"undefined"==typeof this._attributeLocations[e]?(this._attributeLocations[e]=this.gl.getAttribLocation(this.program,e),this._safeEnableVertexAttribArray(this._attributeLocations[e]),this._attributeLocations[e]):this._attributeLocations[e]}},{key:"findUniformLocation",value:function(e){return"undefined"==typeof this._uniformLocations[e]?this._uniformLocations[e]=this.gl.getUniformLocation(this.program,e):this._uniformLocations[e]}},{key:"_safeEnableVertexAttribArray",value:function(e){e<0||this.gl.enableVertexAttribArray(e)}}]),t}(h.default);t.default=d},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){n(this,e),this.program=t,this._currentTextureRegister=0,this._gl=t.gl}return r(e,[{key:"uniformBool",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform1i(e,t?1:0)})}},{key:"uniformMatrix",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniformMatrix4fv(e,!1,t.rawElements)})}},{key:"uniformFloat",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform1f(e,t)})}},{key:"uniformFloatArray",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform1fv(e,t)})}},{key:"uniformInt",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform1i(e,t)})}},{key:"uniformVector2",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform2f(e,t.X,t.Y)})}},{key:"uniformVector2Array",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform2fv(e,t)})}},{key:"uniformVector3",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform3f(e,t.X,t.Y,t.Z)})}},{key:"uniformVector3Array",value:function(e,t){
var n=this;this._pass(e,function(e){return n._gl.uniform3fv(e,t)})}},{key:"uniformColor3",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform3f(e,t.R,t.G,t.B)})}},{key:"uniformVector4",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform4f(e,t.X,t.Y,t.Z,t.W)})}},{key:"uniformVector4Array",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform4fv(e,t)})}},{key:"uniformColor4",value:function(e,t){var n=this;this._pass(e,function(e){return n._gl.uniform4f(e,t.R,t.G,t.B,t.A)})}},{key:"uniformTexture2D",value:function(e,t){t.valid?(t.register(this._currentTextureRegister),this.uniformInt(e,this._currentTextureRegister),this._currentTextureRegister++):console.warn("The texture assigned to '"+e+"' is not valid.")}},{key:"onUse",value:function(){this._currentTextureRegister=0}},{key:"_pass",value:function(e,t){var n=this.program.findUniformLocation(e);n&&t(n)}}]),e}();t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this.attributes=[]}return r(e,[{key:"draw",value:function(e){this.program&&(this.program.use(),this.__beforeDraw(e),e.geometry.draw(e.targetBuffer,this.attributes,this.program,e.drawCount,e.drawOffset))}},{key:"__beforeDraw",value:function(e){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(29),c=r(l),f=n(39),h=r(f),d=n(23),p=r(d),v=n(22),m=r(v),y=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},b=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.materialArgs={},e.ready=!1,e.useMaterial=!1,e}return i(t,e),s(t,[{key:"$mount",value:function(){this.getAttribute("material").addObserver(this._onMaterialChanged),this.companion.get("loader").register(this._onMaterialChanged())}},{key:"_onMaterialChanged",value:function(){return y(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getValue("material"),void 0!==t){e.next=4;break}return this.useMaterial=!1,e.abrupt("return");case 4:this.useMaterial=!0,this._materialComponent?this._prepareExternalMaterial(t):this._prepareInternalMaterial(t);case 6:case"end":return e.stop()}},e,this)}))}},{key:"_prepareExternalMaterial",value:function(e){return y(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.companion.get("loader"),n.register(e),t.next=4,e;case 4:r=t.sent,this.material=r,this.materialArgs=this._materialComponent.materialArgs,this.ready=!0;case 8:case"end":return t.stop()}},t,this)}))}},{key:"_prepareInternalMaterial",value:function(e){return y(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.companion.get("loader"),n.register(e),e){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e;case 6:r=t.sent,o=[],r.pass.forEach(function(e){if(e instanceof h.default){var t=function(){var t=e,n=function(e){var n=t.sort.gomlAttributes[e];a.__addAtribute(e,n),a.getAttribute(e).addObserver(function(t){a.materialArgs[e]=t.Value});var r=a.materialArgs[e]=a.getValue(e);r instanceof c.default&&o.push(r.validPromise)};for(var r in t.sort.gomlAttributes)n(r);var i=!0,s=!1,l=void 0;try{for(var f,h=function(){var e=f.value;switch(e.type){case"int":return a.__addAtribute(e.attributeName,{converter:"Number",defaultValue:e.default}),a.getAttribute(e.attributeName).addObserver(function(n){t.setMacro(e.macroName,""+Math.floor(n.Value))},!0),{v:{v:void 0}};case"bool":return a.__addAtribute(e.attributeName,{converter:"Boolean",defaultValue:e.default}),a.getAttribute(e.attributeName).addObserver(function(n){t.setMacro(e.macroName,n.Value)},!0),{v:{v:void 0}}}},d=t.sort.macros[Symbol.iterator]();!(i=(f=d.next()).done);i=!0){var p=h();if("object"===("undefined"==typeof p?"undefined":u(p)))return p.v}}catch(e){s=!0,l=e}finally{try{!i&&d.return&&d.return()}finally{if(s)throw l}}}();if("object"===("undefined"==typeof t?"undefined":u(t)))return t.v}}),Promise.all(o),this.material=r,this.ready=!0;case 12:case"end":return t.stop()}},t,this)}))}}],[{key:"rewriteDefaultMaterial",value:function(e){e!==t._defaultMaterial&&(t._defaultMaterial=e,m.default.componentDeclarations.get("MaterialContainer").attributes.material.defaultValue="new("+e+")")}},{key:"defaultMaterial",get:function(){return this._defaultMaterial}}]),t}(p.default);t.default=b,b.attributes={material:{converter:"Material",defaultValue:"new(unlit)",componentBoundTo:"_materialComponent"}},b._defaultMaterial="unlit"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(46),l=r(s),c=n(23),f=r(c),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$awake",value:function(){if(!this.getValue("typeName")||!this.getValue("src"))throw new Error("type or src cannot be null in material importer");l.default.addSORTMaterialFromURL(this.getValue("typeName"),this.getValue("src"))}}]),t}(f.default);t.default=h,h.attributes={typeName:{defaultValue:void 0,converter:"String"},src:{defaultValue:void 0,converter:"String"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(39),u=r(i),s=n(47),l=r(s),c=n(49),f=r(c),h=n(6),d=r(h),p=n(63),v=r(p),m=n(64),y=r(m),b=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},g=function(){function e(t){o(this,e),this.gl=t,this.shaderHeader=e.defaultShaderHeader,this.macro=new l.default}return a(e,[{key:"instanciate",value:function(t){return b(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.factories[t]){n.next=4;break}return n.abrupt("return",e.factories[t](this));case 4:return n.next=6,this._waitForRegistered(t);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},n,this)}))}},{key:"_waitForRegistered",value:function(t){var n=this;return new Promise(function(r){e._onRegister(t,function(){r(e.factories[t](n))})})}}],[{key:"addMaterialType",value:function(t,n){e.factories[t]=n,e.registerdHandlers[t]&&e.registerdHandlers[t].forEach(function(e){return e()})}},{key:"addSORTMaterial",value:function(t,n){return b(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.default.passInfoFromSORT(n);case 2:o=r.sent,e.addMaterialType(t,function(e){var t=o.map(function(t){return new u.default(e,t)});return new v.default(t)});case 4:case"end":return r.stop()}},r,this)}))}},{key:"addSORTMaterialFromURL",value:function(t,n){return b(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,d.default.resolve(n);case 2:return o=r.sent,r.next=5,e.addSORTMaterial(t,o);case 5:case"end":return r.stop()}},r,this)}))}},{key:"_onRegister",value:function(t,n){e.registerdHandlers[t]?e.registerdHandlers[t].push(n):e.registerdHandlers[t]=[n]}}]),e}();t.default=g,g.defaultShaderHeader=y.default,g.factories={},g.registerdHandlers={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(48),u=r(i),s=function(){function e(){o(this,e),this.macroString="",this._macro={},this._observers=[];for(var t in u.default)this.setValue(t,u.default[t])}return a(e,[{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._macro[e]!==t&&(this._macro[e]=t,this.macroString=this._getMacroString(),this._notifyMacroChanged())}},{key:"getValue",value:function(e){return this._macro[e]}},{key:"addObserver",value:function(e){this._observers.push(e)}},{key:"removeObserver",value:function(e){for(var t=0;t<this._observers.length;t++)this._observers[t]===e&&this._observers.splice(t,1)}},{key:"_getMacroString",value:function(){var e="";for(var t in this._macro)e+=this._genSingleMacroString(t,this._macro[t]);return e}},{key:"_notifyMacroChanged",value:function(){for(var e=0;e<this._observers.length;e++)this._observers[e]()}},{key:"_genSingleMacroString",value:function(e,t){if(void 0===t)throw new Error("Macro value of "+e+" can't be undefined");return null===t?"#define "+e+"\n":"#define "+e+" "+t+"\n"}}]),e}();t.default=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={GRIMOIRE:null,WEBGL_VERSION:"1"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(50),u=r(i),s=function(){function e(){o(this,e)}return a(e,null,[{key:"passInfoFromSORT",value:function(e){var t=e.split("@Pass");return t.splice(0,1),Promise.all(t.map(function(e){return u.default.parse(e)}))}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(51),u=r(i),s=n(55),l=r(s),c=n(56),f=r(c),h=n(58),d=r(h),p=n(60),v=r(p),m=n(61),y=r(m),b=n(62),g=r(b),_=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},M=function(){function e(){o(this,e)}return a(e,null,[{key:"parse",value:function(t){return _(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r={origin:t,info:{shaderSource:t,uniforms:{},attributes:{},macros:[],configurator:[],systemRegisterers:[],gomlAttributes:{}}},o=0;case 2:if(!(o<e.transformers.length)){n.next=9;break}return n.next=5,e.transformers[o](r);case 5:r=n.sent;case 6:o++,n.next=2;break;case 9:return n.abrupt("return",r.info);case 10:case"end":return n.stop()}},n,this)}))}}]),e}();t.default=M,M.transformers=[l.default,f.default,(0,d.default)("uniform"),(0,d.default)("attribute"),y.default,g.default,v.default,u.default]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return{converter:e,defaultValue:t,register:n}}function a(e,t){return e.variableAnnotation.default?e.variableAnnotation.default:t}function i(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,i,u,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=e.info.gomlAttributes,i=function(t){if("_"===t.charAt(0))return"continue";var n=t,i=e.info.uniforms,u=i[t],s=u.variableAnnotation;if(l.default.isPrimitive(u.variableType))if(u.isArray)switch(u.variableType){case"float":var c=new Array;c=c.map(function(e){return 0}),r[n]=o("NumberArray",a(u,c),function(e,t){e.uniformFloatArray(n,t.attributeValues[n])});break;default:throw new Error("Unsupported array type "+u.variableType)}else!function(){switch(u.variableType){case"bool":r[n]=o("Boolean",a(u,!1),function(e,t){e.uniformBool(n,t.attributeValues[n])});break;case"float":r[n]=o("Number",a(u,0),function(e,t){e.uniformFloat(n,t.attributeValues[n])});break;case"vec2":r[n]=o("Vector2",a(u,"0,0"),function(e,t){e.uniformVector2(n,t.attributeValues[n])});break;case"vec3":"color"===s.type?r[n]=o("Color3",a(u,"#000"),function(e,t){e.uniformColor3(n,t.attributeValues[n])}):r[n]=o("Vector3",a(u,"0,0,0"),function(e,t){e.uniformVector3(n,t.attributeValues[n])});break;case"vec4":"color"===s.type?r[n]=o("Color4",a(u,"#0000"),function(e,t){e.uniformColor4(n,t.attributeValues[n])}):r[n]=o("Vector4",a(u,"0,0,0,0"),function(e,t){e.uniformVector4(n,t.attributeValues[n])});break;case"sampler2D":var e=void 0;s.usedFlag&&void 0!==s.usedFlag&&(e=s.usedFlag),r[n]=o("Texture",a(u,void 0),function(t,r){var o=void 0;r.attributeValues[n]&&(o=r.attributeValues[n].get(r.buffers))?(t.uniformTexture2D(n,o),e&&t.uniformBool(e,!0)):(t.uniformTexture2D(n,r.defaultTexture),e&&t.uniformBool(e,!1))});break;default:throw new Error("Unsupported type was found")}}()},t.t0=regeneratorRuntime.keys(e.info.uniforms);case 4:if((t.t1=t.t0()).done){t.next=11;break}if(u=t.t1.value,s=i(u),"continue"!==s){t.next=9;break}return t.abrupt("continue",4);case 9:t.next=4;break;case 11:return t.next=13,Promise.all(n);case 13:case"end":return t.stop()}},t,this)}))}function u(e){var t=e.info.systemRegisterers;for(var n in e.info.uniforms)if("_"===n.charAt(0)){var r=e.info.uniforms[n],o=f.default.resolve(n,r);if(o){t.push(o);continue}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e);case 2:return u(e),t.abrupt("return",e);case 4:case"end":return t.stop()}},t,this)}))};var s=n(52),l=r(s),c=n(53),f=r(c),h=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,null,[{key:"isPrimitive",value:function(t){return e._primitives.indexOf(t)>=0}}]),e}();t.default=o,o._primitives=["float","bool","int","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","mat2","mat3","mat4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(54),u=r(i),s=function(){function e(){o(this,e)}return a(e,null,[{key:"addResolver",value:function(t,n){e.resolvers[t]=n}},{key:"addDynamicResolver",value:function(t){e.dynamicResolvers.push(t)}},{key:"resolve",value:function(t,n){if(e.resolvers[t])return e.resolvers[t](n,t);for(var r=null,o=0;o<e.dynamicResolvers.length;o++)if(r=e.dynamicResolvers[o](n,t),null!=r)return r}}]),e}();t.default=s,s.resolvers={},s.dynamicResolvers=[],s.addResolver("_matPVM",function(e,t){return function(e,n){return e.uniformMatrix(t,n.transform.calcPVM(n.camera.camera))}}),s.addResolver("_matP",function(e,t){return function(e,n){return e.uniformMatrix(t,n.camera.camera.getProjectionMatrix())}}),s.addResolver("_matV",function(e,t){return function(e,n){return e.uniformMatrix(t,n.camera.camera.getViewMatrix())}}),s.addResolver("_matM",function(e,t){return function(e,n){return e.uniformMatrix(t,n.transform.globalTransform)}}),s.addResolver("_matVM",function(e,t){return function(e,n){return e.uniformMatrix(t,n.transform.calcVM(n.camera.camera))}}),s.addResolver("_matPV",function(e,t){return function(e,n){return e.uniformMatrix(t,n.camera.camera.getProjectionViewMatrix())}}),s.addResolver("_time",function(e,t){return function(e,n){return e.uniformFloat(t,Date.now()%1e6)}}),s.addResolver("_viewportSize",function(e,t){var n=new u.default(0,0);return function(e,r){n.X=r.viewport.Width,n.Y=r.viewport.Height,e.uniformVector2(t,n)}}),s.addResolver("_cameraPosition",function(e,t){return function(e,n){return e.uniformVector3(t,n.camera.transform.globalPosition)}}),s.addResolver("_cameraDirection",function(e,t){return function(e,n){return e.uniformVector3(t,n.camera.transform.forward)}})},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Vector2},function(e,t){"use strict";function n(e){for(var t="",n=!1,r=!1,o=0;o<e.length;o++){var a=e.charAt(o);if("/"===a&&o+1<e.length){if("/"===e.charAt(o+1)&&!r){n=!0,o++;continue}if("*"===e.charAt(o+1)&&!n){r=!0,o++;continue}}"*"===a&&r&&o+1<e.length&&"/"===e.charAt(o+1)?(r=!1,o++):"\n"===a&&n?n=!1:n||r||(t+=a)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.info.shaderSource=n(e.info.shaderSource),t.abrupt("return",e);case 2:case"end":return t.stop()}},t,this)}))};var r=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return u(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=/\s*@import\s+"([^"]+)"/.exec(e)){t.next=4;break}return t.abrupt("break",16);case 4:return r=void 0,t.next=7,i.default.resolve(n[1]);case 7:return t.t0=t.sent,t.next=10,o(t.t0);case 10:if(r=t.sent){t.next=13;break}throw new Error("Required shader chunk '"+n[1]+"' was not found!!");case 13:e=e.replace(n[0],"\n"+r+"\n"),t.next=0;break;case 16:return t.abrupt("return",e);case 17:case"end":return t.stop()}},t,this)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return u(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o(e.info.shaderSource);case 2:return n=t.sent,e.info.shaderSource=n,t.abrupt("return",e);case 5:case"end":return t.stop()}},t,this)}))};var a=n(57),i=r(a),u=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ImportResolver=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(3),c=r(l),f=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},h=t.ImportResolver=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,function(e){var n=/^https?:\/\/.*/gm;return n.test(e)?t._toAbsolute(e):e}));return e.staticImports={},e}return i(t,e),u(t,[{key:"resolve",value:function(e){var n=this;return s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resolve",this).call(this,e,function(t){return n._resolve(e)})}},{key:"_resolve",value:function(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.staticImports[e]){t.next=4;break}return t.abrupt("return",this.staticImports[e]);case 4:return t.next=6,this._fromExternal(e);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}))}},{key:"_fromExternal",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.onload=function(e){t(r.responseText)},r.onerror=function(e){n(e)},r.send()})}}],[{key:"_toAbsolute",value:function(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.host+t.pathname+t.search+t.hash}}]),t}(c.default);t.default=new h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return s.default.parse(e)}function a(e){return new RegExp("(?:@(\\{.+\\}))?\\s*"+e+"\\s+(?:(lowp|mediump|highp)\\s+)?([a-z0-9A-Z]+)\\s+([a-zA-Z0-9_]+)(?:\\s*\\[\\s*([a-zA-Z0-9_]+)\\s*\\]\\s*)?\\s*;","g")}function i(e,t){for(var n={},r=a(t),i=void 0,u=function(){var e=i[4],t=i[3],r=i[2],a=i[1],u=void 0!==i[5],s=void 0;u&&!function(){var e=parseInt(i[5],10);s=function(){return e},isNaN(e)&&(s=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return e[s]}))}(),n[e]={variableName:e,variableType:t,variablePrecision:r,variableAnnotation:a?o(a):{},isArray:u,arrayLength:s}};i=r.exec(e);)u();return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t){return l(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=i(t.info.shaderSource,e),n.t0=e,n.next="uniform"===n.t0?4:"attribute"===n.t0?6:8;break;case 4:return t.info.uniforms=r,n.abrupt("break",9);case 6:return t.info.attributes=r,n.abrupt("break",9);case 8:throw new Error("Unknown variable type!!");case 9:return n.abrupt("return",t);case 10:case"end":return n.stop()}},n,this)}))}};var u=n(59),s=r(u),l=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})}},function(e,t,n){var r=t;r.parse=function(){"use strict";var e,t,n,r,o,a,i={"'":"'",'"':'"',"\\":"\\","/":"/","\n":"",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u=[" ","\t","\r","\n","\v","\f"," ","\ufeff"],s=function(e){return""===e?"EOF":"'"+e+"'"},l=function(r){var a=new SyntaxError;throw a.message=r+" at line "+t+" column "+n+" of the JSON5 data. Still to read: "+JSON.stringify(o.substring(e-1,e+19)),a.at=e,a.lineNumber=t,a.columnNumber=n,a},c=function(a){return a&&a!==r&&l("Expected "+s(a)+" instead of "+s(r)),r=o.charAt(e),e++,n++,("\n"===r||"\r"===r&&"\n"!==f())&&(t++,n=0),r},f=function(){return o.charAt(e)},h=function(){var e=r;for("_"!==r&&"$"!==r&&(r<"a"||r>"z")&&(r<"A"||r>"Z")&&l("Bad identifier as unquoted key");c()&&("_"===r||"$"===r||r>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9");)e+=r;return e},d=function(){var e,t="",n="",o=10;if("-"!==r&&"+"!==r||(t=r,c(r)),"I"===r)return e=g(),("number"!=typeof e||isNaN(e))&&l("Unexpected word for number"),"-"===t?-e:e;if("N"===r)return e=g(),isNaN(e)||l("expected word to be NaN"),e;switch("0"===r&&(n+=r,c(),"x"===r||"X"===r?(n+=r,c(),o=16):r>="0"&&r<="9"&&l("Octal literal")),o){case 10:for(;r>="0"&&r<="9";)n+=r,c();if("."===r)for(n+=".";c()&&r>="0"&&r<="9";)n+=r;if("e"===r||"E"===r)for(n+=r,c(),"-"!==r&&"+"!==r||(n+=r,c());r>="0"&&r<="9";)n+=r,c();break;case 16:for(;r>="0"&&r<="9"||r>="A"&&r<="F"||r>="a"&&r<="f";)n+=r,c()}return e="-"===t?-n:+n,isFinite(e)?e:void l("Bad number")},p=function(){var e,t,n,o,a="";if('"'===r||"'"===r)for(n=r;c();){if(r===n)return c(),a;if("\\"===r)if(c(),"u"===r){for(o=0,t=0;t<4&&(e=parseInt(c(),16),isFinite(e));t+=1)o=16*o+e;a+=String.fromCharCode(o)}else if("\r"===r)"\n"===f()&&c();else{if("string"!=typeof i[r])break;a+=i[r]}else{if("\n"===r)break;a+=r}}l("Bad string")},v=function(){"/"!==r&&l("Not an inline comment");do if(c(),"\n"===r||"\r"===r)return void c();while(r)},m=function(){"*"!==r&&l("Not a block comment");do for(c();"*"===r;)if(c("*"),"/"===r)return void c("/");while(r);l("Unterminated block comment")},y=function(){"/"!==r&&l("Not a comment"),c("/"),"/"===r?v():"*"===r?m():l("Unrecognized comment")},b=function(){for(;r;)if("/"===r)y();else{if(!(u.indexOf(r)>=0))return;c()}},g=function(){switch(r){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null;case"I":return c("I"),c("n"),c("f"),c("i"),c("n"),c("i"),c("t"),c("y"),1/0;case"N":return c("N"),c("a"),c("N"),NaN}l("Unexpected "+s(r))},_=function(){var e=[];if("["===r)for(c("["),b();r;){if("]"===r)return c("]"),e;if(","===r?l("Missing array element"):e.push(a()),b(),","!==r)return c("]"),e;c(","),b()}l("Bad array")},M=function(){var e,t={};if("{"===r)for(c("{"),b();r;){if("}"===r)return c("}"),t;if(e='"'===r||"'"===r?p():h(),b(),c(":"),t[e]=a(),b(),","!==r)return c("}"),t;c(","),b()}l("Bad object")};return a=function(){switch(b(),r){case"{":return M();case"[":return _();case'"':case"'":return p();case"-":case"+":case".":return d();default:return r>="0"&&r<="9"?d():g()}},function(i,u){var s;return o=String(i),e=0,t=1,n=1,r=" ",s=a(),b(),r&&l("Syntax error"),"function"==typeof u?function e(t,n){var r,o,a=t[n];if(a&&"object"==typeof a)for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(o=e(a,r),void 0!==o?a[r]=o:delete a[r]);return u.call(t,n,a)}({"":s},""):s}}(),r.stringify=function(e,t,n){function o(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"_"===e||"$"===e}function a(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"_"===e||"$"===e}function i(e){if("string"!=typeof e)return!1;if(!a(e[0]))return!1;for(var t=1,n=e.length;t<n;){if(!o(e[t]))return!1;t++}return!0}function u(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function s(e){return"[object Date]"===Object.prototype.toString.call(e)}function l(e){for(var t=0;t<v.length;t++)if(v[t]===e)throw new TypeError("Converting circular structure to JSON")}function c(e,t,n){if(!e)return"";e.length>10&&(e=e.substring(0,10));for(var r=n?"":"\n",o=0;o<t;o++)r+=e;return r}function f(e){return m.lastIndex=0,m.test(e)?'"'+e.replace(m,function(e){var t=y[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function h(e,t,n){var r,o,a=d(e,t,n);switch(a&&!s(a)&&(a=a.valueOf()),typeof a){case"boolean":return a.toString();case"number":return isNaN(a)||!isFinite(a)?"null":a.toString();case"string":return f(a.toString());case"object":if(null===a)return"null";if(u(a)){l(a),r="[",v.push(a);for(var m=0;m<a.length;m++)o=h(a,m,!1),r+=c(p,v.length),r+=null===o||"undefined"==typeof o?"null":o,m<a.length-1?r+=",":p&&(r+="\n");v.pop(),r+=c(p,v.length,!0)+"]"}else{l(a),r="{";var y=!1;v.push(a);for(var b in a)if(a.hasOwnProperty(b)){var g=h(a,b,!1);n=!1,"undefined"!=typeof g&&null!==g&&(r+=c(p,v.length),y=!0,t=i(b)?b:f(b),r+=t+":"+(p?" ":"")+g+",")}v.pop(),r=y?r.substring(0,r.length-1)+c(p,v.length)+"}":"{}"}return r;default:return}}if(t&&"function"!=typeof t&&!u(t))throw new Error("Replacer must be a function or an array");
var d=function(e,n,r){var o=e[n];return o&&o.toJSON&&"function"==typeof o.toJSON&&(o=o.toJSON()),"function"==typeof t?t.call(e,n,o):t?r||u(e)||t.indexOf(n)>=0?o:void 0:o};r.isWord=i;var p,v=[];n&&("string"==typeof n?p=n:"number"==typeof n&&n>=0&&(p=c(" ",n,!0)));var m=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,y={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b={"":e};return void 0===e?d(b,"",!0):h(b,"",!0)}},function(e,t){"use strict";function n(e){for(var t=void 0;t=/@\{.+\}/g.exec(e);)e=e.substr(0,t.index)+e.substring(t.index+t[0].length,e.length);return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.info.shaderSource=n(e.info.shaderSource),t.abrupt("return",e);case 2:case"end":return t.stop()}},t,this)}))};var r=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})}},function(e,t){"use strict";function n(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t=/@([a-zA-Z]+)\(([^)]*)\)/g,n=void 0;case 2:if(!(n=t.exec(e))){r.next=7;break}return r.next=5,{name:n[1],args:n[2].split(",")};case 5:r.next=2;break;case 7:case"end":return r.stop()}},u[0],this)}function r(e,t){return t?function(t){t.enable(e)}:function(t){t.disable(e)}}function o(e,t){if(e.length!==t)throw new Error("The arguments should contain "+t+" of items but there was "+e.length);return e.map(function(e){var t=WebGLRenderingContext[e.toUpperCase().trim()];if(void 0!==t)return t;throw new Error("Specified WebGL constant "+e+" was not found")})}function a(e,t){if(4!==t.length)throw new Error("ExposeMacro must have 4 of arguments");e.macros.push({type:t[0],attributeName:t[1],macroName:t[2],default:t[3]})}function i(e){for(var t=n(e.shaderSource),i=void 0,u=[],s=!0,l=!0,c=!0;(i=t.next())&&!i.done;){var f=i.value;!function(){switch(f.name){case"NoDepth":s=!1;break;case"DepthFunc":s=!0;var t=o(f.args,1);u.push(function(e){e.depthFunc(t[0])});break;case"NoBlend":l=!1;break;case"NoCull":c=!1;break;case"CullFace":c=!0;var n=o(f.args,1);u.push(function(e){e.cullFace(n[0])});break;case"BlendFunc":l=!0;var r=o(f.args,2);u.push(function(e){e.blendFunc(r[0],r[1])});break;case"BlendFuncSeparate":l=!0;var i=o(f.args,4);u.push(function(e){e.blendFuncSeparate(i[0],i[1],i[2],i[3])});break;case"BlendEquation":l=!0;var h=o(f.args,1);u.push(function(e){e.blendEquation(h[0])});break;case"BlendEquationSeparate":l=!0;var d=o(f.args,2);u.push(function(e){e.blendEquationSeparate(d[0],d[1])});break;case"ExposeMacro":a(e,f.args)}}()}u.unshift(r(WebGLRenderingContext.DEPTH_TEST,s)),u.unshift(r(WebGLRenderingContext.BLEND,l)),u.unshift(r(WebGLRenderingContext.CULL_FACE,c)),e.configurator=u}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return s(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i(e.info),t.abrupt("return",e);case 2:case"end":return t.stop()}},t,this)}))};var u=[n].map(regeneratorRuntime.mark),s=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})}},function(e,t){"use strict";function n(e){for(var t=/(\s*@[a-zA-Z]*\([^)]*\))/;;){var n=t.exec(e);if(!n)break;e=e.replace(n[0],"")}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.info.shaderSource=n(e.info.shaderSource),t.abrupt("return",e);case 2:case"end":return t.stop()}},t,this)}))};var r=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){n(this,e),this.pass=t}return r(e,[{key:"draw",value:function(e){this.pass.forEach(function(t){return t.draw(e)})}}]),e}();t.default=o},function(e,t){e.exports="/*Header start*/\n// helper macros\n#ifdef FS\n  #define FS_PREC(prec,type) precision prec type;\n  #define VS_PREC(prec,type)\n#endif\n#ifdef VS\n#define VS_PREC(prec,type) precision prec type;\n#define FS_PREC(prec,type)\n#endif\n// constants\n#define PI 3.141592653589793\n#define E 2.718281828459045\n#define LN2 0.6931471805599453\n#define LN10 2.302585092994046\n#define LOG2E 1.4426950408889634\n#define LOG10E 0.4342944819032518\n#define SQRT2 1.4142135623730951\n#define SQRT1_2 0.7071067811865476\n/*Header end*/\n"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(22),l=r(s),c=n(46),f=r(c),h=n(23),d=r(h),p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$awake",value:function(){var e=l.default.ns(this.name.ns);this.companion.set(e("MaterialFactory"),new f.default(this.companion.get("gl")))}}]),t}(d.default);t.default=p,p.attributes={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(23),l=r(s),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$awake",value:function(){this.getAttribute("targetBuffer").boundTo("_targetBuffer"),this.getAttribute("layer").boundTo("_layer"),this.getAttribute("drawOffset").boundTo("_drawOffset"),this.getAttribute("drawCount").boundTo("_drawCount"),this.getAttribute("geometry").boundTo("_geometry")}},{key:"$mount",value:function(){this._transformComponent=this.node.getComponent("Transform"),this._materialContainer=this.node.getComponent("MaterialContainer")}},{key:"$render",value:function(e){if(this._layer===e.layer&&this._geometry&&(e.material||this._materialContainer.ready)){var t={targetBuffer:this._targetBuffer,geometry:this._geometry,attributeValues:null,camera:e.camera,transform:this._transformComponent,buffers:e.buffers,viewport:e.viewport,drawCount:this._drawCount,drawOffset:this._drawOffset,sceneDescription:e.sceneDescription,defaultTexture:e.defaultTexture};e.material?(t.attributeValues=e.materialArgs,e.material.draw(t)):(t.attributeValues=this._materialContainer.materialArgs,this._materialContainer.material.draw(t)),this.companion.get("gl").flush()}}}]),t}(l.default);t.default=c,c.attributes={geometry:{converter:"Geometry",defaultValue:"quad"},targetBuffer:{converter:"String",defaultValue:"default"},layer:{converter:"String",defaultValue:"default"},drawCount:{converter:"Number",defaultValue:Number.MAX_VALUE},drawOffset:{converter:"Number",defaultValue:0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),l=r(s),c=n(68),f=r(c),h=n(10),d=r(h),p=n(23),v=r(p),m=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._origin=new l.default(0,0,0),e._lastScreenPos=null,e._xsum=0,e._ysum=0,e._center=0,e}return i(t,e),u(t,[{key:"$awake",value:function(){this.getAttribute("center").boundTo("_center"),this.getAttribute("rotateSpeed").boundTo("_rotateSpeed"),this.getAttribute("zoomSpeed").boundTo("_zoomSpeed"),this.getAttribute("moveSpeed").boundTo("_moveSpeed"),this._transform=this.node.getComponent("Transform")}},{key:"$mount",value:function(){this._initialRight=l.default.copy(this._transform.right),this._initialUp=l.default.copy(this._transform.up),this._initialDirection=this._transform.localPosition.subtractWith(this._origin),this._initialRotation=this._transform.localRotation,this._origin=this._transform.localPosition.addWith(this._transform.forward.multiplyWith(this._center));var e=this.companion.get("canvasElement");e.addEventListener("mousemove",this._mouseMove.bind(this)),e.addEventListener("contextmenu",this._contextMenu.bind(this)),e.addEventListener("mousewheel",this._mouseWheel.bind(this))}},{key:"_contextMenu",value:function(e){e.preventDefault()}},{key:"_mouseMove",value:function(e){if(null===this._lastScreenPos)return void(this._lastScreenPos={x:e.screenX,y:e.screenY});var t=!1,n=e.screenX-this._lastScreenPos.x,r=e.screenY-this._lastScreenPos.y,o=this._transform.localPosition.subtractWith(this._origin).magnitude;if((1&e.buttons)>0&&(this._xsum+=n,this._ysum+=r,this._ysum=Math.min(50*Math.PI,this._ysum),this._ysum=Math.max(50*-Math.PI,this._ysum),t=!0),(2&e.buttons)>0){var a=-n*this._moveSpeed*.01,i=r*this._moveSpeed*.01;this._origin=this._origin.addWith(this._transform.right.multiplyWith(a)).addWith(this._transform.up.multiplyWith(i)),o=this._transform.localPosition.subtractWith(this._origin).magnitude,t=!0}if(t){var u=f.default.angleAxis(-this._xsum*this._rotateSpeed,this._initialUp),s=f.default.angleAxis(-this._ysum*this._rotateSpeed,this._initialRight),c=f.default.multiply(u,s),h=d.default.rotationQuaternion(c),p=d.default.transformNormal(h,this._initialDirection);this._transform.localPosition=this._origin.addWith(l.default.normalize(p).multiplyWith(o)),this._transform.localRotation=f.default.multiply(this._initialRotation,c)}this._lastScreenPos={x:e.screenX,y:e.screenY}}},{key:"_mouseWheel",value:function(e){var t=l.default.normalize(l.default.subtract(this._transform.localPosition,this._origin)),n=-e.deltaY*this._zoomSpeed,r=l.default.subtract(this._origin,this._transform.localPosition).magnitude,o=Math.max(1,r-n);this._transform.localPosition=this._origin.addWith(t.multiplyWith(o)),e.preventDefault()}}]),t}(v.default);t.default=m,m.attributes={rotateSpeed:{defaultValue:.01,converter:"Number"},zoomSpeed:{defaultValue:.05,converter:"Number"},moveSpeed:{defaultValue:1,converter:"Number"},center:{defaultValue:20,converter:"Number"}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Quaternion},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(70),l=r(s),c=n(23),f=r(c),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$mount",value:function(){this.buffer=new l.default(this.companion.get("gl"))}},{key:"$unmount",value:function(){this.buffer.destroy(),this.buffer=null}},{key:"$resizeBuffer",value:function(e){if(!this.getValue("name"))throw new Error("Attribute 'name' must be specified.");this.buffer.update(WebGLRenderingContext.DEPTH_COMPONENT16,e.widthPowerOf2,e.heightPowerOf2),e.buffers[this.getValue("name")]=this.buffer}}]),t}(f.default);t.default=h,h.attributes={name:{converter:"String",defaultValue:void 0}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(29),c=r(l),f=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.renderBuffer=e.createRenderbuffer(),n}return i(t,e),u(t,[{key:"update",value:function(e,t,n){this.gl.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,this.renderBuffer),this.gl.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,e,t,n),this.valid=!0}},{key:"bind",value:function(){this.gl.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,this.renderBuffer)}},{key:"destroy",value:function(){this.gl.deleteRenderbuffer(this.renderBuffer),s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(23),l=r(s),c=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e._buffers={},e}return i(t,e),u(t,[{key:"$mount",value:function(){var e=this;this._gl=this.companion.get("gl"),this._canvas=this.companion.get("canvasElement"),this._camera=this.getValue("camera"),this.getAttribute("camera").addObserver(function(t){return e._camera=t.Value}),this.getAttribute("viewport").addObserver(function(t){e._viewportSizeGenerator=t.Value,e.$resizeCanvas()}),this._viewportSizeGenerator=this.getValue("viewport")}},{key:"$treeInitialized",value:function(){this.$resizeCanvas()}},{key:"$resizeCanvas",value:function(){this._viewportCache=this._viewportSizeGenerator(this._canvas);var e=this._getSizePowerOf2(this._viewportCache.Width,this._viewportCache.Height);0===this.node.children.length&&this.node.addChildByName("render-scene",{}),this.node.broadcastMessage("resizeBuffer",{widthPowerOf2:e.width,heightPowerOf2:e.height,width:this._viewportCache.Width,height:this._viewportCache.Height,buffers:this._buffers}),this.node.broadcastMessage("bufferUpdated",{buffers:this._buffers})}},{key:"$renderViewport",value:function(e){this.node.broadcastMessage("render",{camera:this._camera,viewport:this._viewportCache,buffers:this._buffers,loopIndex:e.loopIndex})}},{key:"_getSizePowerOf2",value:function(e,t){var n=Math.pow(2,Math.log(e)/Math.LN2|0),r=Math.pow(2,Math.log(t)/Math.LN2|0);return{width:n,height:r}}}]),t}(l.default);t.default=c,c.attributes={camera:{converter:"Component",defaultValue:"camera",target:"Camera"},viewport:{converter:"Viewport",defaultValue:"auto"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(73),l=r(s),c=n(23),f=r(c),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$awake",value:function(){this.getAttribute("bgColor").boundTo("_bgColor"),this.getAttribute("clearDepth").boundTo("_clearDepth")}},{key:"$mount",value:function(){this.gl=this.companion.get("gl")}},{key:"$treeInitialized",value:function(){this.node.getComponent("LoopManager").register(this.onloop.bind(this),1e3),this.getValue("complementRenderer")&&0===this.node.getChildrenByNodeName("renderer").length&&this.node.addChildByName("renderer",{})}},{key:"onloop",value:function(e){if(this.enabled){var t=this._bgColor;this.gl.clearColor(t.R,t.G,t.B,t.A),this.gl.clearDepth(this._clearDepth),this.gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT|WebGLRenderingContext.DEPTH_BUFFER_BIT),this.node.broadcastMessage(1,"renderViewport",{loopIndex:e})}}}]),t}(f.default);t.default=h,h.attributes={bgColor:{defaultValue:new l.default(0,0,0,0),converter:"Color4"},clearDepth:{defaultValue:1,converter:"Number"},complementRenderer:{defaultValue:!0,converter:"Boolean"}}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Color4},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(75),l=r(s),c=n(23),f=r(c),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$awake",value:function(){this.getAttribute("targetBuffer").boundTo("_targetBuffer"),this.getAttribute("clearColor").boundTo("_clearColor"),this.getAttribute("clearColorEnabled").boundTo("_clearColorEnabled"),this.getAttribute("clearDepthEnabled").boundTo("_clearDepthEnabled"),this.getAttribute("clearDepth").boundTo("_clearDepth")}},{key:"$mount",value:function(){this._gl=this.companion.get("gl"),this._canvas=this.companion.get("canvasElement");var e=this.companion.get("GeometryRegistory");this._geom=e.getGeometry("quad"),this._materialContainer=this.node.getComponent("MaterialContainer")}},{key:"$bufferUpdated",value:function(e){var t=this.getValue("out");"default"!==t&&(this._fbo=new l.default(this.companion.get("gl")),this._fbo.update(e.buffers[t]));var n=this.getValue("depthBuffer");n&&this._fbo&&this._fbo.update(e.buffers[n])}},{key:"$render",value:function(e){if(this._materialContainer.ready){this._fbo?(this._fbo.bind(),this._gl.viewport(0,0,e.viewport.Width,e.viewport.Height)):(this._gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this._gl.viewport(e.viewport.Left,this._canvas.height-e.viewport.Bottom,e.viewport.Width,e.viewport.Height)),this._fbo&&this._clearColorEnabled&&(this._gl.clearColor(this._clearColor.R,this._clearColor.G,this._clearColor.B,this._clearColor.A),this._gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT)),this._clearDepthEnabled&&(this._gl.clearDepth(this._clearDepth),this._gl.clear(WebGLRenderingContext.DEPTH_BUFFER_BIT));var t={targetBuffer:this._targetBuffer,geometry:this._geom,attributeValues:{},camera:null,transform:null,buffers:e.buffers,viewport:e.viewport,defaultTexture:this.companion.get("defaultTexture")};t.attributeValues=this._materialContainer.materialArgs,this._materialContainer.material.draw(t),this._gl.flush()}}}]),t}(f.default);t.default=h,h.attributes={out:{defaultValue:"default",converter:"String"},depthBuffer:{defaultValue:void 0,converter:"String"},targetBuffer:{defaultValue:"default",converter:"String"},clearColor:{defaultValue:"#0000",converter:"Color4"},clearColorEnabled:{defaultValue:!0,converter:"Boolean"},clearDepthEnabled:{defaultValue:!0,converter:"Boolean"},clearDepth:{defaultValue:1,converter:"Number"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(70),c=r(l),f=n(28),h=r(f),d=n(29),p=r(d),v=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fbo=e.createFramebuffer(),n}return i(t,e),u(t,[{key:"update",value:function(e,t,n){if(this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbo),e instanceof h.default){if("undefined"==typeof n&&(n=0),"undefined"==typeof t&&(t=0),this.gl.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0+n,WebGLRenderingContext.TEXTURE_2D,e.texture,t),this.gl.checkFramebufferStatus(WebGLRenderingContext.FRAMEBUFFER)!==WebGLRenderingContext.FRAMEBUFFER_COMPLETE)throw new Error("INCOMPLETE framebuffer")}else if(e instanceof c.default){var r=t;"undefined"==typeof t&&(r=WebGLRenderingContext.DEPTH_ATTACHMENT),this.gl.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,r,WebGLRenderingContext.RENDERBUFFER,e.renderBuffer)}this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null)}},{key:"bind",value:function(){this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbo)}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.gl.deleteFramebuffer(this.fbo)}}]),t}(p.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(23),l=r(s),c=n(75),f=r(c),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$awake",value:function(){this.getAttribute("layer").boundTo("_layer"),this.getAttribute("clearColor").boundTo("_clearColor"),this.getAttribute("clearColorEnabled").boundTo("_clearColorEnabled"),this.getAttribute("clearDepthEnabled").boundTo("_clearDepthEnabled"),this.getAttribute("clearDepth").boundTo("_clearDepth"),this.getAttribute("camera").boundTo("_camera")}},{key:"$mount",value:function(){this._gl=this.companion.get("gl"),this._canvas=this.companion.get("canvasElement"),this._materialContainer=this.node.getComponent("MaterialContainer")}},{key:"$bufferUpdated",value:function(e){var t=this.getValue("out");"default"!==t&&(this._fbo=new f.default(this.companion.get("gl")),this._fbo.update(e.buffers[t]));var n=this.getValue("depthBuffer");n&&this._fbo&&this._fbo.update(e.buffers[n])}},{key:"$render",value:function(e){var t=this._camera?this._camera:e.camera;if(t){this._fbo?(this._fbo.bind(),this._gl.viewport(0,0,e.viewport.Width,e.viewport.Height)):(this._gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this._gl.viewport(e.viewport.Left,this._canvas.height-e.viewport.Bottom,e.viewport.Width,e.viewport.Height)),this._fbo&&this._clearColorEnabled&&(this._gl.clearColor(this._clearColor.R,this._clearColor.G,this._clearColor.B,this._clearColor.A),this._gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT)),this._clearDepthEnabled&&(this._gl.clearDepth(this._clearDepth),this._gl.clear(WebGLRenderingContext.DEPTH_BUFFER_BIT)),e.camera.updateContainedScene(e.loopIndex);var n=this._materialContainer.useMaterial;e.camera.renderScene({caller:this,camera:t,buffers:e.buffers,layer:this._layer,viewport:e.viewport,material:n?this._materialContainer.material:void 0,materialArgs:n?this._materialContainer.material:void 0,loopIndex:e.loopIndex})}}}]),t}(l.default);t.default=h,h.attributes={layer:{converter:"String",defaultValue:"default"},depthBuffer:{defaultValue:void 0,converter:"String"},out:{converter:"String",defaultValue:"default"},clearColor:{defaultValue:"#0000",converter:"Color4"},clearColorEnabled:{defaultValue:!0,converter:"Boolean"},clearDepthEnabled:{defaultValue:!0,converter:"Boolean"},clearDepth:{defaultValue:1,converter:"Number"},camera:{defaultValue:void 0,converter:"Component",target:"Camera"}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(28),l=r(s),c=n(23),f=r(c),h=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$mount",value:function(){this.buffer=new l.default(this.companion.get("gl"));
}},{key:"$unmount",value:function(){this.buffer.destroy(),this.buffer=null}},{key:"$resizeBuffer",value:function(e){if(!this.getValue("name"))throw new Error("Attribute 'name' must be specified.");this.buffer.update(0,e.widthPowerOf2,e.heightPowerOf2,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,null),e.buffers[this.getValue("name")]=this.buffer}}]),t}(f.default);t.default=h,h.attributes={name:{converter:"String",defaultValue:void 0},format:{converter:"Enum",defaultValue:WebGLRenderingContext.RGBA,table:{RGBA:WebGLRenderingContext.RGBA,RGB:WebGLRenderingContext.RGB}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(28),l=r(s),c=n(23),f=r(c),h=n(5),d=r(h),p=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$mount",value:function(){var e=this,t=this.getValue("src");this._texture=new l.default(this.companion.get("gl")),this._texture.magFilter=this.getValue("magFilter"),this._texture.minFilter=this.getValue("minFilter"),this._texture.wrapT=this.getValue("wrapT"),this._texture.wrapS=this.getValue("wrapS"),this.attributes.get("magFilter").addObserver(function(t){return e._texture.magFilter=t.Value}),this.attributes.get("minFilter").addObserver(function(t){return e._texture.minFilter=t.Value}),this.attributes.get("wrapS").addObserver(function(t){return e._texture.wrapS=t.Value}),this.attributes.get("wrapT").addObserver(function(t){return e._texture.wrapT=t.Value}),t&&this._loadTask(t)}},{key:"_loadTask",value:function(e){return p(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.default.resolve(e);case 2:n=t.sent,this._texture.update(n);case 4:case"end":return t.stop()}},t,this)}))}}]),t}(f.default);t.default=v,v.attributes={src:{converter:"String",defaultValue:void 0},minFilter:{converter:"Enum",defaultValue:"LINEAR",table:{LINEAR:WebGLRenderingContext.LINEAR,NEAREST:WebGLRenderingContext.NEAREST,NEAREST_MIPMAP_NEAREST:WebGLRenderingContext.NEAREST_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:WebGLRenderingContext.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_NEAREST:WebGLRenderingContext.LINEAR_MIPMAP_NEAREST,LINEAR_MIPMAP_LINEAR:WebGLRenderingContext.LINEAR_MIPMAP_LINEAR}},magFilter:{converter:"Enum",defaultValue:"LINEAR",table:{LINEAR:WebGLRenderingContext.LINEAR,NEAREST:WebGLRenderingContext.NEAREST}},wrapS:{converter:"Enum",defaultValue:"REPEAT",table:{REPEAT:WebGLRenderingContext.REPEAT,MIRRORED_REPEAT:WebGLRenderingContext.MIRRORED_REPEAT,CLAMP_TO_EDGE:WebGLRenderingContext.CLAMP_TO_EDGE}},wrapT:{converter:"Enum",defaultValue:"REPEAT",table:{REPEAT:WebGLRenderingContext.REPEAT,MIRRORED_REPEAT:WebGLRenderingContext.MIRRORED_REPEAT,CLAMP_TO_EDGE:WebGLRenderingContext.CLAMP_TO_EDGE}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(10),l=r(s),c=n(8),f=r(c),h=n(9),d=r(h),p=n(68),v=r(p),m=n(11),y=n(23),b=r(y),g=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.localTransform=new l.default,e.globalTransform=new l.default,e._children=[],e._cachePVM=new l.default,e._cacheVM=new l.default,e._forward=new f.default([0,0,-1,0]),e._up=new f.default([0,1,0,0]),e._right=new f.default([1,0,0,0]),e._globalPosition=new f.default([0,0,0]),e._globalScale=new f.default([1,1,1]),e}return i(t,e),u(t,[{key:"calcPVM",value:function(e){return m.mat4.mul(this._cachePVM.rawElements,e.getProjectionViewMatrix().rawElements,this.globalTransform.rawElements),this._cachePVM}},{key:"calcVM",value:function(e){return m.mat4.mul(this._cacheVM.rawElements,e.getViewMatrix().rawElements,this.globalTransform.rawElements),this._cacheVM}},{key:"$awake",value:function(){var e=this;this.attributes.get("position").addObserver(function(){e._localPosition=e.attributes.get("position").Value,e.updateTransform()}),this.attributes.get("rotation").addObserver(function(){e._localRotation=e.attributes.get("rotation").Value,e.updateTransform()}),this.attributes.get("scale").addObserver(function(){e._localScale=e.attributes.get("scale").Value,e.updateTransform()}),this._localPosition=this.attributes.get("position").Value,this._localRotation=this.attributes.get("rotation").Value,this._localScale=this.attributes.get("scale").Value,this.updateTransform()}},{key:"$mount",value:function(){this._parentTransform=this.node.parent.getComponent("Transform"),this._parentTransform&&this._parentTransform._children.push(this),this.updateTransform()}},{key:"$unmount",value:function(){this._parentTransform&&(this._parentTransform._children.splice(this._parentTransform._children.indexOf(this),1),this._parentTransform=null)}},{key:"updateTransform",value:function(){m.mat4.fromRotationTranslationScale(this.localTransform.rawElements,this._localRotation.rawElements,this._localPosition.rawElements,this._localScale.rawElements),this.updateGlobalTransform()}},{key:"updateGlobalTransform",value:function(){this._parentTransform?m.mat4.mul(this.globalTransform.rawElements,this._parentTransform.globalTransform.rawElements,this.localTransform.rawElements):m.mat4.copy(this.globalTransform.rawElements,this.localTransform.rawElements),this._updateDirections(),this._updateGlobalProperty(),this.node.sendMessage("transformUpdated",this),this._children.forEach(function(e){return e.updateGlobalTransform()})}},{key:"_updateDirections",value:function(){m.vec4.transformMat4(this._forward.rawElements,t._forwardBase.rawElements,this.globalTransform.rawElements),m.vec4.transformMat4(this._up.rawElements,t._upBase.rawElements,this.globalTransform.rawElements),m.vec4.transformMat4(this._right.rawElements,t._rightBase.rawElements,this.globalTransform.rawElements)}},{key:"_updateGlobalProperty",value:function(){this._parentTransform?(m.vec3.transformMat4(this._globalPosition.rawElements,this._localPosition.rawElements,this._parentTransform.globalTransform.rawElements),m.vec3.transformMat4(this._globalScale.rawElements,this._localScale.rawElements,this._parentTransform.globalTransform.rawElements)):(m.vec3.copy(this._globalPosition.rawElements,this._localPosition.rawElements),m.vec3.copy(this._globalScale.rawElements,this._localScale.rawElements))}},{key:"globalPosition",get:function(){return this._globalPosition}},{key:"localPosition",get:function(){return this._localPosition},set:function(e){this._localPosition=e,this.attributes.get("position").Value=e}},{key:"localRotation",get:function(){return this._localRotation},set:function(e){this._localRotation=e,this.attributes.get("rotation").Value=e}},{key:"globalScale",get:function(){return this._globalScale}},{key:"localScale",get:function(){return this._localScale},set:function(e){this._localScale=e,this.attributes.get("scale").Value=e}},{key:"forward",get:function(){return this._forward}},{key:"up",get:function(){return this._up}},{key:"right",get:function(){return this._right}}]),t}(b.default);t.default=g,g.attributes={position:{converter:"Vector3",defaultValue:f.default.Zero},rotation:{converter:"Rotation3",defaultValue:v.default.Identity},scale:{converter:"Vector3",defaultValue:f.default.One}},g._forwardBase=new d.default(0,0,-1,0),g._upBase=new d.default(0,1,0,0),g._rightBase=new d.default(1,0,0,0)},function(e,t){"use strict";function n(e){return function(t){return o(t,e)?null:"ChildrenComponentConstraint Error:"+t.name}}function r(e,t){return t.every(function(t){return null!==e.getComponent(t)})}function o(e,t){return!!r(e,t)&&e.children.every(function(e){return o(e,t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){return function(e){return 0===e.children.length?null:"NoChildConstraint fail:"+e.name}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){return function(t){return e.every(function(e){return null!=t.getComponent(e)})?null:"ParentConstraint Error:"+t.name}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(){return function(e){return e.parent?"RootConstraint: this node: "+e.name.fqn+" must be tree root.":null}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return i.default.parseAngle(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(85),i=r(a);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(8),u=r(i),s=n(68),l=r(s),c=function(){function e(){o(this,e)}return a(e,null,[{key:"parseAngle",value:function(e){var t=/^ *(-? *(?:0|[1-9]\d*)(?: *\.\d+)?) *(?:\/ *((?:0|[1-9]\d*)(?: *\.\d+)?))? *(p|prad|deg|d|r|rad)? *$/gm,n=t.exec(e);if(null==n)throw new Error("faild parse Angle string:'"+e+"'");var r=parseFloat(n[1]);n[2]&&(r/=parseFloat(n[2]));var o=n[3];return null==o&&(o="d"),"r"===o||"rad"===o?r:"p"===o||"prad"===o?r*Math.PI:r/180*Math.PI}},{key:"parseRotation3D",value:function(t){var n=/^ *(x|y|z) *\(([^\(\)]+)\) *$/gm,r=/^ *axis *\(([^\(\),]+),([^\(\),]+),([^\(\),]+),([^\(\),]+)\) *$/gm,o=/^ *([^\(\),]+),([^\(\),]+),([^\(\),]+) *$/gm,a=n.exec(t);if(a){if("x"===a[1])return l.default.angleAxis(e.parseAngle(a[2]),u.default.XUnit);if("y"===a[1])return l.default.angleAxis(e.parseAngle(a[2]),u.default.YUnit);if("z"===a[1])return l.default.angleAxis(e.parseAngle(a[2]),u.default.ZUnit)}var i=r.exec(t);if(i){var s=e.parseAngle(i[1]),c=parseFloat(i[2]),f=parseFloat(i[3]),h=parseFloat(i[4]);return l.default.angleAxis(s,new u.default(c,f,h))}var d=o.exec(t);if(d)return l.default.euler(e.parseAngle(d[1]),e.parseAngle(d[2]),e.parseAngle(d[3]));throw new Error("Unknown format for rotation3D:'"+t+"'")}}]),e}();t.default=c},function(e,t){"use strict";function n(e){if("boolean"==typeof e)return e;if("string"==typeof e)switch(e){case"true":return!0;case"false":return!1;default:throw new Error("Invalid string "+e+" for parsing as boolean")}throw new Error("Parsing failed")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){if("fit"===e)return{mode:"fit"};if("string"==typeof e){var t=/aspect\(([\d+(?.\d*)?]+)\)/.exec(e);if(t)return{mode:"aspect",aspect:Number.parseFloat(t[1])}}return{mode:"manual",size:Number.parseFloat(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e instanceof i.default)return e;if(e instanceof s.default)return new i.default(e.R,e.G,e.B);if("string"==typeof e)return i.default.parse(e);throw new Error(e+" can not be parsed as Color4.")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(89),i=r(a),u=n(73),s=r(u);t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Color3},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(e instanceof s.default)return e;if(e instanceof i.default)return new s.default(e.R,e.G,e.B,1);if("string"==typeof e)return s.default.parse(e);throw new Error(e+" can not be parsed as Color4.")}Object.defineProperty(t,"__esModule",{value:!0});var a=n(89),i=r(a),u=n(73),s=r(u);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){if(!this.declaration.target)throw new Error("Component converter require to be specified target");if(e instanceof s.default)return e.getComponent(this.declaration.target);if(e instanceof i.default){if(e.name===this.declaration.target)return e;throw new Error("Specified component must be "+this.declaration.target)}return this.tree(e)(this.declaration.target).get(0,0,0)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(23),i=r(a),u=n(92),s=r(u);t.default=o},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.Node.GomlNode},function(e,t){"use strict";function n(e){if(!this.declaration.table)throw new Error("Enum converter needs to be specified table in attribute dictionary");if("number"==typeof e)return e;if("string"==typeof e){var t=this.declaration.table[e];if(t)return t;throw new Error("Specified value is not exisiting in the relation table")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return"string"==typeof e?this.companion.get("GeometryRegistory").getGeometry(e):e instanceof i.default?e:void 0}Object.defineProperty(t,"__esModule",{value:!0});var a=n(95),i=r(a);t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,r,o){n(this,e),this.verticies=t,this.attribInfo=r,this.indicies=o,this._validateGLContext();for(var a in r)if("undefined"==typeof t[r[a].bufferName])throw new Error("The buffer request by "+r[a].bufferName+" is not contained in geometry.")}return r(e,[{key:"draw",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.MAX_VALUE,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=this.indicies[e];t.forEach(function(e){var t=r.attribInfo[e];if(!t)throw new Error("There is no such vertex buffer");var o=n.findAttributeLocation(e);if(!(o<0)){var a=r.verticies[t.bufferName];a.bind(),r._gl.vertexAttribPointer(o,t.size,t.type,!1,t.stride,t.offset)}}),i.index.bind(),this._gl.drawElements(i.topology,Math.min(i.count,o),i.type,Math.min(a*i.byteSize,(i.count-1)*i.byteSize))}},{key:"_validateGLContext",value:function(){for(var e in this.indicies){var t=this.indicies[e];if(this._gl||(this._gl=t.index.gl),this._gl!==t.index.gl)throw new Error("All index buffers should be initialized with same context")}for(var n in this.verticies){var r=this.verticies[n];if(this._gl!==r.gl)throw new Error("All vertex buffers should be initialized with same context")}}}]),e}();t.default=o},function(e,t){"use strict";function n(e){if("string"==typeof e){var t=/\s*new\s*\(\s*([a-zA-Z\d\-]+)\s*\)/,n=void 0;if(n=t.exec(e))return this.component[this.declaration.componentBoundTo]=null,this.companion.get("MaterialFactory").instanciate(n[1]);var r=this.tree(e)("Material").get();return this.component[this.declaration.componentBoundTo]=r,r.materialPromise}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){if(e instanceof Array)return e;if("string"==typeof e){var t=e.split(",");return t.map(function(e){return Number.parseFloat(e)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){return Number.parseFloat(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e instanceof s.default?e:i.default.parseRotation3D(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(85),i=r(a),u=n(68),s=r(u);t.default=o},function(e,t){"use strict";function n(e){if(Array.isArray(e))return e;if("string"==typeof e){var t=e.split(",");return t.map(function(e){return e})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){return"string"==typeof e?e:"undefined"==typeof e?e:"function"==typeof e.toString?e.toString():void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){e.update(t),requestAnimationFrame(function(){return o(e,t)})}function a(e){var t=/(query|backbuffer|video)\((.+)\)[^\)]*$/,n=void 0;return(n=t.exec(e))?{type:n[1],param:n[2]}:null}function i(e){var t=document.createElement("video");return t.src=e,t}function u(e,t){var n=new d.default(e);return t.play(),n.update(t),o(n,t),n}function s(e){var t=this;if(e instanceof d.default)return new f.default(e);if("string"==typeof e){var n=a(e);if(n){var r=function(){var e=n.param;switch(n.type){case"backbuffer":return{v:new f.default(function(t){return t[e]})};case"video":return{v:new f.default(u(t.companion.get("gl"),i(e)))}}}();if("object"===("undefined"==typeof r?"undefined":l(r)))return r.v}else{var o=function(){var n=new d.default(t.companion.get("gl"));return v.default.resolve(e).then(function(e){n.update(e)}),t.companion.get("loader").register(n.validPromise),{v:new f.default(n)}}();if("object"===("undefined"==typeof o?"undefined":l(o)))return o.v}}if("object"===("undefined"==typeof e?"undefined":l(e)))if(e instanceof HTMLImageElement){var s=function(){var n=new d.default(t.companion.get("gl"));return e.complete&&e.naturalWidth?n.update(e):e.onload=function(){n.update(e)},{v:new f.default(n)}}();if("object"===("undefined"==typeof s?"undefined":l(s)))return s.v}else{if(e instanceof HTMLCanvasElement){var c=new d.default(this.companion.get("gl"));return c.update(e),new f.default(c)}if(e instanceof HTMLVideoElement)return new f.default(u(this.companion.get("gl"),e))}}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=n(104),f=r(c),h=n(28),d=r(h),p=n(5),v=r(p);t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){n(this,e),this.rawResource=t,this._isFunctionalProxy="function"==typeof t}return r(e,[{key:"get",value:function(e){return this._isFunctionalProxy?this.rawResource(e):this.rawResource}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e instanceof i.default?e:i.default.parse(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(54),i=r(a);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e instanceof i.default?e:i.default.parse(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(8),i=r(a);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){return e instanceof i.default?e:i.default.parse(e)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i=r(a);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var n=/(\d+)\s*%/,r=void 0;if(r=n.exec(t)){var o=Number.parseFloat(r[1]);return Math.floor(e*o*.01)}return Math.floor(Number.parseFloat(t))}function a(e){if(e instanceof s.default)return function(){return e};if("string"==typeof e){if("auto"===e)return function(e){return new s.default(0,0,e.width,e.height)};var t=function(){var t=e.split(",");if(4!==t.length)throw new Error("Invalid viewport size was specified.");return{v:function(e){return new s.default(o(e.width,t[0]),o(e.height,t[1]),o(e.width,t[2]),o(e.height,t[3]))}}}();if("object"===("undefined"==typeof t?"undefined":i(t)))return t.v}throw new Error(e+" could not be parsed")}Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(109),s=r(u);t.default=a},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=window.GrimoireJS.lib.math.Rectangle},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(8),u=r(i),s=n(111),l=r(s),c=n(34),f=r(c),h=n(112),d=r(h),p=function(){function e(){o(this,e)}return a(e,null,[{key:"register",value:function(){e._registerTriangle(),e._registerQuad(),e._registerCube(),e._registerSphere(),e._registerCircle(),e._registerCylinder(),e._registerCone(),e._registerPlane()}},{key:"_registerTriangle",value:function(){f.default.addType("triangle",{},function(e,t){return d.default.build(e,{indicies:{default:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.triangleIndex(0),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.linesFromTriangles(l.default.triangleIndex(0)),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:l.default.triangleSize(),getGenerators:function(){return{position:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.trianglePosition(u.default.Zero,u.default.YUnit,u.default.XUnit),"t0",1);case 1:case"end":return e.stop()}},e,this)}),normal:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.triangleNormal(u.default.ZUnit),"t0",1);case 1:case"end":return e.stop()}},e,this)}),texCoord:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.triangleTexCoord(),"t0",1);case 1:case"end":return e.stop()}},e,this)})}}}}})})}},{key:"_registerQuad",value:function(){f.default.addType("quad",{},function(e,t){return d.default.build(e,{indicies:{default:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.quadIndex(0),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.linesFromTriangles(l.default.quadIndex(0)),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:l.default.quadSize(),getGenerators:function(){return{position:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.quadPosition(u.default.Zero,u.default.YUnit,u.default.XUnit),"t0",1);case 1:case"end":return e.stop()}},e,this)}),normal:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.quadNormal(u.default.ZUnit),"t0",1);case 1:case"end":return e.stop()}},e,this)}),texCoord:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.quadTexCoord(),"t0",1);case 1:case"end":return e.stop()}},e,this)})}}}}})})}},{key:"_registerCube",value:function(){f.default.addType("cube",{},function(e,t){return d.default.build(e,{indicies:{default:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.cubeIndex(0),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.linesFromTriangles(l.default.cubeIndex(0)),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:l.default.cubeSize(),getGenerators:function(){return{position:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.cubePosition(u.default.Zero,u.default.YUnit,u.default.XUnit,u.default.ZUnit.negateThis()),"t0",1);case 1:case"end":return e.stop()}},e,this)}),normal:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.cubeNormal(u.default.Zero,u.default.YUnit,u.default.XUnit,u.default.ZUnit.negateThis()),"t0",1);case 1:case"end":return e.stop()}},e,this)}),texCoord:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.cubeTexCoord(),"t0",1);case 1:case"end":return e.stop()}},e,this)})}}}}})})}},{key:"_registerSphere",value:function(){f.default.addType("sphere",{divVertical:{converter:"Number",defaultValue:100},divHorizontal:{converter:"Number",defaultValue:100}},function(e,t){var n=t.divHorizontal,r=t.divVertical;return d.default.build(e,{indicies:{default:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.sphereIndex(0,n,r),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.linesFromTriangles(l.default.sphereIndex(0,n,r)),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:l.default.sphereSize(n,r),getGenerators:function(){return{position:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.spherePosition(u.default.Zero,u.default.YUnit,u.default.XUnit,u.default.ZUnit.negateThis(),n,r),"t0",1);case 1:case"end":return e.stop()}},e,this)}),normal:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.sphereNormal(u.default.YUnit,u.default.XUnit,u.default.ZUnit.negateThis(),n,r),"t0",1);case 1:case"end":return e.stop()}},e,this)}),texCoord:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.sphereTexCoord(n,r),"t0",1);case 1:case"end":return e.stop()}},e,this)})}}}}})})}},{key:"_registerCircle",value:function(){f.default.addType("circle",{divide:{converter:"Number",defaultValue:50}},function(e,t){var n=t.divide;return d.default.build(e,{indicies:{default:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.ellipseIndex(0,n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.linesFromTriangles(l.default.ellipseIndex(0,n)),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:l.default.ellipseSize(n),getGenerators:function(){return{position:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.ellipsePosition(u.default.Zero,u.default.YUnit,u.default.XUnit,n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),normal:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.ellipseNormal(u.default.ZUnit,n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),texCoord:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.ellipseTexCoord(n),"t0",1);case 1:case"end":return e.stop()}},e,this)})}}}}})})}},{key:"_registerCylinder",value:function(){f.default.addType("cylinder",{divide:{converter:"Number",defaultValue:50}},function(e,t){var n=t.divide;return d.default.build(e,{indicies:{default:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.cylinderIndex(0,n),"t0",1);
case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.linesFromTriangles(l.default.cylinderIndex(0,n)),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:l.default.cylinderSize(n),getGenerators:function(){return{position:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.cylinderPosition(u.default.Zero,u.default.YUnit,u.default.XUnit,u.default.ZUnit.negateThis(),n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),normal:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.cylinderNormal(u.default.Zero,u.default.YUnit,u.default.XUnit,u.default.ZUnit.negateThis(),n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),texCoord:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.cylinderTexCoord(n),"t0",1);case 1:case"end":return e.stop()}},e,this)})}}}}})})}},{key:"_registerCone",value:function(){f.default.addType("cone",{divide:{converter:"Number",defaultValue:50}},function(e,t){var n=t.divide;return d.default.build(e,{indicies:{default:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.coneIndex(0,n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.linesFromTriangles(l.default.coneIndex(0,n)),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:l.default.coneSize(n),getGenerators:function(){return{position:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.conePosition(u.default.Zero,u.default.YUnit,u.default.XUnit,u.default.ZUnit.negateThis(),n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),normal:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.coneNormal(u.default.Zero,u.default.YUnit,u.default.XUnit,u.default.ZUnit.negateThis(),n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),texCoord:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.coneTexCoord(n),"t0",1);case 1:case"end":return e.stop()}},e,this)})}}}}})})}},{key:"_registerPlane",value:function(){f.default.addType("plane",{divide:{converter:"Number",defaultValue:10}},function(e,t){var n=t.divide;return d.default.build(e,{indicies:{default:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.planeIndex(0,n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.linesFromTriangles(l.default.planeIndex(0,n)),"t0",1);case 1:case"end":return e.stop()}},e,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:l.default.planeSize(n),getGenerators:function(){return{position:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.planePosition(u.default.Zero,u.default.YUnit,u.default.XUnit,n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),normal:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.planeNormal(u.default.ZUnit,n),"t0",1);case 1:case"end":return e.stop()}},e,this)}),texCoord:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(l.default.planeTexCoord(n),"t0",1);case 1:case"end":return e.stop()}},e,this)})}}}}})})}}]),e}();t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(8),u=r(i),s=function(){function e(){o(this,e)}return a(e,null,[{key:"fromArray",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.length)){e.next=7;break}return e.next=4,t[n];case 4:n++,e.next=1;break;case 7:case"end":return e.stop()}},e,this)})},{key:"linesFromTriangles",value:regeneratorRuntime.mark(function e(t){var n,r,o,a,i,u,s,l,c,f,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=new Array(3),r=0,o=!0,a=!1,i=void 0,e.prev=5,u=t[Symbol.iterator]();case 7:if(o=(s=u.next()).done){e.next=17;break}if(l=s.value,n[r%3]=l,r%3!==2){e.next=13;break}return c=n[0],f=n[1],h=n[2],e.delegateYield([c,f,f,h,h,c],"t0",13);case 13:r++;case 14:o=!0,e.next=7;break;case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(5),a=!0,i=e.t1;case 23:e.prev=23,e.prev=24,!o&&u.return&&u.return();case 26:if(e.prev=26,!a){e.next=29;break}throw i;case 29:return e.finish(26);case 30:return e.finish(23);case 31:case"end":return e.stop()}},e,this,[[5,19,23,31],[24,,26,30]])})},{key:"ellipsePosition",value:regeneratorRuntime.mark(function e(t,n,r,o){var a,i,u,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.X;case 2:return e.next=4,t.Y;case 4:return e.next=6,t.Z;case 6:a=2*Math.PI/o,i=0;case 8:if(!(i<o)){e.next=21;break}return u=a*i,s=Math.sin(2*Math.PI-u),l=Math.cos(2*Math.PI-u),e.next=14,t.X+l*n.X+s*r.X;case 14:return e.next=16,t.Y+l*n.Y+s*r.Y;case 16:return e.next=18,t.Z+l*n.Z+s*r.Z;case 18:i++,e.next=8;break;case 21:case"end":return e.stop()}},e,this)})},{key:"trianglePosition",value:regeneratorRuntime.mark(function e(t,n,r){var o,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.addWith(n),a=t.subtractWith(n).addWith(r),i=t.subtractWith(n).subtractWith(r),e.delegateYield(o.rawElements,"t0",4);case 4:return e.delegateYield(a.rawElements,"t1",5);case 5:return e.delegateYield(i.rawElements,"t2",6);case 6:case"end":return e.stop()}},e,this)})},{key:"cubePosition",value:regeneratorRuntime.mark(function t(n,r,o,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.quadPosition(n.subtractWith(a),r,o),"t0",1);case 1:return t.delegateYield(e.quadPosition(n.addWith(a),r,o.negateThis()),"t1",2);case 2:return t.delegateYield(e.quadPosition(n.addWith(r),a,o),"t2",3);case 3:return t.delegateYield(e.quadPosition(n.addWith(o),a,r.negateThis()),"t3",4);case 4:return t.delegateYield(e.quadPosition(n.subtractWith(r),a,o.negateThis()),"t4",5);case 5:return t.delegateYield(e.quadPosition(n.subtractWith(o),a,r),"t5",6);case 6:case"end":return t.stop()}},t,this)})},{key:"quadPosition",value:regeneratorRuntime.mark(function e(t,n,r){var o,a,i,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.subtractWith(r).addWith(n),a=t.addWith(r).addWith(n),i=t.addWith(r).subtractWith(n),u=t.subtractWith(r).subtractWith(n),e.delegateYield(o.rawElements,"t0",5);case 5:return e.delegateYield(a.rawElements,"t1",6);case 6:return e.delegateYield(i.rawElements,"t2",7);case 7:return e.delegateYield(u.rawElements,"t3",8);case 8:case"end":return e.stop()}},e,this)})},{key:"planePosition",value:regeneratorRuntime.mark(function e(t,n,r,o){var a,i,u,s,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.addWith(r).multiplyWith(2),i=t.subtractWith(n).multiplyWith(2),u=-o/2;case 3:if(!(u<o/2+1)){e.next=13;break}s=-o/2;case 5:if(!(s<o/2+1)){e.next=10;break}return e.delegateYield(a.multiplyWith(s/o).addWith(i.multiplyWith(u/o)).rawElements,"t0",7);case 7:s++,e.next=5;break;case 10:u++,e.next=3;break;case 13:l=-o/2;case 14:if(!(l<o/2+1)){e.next=24;break}c=-o/2;case 16:if(!(c<o/2+1)){e.next=21;break}return e.delegateYield(a.multiplyWith(c/o).addWith(i.multiplyWith(l/o)).rawElements,"t1",18);case 18:c++,e.next=16;break;case 21:l++,e.next=14;break;case 24:case"end":return e.stop()}},e,this)})},{key:"cylinderPosition",value:regeneratorRuntime.mark(function t(n,r,o,a,i){var s,l,c,f,h,d,p,v,m,y;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.ellipsePosition(n.addWith(r),a,o,i),"t0",1);case 1:return t.delegateYield(e.ellipsePosition(n.subtractWith(r),a,u.default.negate(o),i),"t1",2);case 2:s=2*Math.PI/i,l=Math.cos(s/2),c=Math.sin(s/2),f=i%2==0?s/2:0,h=0;case 7:if(!(h<i)){t.next=17;break}return d=s/2+s*h,p=Math.sin((Math.PI-s)/2-d-f),v=Math.cos((Math.PI-s)/2-d-f),m=new u.default(l*v,n.Y,l*p),y=new u.default(Math.cos(-s/2-d-f),n.Y,Math.sin(-s/2-d-f)),t.delegateYield(e.quadPosition(m,r,u.default.multiply(c,y)),"t2",14);case 14:h++,t.next=7;break;case 17:case"end":return t.stop()}},t,this)})},{key:"conePosition",value:regeneratorRuntime.mark(function t(n,r,o,a,i){var s,l,c,f,h,d,p,v,m,y;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.ellipsePosition(n.subtractWith(r),a,u.default.negate(o),i),"t0",1);case 1:s=2*Math.PI/i,l=Math.cos(s/2)/2,c=Math.sin(s/2),f=i%2==1?s/2:0,h=0;case 6:if(!(h<i)){t.next=16;break}return d=s*h,p=Math.sin((Math.PI-s)/2-d-f),v=Math.cos((Math.PI-s)/2-d-f),m=new u.default(l*v,n.Y,l*p),y=new u.default(Math.cos(-s/2-d-f),n.Y,Math.sin(-s/2-d-f)),t.delegateYield(e.trianglePosition(m,r.subtractWith(m),u.default.multiply(c,y)),"t1",13);case 13:h++,t.next=6;break;case 16:case"end":return t.stop()}},t,this)})},{key:"spherePosition",value:regeneratorRuntime.mark(function e(t,n,r,o,a,i){var u,s,l,c,f,h,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.addWith(n).rawElements,"t0",1);case 1:return e.delegateYield(t.subtractWith(n).rawElements,"t1",2);case 2:u=2*Math.PI/i,s=Math.PI/(a+1),l=1;case 5:if(!(l<=a)){e.next=19;break}c=s*l,f=Math.sin(c),h=n.multiplyWith(Math.cos(c)),d=0;case 10:if(!(d<=i)){e.next=16;break}return p=u*d,e.delegateYield(r.multiplyWith(Math.cos(p)).addWith(o.multiplyWith(Math.sin(p))).multiplyWith(f).addWith(h).rawElements,"t2",13);case 13:d++,e.next=10;break;case 16:l++,e.next=5;break;case 19:case"end":return e.stop()}},e,this)})},{key:"quadNormal",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.rawElements,"t0",1);case 1:return e.delegateYield(t.rawElements,"t1",2);case 2:return e.delegateYield(t.rawElements,"t2",3);case 3:return e.delegateYield(t.rawElements,"t3",4);case 4:case"end":return e.stop()}},e,this)})},{key:"ellipseNormal",value:regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<n+1)){e.next=6;break}return e.delegateYield(t.rawElements,"t0",3);case 3:r++,e.next=1;break;case 6:case"end":return e.stop()}},e,this)})},{key:"triangleNormal",value:regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.rawElements,"t0",1);case 1:return e.delegateYield(t.rawElements,"t1",2);case 2:return e.delegateYield(t.rawElements,"t2",3);case 3:case"end":return e.stop()}},e,this)})},{key:"cubeNormal",value:regeneratorRuntime.mark(function t(n,r,o,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.quadNormal(a.negateThis()),"t0",1);case 1:return t.delegateYield(e.quadNormal(a),"t1",2);case 2:return t.delegateYield(e.quadNormal(r),"t2",3);case 3:return t.delegateYield(e.quadNormal(o),"t3",4);case 4:return t.delegateYield(e.quadNormal(r.negateThis()),"t4",5);case 5:return t.delegateYield(e.quadNormal(o.negateThis()),"t5",6);case 6:case"end":return t.stop()}},t,this)})},{key:"cylinderNormal",value:regeneratorRuntime.mark(function t(n,r,o,a,i){var s,l,c,f,h,d,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.ellipseNormal(r,i),"t0",1);case 1:return t.delegateYield(e.ellipseNormal(r.negateThis(),i),"t1",2);case 2:s=2*Math.PI/i,l=new u.default(Math.cos(-s/2),n.Y,Math.sin(-s/2)),c=0;case 5:if(!(c<i)){t.next=18;break}return f=s*(c+1),h=Math.sin(Math.PI/2-f),d=Math.cos(Math.PI/2-f),p=new u.default(Math.cos(-s/2-f),n.Y,Math.sin(-s/2-f)),t.delegateYield(u.default.cross(l,r).rawElements,"t2",11);case 11:return t.delegateYield(u.default.cross(p,r).rawElements,"t3",12);case 12:return t.delegateYield(u.default.cross(p,r).rawElements,"t4",13);case 13:return t.delegateYield(u.default.cross(l,r).rawElements,"t5",14);case 14:l=p;case 15:c++,t.next=5;break;case 18:case"end":return t.stop()}},t,this)})},{key:"coneNormal",value:regeneratorRuntime.mark(function t(n,r,o,a,i){var s,l,c,f,h,d,p,v,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.ellipseNormal(r.negateThis(),i),"t0",1);case 1:s=Math.PI/i,l=Math.cos(s/2)/2,c=u.default.cross(new u.default(Math.cos(s/2),n.Y,Math.sin(s/2)),r.subtractWith(new u.default(l*Math.cos((Math.PI+s)/2),n.Y,l*Math.sin((Math.PI+s)/2)))),f=0;case 5:if(!(f<2*i)){t.next=18;break}return h=s*f,d=Math.sin((Math.PI-s)/2-h),p=Math.cos((Math.PI-s)/2-h),v=new u.default(l*p,n.Y,l*d),m=new u.default(Math.cos(-s/2-h),n.Y,Math.sin(-s/2-h)),t.delegateYield(u.default.cross(m,r.subtractWith(v)).rawElements,"t1",12);case 12:if(f%2!=1){t.next=15;break}return t.delegateYield(c.rawElements,"t2",14);case 14:c=u.default.cross(m,r.subtractWith(v));case 15:f++,t.next=5;break;case 18:return t.delegateYield(u.default.cross(new u.default(Math.cos(s/2),n.Y,Math.sin(s/2)),r.subtractWith(new u.default(l*Math.cos((Math.PI+s)/2),n.Y,l*Math.sin((Math.PI+s)/2)))).rawElements,"t3",19);case 19:case"end":return t.stop()}},t,this)})},{key:"planeNormal",value:regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=e.planeSize(r)/2,a=0;case 2:if(!(a<o)){t.next=7;break}return t.delegateYield(n.rawElements,"t0",4);case 4:a++,t.next=2;break;case 7:i=0;case 8:if(!(i<o)){t.next=13;break}return t.delegateYield(n.negateThis().rawElements,"t1",10);case 10:i++,t.next=8;break;case 13:case"end":return t.stop()}},t,this)})},{key:"sphereNormal",value:regeneratorRuntime.mark(function t(n,r,o,a,i){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.spherePosition(u.default.Zero,n,r,o,a,i),"t0",1);case 1:case"end":return t.stop()}},t,this)})},{key:"sphereTexCoord",value:regeneratorRuntime.mark(function e(t,n){var r,o,a,i,u,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield([0,0,0,1],"t0",1);case 1:r=2*Math.PI/n,o=Math.PI/(t+1),a=1;case 4:if(!(a<=t)){e.next=17;break}i=o*a,u=Math.sin(i),s=0;case 8:if(!(s<=n)){e.next=14;break}return l=r*s,e.delegateYield([l/Math.PI/2,i/Math.PI],"t1",11);case 11:s++,e.next=8;break;case 14:a++,e.next=4;break;case 17:case"end":return e.stop()}},e,this)})},{key:"quadTexCoord",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield([0,0],"t0",1);case 1:return e.delegateYield([1,0],"t1",2);case 2:return e.delegateYield([1,1],"t2",3);case 3:return e.delegateYield([0,1],"t3",4);case 4:case"end":return e.stop()}},e,this)})},{key:"cubeTexCoord",value:regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<6)){t.next=6;break}return t.delegateYield(e.quadTexCoord(),"t0",3);case 3:n++,t.next=1;break;case 6:case"end":return t.stop()}},t,this)})},{key:"triangleTexCoord",value:regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield([0,0],"t0",1);case 1:return e.delegateYield([1,0],"t1",2);case 2:return e.delegateYield([0,1],"t2",3);case 3:case"end":return e.stop()}},e,this)})},{key:"ellipseTexCoord",value:regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield([.5,.5],"t0",1);case 1:n=2*Math.PI/t,r=0;case 3:if(!(r<t)){e.next=9;break}return o=n*r,e.delegateYield([.5+Math.cos(o+Math.PI)/2,.5+Math.sin(o+Math.PI)/2],"t1",6);case 6:r++,e.next=3;break;case 9:case"end":return e.stop()}},e,this)})},{key:"planeTexCoord",value:regeneratorRuntime.mark(function e(t){var n,r,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t+1)){e.next=11;break}r=0;case 3:if(!(r<t+1)){e.next=8;break}return e.delegateYield([r/t,n/t],"t0",5);case 5:r++,e.next=3;break;case 8:n++,e.next=1;break;case 11:o=0;case 12:if(!(o<t+1)){e.next=22;break}a=0;case 14:if(!(a<t+1)){e.next=19;break}return e.delegateYield([a/t,o/t],"t1",16);case 16:a++,e.next=14;break;case 19:o++,e.next=12;break;case 22:case"end":return e.stop()}},e,this)})},{key:"cylinderTexCoord",value:regeneratorRuntime.mark(function t(n){var r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.ellipseTexCoord(n),"t0",1);case 1:return t.delegateYield(e.ellipseTexCoord(n),"t1",2);case 2:r=1/n,o=0;case 4:if(!(o<n)){t.next=12;break}return t.delegateYield([r*o,0],"t2",6);case 6:return t.delegateYield([r*(o+1),0],"t3",7);case 7:return t.delegateYield([r*(o+1),1],"t4",8);case 8:return t.delegateYield([r*o,1],"t5",9);case 9:o++,t.next=4;break;case 12:case"end":return t.stop()}},t,this)})},{key:"coneTexCoord",value:regeneratorRuntime.mark(function t(n){var r,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.ellipseTexCoord(n),"t0",1);case 1:r=Math.PI/2/n,o=0;case 3:if(!(o<n)){t.next=11;break}return a=-r*o,t.delegateYield([0,0],"t1",6);case 6:return t.delegateYield([Math.cos(a-r),Math.sin(a-r)],"t2",7);case 7:return t.delegateYield([Math.cos(a),Math.sin(a)],"t3",8);case 8:o++,t.next=3;break;case 11:case"end":return t.stop()}},t,this)})},{key:"triangleIndex",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.delegateYield([n,n+2,n+1],"t0",2);case 2:case"end":return e.stop()}},e,this)})},{key:"quadIndex",value:regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.delegateYield([n,n+2,n+1,n,n+3,n+2],"t0",2);case 2:case"end":return e.stop()}},e,this)})},{key:"cubeIndex",value:regeneratorRuntime.mark(function t(n){var r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.quadSize(),o=0;case 2:if(!(o<6)){t.next=7;break}return t.delegateYield(e.quadIndex(n+r*o),"t0",4);case 4:o++,t.next=2;break;case 7:case"end":return t.stop()}},t,this)})},{key:"sphereIndex",value:regeneratorRuntime.mark(function e(t,n,r){var o,a,i,u,s,l,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=function(e,n){return t+(r+1)*n+2+e},a=t,i=t+1,u=0;case 4:if(!(u<r)){e.next=14;break}return e.next=7,a;case 7:return e.next=9,o(u,0);case 9:return e.next=11,o(u+1,0);case 11:u++,e.next=4;break;case 14:s=0;case 15:if(!(s<n-1)){e.next=36;break}l=0;case 17:if(!(l<r)){e.next=33;break}return e.next=20,o(l,s);case 20:return e.next=22,o(l,s+1);case 22:return e.next=24,o(l+1,s);case 24:return e.next=26,o(l,s+1);case 26:return e.next=28,o(l+1,s+1);case 28:return e.next=30,o(l+1,s);case 30:l++,e.next=17;break;case 33:s++,e.next=15;break;case 36:c=0;case 37:if(!(c<r)){e.next=47;break}return e.next=40,i;case 40:return e.next=42,o(c+1,n-1);case 42:return e.next=44,o(c,n-1);case 44:c++,e.next=37;break;case 47:case"end":return e.stop()}},e,this)})},{key:"cylinderIndex",value:regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.ellipseSize(r),a=e.quadSize(),t.delegateYield(e.ellipseIndex(n,r),"t0",3);case 3:return t.delegateYield(e.ellipseIndex(n+o,r),"t1",4);case 4:i=0;case 5:if(!(i<r)){t.next=10;break}return t.delegateYield(e.quadIndex(n+2*o+a*i),"t2",7);case 7:i++,t.next=5;break;case 10:case"end":return t.stop()}},t,this)})},{key:"coneIndex",value:regeneratorRuntime.mark(function t(n,r){var o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.ellipseSize(r),a=e.triangleSize(),t.delegateYield(e.ellipseIndex(n,r),"t0",3);case 3:i=0;case 4:if(!(i<r)){t.next=9;break}return t.delegateYield(e.triangleIndex(n+o+i*a),"t1",6);case 6:i++,t.next=4;break;case 9:case"end":return t.stop()}},t,this)})},{key:"planeIndex",value:regeneratorRuntime.mark(function t(n,r){var o,a,i,u,s,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=n,a=e.planeSize(r)/2,i=0;case 3:if(!(i<r)){t.next=15;break}u=0;case 5:if(!(u<r)){t.next=12;break}return o=n+u+i*(r+1),t.delegateYield([o,o+r+2,o+1],"t0",8);case 8:return t.delegateYield([o,o+r+1,o+r+2],"t1",9);case 9:u++,t.next=5;break;case 12:i++,t.next=3;break;case 15:s=0;case 16:if(!(s<r)){t.next=28;break}l=0;case 18:if(!(l<r)){t.next=25;break}return o=n+l+s*(r+1)+a,t.delegateYield([o,o+1,o+r+2],"t2",21);case 21:return t.delegateYield([o,o+r+2,o+r+1],"t3",22);case 22:l++,t.next=18;break;case 25:s++,t.next=16;break;case 28:case"end":return t.stop()}},t,this)})},{key:"ellipseIndex",value:regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<n-1)){e.next=6;break}return e.delegateYield([t,t+1+r,t+2+r],"t0",3);case 3:r++,e.next=1;break;case 6:return e.delegateYield([t,t+n,t+1],"t1",7);case 7:case"end":return e.stop()}},e,this)})},{key:"quadSize",value:function(){return 4}},{key:"triangleSize",value:function(){return 3}},{key:"cubeSize",value:function(){return 6*e.quadSize()}},{key:"sphereSize",value:function(e,t){return 2+e*(t+1)}},{key:"cylinderSize",value:function(t){return 2*e.ellipseSize(t)+t*e.quadSize()}},{key:"coneSize",value:function(t){return e.ellipseSize(t)+t*e.triangleSize()}},{key:"planeSize",value:function(e){return(e+1)*(e+1)*2}},{key:"ellipseSize",value:function(e){return e+1}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(113),u=r(i),s=n(95),l=r(s),c=function(){function e(){o(this,e)}return a(e,null,[{key:"build",value:function(e,t){var n={},r={};for(var o in t.verticies){var a=4,i=t.verticies[o],s=0;for(var c in i.size){if(r[c])throw new Error("Attribute variable name was dupelicated");var f=i.size[c];r[c]={size:f,offset:s*a,bufferName:o,type:i.type?i.type:WebGLRenderingContext.FLOAT,stride:0},s+=f}for(var h in i.size)r[h].stride=s*a;var d=new Array(s*i.count),p=i.getGenerators(),v=[],m=[],y=p.beforeEach?p.beforeEach():void 0;for(var b in i.size)if("beforeEach"!==b){var g=p[b];v.push(g()),m.push(i.size[b])}for(var _=0,M=0;M<i.count;M++){if(y&&y.next().done)throw new Error("before each was ended before reaching count.");for(var w=0;w<v.length;w++)for(var x=v[w],S=0;S<m[w];S++){var E=x.next();if(E.done)throw new Error("Generator function finished before reaching specified count");d[_]=E.value,_++}}n[o]=new u.default(e,WebGLRenderingContext.ARRAY_BUFFER,i.usage?i.usage:WebGLRenderingContext.STATIC_DRAW),n[o].update(new Float32Array(d))}return new l.default(n,r,this._generateIndicies(e,t.indicies))}},{key:"_generateIndicies",value:function(e,t){var n={};for(var r in t){var o=[],a=t[r],i=!0,s=!1,l=void 0;try{for(var c,f=a.generator()[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var h=c.value;o.push(h)}}catch(e){s=!0,l=e}finally{try{!i&&f.return&&f.return()}finally{if(s)throw l}}var d=this._getIndexType(o.length),p=new u.default(e,WebGLRenderingContext.ELEMENT_ARRAY_BUFFER,WebGLRenderingContext.STATIC_DRAW);p.update(new d.ctor(o)),n[r]={count:o.length,index:p,type:d.format,byteSize:d.byteSize,topology:a.topology?a.topology:WebGLRenderingContext.TRIANGLES}}return n}},{key:"_getIndexType",value:function(e){var t=WebGLRenderingContext.UNSIGNED_INT,n=Uint32Array,r=4;if(e<256)t=WebGLRenderingContext.UNSIGNED_BYTE,n=Uint8Array,r=1;else if(e<65535)t=WebGLRenderingContext.UNSIGNED_SHORT,n=Uint16Array,r=2;else if(e>=4294967296)throw new Error("Too many index of geometry!");return{format:t,ctor:n,byteSize:r}}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in o)return o.value;var i=o.get;if(void 0!==i)return i.call(r)},l=n(29),c=r(l),f=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.target=n,i.usage=r,i.buffer=e.createBuffer(),i}return i(t,e),u(t,[{key:"update",value:function(e,t){this.bind(),t?(this.valid||this.gl.bufferData(this.target,e+t.byteLength,this.usage),this.gl.bufferSubData(this.target,e,t)):"number"==typeof e?this.gl.bufferData(this.target,e,this.usage):this.gl.bufferData(this.target,e,this.usage),this.valid=!0}},{key:"bind",value:function(){this.gl.bindBuffer(this.target,this.buffer)}},{key:"destroy",value:function(){s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.gl.deleteBuffer(this.buffer)}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(46),u=r(i),s=n(115),l=r(s),c=n(116),f=r(c),h=n(117),d=r(h),p=function(){function e(){o(this,e)}return a(e,null,[{key:"register",value:function(){u.default.addSORTMaterial("unlit",l.default),u.default.addSORTMaterial("unlit-texture",d.default),u.default.addSORTMaterial("unlit-color",f.default)}}]),e}();t.default=p},function(e,t){e.exports='@Pass\nFS_PREC(mediump,float)\nvarying vec2 vTexCoord;\n#ifdef VS\nattribute vec3 position;\nattribute vec2 texCoord;\nuniform mat4 _matPVM;\nvoid main()\n{\n  gl_Position = _matPVM * vec4(position,1.0);\n  vTexCoord = texCoord;\n}\n#endif\n#ifdef FS\n@{type:"color",default:"white"}\nuniform vec4 color;\n@{usedFlag:"_textureUsed"}\nuniform sampler2D texture;\nuniform bool _textureUsed;\nvoid main(void)\n{\n  if(_textureUsed){\n    gl_FragColor = color * texture2D(texture,vTexCoord);\n  }else{\n    gl_FragColor = color;\n }\n}\n#endif\n'},function(e,t){e.exports='@Pass\nFS_PREC(mediump,float)\nvarying vec2 vTexCoord;\n#ifdef VS\nattribute vec3 position;\nattribute vec2 texCoord;\nuniform mat4 _matPVM;\nvoid main()\n{\n  gl_Position = _matPVM * vec4(position,1.0);\n  vTexCoord = texCoord;\n}\n#endif\n#ifdef FS\n@{type:"color",default:"white"}\nuniform vec4 color;\nvoid main(void)\n{\n    gl_FragColor = color;\n}\n#endif\n'},function(e,t){e.exports="@Pass\nFS_PREC(mediump,float)\nvarying vec2 vTexCoord;\n#ifdef VS\nattribute vec3 position;\nattribute vec2 texCoord;\nuniform mat4 _matPVM;\nvoid main()\n{\n  gl_Position = _matPVM * vec4(position,1.0);\n  vTexCoord = texCoord;\n}\n#endif\n#ifdef FS\nuniform sampler2D texture;\nvoid main(void)\n{\n  gl_FragColor = texture2D(texture,vTexCoord);\n}\n#endif\n"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(114),a=r(o),i=n(110),u=r(i),s=n(22),l=r(s),c=n(21),f=r(c),h=n(25),d=r(h),p=n(27),v=r(p),m=n(32),y=r(m),b=n(33),g=r(b),_=n(35),M=r(_),w=n(36),x=r(w),S=n(37),E=r(S),I=n(38),F=r(I),k=n(44),O=r(k),D=n(45),P=r(D),R=n(65),C=r(R),A=n(66),T=r(A),j=n(67),N=r(j),L=n(69),z=r(L),q=n(71),V=r(q),B=n(72),Y=r(B),G=n(74),W=r(G),U=n(76),X=r(U),Z=n(26),$=r(Z),H=n(77),Q=r(H),J=n(78),K=r(J),ee=n(79),te=r(ee),ne=n(84),re=r(ne),oe=n(86),ae=r(oe),ie=n(87),ue=r(ie),se=n(88),le=r(se),ce=n(90),fe=r(ce),he=n(91),de=r(he),pe=n(93),ve=r(pe),me=n(94),ye=r(me),be=n(96),ge=r(be),_e=n(103),Me=r(_e),we=n(97),xe=r(we),Se=n(98),Ee=r(Se),Ie=n(99),Fe=r(Ie),ke=n(100),Oe=r(ke),De=n(101),Pe=r(De),Re=n(102),Ce=r(Re),Ae=n(105),Te=r(Ae),je=n(106),Ne=r(je),Le=n(107),ze=r(Le),qe=n(108),Ve=r(qe),Be=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})};t.default=function(){l.default.register(function(){return Be(void 0,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=l.default.ns("HTTP://GRIMOIRE.GL/NS/DEFAULT"),l.default.registerComponent(t("AssetLoadingManager"),f.default),l.default.registerComponent(t("Camera"),d.default),l.default.registerComponent(t("CanvasInitializer"),v.default),l.default.registerComponent(t("Fullscreen"),y.default),l.default.registerComponent(t("Geometry"),g.default),l.default.registerComponent(t("GeometryRegistory"),M.default),l.default.registerComponent(t("HTMLBinder"),x.default),l.default.registerComponent(t("LoopManager"),E.default),l.default.registerComponent(t("Material"),F.default),l.default.registerComponent(t("MaterialContainer"),O.default),
l.default.registerComponent(t("MaterialImporter"),P.default),l.default.registerComponent(t("MaterialManager"),C.default),l.default.registerComponent(t("MeshRenderer"),T.default),l.default.registerComponent(t("MouseCameraControl"),N.default),l.default.registerComponent(t("RenderBuffer"),z.default),l.default.registerComponent(t("Renderer"),V.default),l.default.registerComponent(t("RendererManager"),Y.default),l.default.registerComponent(t("RenderQuad"),W.default),l.default.registerComponent(t("RenderScene"),X.default),l.default.registerComponent(t("Scene"),$.default),l.default.registerComponent(t("TextureBuffer"),Q.default),l.default.registerComponent(t("Texture"),K.default),l.default.registerComponent(t("Transform"),te.default),l.default.registerConverter(t("Angle2D"),re.default),l.default.registerConverter(t("Boolean"),ae.default),l.default.registerConverter(t("CanvasSize"),ue.default),l.default.registerConverter(t("Color3"),le.default),l.default.registerConverter(t("Color4"),fe.default),l.default.registerConverter(t("Component"),de.default),l.default.registerConverter(t("Enum"),ve.default),l.default.registerConverter(t("Geometry"),ye.default),l.default.registerConverter(t("Material"),ge.default),l.default.registerConverter(t("Texture"),Me.default),l.default.registerConverter(t("NumberArray"),xe.default),l.default.registerConverter(t("Number"),Ee.default),l.default.registerConverter(t("Object"),Fe.default),l.default.registerConverter(t("Rotation3"),Oe.default),l.default.registerConverter(t("StringArray"),Pe.default),l.default.registerConverter(t("String"),Ce.default),l.default.registerConverter(t("Texture2D"),Me.default),l.default.registerConverter(t("Vector2"),Te.default),l.default.registerConverter(t("Vector3"),Ne.default),l.default.registerConverter(t("Vector4"),ze.default),l.default.registerConverter(t("Viewport"),Ve.default),l.default.registerNode("goml",["CanvasInitializer","LoopManager","AssetLoadingManager","GeometryRegistory","MaterialManager","RendererManager","Fullscreen"]),l.default.registerNode("renderer",["Renderer"]),l.default.registerNode("scene",["Scene"]),l.default.registerNode("camera",["Transform","Camera"]),l.default.registerNode("empty",[]),l.default.registerNode("object",["Transform"]),l.default.registerNode("geometry",["Geometry"]),l.default.registerNode("texture",["Texture"]),l.default.registerNode("mesh",["Transform","MaterialContainer","MeshRenderer"]),l.default.registerNode("material",["Material"]),l.default.registerNode("import-material",["MaterialImporter"]),l.default.registerNode("texture-buffer",["TextureBuffer"]),l.default.registerNode("render-buffer",["RenderBuffer"]),l.default.registerNode("render-scene",["MaterialContainer","RenderScene"],{material:null}),l.default.registerNode("render-quad",["MaterialContainer","RenderQuad"],{material:null}),u.default.register(),a.default.register();case 62:case"end":return e.stop()}},e,this)}))})}}])})},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),i=n(14),u=r(i),s=n(15),l=r(s),c=n(17),f=r(c),h=n(18),d=r(h),p=n(20),v=r(p),m=n(19),y=r(m),b=n(21),g=r(b),_=n(22),M=r(_),w=n(23),x=r(w),S=n(24),E=r(S),I=n(2),F=r(I),k=n(16),O=r(k),D=n(25),P=r(D),R=n(3),C=r(R),A=n(26),T=r(A),j={AABB:a.default,Color3:u.default,Color4:l.default,Colors:f.default,Matrix:d.default,MatrixArray:v.default,MatrixBase:y.default,PointList:g.default,Quaternion:M.default,Rectangle:x.default,Vector2:E.default,Vector3:F.default,Vector4:O.default,VectorArray:P.default,VectorBase:C.default},N=(0,T.default)();Object.assign(N||{},j),window.GrimoireJS.lib.math=j,t.default=N},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),u=r(i),s=function(){function e(){o(this,e)}return a(e,[{key:"expandAABB",value:function(e){null==this.pointLBF&&(this.pointLBF=u.default.copy(e),this.pointRTN=u.default.copy(e)),this.pointLBF=u.default.min(e,this.pointLBF),this.pointRTN=u.default.max(e,this.pointRTN)}},{key:"clear",value:function(){this.pointLBF=null,this.pointRTN=null}},{key:"toMathematicaCuboid",value:function(){return"Cuboid["+this.pointLBF.toMathematicaString()+","+this.pointRTN.toMathematicaString()+"]"}},{key:"Width",get:function(){return Math.abs(this.pointLBF.X-this.pointRTN.X)}},{key:"Height",get:function(){return Math.abs(this.pointLBF.Y-this.pointRTN.Y)}},{key:"Distance",get:function(){return Math.abs(this.pointLBF.Z-this.pointRTN.Z)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=r(s),c=n(4),f=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"undefined"==typeof n?(i.rawElements=e,a(i)):(i.rawElements=[e,n,r],i)}return i(t,e),u(t,[{key:"toMathematicaString",value:function(){return"{"+this.X+","+this.Y+","+this.Z+"}"}},{key:"normalizeThis",value:function(){return t.normalize(this)}},{key:"dotWith",value:function(e){return t.dot(this,e)}},{key:"addWith",value:function(e){return t.add(this,e)}},{key:"subtractWith",value:function(e){return t.subtract(this,e)}},{key:"multiplyWith",value:function(e){return t.multiply(e,this)}},{key:"negateThis",value:function(){return t.negate(this)}},{key:"equalWith",value:function(e){return t.equals(this,e)}},{key:"nearlyEqualWith",value:function(e){return t.nearlyEquals(this,e)}},{key:"crossWith",value:function(e){return t.cross(this,e)}},{key:"toString",value:function(){return"("+this.X+", "+this.Y+", "+this.Z+")"}},{key:"toDisplayString",value:function(){return"Vector3"+this.toString()}},{key:"normalized",get:function(){return this.multiplyWith(1/this.magnitude)}},{key:"X",get:function(){return this.rawElements[0]},set:function(e){this.rawElements[0]=+e}},{key:"Y",get:function(){return this.rawElements[1]},set:function(e){this.rawElements[1]=+e}},{key:"Z",get:function(){return this.rawElements[2]},set:function(e){this.rawElements[2]=+e}},{key:"ElementCount",get:function(){return 3}}],[{key:"copy",value:function(e){return new t(e.X,e.Y,e.Z)}},{key:"dot",value:function(e,t){return c.vec3.dot(e.rawElements,t.rawElements)}},{key:"add",value:function(e,n){var r=c.vec3.create();return new t(c.vec3.add(r,e.rawElements,n.rawElements))}},{key:"subtract",value:function(e,n){var r=c.vec3.create();return new t(c.vec3.sub(r,e.rawElements,n.rawElements))}},{key:"multiply",value:function(e,n){var r=c.vec3.create();return new t(c.vec3.scale(r,n.rawElements,e))}},{key:"negate",value:function(e){return t.multiply(-1,e)}},{key:"equals",value:function(e,t){return l.default.__elementEquals(e,t)}},{key:"nearlyEquals",value:function(e,t){return l.default.__nearlyElementEquals(e,t)}},{key:"normalize",value:function(e){var n=c.vec3.create();return new t(c.vec3.normalize(n,e.rawElements))}},{key:"cross",value:function(e,n){var r=c.vec3.create();return new t(c.vec3.cross(r,e.rawElements,n.rawElements))}},{key:"min",value:function(e,n){return new t(l.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.min(t.rawElements[e],n.rawElements[e])}))}},{key:"max",value:function(e,n){return new t(l.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.max(t.rawElements[e],n.rawElements[e])}))}},{key:"angle",value:function(e,n){return Math.acos(t.dot(e.normalized,n.normalized))}},{key:"parse",value:function(e){var n=l.default.__parse(e),r=n.elements;if(r&&(1===r.length||3===r.length)){var o=void 0;return o=1===r.length?new t(r[0],r[0],r[0]):new t(r[0],r[1],r[2]),n.needNormalize&&(o=o.normalizeThis()),n.coefficient&&(o=o.multiplyWith(n.coefficient)),n.needNegate&&(o=o.negateThis()),o}}},{key:"XUnit",get:function(){return new t(1,0,0)}},{key:"YUnit",get:function(){return new t(0,1,0)}},{key:"ZUnit",get:function(){return new t(0,0,1)}},{key:"Zero",get:function(){return new t(0,0,0)}},{key:"One",get:function(){return new t(1,1,1)}}]),t}(l.default);t.default=f},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this._magnitudeSquaredCache=-1,this._magnitudeCache=-1}return r(e,[{key:"magnitude",get:function(){return this._magnitudeCache<0&&(this._magnitudeCache=Math.sqrt(this.sqrMagnitude)),this._magnitudeCache}},{key:"ElementCount",get:function(){return 0}},{key:"sqrMagnitude",get:function(){if(this._magnitudeSquaredCache<0){for(var e=0,t=this.rawElements,n=0;n<this.ElementCount;n++)e+=t[n]*t[n];this._magnitudeSquaredCache=e}return this._magnitudeSquaredCache}}],[{key:"__elementEquals",value:function(e,t){if(e.ElementCount!==t.ElementCount)return!1;for(var n=0;n<e.ElementCount;n++)if(e.rawElements[n]!==t.rawElements[n])return!1;return!0}},{key:"__nearlyElementEquals",value:function(e,t){if(e.ElementCount!==t.ElementCount)return!1;for(var n=.01,r=0;r<e.ElementCount;r++)if(Math.abs(e.rawElements[r]-t.rawElements[r])>n)return!1;return!0}},{key:"__fromGenerationFunction",value:function(e,t,n){for(var r=new Float32Array(e.ElementCount),o=0;o<r.length;o++)r[o]=n(o,e,t);return r}},{key:"__parse",value:function(t){var n=/(-?)([\d,E\+\-\.]+)?(n)?\(([-\d,E\+\.\s]+)\)/g,r=n.exec(t);if(r){if(!r[4])throw new Error("The specified string '"+t+"' is not containing braced vector.");return{needNormalize:"n"===r[3],needNegate:"-"===r[1],coefficient:parseFloat(r[2]),elements:e._parseRawVector(r[4])}}return{needNormalize:!1,needNegate:!1,elements:e._parseRawVector(t),coefficient:void 0}}},{key:"_parseRawVector",value:function(e){for(var t=e.split(","),n=new Array(t.length),r=0;r<t.length;r++)if(n[r]=parseFloat(t[r]),isNaN(n[r]))throw new Error("Unexpected vector string "+e);return n}}]),e}();t.default=o},function(e,t,n){t.glMatrix=n(5),t.mat2=n(6),t.mat2d=n(7),t.mat3=n(8),t.mat4=n(9),t.quat=n(10),t.vec2=n(13),t.vec3=n(11),t.vec4=n(12)},function(e,t){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1;const r=new Function("return this")();n.SIMD_AVAILABLE=n.ARRAY_TYPE===r.Float32Array&&"SIMD"in r,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(e){n.ARRAY_TYPE=e};var o=Math.PI/180;n.toRadian=function(e){return e*o},n.equals=function(e,t){return Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},e.exports=n},function(e,t,n){var r=n(5),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e},o.fromValues=function(e,t,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=o,a},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.transpose=function(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*a-o*r;return i?(i=1/i,e[0]=a*i,e[1]=-r*i,e[2]=-o*i,e[3]=n*i,e):null},o.adjoint=function(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e},o.determinant=function(e){return e[0]*e[3]-e[2]*e[1]},o.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return e[0]=r*u+a*s,e[1]=o*u+i*s,e[2]=r*l+a*c,e[3]=o*l+i*c,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+a*u,e[1]=o*s+i*u,e[2]=r*-u+a*s,e[3]=o*-u+i*s,e},o.scale=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=n[0],s=n[1];return e[0]=r*u,e[1]=o*u,e[2]=a*s,e[3]=i*s,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e},o.str=function(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))},o.LDU=function(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},e.exports=o},function(e,t,n){var r=n(5),o={};o.create=function(){var e=new r.ARRAY_TYPE(6);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e},o.fromValues=function(e,t,n,o,a,i){var u=new r.ARRAY_TYPE(6);return u[0]=e,u[1]=t,u[2]=n,u[3]=o,u[4]=a,u[5]=i,u},o.set=function(e,t,n,r,o,a,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=n*a-r*o;return s?(s=1/s,e[0]=a*s,e[1]=-r*s,e[2]=-o*s,e[3]=n*s,e[4]=(o*u-a*i)*s,e[5]=(r*i-n*u)*s,e):null},o.determinant=function(e){return e[0]*e[3]-e[1]*e[2]},o.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1],f=n[2],h=n[3],d=n[4],p=n[5];return e[0]=r*l+a*c,e[1]=o*l+i*c,e[2]=r*f+a*h,e[3]=o*f+i*h,e[4]=r*d+a*p+u,e[5]=o*d+i*p+s,e},o.mul=o.multiply,o.rotate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*l,e[1]=o*c+i*l,e[2]=r*-l+a*c,e[3]=o*-l+i*c,e[4]=u,e[5]=s,e},o.scale=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1];return e[0]=r*l,e[1]=o*l,e[2]=a*c,e[3]=i*c,e[4]=u,e[5]=s,e},o.translate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=n[0],c=n[1];return e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=r*l+a*c+u,e[5]=o*l+i*c+s,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e},o.str=function(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],l=t[0],c=t[1],f=t[2],h=t[3],d=t[4],p=t[5];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-p)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(p))},e.exports=o},function(e,t,n){var r=n(5),o={};o.create=function(){var e=new r.ARRAY_TYPE(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},o.clone=function(e){var t=new r.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromValues=function(e,t,n,o,a,i,u,s,l){var c=new r.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=o,c[4]=a,c[5]=i,c[6]=u,c[7]=s,c[8]=l,c},o.set=function(e,t,n,r,o,a,i,u,s,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e[6]=u,e[7]=s,e[8]=l,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=o}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},o.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=c*i-u*l,h=-c*a+u*s,d=l*a-i*s,p=n*f+r*h+o*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*r+o*l)*p,e[2]=(u*r-o*i)*p,e[3]=h*p,e[4]=(c*n-o*s)*p,e[5]=(-u*n+o*a)*p,e[6]=d*p,e[7]=(-l*n+r*s)*p,e[8]=(i*n-r*a)*p,e):null},o.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8];return e[0]=i*c-u*l,e[1]=o*l-r*c,e[2]=r*u-o*i,e[3]=u*s-a*c,e[4]=n*c-o*s,e[5]=o*a-n*u,e[6]=a*l-i*s,e[7]=r*s-n*l,e[8]=n*i-r*a,e},o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5],u=e[6],s=e[7],l=e[8];return t*(l*a-i*s)+n*(-l*o+i*u)+r*(s*o-a*u)},o.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=n[0],d=n[1],p=n[2],v=n[3],m=n[4],y=n[5],b=n[6],g=n[7],_=n[8];return e[0]=h*r+d*i+p*l,e[1]=h*o+d*u+p*c,e[2]=h*a+d*s+p*f,e[3]=v*r+m*i+y*l,e[4]=v*o+m*u+y*c,e[5]=v*a+m*s+y*f,e[6]=b*r+g*i+_*l,e[7]=b*o+g*u+_*c,e[8]=b*a+g*s+_*f,e},o.mul=o.multiply,o.translate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=n[0],d=n[1];return e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=u,e[5]=s,e[6]=h*r+d*i+l,e[7]=h*o+d*u+c,e[8]=h*a+d*s+f,e},o.rotate=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=Math.sin(n),d=Math.cos(n);return e[0]=d*r+h*i,e[1]=d*o+h*u,e[2]=d*a+h*s,e[3]=d*i-h*r,e[4]=d*u-h*o,e[5]=d*s-h*a,e[6]=l,e[7]=c,e[8]=f,e},o.scale=function(e,t,n){var r=n[0],o=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=o*t[3],e[4]=o*t[4],e[5]=o*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e},o.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},o.fromMat2d=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n+n,u=r+r,s=o+o,l=n*i,c=r*i,f=r*u,h=o*i,d=o*u,p=o*s,v=a*i,m=a*u,y=a*s;return e[0]=1-f-p,e[3]=c-y,e[6]=h+m,e[1]=c+y,e[4]=1-l-p,e[7]=d-v,e[2]=h-m,e[5]=d+v,e[8]=1-l-f,e},o.normalFromMat4=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],b=n*u-r*i,g=n*s-o*i,_=n*l-a*i,M=r*s-o*u,w=r*l-a*u,x=o*l-a*s,S=c*v-f*p,E=c*m-h*p,I=c*y-d*p,F=f*m-h*v,k=f*y-d*v,O=h*y-d*m,D=b*O-g*k+_*F+M*I-w*E+x*S;return D?(D=1/D,e[0]=(u*O-s*k+l*F)*D,e[1]=(s*I-i*O-l*E)*D,e[2]=(i*k-u*I+l*S)*D,e[3]=(o*k-r*O-a*F)*D,e[4]=(n*O-o*I+a*E)*D,e[5]=(r*I-n*k-a*S)*D,e[6]=(v*x-m*w+y*M)*D,e[7]=(m*_-p*x-y*g)*D,e[8]=(p*w-v*_+y*b)*D,e):null},o.str=function(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=t[0],d=t[1],p=t[2],v=t[3],m=t[4],y=t[5],b=e[6],g=t[7],_=t[8];return Math.abs(n-h)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-d)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-v)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(u-m)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-y)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-b)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-g)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(f-_)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))},e.exports=o},function(e,t,n){var r=n(5),o={scalar:{},SIMD:{}};o.create=function(){var e=new r.ARRAY_TYPE(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.clone=function(e){var t=new r.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.fromValues=function(e,t,n,o,a,i,u,s,l,c,f,h,d,p,v,m){var y=new r.ARRAY_TYPE(16);return y[0]=e,y[1]=t,y[2]=n,y[3]=o,y[4]=a,y[5]=i,y[6]=u,y[7]=s,y[8]=l,y[9]=c,y[10]=f,y[11]=h,y[12]=d,y[13]=p,y[14]=v,y[15]=m,y},o.set=function(e,t,n,r,o,a,i,u,s,l,c,f,h,d,p,v,m){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e[4]=a,e[5]=i,e[6]=u,e[7]=s,e[8]=l,e[9]=c,e[10]=f,e[11]=h,e[12]=d,e[13]=p,e[14]=v,e[15]=m,e},o.identity=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.scalar.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],o=t[3],a=t[6],i=t[7],u=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=o,e[13]=i,e[14]=u}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},o.SIMD.transpose=function(e,t){var n,r,o,a,i,u,s,l,c,f;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),i=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(o,a,0,1,4,5),s=SIMD.Float32x4.shuffle(i,u,0,2,4,6),l=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(e,0,s),SIMD.Float32x4.store(e,4,l),i=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(o,a,2,3,6,7),c=SIMD.Float32x4.shuffle(i,u,0,2,4,6),f=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(e,8,c),SIMD.Float32x4.store(e,12,f),e},o.transpose=r.USE_SIMD?o.SIMD.transpose:o.scalar.transpose,o.scalar.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15],b=n*u-r*i,g=n*s-o*i,_=n*l-a*i,M=r*s-o*u,w=r*l-a*u,x=o*l-a*s,S=c*v-f*p,E=c*m-h*p,I=c*y-d*p,F=f*m-h*v,k=f*y-d*v,O=h*y-d*m,D=b*O-g*k+_*F+M*I-w*E+x*S;return D?(D=1/D,e[0]=(u*O-s*k+l*F)*D,e[1]=(o*k-r*O-a*F)*D,e[2]=(v*x-m*w+y*M)*D,e[3]=(h*w-f*x-d*M)*D,e[4]=(s*I-i*O-l*E)*D,e[5]=(n*O-o*I+a*E)*D,e[6]=(m*_-p*x-y*g)*D,e[7]=(c*x-h*_+d*g)*D,e[8]=(i*k-u*I+l*S)*D,e[9]=(r*I-n*k-a*S)*D,e[10]=(p*w-v*_+y*b)*D,e[11]=(f*_-c*w-d*b)*D,e[12]=(u*E-i*F-s*S)*D,e[13]=(n*F-r*E+o*S)*D,e[14]=(v*g-p*M-m*b)*D,e[15]=(c*M-f*g+h*b)*D,e):null},o.SIMD.invert=function(e,t){var n,r,o,a,i,u,s,l,c,f,h=SIMD.Float32x4.load(t,0),d=SIMD.Float32x4.load(t,4),p=SIMD.Float32x4.load(t,8),v=SIMD.Float32x4.load(t,12);return i=SIMD.Float32x4.shuffle(h,d,0,1,4,5),r=SIMD.Float32x4.shuffle(p,v,0,1,4,5),n=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(h,d,2,3,6,7),a=SIMD.Float32x4.shuffle(p,v,2,3,6,7),o=SIMD.Float32x4.shuffle(i,a,0,2,4,6),a=SIMD.Float32x4.shuffle(a,i,1,3,5,7),i=SIMD.Float32x4.mul(o,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(r,i),s=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),c=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,i)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),o=SIMD.Float32x4.swizzle(o,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),l=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),l),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),c),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),l),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(o,i)),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),c),f=SIMD.Float32x4.mul(n,u),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,2,3,0,1),f),f=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(f,1,0,3,2),f),i=SIMD.Float32x4.reciprocalApproximation(f),f=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(f,SIMD.Float32x4.mul(i,i))),(f=SIMD.Float32x4.swizzle(f,0,0,0,0))?(SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(f,u)),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(f,s)),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(f,l)),SIMD.Float32x4.store(e,12,SIMD.Float32x4.mul(f,c)),e):null},o.invert=r.USE_SIMD?o.SIMD.invert:o.scalar.invert,o.scalar.adjoint=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=t[4],u=t[5],s=t[6],l=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],y=t[15];return e[0]=u*(h*y-d*m)-f*(s*y-l*m)+v*(s*d-l*h),e[1]=-(r*(h*y-d*m)-f*(o*y-a*m)+v*(o*d-a*h)),e[2]=r*(s*y-l*m)-u*(o*y-a*m)+v*(o*l-a*s),e[3]=-(r*(s*d-l*h)-u*(o*d-a*h)+f*(o*l-a*s)),e[4]=-(i*(h*y-d*m)-c*(s*y-l*m)+p*(s*d-l*h)),e[5]=n*(h*y-d*m)-c*(o*y-a*m)+p*(o*d-a*h),e[6]=-(n*(s*y-l*m)-i*(o*y-a*m)+p*(o*l-a*s)),e[7]=n*(s*d-l*h)-i*(o*d-a*h)+c*(o*l-a*s),e[8]=i*(f*y-d*v)-c*(u*y-l*v)+p*(u*d-l*f),e[9]=-(n*(f*y-d*v)-c*(r*y-a*v)+p*(r*d-a*f)),e[10]=n*(u*y-l*v)-i*(r*y-a*v)+p*(r*l-a*u),e[11]=-(n*(u*d-l*f)-i*(r*d-a*f)+c*(r*l-a*u)),e[12]=-(i*(f*m-h*v)-c*(u*m-s*v)+p*(u*h-s*f)),e[13]=n*(f*m-h*v)-c*(r*m-o*v)+p*(r*h-o*f),e[14]=-(n*(u*m-s*v)-i*(r*m-o*v)+p*(r*s-o*u)),e[15]=n*(u*h-s*f)-i*(r*h-o*f)+c*(r*s-o*u),e},o.SIMD.adjoint=function(e,t){var n,r,o,a,i,u,s,l,c,f,h,d,p;return n=SIMD.Float32x4.load(t,0),r=SIMD.Float32x4.load(t,4),o=SIMD.Float32x4.load(t,8),a=SIMD.Float32x4.load(t,12),c=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(o,a,0,1,4,5),i=SIMD.Float32x4.shuffle(c,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,c,1,3,5,7),c=SIMD.Float32x4.shuffle(n,r,2,3,6,7),l=SIMD.Float32x4.shuffle(o,a,2,3,6,7),s=SIMD.Float32x4.shuffle(c,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,c,1,3,5,7),c=SIMD.Float32x4.mul(s,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.mul(u,c),h=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),f),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(u,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),f),p=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(l,c)),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),p),p=SIMD.Float32x4.swizzle(p,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),d=SIMD.Float32x4.mul(i,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),d),p=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),p),c=SIMD.Float32x4.swizzle(c,2,3,0,1),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),d),
p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(s,c)),c=SIMD.Float32x4.mul(i,l),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(s,c)),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),d),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),h),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(i,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,c),h),p=SIMD.Float32x4.sub(p,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(l,c)),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),p),SIMD.Float32x4.store(e,0,f),SIMD.Float32x4.store(e,4,h),SIMD.Float32x4.store(e,8,d),SIMD.Float32x4.store(e,12,p),e},o.adjoint=r.USE_SIMD?o.SIMD.adjoint:o.scalar.adjoint,o.determinant=function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4],i=e[5],u=e[6],s=e[7],l=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15],y=t*i-n*a,b=t*u-r*a,g=t*s-o*a,_=n*u-r*i,M=n*s-o*i,w=r*s-o*u,x=l*p-c*d,S=l*v-f*d,E=l*m-h*d,I=c*v-f*p,F=c*m-h*p,k=f*m-h*v;return y*k-b*F+g*I+_*E-M*S+w*x},o.SIMD.multiply=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4.load(n,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(e,0,s);var l=SIMD.Float32x4.load(n,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(e,4,c);var f=SIMD.Float32x4.load(n,8),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(f,3,3,3,3),i))));SIMD.Float32x4.store(e,8,h);var d=SIMD.Float32x4.load(n,12),p=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,1,1,1,1),o),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,2,2,2,2),a),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(d,3,3,3,3),i))));return SIMD.Float32x4.store(e,12,p),e},o.scalar.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],m=t[13],y=t[14],b=t[15],g=n[0],_=n[1],M=n[2],w=n[3];return e[0]=g*r+_*u+M*f+w*v,e[1]=g*o+_*s+M*h+w*m,e[2]=g*a+_*l+M*d+w*y,e[3]=g*i+_*c+M*p+w*b,g=n[4],_=n[5],M=n[6],w=n[7],e[4]=g*r+_*u+M*f+w*v,e[5]=g*o+_*s+M*h+w*m,e[6]=g*a+_*l+M*d+w*y,e[7]=g*i+_*c+M*p+w*b,g=n[8],_=n[9],M=n[10],w=n[11],e[8]=g*r+_*u+M*f+w*v,e[9]=g*o+_*s+M*h+w*m,e[10]=g*a+_*l+M*d+w*y,e[11]=g*i+_*c+M*p+w*b,g=n[12],_=n[13],M=n[14],w=n[15],e[12]=g*r+_*u+M*f+w*v,e[13]=g*o+_*s+M*h+w*m,e[14]=g*a+_*l+M*d+w*y,e[15]=g*i+_*c+M*p+w*b,e},o.multiply=r.USE_SIMD?o.SIMD.multiply:o.scalar.multiply,o.mul=o.multiply,o.scalar.translate=function(e,t,n){var r,o,a,i,u,s,l,c,f,h,d,p,v=n[0],m=n[1],y=n[2];return t===e?(e[12]=t[0]*v+t[4]*m+t[8]*y+t[12],e[13]=t[1]*v+t[5]*m+t[9]*y+t[13],e[14]=t[2]*v+t[6]*m+t[10]*y+t[14],e[15]=t[3]*v+t[7]*m+t[11]*y+t[15]):(r=t[0],o=t[1],a=t[2],i=t[3],u=t[4],s=t[5],l=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=r,e[1]=o,e[2]=a,e[3]=i,e[4]=u,e[5]=s,e[6]=l,e[7]=c,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=r*v+u*m+f*y+t[12],e[13]=o*v+s*m+h*y+t[13],e[14]=a*v+l*m+d*y+t[14],e[15]=i*v+c*m+p*y+t[15]),e},o.SIMD.translate=function(e,t,n){var r=SIMD.Float32x4.load(t,0),o=SIMD.Float32x4.load(t,4),a=SIMD.Float32x4.load(t,8),i=SIMD.Float32x4.load(t,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,1,1,1,1)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,SIMD.Float32x4.add(a,i)));return SIMD.Float32x4.store(e,12,s),e},o.translate=r.USE_SIMD?o.SIMD.translate:o.scalar.translate,o.scalar.scale=function(e,t,n){var r=n[0],o=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.SIMD.scale=function(e,t,n){var r,o,a,i=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(t,0),SIMD.Float32x4.store(e,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),o=SIMD.Float32x4.load(t,4),SIMD.Float32x4.store(e,4,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,1,1,1,1))),a=SIMD.Float32x4.load(t,8),SIMD.Float32x4.store(e,8,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,2,2,2,2))),e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},o.scale=r.USE_SIMD?o.SIMD.scale:o.scalar.scale,o.rotate=function(e,t,n,o){var a,i,u,s,l,c,f,h,d,p,v,m,y,b,g,_,M,w,x,S,E,I,F,k,O=o[0],D=o[1],P=o[2],R=Math.sqrt(O*O+D*D+P*P);return Math.abs(R)<r.EPSILON?null:(R=1/R,O*=R,D*=R,P*=R,a=Math.sin(n),i=Math.cos(n),u=1-i,s=t[0],l=t[1],c=t[2],f=t[3],h=t[4],d=t[5],p=t[6],v=t[7],m=t[8],y=t[9],b=t[10],g=t[11],_=O*O*u+i,M=D*O*u+P*a,w=P*O*u-D*a,x=O*D*u-P*a,S=D*D*u+i,E=P*D*u+O*a,I=O*P*u+D*a,F=D*P*u-O*a,k=P*P*u+i,e[0]=s*_+h*M+m*w,e[1]=l*_+d*M+y*w,e[2]=c*_+p*M+b*w,e[3]=f*_+v*M+g*w,e[4]=s*x+h*S+m*E,e[5]=l*x+d*S+y*E,e[6]=c*x+p*S+b*E,e[7]=f*x+v*S+g*E,e[8]=s*I+h*F+m*k,e[9]=l*I+d*F+y*k,e[10]=c*I+p*F+b*k,e[11]=f*I+v*F+g*k,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},o.scalar.rotateX=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[4],i=t[5],u=t[6],s=t[7],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*o+l*r,e[5]=i*o+c*r,e[6]=u*o+f*r,e[7]=s*o+h*r,e[8]=l*o-a*r,e[9]=c*o-i*r,e[10]=f*o-u*r,e[11]=h*o-s*r,e},o.SIMD.rotateX=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,4),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),e},o.rotateX=r.USE_SIMD?o.SIMD.rotateX:o.scalar.rotateX,o.scalar.rotateY=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[0],i=t[1],u=t[2],s=t[3],l=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o-l*r,e[1]=i*o-c*r,e[2]=u*o-f*r,e[3]=s*o-h*r,e[8]=a*r+l*o,e[9]=i*r+c*o,e[10]=u*r+f*o,e[11]=s*r+h*o,e},o.SIMD.rotateY=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,8);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(e,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,r),SIMD.Float32x4.mul(i,o))),e},o.rotateY=r.USE_SIMD?o.SIMD.rotateY:o.scalar.rotateY,o.scalar.rotateZ=function(e,t,n){var r=Math.sin(n),o=Math.cos(n),a=t[0],i=t[1],u=t[2],s=t[3],l=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*o+l*r,e[1]=i*o+c*r,e[2]=u*o+f*r,e[3]=s*o+h*r,e[4]=l*o-a*r,e[5]=c*o-i*r,e[6]=f*o-u*r,e[7]=h*o-s*r,e},o.SIMD.rotateZ=function(e,t,n){var r=SIMD.Float32x4.splat(Math.sin(n)),o=SIMD.Float32x4.splat(Math.cos(n));t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]);var a=SIMD.Float32x4.load(t,0),i=SIMD.Float32x4.load(t,4);return SIMD.Float32x4.store(e,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(a,o),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(e,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,o),SIMD.Float32x4.mul(a,r))),e},o.rotateZ=r.USE_SIMD?o.SIMD.rotateZ:o.scalar.rotateZ,o.fromTranslation=function(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e},o.fromScaling=function(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotation=function(e,t,n){var o,a,i,u=n[0],s=n[1],l=n[2],c=Math.sqrt(u*u+s*s+l*l);return Math.abs(c)<r.EPSILON?null:(c=1/c,u*=c,s*=c,l*=c,o=Math.sin(t),a=Math.cos(t),i=1-a,e[0]=u*u*i+a,e[1]=s*u*i+l*o,e[2]=l*u*i-s*o,e[3]=0,e[4]=u*s*i-l*o,e[5]=s*s*i+a,e[6]=l*s*i+u*o,e[7]=0,e[8]=u*l*i+s*o,e[9]=s*l*i-u*o,e[10]=l*l*i+a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)},o.fromXRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromYRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromZRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.fromRotationTranslation=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=r+r,s=o+o,l=a+a,c=r*u,f=r*s,h=r*l,d=o*s,p=o*l,v=a*l,m=i*u,y=i*s,b=i*l;return e[0]=1-(d+v),e[1]=f+b,e[2]=h-y,e[3]=0,e[4]=f-b,e[5]=1-(c+v),e[6]=p+m,e[7]=0,e[8]=h+y,e[9]=p-m,e[10]=1-(c+d),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.getTranslation=function(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e},o.getRotation=function(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e},o.fromRotationTranslationScale=function(e,t,n,r){var o=t[0],a=t[1],i=t[2],u=t[3],s=o+o,l=a+a,c=i+i,f=o*s,h=o*l,d=o*c,p=a*l,v=a*c,m=i*c,y=u*s,b=u*l,g=u*c,_=r[0],M=r[1],w=r[2];return e[0]=(1-(p+m))*_,e[1]=(h+g)*_,e[2]=(d-b)*_,e[3]=0,e[4]=(h-g)*M,e[5]=(1-(f+m))*M,e[6]=(v+y)*M,e[7]=0,e[8]=(d+b)*w,e[9]=(v-y)*w,e[10]=(1-(f+p))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e},o.fromRotationTranslationScaleOrigin=function(e,t,n,r,o){var a=t[0],i=t[1],u=t[2],s=t[3],l=a+a,c=i+i,f=u+u,h=a*l,d=a*c,p=a*f,v=i*c,m=i*f,y=u*f,b=s*l,g=s*c,_=s*f,M=r[0],w=r[1],x=r[2],S=o[0],E=o[1],I=o[2];return e[0]=(1-(v+y))*M,e[1]=(d+_)*M,e[2]=(p-g)*M,e[3]=0,e[4]=(d-_)*w,e[5]=(1-(h+y))*w,e[6]=(m+b)*w,e[7]=0,e[8]=(p+g)*x,e[9]=(m-b)*x,e[10]=(1-(h+v))*x,e[11]=0,e[12]=n[0]+S-(e[0]*S+e[4]*E+e[8]*I),e[13]=n[1]+E-(e[1]*S+e[5]*E+e[9]*I),e[14]=n[2]+I-(e[2]*S+e[6]*E+e[10]*I),e[15]=1,e},o.fromQuat=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n+n,u=r+r,s=o+o,l=n*i,c=r*i,f=r*u,h=o*i,d=o*u,p=o*s,v=a*i,m=a*u,y=a*s;return e[0]=1-f-p,e[1]=c+y,e[2]=h-m,e[3]=0,e[4]=c-y,e[5]=1-l-p,e[6]=d+v,e[7]=0,e[8]=h+m,e[9]=d-v,e[10]=1-l-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},o.frustum=function(e,t,n,r,o,a,i){var u=1/(n-t),s=1/(o-r),l=1/(a-i);return e[0]=2*a*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*s,e[6]=0,e[7]=0,e[8]=(n+t)*u,e[9]=(o+r)*s,e[10]=(i+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=i*a*2*l,e[15]=0,e},o.perspective=function(e,t,n,r,o){var a=1/Math.tan(t/2),i=1/(r-o);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+r)*i,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*r*i,e[15]=0,e},o.perspectiveFromFieldOfView=function(e,t,n,r){var o=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),i=Math.tan(t.leftDegrees*Math.PI/180),u=Math.tan(t.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(o+a);return e[0]=s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-((i-u)*s*.5),e[9]=(o-a)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e},o.ortho=function(e,t,n,r,o,a,i){var u=1/(t-n),s=1/(r-o),l=1/(a-i);return e[0]=-2*u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*u,e[13]=(o+r)*s,e[14]=(i+a)*l,e[15]=1,e},o.lookAt=function(e,t,n,a){var i,u,s,l,c,f,h,d,p,v,m=t[0],y=t[1],b=t[2],g=a[0],_=a[1],M=a[2],w=n[0],x=n[1],S=n[2];return Math.abs(m-w)<r.EPSILON&&Math.abs(y-x)<r.EPSILON&&Math.abs(b-S)<r.EPSILON?o.identity(e):(h=m-w,d=y-x,p=b-S,v=1/Math.sqrt(h*h+d*d+p*p),h*=v,d*=v,p*=v,i=_*p-M*d,u=M*h-g*p,s=g*d-_*h,v=Math.sqrt(i*i+u*u+s*s),v?(v=1/v,i*=v,u*=v,s*=v):(i=0,u=0,s=0),l=d*s-p*u,c=p*i-h*s,f=h*u-d*i,v=Math.sqrt(l*l+c*c+f*f),v?(v=1/v,l*=v,c*=v,f*=v):(l=0,c=0,f=0),e[0]=i,e[1]=l,e[2]=h,e[3]=0,e[4]=u,e[5]=c,e[6]=d,e[7]=0,e[8]=s,e[9]=f,e[10]=p,e[11]=0,e[12]=-(i*m+u*y+s*b),e[13]=-(l*m+c*y+f*b),e[14]=-(h*m+d*y+p*b),e[15]=1,e)},o.str=function(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"},o.frob=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e},o.sub=o.subtract,o.multiplyScalar=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e},o.multiplyScalarAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=e[4],s=e[5],l=e[6],c=e[7],f=e[8],h=e[9],d=e[10],p=e[11],v=e[12],m=e[13],y=e[14],b=e[15],g=t[0],_=t[1],M=t[2],w=t[3],x=t[4],S=t[5],E=t[6],I=t[7],F=t[8],k=t[9],O=t[10],D=t[11],P=t[12],R=t[13],C=t[14],A=t[15];return Math.abs(n-g)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(o-_)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-w)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(u-x)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(s-S)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-E)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(c-I)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-F)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(h-k)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(k))&&Math.abs(d-O)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(p-D)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(v-P)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(m-R)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(R))&&Math.abs(y-C)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(C))&&Math.abs(b-A)<=r.EPSILON*Math.max(1,Math.abs(b),Math.abs(A))},e.exports=o},function(e,t,n){var r=n(5),o=n(8),a=n(11),i=n(12),u={};u.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.rotationTo=function(){var e=a.create(),t=a.fromValues(1,0,0),n=a.fromValues(0,1,0);return function(r,o,i){var s=a.dot(o,i);return s<-.999999?(a.cross(e,t,o),a.length(e)<1e-6&&a.cross(e,n,o),a.normalize(e,e),u.setAxisAngle(r,e,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(a.cross(e,o,i),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var e=o.create();return function(t,n,r,o){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=o[0],e[4]=o[1],e[7]=o[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],u.normalize(t,u.fromMat3(t,e))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},u.setAxisAngle=function(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e},u.getAxisAngle=function(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return 0!=r?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n},u.add=i.add,u.multiply=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3],u=n[0],s=n[1],l=n[2],c=n[3];return e[0]=r*c+i*u+o*l-a*s,e[1]=o*c+i*s+a*u-r*l,e[2]=a*c+i*l+r*s-o*u,e[3]=i*c-r*u-o*s-a*l,e},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(e,t,n){n*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+i*u,e[1]=o*s+a*u,e[2]=a*s-o*u,e[3]=i*s-r*u,e},u.rotateY=function(e,t,n){n*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s-a*u,e[1]=o*s+i*u,e[2]=a*s+r*u,e[3]=i*s-o*u,e},u.rotateZ=function(e,t,n){n*=.5;var r=t[0],o=t[1],a=t[2],i=t[3],u=Math.sin(n),s=Math.cos(n);return e[0]=r*s+o*u,e[1]=o*s-r*u,e[2]=a*s+i*u,e[3]=i*s-a*u,e},u.calculateW=function(e,t){var n=t[0],r=t[1],o=t[2];return e[0]=n,e[1]=r,e[2]=o,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-o*o)),e},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(e,t,n,r){var o,a,i,u,s,l=t[0],c=t[1],f=t[2],h=t[3],d=n[0],p=n[1],v=n[2],m=n[3];return a=l*d+c*p+f*v+h*m,a<0&&(a=-a,d=-d,p=-p,v=-v,m=-m),1-a>1e-6?(o=Math.acos(a),i=Math.sin(o),u=Math.sin((1-r)*o)/i,s=Math.sin(r*o)/i):(u=1-r,s=r),e[0]=u*l+s*d,e[1]=u*c+s*p,e[2]=u*f+s*v,e[3]=u*h+s*m,e},u.sqlerp=function(){var e=u.create(),t=u.create();return function(n,r,o,a,i,s){return u.slerp(e,r,i,s),u.slerp(t,o,a,s),u.slerp(n,e,t,2*s*(1-s)),n}}(),u.invert=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*n+r*r+o*o+a*a,u=i?1/i:0;return e[0]=-n*u,e[1]=-r*u,e[2]=-o*u,e[3]=a*u,e},u.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var o=0;t[4]>t[0]&&(o=1),t[8]>t[3*o+o]&&(o=2);var a=(o+1)%3,i=(o+2)%3;n=Math.sqrt(t[3*o+o]-t[3*a+a]-t[3*i+i]+1),e[o]=.5*n,n=.5/n,e[3]=(t[3*a+i]-t[3*i+a])*n,e[a]=(t[3*a+o]+t[3*o+a])*n,e[i]=(t[3*i+o]+t[3*o+i])*n}return e},u.str=function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,e.exports=u},function(e,t,n){var r=n(5),o={};o.create=function(){var e=new r.ARRAY_TYPE(3);return e[0]=0,e[1]=0,e[2]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.fromValues=function(e,t,n){var o=new r.ARRAY_TYPE(3);return o[0]=e,o[1]=t,o[2]=n,o},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(n*n+r*r+o*o)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2];return n*n+r*r+o*o},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],a=n*n+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},o.cross=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],u=n[1],s=n[2];return e[0]=o*s-a*u,e[1]=a*i-r*s,e[2]=r*u-o*i,e},o.lerp=function(e,t,n,r){var o=t[0],a=t[1],i=t[2];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e[2]=i+r*(n[2]-i),e},o.hermite=function(e,t,n,r,o,a){var i=a*a,u=i*(2*a-3)+1,s=i*(a-2)+a,l=i*(a-1),c=i*(3-2*a);return e[0]=t[0]*u+n[0]*s+r[0]*l+o[0]*c,e[1]=t[1]*u+n[1]*s+r[1]*l+o[1]*c,e[2]=t[2]*u+n[2]*s+r[2]*l+o[2]*c,e},o.bezier=function(e,t,n,r,o,a){var i=1-a,u=i*i,s=a*a,l=u*i,c=3*a*u,f=3*s*i,h=s*a;return e[0]=t[0]*l+n[0]*c+r[0]*f+o[0]*h,e[1]=t[1]*l+n[1]*c+r[1]*f+o[1]*h,e[2]=t[2]*l+n[2]*c+r[2]*f+o[2]*h,e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI,o=2*r.RANDOM()-1,a=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=o*t,e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[3]*r+n[7]*o+n[11]*a+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*o+n[8]*a+n[12])/i,e[1]=(n[1]*r+n[5]*o+n[9]*a+n[13])/i,e[2]=(n[2]*r+n[6]*o+n[10]*a+n[14])/i,e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1],a=t[2];return e[0]=r*n[0]+o*n[3]+a*n[6],e[1]=r*n[1]+o*n[4]+a*n[7],e[2]=r*n[2]+o*n[5]+a*n[8],e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*a-s*o,f=l*o+s*r-i*a,h=l*a+i*o-u*r,d=-i*r-u*o-s*a;return e[0]=c*l+d*-i+f*-s-h*-u,e[1]=f*l+d*-u+h*-i-c*-s,e[2]=h*l+d*-s+c*-u-f*-i,e},o.rotateX=function(e,t,n,r){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[0],a[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),a[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},o.rotateY=function(e,t,n,r){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),a[1]=o[1],a[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},o.rotateZ=function(e,t,n,r){var o=[],a=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],a[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),a[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),a[2]=o[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,a,i){var u,s;for(n||(n=3),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],a(e,e,i),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2];return t}}(),o.angle=function(e,t){var n=o.fromValues(e[0],e[1],e[2]),r=o.fromValues(t[0],t[1],t[2]);o.normalize(n,n),o.normalize(r,r);var a=o.dot(n,r);return a>1?0:Math.acos(a)},o.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=t[0],u=t[1],s=t[2];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(o-u)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))},e.exports=o},function(e,t,n){var r=n(5),o={};o.create=function(){var e=new r.ARRAY_TYPE(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},o.fromValues=function(e,t,n,o){var a=new r.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=o,a},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},o.set=function(e,t,n,r,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=o,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+o*o+a*a)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1],o=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+o*o+a*a},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return Math.sqrt(t*t+n*n+r*r+o*o)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1],r=e[2],o=e[3];return t*t+n*n+r*r+o*o},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=t[2],a=t[3],i=n*n+r*r+o*o+a*a;return i>0&&(i=1/Math.sqrt(i),e[0]=n*i,e[1]=r*i,e[2]=o*i,e[3]=a*i),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},o.lerp=function(e,t,n,r){var o=t[0],a=t[1],i=t[2],u=t[3];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e[2]=i+r*(n[2]-i),e[3]=u+r*(n[3]-u),e},o.random=function(e,t){return t=t||1,e[0]=r.RANDOM(),e[1]=r.RANDOM(),e[2]=r.RANDOM(),e[3]=r.RANDOM(),o.normalize(e,e),o.scale(e,e,t),e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=t[3];return e[0]=n[0]*r+n[4]*o+n[8]*a+n[12]*i,e[1]=n[1]*r+n[5]*o+n[9]*a+n[13]*i,e[2]=n[2]*r+n[6]*o+n[10]*a+n[14]*i,e[3]=n[3]*r+n[7]*o+n[11]*a+n[15]*i,e},o.transformQuat=function(e,t,n){var r=t[0],o=t[1],a=t[2],i=n[0],u=n[1],s=n[2],l=n[3],c=l*r+u*a-s*o,f=l*o+s*r-i*a,h=l*a+i*o-u*r,d=-i*r-u*o-s*a;return e[0]=c*l+d*-i+f*-s-h*-u,e[1]=f*l+d*-u+h*-i-c*-s,e[2]=h*l+d*-s+c*-u-f*-i,e[3]=t[3],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,a,i){var u,s;for(n||(n=4),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],e[2]=t[u+2],e[3]=t[u+3],a(e,e,i),t[u]=e[0],t[u+1]=e[1],t[u+2]=e[2],t[u+3]=e[3];return t}}(),o.str=function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},o.equals=function(e,t){var n=e[0],o=e[1],a=e[2],i=e[3],u=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(a-l)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(i-c)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},e.exports=o},function(e,t,n){var r=n(5),o={};o.create=function(){var e=new r.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},o.clone=function(e){var t=new r.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},o.fromValues=function(e,t){var n=new r.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n},o.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},o.set=function(e,t,n){return e[0]=t,e[1]=n,e},o.add=function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e},o.subtract=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e},o.sub=o.subtract,o.multiply=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},o.mul=o.multiply,o.divide=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},o.div=o.divide,o.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e},o.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e},o.min=function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e},o.max=function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e},o.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e},o.scale=function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e},o.scaleAndAdd=function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e},o.distance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)},o.dist=o.distance,o.squaredDistance=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r},o.sqrDist=o.squaredDistance,o.length=function(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)},o.len=o.length,o.squaredLength=function(e){var t=e[0],n=e[1];return t*t+n*n},o.sqrLen=o.squaredLength,o.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},o.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e},o.normalize=function(e,t){var n=t[0],r=t[1],o=n*n+r*r;return o>0&&(o=1/Math.sqrt(o),e[0]=t[0]*o,e[1]=t[1]*o),e},o.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},o.cross=function(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e},o.lerp=function(e,t,n,r){var o=t[0],a=t[1];return e[0]=o+r*(n[0]-o),e[1]=a+r*(n[1]-a),e},o.random=function(e,t){t=t||1;var n=2*r.RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e},o.transformMat2=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o,e[1]=n[1]*r+n[3]*o,e},o.transformMat2d=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[2]*o+n[4],e[1]=n[1]*r+n[3]*o+n[5],e},o.transformMat3=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[3]*o+n[6],e[1]=n[1]*r+n[4]*o+n[7],e},o.transformMat4=function(e,t,n){var r=t[0],o=t[1];return e[0]=n[0]*r+n[4]*o+n[12],e[1]=n[1]*r+n[5]*o+n[13],e},o.forEach=function(){var e=o.create();return function(t,n,r,o,a,i){var u,s;for(n||(n=2),r||(r=0),s=o?Math.min(o*n+r,t.length):t.length,u=r;u<s;u+=n)e[0]=t[u],e[1]=t[u+1],a(e,e,i),t[u]=e[0],t[u+1]=e[1];return t}}(),o.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},o.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]},o.equals=function(e,t){var n=e[0],o=e[1],a=t[0],i=t[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-i)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(i))},e.exports=o;
},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=r(s),c=n(2),f=r(c),h=n(15),d=r(h),p=n(16),v=r(p),m=n(17),y=r(m),b=function(e){function t(e,n,r){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.rawElements=[e,n,r],i}return i(t,e),u(t,[{key:"toVector",value:function(){return new f.default(this.R,this.G,this.B)}},{key:"toVector4",value:function(e){return"undefined"==typeof e&&(e=0),new v.default(this.R,this.G,this.B,e)}},{key:"equalWith",value:function(e){return t.equals(e,this)}},{key:"toString",value:function(){return"rgb("+Math.round(255*this.R)+", "+Math.round(255*this.G)+", "+Math.round(255*this.B)+")"}},{key:"toDisplayString",value:function(){var e="#";return e+=Math.round(255*this.R).toString(16).toUpperCase(),e+=Math.round(255*this.G).toString(16).toUpperCase(),e+=Math.round(255*this.B).toString(16).toUpperCase(),"Color3("+this.R+", "+this.G+", "+this.B+", "+e+")"}},{key:"R",get:function(){return this.rawElements[0]}},{key:"G",get:function(){return this.rawElements[1]}},{key:"B",get:function(){return this.rawElements[2]}},{key:"ElementCount",get:function(){return 3}}],[{key:"fromColor4",value:function(e){return new t(e.R,e.G,e.B)}},{key:"parse",value:function(e,n){return t.internalParse(e,!0,n)}},{key:"internalParse",value:function(e,n,r){if(n&&y.default[e]){var o=d.default.internalParse(y.default[e],!1,r);return t.fromColor4(o)}var a=void 0;if(n&&(a=e.match(/^#([0-9a-f]{3})$/i))){var i=a[1];return new t(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15)}if(a=e.match(/^#([0-9a-f]{6})$/i)){var u=a[1];return new t(parseInt(u.substr(0,2),16)/255,parseInt(u.substr(2,2),16)/255,parseInt(u.substr(4,2),16)/255)}var s=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(s&&n)return new t(parseInt(s[1],10)/255,parseInt(s[2],10)/255,parseInt(s[3],10)/255);if(!r)throw new Error("Unexpected color string"+e)}},{key:"equals",value:function(e,t){return l.default.__elementEquals(e,t)}}]),t}(l.default);t.default=b},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=r(s),c=n(16),f=r(c),h=n(17),d=r(h),p=function(e){function t(e,n,r,i){o(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.rawElements=[e,n,r,i],u}return i(t,e),u(t,[{key:"toVector",value:function(){return new f.default(this.R,this.G,this.B,this.A)}},{key:"equalWith",value:function(e){return t.equals(e,this)}},{key:"toString",value:function(){return"rgba("+Math.round(255*this.R)+", "+Math.round(255*this.G)+", "+Math.round(255*this.B)+", "+Math.round(255*this.A)+")"}},{key:"toDisplayString",value:function(){var e="#";return e+=Math.round(255*this.R).toString(16).toUpperCase(),e+=Math.round(255*this.G).toString(16).toUpperCase(),e+=Math.round(255*this.B).toString(16).toUpperCase(),e+=Math.round(255*this.A).toString(16).toUpperCase(),"Color4("+this.R+", "+this.G+", "+this.B+", "+this.A+", "+e+")"}},{key:"R",get:function(){return this.rawElements[0]}},{key:"G",get:function(){return this.rawElements[1]}},{key:"B",get:function(){return this.rawElements[2]}},{key:"A",get:function(){return this.rawElements[3]}},{key:"ElementCount",get:function(){return 4}}],[{key:"internalParse",value:function(e,n,r){if(n&&d.default[e])return t.internalParse(d.default[e],!1);var o=void 0;if(n&&(o=e.match(/^#([0-9a-f]{3})$/i))){var a=o[1];return new t(parseInt(a.charAt(0),16)/15,parseInt(a.charAt(1),16)/15,parseInt(a.charAt(2),16)/15,1)}if(n&&(o=e.match(/^#([0-9a-f]{4})$/i))){var i=o[1];return new t(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,parseInt(i.charAt(3),16)/15)}if(o=e.match(/^#([0-9a-f]{6})$/i)){var u=o[1];return new t(parseInt(u.substr(0,2),16)/255,parseInt(u.substr(2,2),16)/255,parseInt(u.substr(4,2),16)/255,1)}if(n&&(o=e.match(/^#([0-9a-f]{8})$/i))){var s=o[1];return new t(parseInt(s.substr(0,2),16)/255,parseInt(s.substr(2,2),16)/255,parseInt(s.substr(4,2),16)/255,parseInt(s.substr(6,2),16)/255)}var l=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(l&&n)return new t(parseInt(l[1],10)/255,parseInt(l[2],10)/255,parseInt(l[3],10)/255,1);if(l=e.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\,\s*((?:0\.)?\d+)\s*\)$/i),l&&n){var c=parseInt(l[4],10);return c=c<=1?c:c/255,new t(parseInt(l[1],10)/255,parseInt(l[2],10)/255,parseInt(l[3],10)/255,parseInt(l[4],10))}if(!r)throw new Error("Unexpected color string"+e)}},{key:"parse",value:function(e,n){return t.internalParse(e,!0,n)}},{key:"equals",value:function(e,t){return l.default.__elementEquals(e,t)}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=r(s),c=n(4),f=function(e){function t(e,n,r,i){o(this,t);var u=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"undefined"==typeof n?(u.rawElements=e,a(u)):(u.rawElements=[e,n,r,i],u)}return i(t,e),u(t,[{key:"normalizeThis",value:function(){return t.normalize(this)}},{key:"dotWith",value:function(e){return t.dot(this,e)}},{key:"addWith",value:function(e){return t.add(this,e)}},{key:"subtractWith",value:function(e){return t.subtract(this,e)}},{key:"multiplyWith",value:function(e){return t.multiply(e,this)}},{key:"negateThis",value:function(){return t.negate(this)}},{key:"equalWith",value:function(e){return t.equals(this,e)}},{key:"nearlyEqualWith",value:function(e){return t.nearlyEquals(this,e)}},{key:"toString",value:function(){return"("+this.X+", "+this.Y+", "+this.Z+", "+this.W+")"}},{key:"toDisplayString",value:function(){return"Vector4"+this.toString()}},{key:"toMathematicaString",value:function(){return"{"+this.X+","+this.Y+","+this.Z+","+this.W+"}"}},{key:"normalized",get:function(){return this.multiplyWith(1/this.magnitude)}},{key:"X",get:function(){return this.rawElements[0]},set:function(e){this.rawElements[0]=+e}},{key:"Y",get:function(){return this.rawElements[1]},set:function(e){this.rawElements[1]=+e}},{key:"Z",get:function(){return this.rawElements[2]},set:function(e){this.rawElements[2]=+e}},{key:"W",get:function(){return this.rawElements[3]},set:function(e){this.rawElements[3]=+e}},{key:"ElementCount",get:function(){return 4}}],[{key:"copy",value:function(e){return new t(e.X,e.Y,e.Z,e.W)}},{key:"dot",value:function(e,t){return c.vec4.dot(e.rawElements,t.rawElements)}},{key:"add",value:function(e,n){var r=c.vec4.create();return new t(c.vec4.add(r,e.rawElements,n.rawElements))}},{key:"subtract",value:function(e,n){var r=c.vec4.create();return new t(c.vec4.sub(r,e.rawElements,n.rawElements))}},{key:"multiply",value:function(e,n){var r=c.vec4.create();return new t(c.vec4.scale(r,n.rawElements,e))}},{key:"negate",value:function(e){return t.multiply(-1,e)}},{key:"equals",value:function(e,t){return l.default.__elementEquals(e,t)}},{key:"nearlyEquals",value:function(e,t){return l.default.__nearlyElementEquals(e,t)}},{key:"normalize",value:function(e){var n=c.vec4.create();return new t(c.vec4.normalize(n,e.rawElements))}},{key:"min",value:function(e,n){return new t(l.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.min(t.rawElements[e],n.rawElements[e])}))}},{key:"max",value:function(e,n){return new t(l.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.max(t.rawElements[e],n.rawElements[e])}))}},{key:"angle",value:function(e,n){return Math.acos(t.dot(e.normalized,n.normalized))}},{key:"parse",value:function(e){var n=l.default.__parse(e),r=n.elements;if(r&&(1===r.length||4===r.length)){var o=void 0;return o=1===r.length?new t(r[0],r[0],r[0],r[0]):new t(r[0],r[1],r[2],r[3]),n.needNormalize&&(o=o.normalizeThis()),n.coefficient&&(o=o.multiplyWith(n.coefficient)),n.needNegate&&(o=o.negateThis()),o}}},{key:"XUnit",get:function(){return new t(1,0,0,0)}},{key:"YUnit",get:function(){return new t(0,1,0,0)}},{key:"ZUnit",get:function(){return new t(0,0,1,0)}},{key:"WUnit",get:function(){return new t(0,0,0,1)}},{key:"One",get:function(){return new t(1,1,1,1)}},{key:"Zero",get:function(){return new t(0,0,0,0)}}]),t}(l.default);t.default=f},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(19),l=r(s),c=n(2),f=r(c),h=n(16),d=r(h),p=n(4),v=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e?n.rawElements=e:n.rawElements=p.mat4.create(),n}return i(t,e),u(t,[{key:"getAt",value:function(e,t){return this.rawElements[4*t+e]}},{key:"setAt",value:function(e,t,n){this.rawElements[4*t+e]=n}},{key:"getBySingleIndex",value:function(e){return this.rawElements[e]}},{key:"getColmun",value:function(e){return new d.default(this.rawElements[4*e],this.rawElements[4*e+1],this.rawElements[4*e+2],this.rawElements[4*e+3])}},{key:"getRow",value:function(e){return new d.default(this.rawElements[e],this.rawElements[e+4],this.rawElements[e+8],this.rawElements[e+12])}},{key:"multiplyWith",value:function(e){return t.multiply(this,e)}},{key:"equalWith",value:function(e){return t.equals(e,this)}},{key:"toString",value:function(){return"|"+this.getBySingleIndex(0)+" "+this.getBySingleIndex(4)+" "+this.getBySingleIndex(8)+" "+this.getBySingleIndex(12)+"|\n\n                 |"+this.getBySingleIndex(1)+" "+this.getBySingleIndex(5)+" "+this.getBySingleIndex(9)+" "+this.getBySingleIndex(13)+"|\n\n                 |"+this.getBySingleIndex(2)+" "+this.getBySingleIndex(6)+" "+this.getBySingleIndex(10)+" "+this.getBySingleIndex(14)+"|\n\n                 |"+this.getBySingleIndex(3)+" "+this.getBySingleIndex(7)+" "+this.getBySingleIndex(11)+" "+this.getBySingleIndex(15)+"|"}},{key:"toMathematicaString",value:function(){return"{{"+this.getBySingleIndex(0)+","+this.getBySingleIndex(4)+","+this.getBySingleIndex(8)+","+this.getBySingleIndex(12)+"},\n                  {"+this.getBySingleIndex(1)+","+this.getBySingleIndex(5)+","+this.getBySingleIndex(9)+","+this.getBySingleIndex(13)+"},\n                  {"+this.getBySingleIndex(2)+","+this.getBySingleIndex(6)+","+this.getBySingleIndex(10)+","+this.getBySingleIndex(14)+"},\n                  {"+this.getBySingleIndex(3)+","+this.getBySingleIndex(7)+","+this.getBySingleIndex(11)+","+this.getBySingleIndex(15)+"}}"}},{key:"ElementCount",get:function(){return 16}},{key:"RowCount",get:function(){return 4}},{key:"ColmunCount",get:function(){return 4}}],[{key:"zero",value:function(){return new t([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}},{key:"identity",value:function(){return new t(p.mat4.create())}},{key:"fromElements",value:function(e,n,r,o,a,i,u,s,l,c,f,h,d,p,v,m){return new t([e,a,l,d,n,i,c,p,r,u,f,v,o,s,h,m])}},{key:"fromFunc",value:function(e){return new t([e(0,0),e(1,0),e(2,0),e(3,0),e(0,1),e(1,1),e(2,1),e(3,1),e(0,2),e(1,2),e(2,2),e(3,2),e(0,3),e(1,3),e(2,3),e(3,3)])}},{key:"equals",value:function(e,n){return t.__elementEquals(e,n)}},{key:"add",value:function(e,n){for(var r=p.mat4.create(),o=0;o<16;o++)r[o]=e.rawElements[o]+n.rawElements[o];return new t(r)}},{key:"subtract",value:function(e,n){return t.add(e,t.negate(n))}},{key:"scalarMultiply",value:function(e,n){var r=p.mat4.create();return p.mat4.multiply(r,[e,0,0,0,0,e,0,0,0,0,e,0,0,0,0,e],n.rawElements),new t(r)}},{key:"multiply",value:function(e,n){var r=p.mat4.create();return new t(p.mat4.mul(r,e.rawElements,n.rawElements))}},{key:"trs",value:function(e,n,r){var o=p.mat4.create(),a=p.mat4.create();return p.mat4.mul(o,p.mat4.translate(o,p.mat4.create(),e.rawElements),p.mat4.fromQuat(a,n.rawElements)),p.mat4.scale(o,o,r.rawElements),new t(o)}},{key:"negate",value:function(e){return this.scalarMultiply(-1,e)}},{key:"transpose",value:function(e){var n=p.mat4.create();return new t(p.mat4.transpose(n,e.rawElements))}},{key:"transformPoint",value:function(e,t){var n=p.vec3.create();return p.vec3.transformMat4(n,t.rawElements,e.rawElements),new f.default(n)}},{key:"transformNormal",value:function(e,t){var n=p.vec4.create(),r=p.vec4.create();return r[0]=t.X,r[1]=t.Y,r[2]=t.Z,r[3]=0,p.vec4.transformMat4(n,r,e.rawElements),new f.default(n[0],n[1],n[2])}},{key:"transform",value:function(e,t){var n=p.vec4.create(),r=p.vec4.create();return r[0]=t.X,r[1]=t.Y,r[2]=t.Z,r[3]=t.W,p.vec4.transformMat4(n,r,e.rawElements),new d.default(n[0],n[1],n[2],n[3])}},{key:"determinant",value:function(e){return p.mat4.determinant(e.rawElements)}},{key:"inverse",value:function(e){var n=p.mat4.create();return new t(p.mat4.invert(n,e.rawElements))}},{key:"translate",value:function(e){var n=p.mat4.create();return p.mat4.translate(n,n,e.rawElements),new t(n)}},{key:"scale",value:function(e){var n=p.mat4.create();return p.mat4.scale(n,n,e.rawElements),new t(n)}},{key:"rotateX",value:function(e){var n=p.mat4.create();return p.mat4.rotateX(n,n,e),new t(n)}},{key:"rotateY",value:function(e){var n=p.mat4.create();return p.mat4.rotateY(n,n,e),new t(n)}},{key:"rotateZ",value:function(e){var n=p.mat4.create();return p.mat4.rotateZ(n,n,e),new t(n)}},{key:"rotationQuaternion",value:function(e){var n=p.quat.create(),r=p.mat4.create();return p.quat.normalize(n,e.rawElements),p.mat4.fromQuat(r,n),new t(r)}},{key:"frustum",value:function(e,n,r,o,a,i){var u=p.mat4.create();return p.mat4.frustum(u,e,n,r,o,a,i),new t(u)}},{key:"ortho",value:function(e,n,r,o,a,i){var u=p.mat4.create();return p.mat4.ortho(u,e,n,r,o,a,i),new t(u)}},{key:"perspective",value:function(e,n,r,o){var a=p.mat4.create();return p.mat4.perspective(a,e,n,r,o),new t(a)}},{key:"lookAt",value:function(e,n,r){var o=p.mat4.create();return p.mat4.lookAt(o,e.rawElements,n.rawElements,r.rawElements),new t(o)}}]),t}(l.default);t.default=v},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,[{key:"getAt",value:function(e,t){throw new Error("Not implemented")}},{key:"getBySingleIndex",value:function(e){throw new Error("Not implemented")}},{key:"RowCount",get:function(){return 0}},{key:"ColmunCount",get:function(){return 0}}],[{key:"__elementEquals",value:function(e,t){if(e.RowCount!==t.RowCount||e.ColmunCount!==t.ColmunCount)return!1;for(var n=e.RowCount*t.ColmunCount,r=0;r<n;r++)if(e.getBySingleIndex(r)!==t.getBySingleIndex(r))return!1;return!0}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(18),u=r(i),s=function(){function e(t){o(this,e),this.rawElements=new Float32Array(16*t)}return a(e,[{key:"getAt",value:function(e){var t=16*e;return new u.default(this.rawElements.slice(t,t+16))}},{key:"setAt",value:function(e,t){for(var n=0;n<16;n++)this.rawElements[16*e+n]=t.rawElements[n]}}],[{key:"getIdentityMatrixArray",value:function(t){for(var n=new e(t),r=0;r<t;r++)for(var o=0;o<4;o++)for(var a=0;a<4;a++)n.rawElements[16*r+4*o+a]=o===a?1:0;return n}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),u=r(i),s=n(4),l=n(1),c=r(l),f=function(){function e(t){if(o(this,e),t){this.points=new Array(t.points.length);for(var n=0;n<t.points.length;n++)this.points[n]=u.default.copy(t.points[n])}else this.points=[]}return a(e,[{key:"addPoint",value:function(e){this.points.push(e)}},{key:"transform",value:function(e){for(var t=0;t<this.points.length;t++)s.vec3.transformMat4(this.points[t].rawElements,this.points[t].rawElements,e.rawElements)}},{key:"clear",value:function(){this.points.length=0}},{key:"getBoundingBox",value:function(){for(var e=new c.default,t=0;t<this.points.length;t++)e.expandAABB(this.points[t]);return e}},{key:"toMathematicaPoints",value:function(){for(var e="",t=0;t<this.points.length;t++)0!==t&&(e+=","),e+=this.points[t].toMathematicaString();return"Point[{"+e+"}]"}}],[{key:"initializeWithCube",value:function(e){return e.clear(),e.addPoint(new u.default(-1,1,-1)),e.addPoint(new u.default(-1,-1,-1)),e.addPoint(new u.default(1,-1,-1)),e.addPoint(new u.default(1,1,-1)),e.addPoint(new u.default(-1,1,1)),e.addPoint(new u.default(-1,-1,1)),e.addPoint(new u.default(1,-1,1)),e.addPoint(new u.default(1,1,1)),e}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(2),u=r(i),s=n(4),l=n(18),c=r(l),f=function(){function e(t){o(this,e),this.rawElements=t}return a(e,[{key:"equalWith",value:function(t){return e.equals(this,t)}},{key:"normalize",value:function(){var t=s.quat.create();return new e(s.quat.normalize(t,this.rawElements))}},{key:"inverse",value:function(){var t=s.quat.create();return new e(s.quat.invert(t,this.rawElements))}},{key:"toAngleAxisString",value:function(){var e=2*Math.acos(this.W),t=Math.sqrt(1-this.W*this.W);return 180!==e&&0!==e?"axis("+e+","+this.X/t+","+this.Y/t+","+this.Z/t+")":0===e?"axis("+e+",0,1,0)":"axis(180d,"+this.X+","+this.Y+","+this.Z+")"}},{key:"toString",value:function(){return this.toAngleAxisString()}},{key:"factoringQuaternionZXY",value:function(){var e={x:0,y:0,z:0},t=c.default.rotationQuaternion(this),n=t.rawElements[6];return Math.abs(n)<.9999?(e.x=Math.asin(n),e.z=Math.atan2(-t.rawElements[4],t.rawElements[5]),e.y=Math.atan2(-t.rawElements[2],t.rawElements[10])):(e.y=0,e.x=Math.PI/2*n,e.z=Math.atan2(t.rawElements[1],t.rawElements[0])),e}},{key:"factoringQuaternionXYZ",value:function(){var e={x:0,y:0,z:0},t=c.default.rotationQuaternion(this),n=-t.rawElements[2];return Math.abs(n)<.9999?(e.x=Math.atan2(t.rawElements[6],t.rawElements[10]),e.y=Math.asin(n),e.z=Math.atan2(t.rawElements[1],t.rawElements[0])):(e.x=0,e.y=Math.PI/2*n,e.z=Math.atan2(-t.rawElements[4],t.rawElements[5])),e}},{key:"eularAngles",get:function(){var e=this.factoringQuaternionZXY();return new u.default(e.x,e.y,e.z)},set:function(t){this.rawElements=e.euler(t.X,t.Y,t.Z).rawElements}},{key:"X",get:function(){return this.rawElements[0]}},{key:"Y",get:function(){return this.rawElements[1]}},{key:"Z",get:function(){return this.rawElements[2]}},{key:"W",get:function(){return this.rawElements[3]}},{key:"ImaginaryPart",get:function(){return new u.default(this.X,this.Y,this.Z)}},{key:"Conjugate",get:function(){var t=s.quat.create();return new e(s.quat.conjugate(t,this.rawElements))}},{key:"Length",get:function(){return s.quat.len(this.rawElements)}}],[{key:"equals",value:function(e,t){for(var n=0;n<4;n++)if(e.rawElements[n]!==t.rawElements[n])return!1;return!0}},{key:"add",value:function(t,n){var r=s.quat.create();return new e(s.quat.add(r,t.rawElements,n.rawElements))}},{key:"multiply",value:function(t,n){var r=s.quat.create();return new e(s.quat.mul(r,t.rawElements,n.rawElements))}},{key:"angleAxis",value:function(t,n){var r=s.vec3.create();r[0]=n.X,r[1]=n.Y,r[2]=n.Z;var o=s.quat.create();return new e(s.quat.setAxisAngle(o,r,+t))}},{key:"euler",value:function(t,n,r){return e.multiply(e.angleAxis(r,u.default.ZUnit),e.multiply(e.angleAxis(t,u.default.XUnit),e.angleAxis(n,u.default.YUnit)))}},{key:"eulerXYZ",value:function(t,n,r){return e.multiply(e.angleAxis(r,u.default.ZUnit),e.multiply(e.angleAxis(n,u.default.YUnit),e.angleAxis(t,u.default.XUnit)))}},{key:"slerp",value:function(t,n,r){var o=s.quat.create();return new e(s.quat.slerp(o,t.rawElements,n.rawElements,+r))}},{key:"angle",value:function(t,n){var r=e.multiply(n,t.inverse());return r=r.normalize(),2*Math.acos(r.W)}},{key:"fromToRotation",value:function(t,n){var r=u.default.cross(t.normalized,n.normalized),o=u.default.dot(t.normalized,n.normalized);return e.angleAxis(o,r)}},{key:"lookRotation",value:function(t,n){n=n||u.default.YUnit;var r=t.normalized,o=u.default.cross(n,r).normalized,a=u.default.cross(r,o),i=o.X,s=o.Y,l=o.Z,c=a.X,f=a.Y,h=a.Z,d=r.X,p=r.Y,v=r.Z,m=i+f+v;if(m>0){var y=Math.sqrt(1+m);return new e([.5*(h-p)/y,.5*(d-l)/y,.5*(s-c)/y,y/2])}if(i>=f&&i>=v){var b=Math.sqrt(1+i-f-v);return new e([.5*(s+c)/b,.5*(l+d)/b,.5*(h-p)/b,b/2])}if(f>v){var g=Math.sqrt(1+f-i-v);return new e([0*(c+s),5/g,.5*g,.5*(p+h)/g,.5*(d-l)/g])}var _=Math.sqrt(1+v-i-f);return new e([.5*(d+l)/_,.5*(p+h)/_,.5*_,.5*(s-c)/_])}},{key:"Identity",get:function(){return new e(s.quat.create())}}]),e}();t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(24),u=r(i),s=function(){function e(t,n,r,a){o(this,e),this._left=t,this._top=n,this._width=r,this._height=a}return a(e,[{key:"contains",value:function(e,t){var n=void 0;return e instanceof u.default?(n=e.X,t=e.Y):n=e,this.Left<=n&&this.Right>=n&&this.Top<=t&&this.Bottom>=t}},{key:"toLocal",value:function(e,t){var n=void 0;return e instanceof u.default?(n=e.X,t=e.Y):n=e,n-=this.Left,t-=this.Top,e instanceof u.default?new u.default(n,t):[n,t]}},{key:"toString",value:function(){return"Rectangle("+this.Left+","+this.Top+"-"+this.Right+","+this.Bottom+")"}},{key:"Left",get:function(){return this._left}},{key:"Right",get:function(){return this.Left+this.Width}},{key:"Top",get:function(){return this._top}},{key:"Bottom",get:function(){return this._top+this._height}},{key:"Width",get:function(){return this._width}},{key:"Height",get:function(){return this._height}}],[{key:"equals",value:function(e,t){return e.Left===t.Left&&e.Right===t.Right&&e.Top===t.Top&&e.Bottom===t.Bottom}},{key:"edgeSizeEquals",value:function(e,t){return e.Width===t.Width&&e.Height===t.Height}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(3),l=r(s),c=n(4),f=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return"undefined"==typeof n?(r.rawElements=e,a(r)):(r.rawElements=[e,n],r)}return i(t,e),u(t,[{key:"dotWith",value:function(e){return t.dot(this,e)}},{key:"addWith",value:function(e){return t.add(this,e)}},{key:"subtractWith",value:function(e){return t.subtract(e,this)}},{key:"multiplyWith",value:function(e){return t.multiply(e,this)}},{key:"negateThis",value:function(){return t.negate(this)}},{key:"equalWith",value:function(e){return t.equals(this,e)}},{key:"nearlyEqualWith",value:function(e){return t.nearlyEquals(this,e)}},{key:"normalizeThis",value:function(){return t.normalize(this)}},{key:"toString",value:function(){return"("+this.X+", "+this.Y+")"}},{key:"toDisplayString",value:function(){return"Vector2"+this.toString()}},{key:"toMathematicaString",value:function(){return"{"+this.X+", "+this.Y+"}"}},{key:"normalized",get:function(){return this.multiplyWith(1/this.magnitude)}},{key:"X",get:function(){return this.rawElements[0]},set:function(e){this.rawElements[0]=+e}},{key:"Y",get:function(){return this.rawElements[1]},set:function(e){this.rawElements[1]=+e}},{key:"ElementCount",get:function(){return 2}}],[{key:"copy",value:function(e){return new t(e.X,e.Y)}},{key:"parse",value:function(e){var n=l.default.__parse(e),r=n.elements;if(1===r.length||2===r.length){var o=void 0;return o=1===r.length?new t(r[0],r[0]):new t(r[0],r[1]),n.needNormalize&&(o=o.normalizeThis()),n.coefficient&&(o=o.multiplyWith(n.coefficient)),n.needNegate&&(o=o.negateThis()),
o}}},{key:"dot",value:function(e,t){return c.vec2.dot(e.rawElements,t.rawElements)}},{key:"add",value:function(e,n){var r=c.vec2.create();return new t(c.vec2.add(r,e.rawElements,n.rawElements))}},{key:"subtract",value:function(e,n){var r=c.vec2.create();return new t(c.vec2.sub(r,e.rawElements,n.rawElements))}},{key:"multiply",value:function(e,n){var r=c.vec2.create();return new t(c.vec2.scale(r,n.rawElements,e))}},{key:"negate",value:function(e){return t.multiply(-1,e)}},{key:"equals",value:function(e,t){return l.default.__elementEquals(e,t)}},{key:"nearlyEquals",value:function(e,t){return l.default.__nearlyElementEquals(e,t)}},{key:"normalize",value:function(e){var n=c.vec2.create();return new t(c.vec2.normalize(n,e.rawElements))}},{key:"min",value:function(e,n){return new t(l.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.min(t.rawElements[e],n.rawElements[e])}))}},{key:"max",value:function(e,n){return new t(l.default.__fromGenerationFunction(e,n,function(e,t,n){return Math.max(t.rawElements[e],n.rawElements[e])}))}},{key:"angle",value:function(e,n){return Math.acos(t.dot(e.normalized,n.normalized))}},{key:"XUnit",get:function(){return new t(1,0)}},{key:"YUnit",get:function(){return new t(0,1)}},{key:"One",get:function(){return new t(1,1)}},{key:"Zero",get:function(){return new t(0,0)}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(16),u=r(i),s=n(2),l=r(s),c=n(24),f=r(c),h=function(){function e(t){o(this,e),t?this.rawElements=new Array(t):this.rawElements=[]}return a(e,[{key:"equalWith",value:function(t){return e.equals(this,t)}},{key:"appendVector",value:function(e){this._verifyDimension(e),this.rawElements.push(e.rawElements)}},{key:"setVector",value:function(e,t){this._verifyDimension(t);for(var n=0;n<t.ElementCount;n++)this.rawElements[e*this._dimension+n]=t.rawElements[n]}},{key:"setRawArray",value:function(e,t){for(var n=0;n<this._dimension;n++)this.rawElements[e*this._dimension+n]=t[n]?t[n]:0}},{key:"getVector",value:function(e){switch(this._dimension){case 2:return new f.default(this.rawElements[e*this._dimension+0],this.rawElements[e*this._dimension+1]);case 3:return new l.default(this.rawElements[e*this._dimension+0],this.rawElements[e*this._dimension+1],this.rawElements[e*this._dimension+2]);case 4:return new u.default(this.rawElements[e*this._dimension+0],this.rawElements[e*this._dimension+1],this.rawElements[e*this._dimension+2],this.rawElements[e*this._dimension+3]);default:return null}}},{key:"setVectorArray",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;0!==e.length&&(this._verifyDimension(e[0]),e.forEach(function(e,r){if(t._dimension!==e.ElementCount)throw new Error("Unmatch unit size of vector element! at:"+r);for(var o=0;o<t._dimension;o++)t.rawElements[n+t._dimension*r+o]=e.rawElements[o]}))}},{key:"getVectorArray",value:function(){if(0===this.rawElements.length)return[];for(var e=new Array(this.rawElements.length/this._dimension),t=0;t<e.length;t++)e[t]=this.getVector(t);return e}},{key:"_verifyDimension",value:function(e){if("undefined"!=typeof this._dimension&&this._dimension!==e.ElementCount)throw new Error("Unmatch unit size of vectors!");"undefined"==typeof this._dimension&&(this._dimension=e.ElementCount)}},{key:"dimension",get:function(){return this._dimension}}],[{key:"zeroVectorArray",value:function(t,n){for(var r=new e(t*n),o=0;o<t*n;o++)r.rawElements[o]=0;return r._dimension=t,r}},{key:"fromArray",value:function(t,n){var r=new e(n.length);r._dimension=t;for(var o=0;o<n.length;o++)r.rawElements[o]=n[o];return r}},{key:"equals",value:function(e,t){if(e.rawElements.length!==t.rawElements.length||e._dimension!==t._dimension)return!1;for(var n=0;n<e.rawElements.length;n++)if(e.rawElements[n]!==t.rawElements[n])return!1;return!0}}]),e}();t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){}}])})},function(e,t,n){!function(t,n){e.exports=n()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),a=r(o),i=n(2),u=r(i),s=n(5),l=r(s),c=n(4),f=r(c),h=n(7),d=r(h),p=n(6),v=r(p),m=n(8),y=r(m),b=n(9),g=r(b),_=n(10),M=r(_),w=n(11),x=r(w),S=n(16),E=r(S),I=n(17),F=r(I),k=n(18),O=r(k),D=n(15),P=r(D),R=n(26),C=r(R),A=n(22),T=r(A),j=n(21),N=r(j),L=n(23),z=r(L),q=n(14),V=r(q),B=n(12),Y=r(B),G=n(19),W=r(G),U=n(27),X=r(U),Z=n(25),$=r(Z),H=n(24),Q=r(H),J=n(20),K=r(J),ee=n(13),te=r(ee),ne=n(28),re=r(ne),oe={Base:{Constants:a.default,EEObject:u.default,Ensure:l.default,IDObject:f.default,NSDictionary:d.default,NSIdentity:v.default,NSSet:y.default,XMLHttpRequestAsync:g.default,XMLReader:M.default},Components:{GrimoireComponent:x.default},Converters:{BooleanConverter:E.default,StringArrayConverter:F.default,StringConverter:O.default},GrimoireInterface:P.default,Interface:{ComponentInterface:C.default,GomlInterface:T.default,GomlInterfaceGenerator:N.default,NodeInterface:z.default},Node:{Attribute:V.default,Component:Y.default,ComponentDeclaration:W.default,GomlLoader:X.default,GomlNode:$.default,GomlParser:Q.default,NodeDeclaration:K.default,NodeUtility:te.default}},ae=(0,re.default)();Object.assign(ae||{},oe),t.default=ae},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,null,[{key:"defaultNamespace",get:function(){return"HTTP://GRIMOIRE.GL/NS/DEFAULT"}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype).forEach(function(n){e.prototype[n]=t.prototype[n]})})}Object.defineProperty(t,"__esModule",{value:!0});var s=n(3),l=n(4),c=r(l),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),t}(c.default);u(f,[s.EventEmitter]),t.default=f},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,o,u,s,l;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],i(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(a(n))for(u=Array.prototype.slice.call(arguments,1),l=n.slice(),o=l.length,s=0;s<o;s++)l[s].apply(this,u);return!0},n.prototype.addListener=function(e,t){var o;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(o=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),o||(o=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var o=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,o,i,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(u=i;u-- >0;)if(n[u]===t||n[u].listener&&n[u].listener===t){o=u;break}if(o<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this.id=e.getUniqueRandom(10)}return r(e,[{key:"toString",value:function(){return this.getTypeName()}},{key:"getTypeName",value:function(){var e=/function (.{1,})\(/,t=e.exec(this.constructor.toString());return t&&t.length>1?t[1]:""}}],[{key:"getUniqueRandom",value:function(e){return Math.random().toString(36).slice(-e)}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6),u=r(i),s=n(7),l=r(s),c=function(){function e(){o(this,e)}return a(e,null,[{key:"ensureString",value:function(e){if("string"==typeof e)return e;if("number"==typeof e)return e.toString();throw new Error("Specified argument can not convert into string")}},{key:"ensureNumber",value:function(e){if("string"==typeof e)return parseInt(e,10);if("number"==typeof e)return e;throw new Error("specified argument can not be converted into number")}},{key:"ensureTobeNSIdentity",value:function(e){if(e)return"string"==typeof e?new u.default(e):e}},{key:"ensureTobeNSIdentityArray",value:function(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push(this.ensureTobeNSIdentity(e[n]));return t}},{key:"ensureTobeNSDictionary",value:function(e,t){if(!e)return new l.default;if(e instanceof l.default)return e;var n=new l.default;for(var r in e)n.set(new u.default(t,r),e[r]);return n}},{key:"ensureTobeMessage",value:function(e){return e.startsWith("$")?e:"$"+e}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),u=r(i),s=function(){function e(t,n){o(this,e),n?(this.ns=t.toUpperCase(),this.name=n):(this.ns=u.default.defaultNamespace,this.name=t),this.name=e._ensureValidIdentity(this.name,!0),this.ns=e._ensureValidIdentity(this.ns),this.fqn=this.name+"|"+this.ns}return a(e,null,[{key:"fromFQN",value:function(t){var n=t.split("|");if(2!==n.length)throw new Error("Invalid fqn was given");return new e(n[1],n[0])}},{key:"_ensureValidIdentity",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.indexOf("|")>-1)throw new Error("Namespace and identity cannnot contain | ");if(t&&e.indexOf(".")>-1)throw new Error("identity cannnot contain .");if(null==e)throw new Error("Specified name was null or undefined");return e}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(6),u=r(i),s=function(){function e(){o(this,e),this._nameObjectMap=new Map,this._fqnObjectMap=new Map}return a(e,[{key:"set",value:function(e,t){var n=void 0;this._nameObjectMap.has(e.name)?n=this._nameObjectMap.get(e.name):(n=new Map,this._nameObjectMap.set(e.name,n)),n.set(e.fqn,t),this._fqnObjectMap.set(e.fqn,t)}},{key:"delete",value:function(e){if(this._fqnObjectMap.has(e.fqn)){var t=this._nameObjectMap.get(e.name);1===t.size?this._nameObjectMap.delete(e.name):t.delete(e.fqn),this._fqnObjectMap.delete(e.fqn)}}},{key:"get",value:function(e,t){if("string"==typeof e){if(t)return this.get(new u.default(e,t));var n=this._nameObjectMap.get(e);if(!n)return null;if(1===n.size){var r=n.values();return r.next().value}throw new Error("Specified tag name "+e+" is ambigious to identify.")}return e instanceof u.default?this.fromFQN(e.fqn):e.prefix?this.get(new u.default(e.namespaceURI,e.localName)):e.namespaceURI&&this._fqnObjectMap.has(e.localName+"|"+e.namespaceURI)?this.get(new u.default(e.namespaceURI,e.localName)):e&&e.ownerElement&&e.ownerElement.namespaceURI&&this._fqnObjectMap.has(e.localName+"|"+e.ownerElement.namespaceURI)?this.get(new u.default(e.ownerElement.namespaceURI,e.localName)):this.get(e.localName)}},{key:"fromFQN",value:function(e){return this._fqnObjectMap.get(e)}},{key:"isAmbigious",value:function(e){return this._nameObjectMap.get(e).size>1}},{key:"has",value:function(e){return this._nameObjectMap.has(e)}},{key:"pushDictionary",value:function(e){var t=this;return e._fqnObjectMap.forEach(function(e,n){var r=u.default.fromFQN(n);t.set(r,e)}),this}},{key:"toArray",value:function(){var e=[];return this._fqnObjectMap.forEach(function(t){e.push(t)}),e}},{key:"clone",value:function(){var t=new e;return t.pushDictionary(this)}},{key:"forEach",value:function(e){return this._fqnObjectMap.forEach(function(t,n){e(t,n)}),this}},{key:"map",value:function(t){var n=new e;return this._fqnObjectMap.forEach(function(e,r){var o=u.default.fromFQN(r);n.set(o,t(e,r))}),n}},{key:"clear",value:function(){this._nameObjectMap.clear(),this._fqnObjectMap.clear()}}]),e}();t.default=s},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e),this._contentArray=[]}return r(e,[{key:"push",value:function(e){var t=this._contentArray.findIndex(function(t){return t.fqn===e.fqn});return t===-1&&this._contentArray.push(e),this}},{key:"pushArray",value:function(e){var t=this;return e.forEach(function(e){t.push(e)}),this}},{key:"values",value:function(){return this._contentArray.values()}},{key:"toArray",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,a=this._contentArray[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;e.push(i)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return e}},{key:"clone",value:function(){var t=new e,n=!0,r=!1,o=void 0;try{for(var a,i=this._contentArray[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=a.value;t.push(u)}}catch(e){r=!0,o=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw o}}return t}},{key:"merge",value:function(e){var t=!0,n=!1,r=void 0;try{for(var o,a=e._contentArray[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;this.push(i)}}catch(e){n=!0,r=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw r}}return this}}],[{key:"fromArray",value:function(t){var n=new e;return n.pushArray(t),n}}]),e}();t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,null,[{key:"send",value:function(e,t){return new Promise(function(n,r){e.onload=function(e){n(e)},e.onerror=function(e){r(e)},e.send(t)})}}]),e}();t.default=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,null,[{key:"parseXML",value:function(t,n){var r=function(t){var n=e._parser.parseFromString("<","text/xml");if(void 0===n.documentURI)return!1;var r=n.getElementsByTagName("parsererror").item(0).namespaceURI;return"http://www.w3.org/1999/xhtml"===r?t.getElementsByTagName("parsererror").length>0:t.getElementsByTagNameNS(r,"parsererror").length>0},o=e._parser.parseFromString(t,"text/xml");if(r(o))throw new Error("Error parsing XML");if(n&&o.documentElement.tagName.toUpperCase()!==n.toUpperCase())throw new Error("Specified document is invalid.");return[o.documentElement]}},{key:"getElements",value:function(e,t){for(var n=[],r=e.getElementsByTagName(t),o=0;o<r.length;o++)n.push(r.item(o));return n}},{key:"getSingleElement",value:function(t,n,r){var o=e.getElements(t,n);if(1===o.length)return o[0];if(0===o.length){if(r)throw new Error("The mandatory element "+n+" was required, but not found");return null}throw new Error("The element "+n+" requires to exist in single. But there is "+o.length+" count of elements")}},{key:"getAttribute",value:function(e,t,n){var r=e.attributes.getNamedItem(t);if(r)return r.value;if(n)throw new Error("The mandatory attribute "+t+" was required, but it was not found");return null}},{key:"getAttributeFloat",value:function(t,n,r){var o=e.getAttribute(t,n,r);return parseFloat(o)}},{key:"getAttributeInt",value:function(t,n,r){var o=e.getAttribute(t,n,r);return parseInt(o,10)}},{key:"getChildElements",value:function(e){for(var t=e.childNodes,n=[],r=0;r<t.length;r++)t.item(r)instanceof Element&&n.push(t.item(r));return n}},{key:"getAttributes",value:function(e,t){for(var n={},r=e.attributes,o=0;o<r.length;o++){var a=r.item(o);t&&a.namespaceURI!==t||(n[a.localName]=a.value)}return n}}]),e}();o._parser=new DOMParser,t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(12),l=r(s),c=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"$awake",value:function(){var e=this;this.node.resolveAttributesValue(),this.getAttribute("id").addObserver(function(t){e.node.element.id=t.Value}),this.getAttribute("class").addObserver(function(t){e.node.element.className=t.Value.join(" ")}),this.getAttribute("enabled").addObserver(function(t){e.node.isActive&&e.node.notifyActivenessUpdate()})}}]),t}(l.default);c.attributes={id:{converter:"String",defaultValue:null,readonly:!1},class:{converter:"StringArray",defaultValue:null,readonly:!1},enabled:{converter:"Boolean",defaultValue:!0,readonly:!1}},t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(13),l=r(s),c=n(14),f=r(c),h=n(4),d=r(h),p=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.isDefaultComponent=!1,e._enabled=!0,e._handlers=[],e._additionalAttributesNames=[],e}return i(t,e),u(t,[{key:"getValue",value:function(e){var t=this.attributes.get(e);return t?t.Value:void 0}},{key:"setValue",value:function(e,t){var n=this.attributes.get(e);n&&(n.Value=t)}},{key:"getAttribute",value:function(e){return this.attributes.get(e)}},{key:"addEnabledObserver",value:function(e){this._handlers.push(e)}},{key:"removeEnabledObserver",value:function(e){for(var t=-1,n=0;n<this._handlers.length;n++)if(e===this._handlers[n]){t=n;break}t<0||this._handlers.splice(t,1)}},{key:"resolveDefaultAttributes",value:function(e){var t=this;this.isDefaultComponent?this.attributes.forEach(function(t){return t.resolveDefaultValue(e)}):!function(){var e=l.default.getAttributes(t.element);t.attributes.forEach(function(t){return t.resolveDefaultValue(e)})}()}},{key:"__addAtribute",value:function(e,t){if(!t)throw new Error("can not add attribute null or undefined.");var n=f.default.generateAttributeForComponent(e,t,this);if(this.isDefaultComponent&&this.node.addAttribute(n),this.isDefaultComponent)n.resolveDefaultValue(l.default.getAttributes(this.node.element));else{var r=l.default.getAttributes(this.element);n.resolveDefaultValue(r)}this._additionalAttributesNames.push(n.name)}},{key:"__removeAttributes",value:function(e){var t=this;if(e){var n=this._additionalAttributesNames.findIndex(function(t){return t.name===e});if(n<0)throw new Error("can not remove attributes :"+e);var r=this._additionalAttributesNames[n];this.isDefaultComponent&&this.node.removeAttribute(this.attributes.get(r)),this.attributes.delete(r),this._additionalAttributesNames.splice(n,1)}else this._additionalAttributesNames.forEach(function(e){t.__removeAttributes(e.name)})}},{key:"enabled",get:function(){return this._enabled},set:function(e){var t=this;this._enabled!==e&&(this._enabled=e,this._handlers.forEach(function(e){e(t)}))}},{key:"companion",get:function(){return this.node?this.node.companion:null}},{key:"tree",get:function(){return this.node?this.node.tree:null}}]),t}(d.default);t.default=p},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){n(this,e)}return r(e,null,[{key:"getNodeListIndexByElementIndex",value:function(e,t){var n=Array.prototype.slice.call(e.childNodes),r=n.filter(function(e){return 1===e.nodeType});t=t<0?r.length+t:t;var o=n.indexOf(r[t]);return o===-1?null:o}},{key:"getAttributes",value:function(e){for(var t={},n=e.attributes,r=0;r<n.length;r++){var o=n.item(r),a=o.name;t[a]=o.value}return t}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),u=r(i),s=n(6),l=r(s),c=n(15),f=r(c),h=function(){function e(){o(this,e),this._observers=[]}return a(e,[{key:"addObserver",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._observers.push(e),t&&e(this)}},{key:"removeObserver",value:function(e){for(var t=-1,n=0;n<this._observers.length;n++)if(e===this._observers[n]){t=n;break}t<0||this._observers.splice(t,1)}},{key:"boundTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.component;this.addObserver(function(n){t[e]=n.Value}),t[e]=this.Value}},{key:"resolveDefaultValue",value:function(e){if(void 0===this._value){var t=e[this.name.name];if(void 0!==t)return void(this.Value=t);var n=this.component.node.nodeDeclaration.defaultAttributesActual.get(this.name);if(void 0!==n)return void(this.Value=n);var r=this.declaration.defaultValue;this.Value=r}}},{key:"_notifyChange",value:function(){var e=this;this._observers.forEach(function(t){t(e)})}},{key:"tree",get:function(){return this.component.tree}},{key:"companion",get:function(){return this.component.companion}},{key:"Value",get:function(){try{return this.converter.convert(this._value)}catch(e){console.error(e)}},set:function(e){this._value=e,this._notifyChange()}}],[{key:"generateAttributeForComponent",value:function(t,n,r){var o=new e;o.name=new l.default(r.name.ns,t),o.component=r,o.declaration=n;var a=u.default.ensureTobeNSIdentity(n.converter);if(o.converter=f.default.converters.get(a),void 0===o.converter)throw new Error("Specified converter "+a.name+" was not found from registered converters.\n Component: "+o.component.name.fqn+"\n Attribute: "+o.name.name);return o.converter={convert:o.converter.convert.bind(o),name:o.converter.name},o.component.attributes.set(o.name,o),o}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(16),s=r(u),l=n(11),c=r(l),f=n(17),h=r(f),d=n(18),p=r(d),v=n(1),m=r(v),y=n(19),b=r(y),g=n(12),_=r(g),M=n(8),w=r(M),x=n(20),S=r(x),E=n(6),I=r(E),F=n(7),k=r(F),O=n(21),D=r(O),P=n(5),R=r(P),C=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},A=function(){function e(){o(this,e),this.nodeDeclarations=new k.default,this.converters=new k.default,this.componentDeclarations=new k.default,this.rootNodes={},this.loadTasks=[],this.lib={},this.nodeDictionary={},this.componentDictionary={},this.companion=new k.default,this.initializedEventHandler=[],this.debug=!1}return i(e,[{key:"ns",value:function(e){return function(t){return new I.default(e,t)}}},{key:"initialize",value:function(){this.registerConverter("String",p.default),this.registerConverter("StringArray",h.default),this.registerConverter("Boolean",s.default),this.registerComponent("GrimoireComponent",c.default),this.registerNode("GrimoireNodeBase",["GrimoireComponent"])}},{key:"register",value:function(e){this.loadTasks.push(e)}},{key:"resolvePlugins",value:function(){return C(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<this.loadTasks.length)){e.next=7;break}return e.next=4,this.loadTasks[t]();case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}},e,this)}))}},{key:"registerComponent",value:function(e,t){e=R.default.ensureTobeNSIdentity(e);var n=t.attributes;t=this._ensureTobeComponentConstructor(t),
this.componentDeclarations.set(e,new b.default(e,n,t))}},{key:"registerNode",value:function(e,t,n,r){e=R.default.ensureTobeNSIdentity(e),t=R.default.ensureTobeNSIdentityArray(t),n=R.default.ensureTobeNSDictionary(n,e.ns),r=R.default.ensureTobeNSIdentity(r),this.nodeDeclarations.set(e,new S.default(e,w.default.fromArray(t),n,r))}},{key:"registerConverter",value:function(e,t){e=R.default.ensureTobeNSIdentity(e),this.converters.set(e,{name:e,convert:t})}},{key:"addRootNode",value:function(e,t){if(!t)throw new Error("can not register null to rootNodes.");this.rootNodes[t.id]=t,t.companion.set(this.ns(m.default.defaultNamespace)("scriptElement"),e);var n=t.callRecursively(function(e){return e.checkTreeConstraints()}).reduce(function(e,t){return e.concat(t)}).filter(function(e){return e});if(0!==n.length){var r=n.reduce(function(e,t){return e+"\n"+t});throw new Error("tree constraint is not satisfied.\n"+r)}return t.setMounted(!0),t.broadcastMessage("treeInitialized",{ownerScriptTag:e,id:t.id}),e.setAttribute("x-rootNodeId",t.id),this._onTreeInitialized(e),t.id}},{key:"getRootNode",value:function(e){var t=e.getAttribute("x-rootNodeId");return this.rootNodes[t]}},{key:"noConflict",value:function(){window.gr=this.noConflictPreserve}},{key:"queryRootNodes",value:function(e){for(var t=document.querySelectorAll(e),n=[],r=0;r<t.length;r++){var o=this.getRootNode(t.item(r));o&&n.push(o)}return n}},{key:"clear",value:function(){this.nodeDeclarations.clear(),this.componentDeclarations.clear(),this.converters.clear();for(var e in this.rootNodes)delete this.rootNodes[e];this.loadTasks.splice(0,this.loadTasks.length),this.initialize()}},{key:"_ensureTobeComponentConstructor",value:function(e){if("function"==typeof e){if(!(e.prototype instanceof _.default)&&e!==_.default)throw new Error("Component constructor must extends Component class.")}else if("object"===("undefined"==typeof e?"undefined":a(e))){var t=function(){_.default.call(this)},n={};for(var r in e)"attributes"!==r&&(n[r]={value:e[r]});t.prototype=Object.create(_.default.prototype,n),Object.defineProperty(t,"attributes",{value:e.attributes}),e=t}else e||(e=_.default);return e}},{key:"_onTreeInitialized",value:function(e){this.initializedEventHandler.forEach(function(t){t(e.id,e.className,e)})}}]),e}(),T=new A,j=function(e){return"string"==typeof e?(0,D.default)(T.queryRootNodes(e)):void T.initializedEventHandler.push(e)};Object.setPrototypeOf(j,T),t.default=j},function(e,t){"use strict";function n(e){if("boolean"==typeof e)return e;if("string"==typeof e)switch(e){case"true":return!0;case"false":return!1;default:throw new Error("Invalid string "+e+" for parsing as boolean")}throw new Error("Parsing failed: "+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){if(Array.isArray(e)||!e)return e;if("string"==typeof e)return e.split(" ");throw new Error("value is not supported by StringArrayConverter.:"+e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t){"use strict";function n(e){if("string"==typeof e)return e;if(!e)return e;if("function"==typeof e.toString)return e.toString();throw new Error("value is not supported by StringConverter.")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(15),u=r(i),s=n(14),l=r(s),c=n(7),f=r(c),h=function(){function e(t,n,r){o(this,e),this.name=t,this.attributes=n,this.ctor=r}return a(e,[{key:"generateInstance",value:function(e){e=e?e:document.createElementNS(this.name.ns,this.name.name);var t=new this.ctor;e.setAttribute("x-gr-id",t.id),u.default.componentDictionary[t.id]=t,t.name=this.name,t.element=e,t.attributes=new f.default;for(var n in this.attributes)l.default.generateAttributeForComponent(n,this.attributes[n],t);return t}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(5),u=r(i),s=n(6),l=r(s),c=n(15),f=r(c),h=function(){function e(t,n,r,a,i){o(this,e),this.name=t,this.defaultComponents=n,this.defaultAttributes=r,this.superNode=a,this._treeConstraints=i,this.superNode||"GRIMOIRENODEBASE"===this.name.name.toUpperCase()||(this.superNode=new l.default("GrimoireNodeBase"))}return a(e,[{key:"addDefaultComponent",value:function(e){var t=u.default.ensureTobeNSIdentity(e);this.defaultComponents.push(t),this._defaultComponentsActual&&this._defaultComponentsActual.push(t)}},{key:"_resolveInherites",value:function(){if(!this.superNode)return this._defaultComponentsActual=this.defaultComponents,void(this._defaultAttributesActual=this.defaultAttributes);var e=f.default.nodeDeclarations.get(this.superNode),t=e.defaultComponentsActual,n=e.defaultAttributesActual;this._defaultComponentsActual=t.clone().merge(this.defaultComponents),this._defaultAttributesActual=n.clone().pushDictionary(this.defaultAttributes)}},{key:"defaultComponentsActual",get:function(){return this._defaultComponentsActual||this._resolveInherites(),this._defaultComponentsActual}},{key:"defaultAttributesActual",get:function(){return this._defaultAttributesActual||this._resolveInherites(),this._defaultAttributesActual}},{key:"treeConstraints",get:function(){return this._treeConstraints}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new a.default(e),n=t.queryFunc.bind(t);return Object.setPrototypeOf(n,t),n};var o=n(22),a=r(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(15),u=r(i),s=n(23),l=r(s),c=n(25),f=r(c),h=function(){function e(t){o(this,e),this.rootNodes=t}return a(e,[{key:"getNodeById",value:function(e){var t=this;return new Array(this.rootNodes.length).map(function(n,r){return f.default.fromElement(t.rootNodes[r].element.ownerDocument.getElementById(e))})}},{key:"queryFunc",value:function e(t){var n=new l.default(this.queryNodes(t)),e=n.queryFunc.bind(n);return Object.setPrototypeOf(e,n),e}},{key:"queryNodes",value:function(e){return this.rootNodes.map(function(t){for(var n=t.element.ownerDocument.querySelectorAll(e),r=[],o=0;o<n.length;o++){var a=u.default.nodeDictionary[n.item(o).getAttribute("x-gr-id")];a&&r.push(a)}return r})}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5),s=r(u),l=n(15),c=r(l),f=n(10),h=r(f),d=n(24),p=r(d),v=n(26),m=r(v),y=function(){function e(t){if(o(this,e),this.nodes=t,!t)throw new Error("nodes is null")}return i(e,[{key:"queryFunc",value:function(e){return new m.default(this._queryComponents(e))}},{key:"_queryComponents",value:function(e){return this.nodes.map(function(t){return t.map(function(t){for(var n=t.componentsElement.querySelectorAll(e),r=[],o=0;o<n.length;o++){var a=n[o],i=c.default.componentDictionary[a.getAttribute("x-gr-id")];i&&r.push(i)}return r})})}},{key:"isEmpty",value:function(){return 0===this.count()}},{key:"get",value:function(e,t){var n=this;if(void 0===e){if(this.isEmpty())throw new Error("this NodeInterface is empty.");return this.nodes[0][0]}if(void 0!==t){if(this.nodes.length<=e||this.nodes[e].length<=t)throw new Error("index out of range.");return this.nodes[e][t]}if(this.count()<=e)throw new Error("index out of range.");var r=function(){var t=e,r=null;return n.forEach(function(e){0===t&&(r=e),t--}),{v:r}}();if("object"===("undefined"==typeof r?"undefined":a(r)))return r.v}},{key:"getAttribute",value:function(e){if(this.nodes.length>0&&this.nodes[0].length>0)throw new Error("this NodeInterface is empty.");return this.get().attributes.get(s.default.ensureTobeNSIdentity(e)).Value}},{key:"setAttribute",value:function(e,t){this.forEach(function(n){n.setAttribute(e,t)})}},{key:"on",value:function(e,t){return this.forEach(function(n){n.on(e,t)}),this}},{key:"off",value:function(e,t){return this.forEach(function(n){n.removeListener(e,t)}),this}},{key:"append",value:function(e){return this.forEach(function(t){var n=h.default.parseXML(e);n.forEach(function(e){var n=p.default.parse(e,null,null);t.addChild(n)})}),this}},{key:"remove",value:function(){return this.forEach(function(e){e.delete()}),this}},{key:"forEach",value:function(e){return this.nodes.forEach(function(t,n){t.forEach(function(t,r){e(t,n,r)})}),this}},{key:"setEnable",value:function(e){return this.forEach(function(t){t.enabled=!!e}),this}},{key:"find",value:function(e){console.warn("'find' is obsolate.use componentInterface instead.");var t=[];return this._queryComponents(e).forEach(function(e){e.forEach(function(e){e.forEach(function(e){t.push(e)})})}),t}},{key:"children",value:function t(){var t=this.nodes.map(function(e){return e.map(function(e){return e.children}).reduce(function(e,t){return e.concat(t)})});return new e(t)}},{key:"addComponent",value:function(e){return this.forEach(function(t){t.addComponent(e)}),this}},{key:"first",value:function(){return 0===this.count()?null:this.nodes[0][0]}},{key:"single",value:function(){if(1!==this.count())throw new Error("this nodeInterface is not single.");return this.first()}},{key:"count",value:function(){if(0===this.nodes.length)return 0;var e=this.nodes.map(function(e){return e.length});return e.reduce(function(e,t){return e+t},0)}}]),e}();t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(25),u=r(i),s=n(15),l=r(s),c=function(){function e(){o(this,e)}return a(e,null,[{key:"parse",value:function(t,n,r){var o=e._createNode(t);if(!o)return console.warn('"'+t.tagName+'" was not parsed.'),null;var a=t.childNodes,i=[];if(a&&0!==a.length){for(var u=[],s=0;s<a.length;s++){var l=a.item(s);e._isElement(l)?this._isComponentsTag(l)?(e._parseComponents(o,l),u.push(l)):i.push(l):u.push(l)}for(var c=0;c<u.length;c++)t.removeChild(u[c])}return n&&n.addChild(o,null,!1),i.forEach(function(t){e.parse(t,o,null)}),o}},{key:"_createNode",value:function(e){var t=e.localName,n=l.default.nodeDeclarations.get(e);if(!n)throw new Error('Tag "'+t+'" is not found.');return new u.default(n,e)}},{key:"_parseComponents",value:function(t,n){var r=n.childNodes;if(r)for(var o=0;o<r.length;o++){var a=r.item(o);if(e._isElement(a)){var i=l.default.componentDeclarations.get(a);if(!i)throw new Error("Component "+a.tagName+" is not found.");var u=i.generateInstance(a);t._addComponentDirectly(u,!1)}}}},{key:"_isElement",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"_isComponentsTag",value:function(e){var t=/\.COMPONENTS$/im;return t.test(e.nodeName)}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(24),l=r(s),c=n(10),f=r(c),h=n(21),d=r(h),p=n(15),v=r(p),m=n(2),y=r(m),b=n(13),g=r(b),_=n(7),M=r(_),w=n(6),x=r(w),S=n(5),E=r(S),I=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.children=[],r._parent=null,r._root=null,r._mounted=!1,r._messageBuffer=[],r._tree=null,r._companion=new M.default,r._deleted=!1,r._attrBuffer={},r._defaultValueResolved=!1,!e)throw new Error("recipe must not be null");r.nodeDeclaration=e,r.element=n?n:document.createElementNS(e.name.ns,e.name.name),r.componentsElement=document.createElement("COMPONENTS"),r._root=r,r._tree=(0,d.default)([r]),r._components=[],r.attributes=new M.default,r.element.setAttribute("x-gr-id",r.id);var i=e.defaultComponentsActual;return i.toArray().map(function(e){r.addComponent(e,null,!0)}),v.default.nodeDictionary[r.id]=r,r}return i(t,e),u(t,[{key:"getChildrenByClass",value:function(e){var n=this.element.getElementsByClassName(e);return new Array(n.length).map(function(e,r){return t.fromElement(n.item(r))})}},{key:"getChildrenByNodeName",value:function(e){var n=this.element.getElementsByTagName(e);return new Array(n.length).map(function(e,r){return t.fromElement(n.item(r))})}},{key:"delete",value:function(){console.warn("delete is obsolate. please use remove() instead of"),this.remove()}},{key:"remove",value:function(){this.children.forEach(function(e){e.delete()}),v.default.nodeDictionary[this.id]=null,this._parent?this._parent.detachChild(this):(this.setMounted(!1),this.element.parentNode&&this.element.parentNode.removeChild(this.element)),this._deleted=!0}},{key:"sendMessage",value:function(e,t){return!!this.isActive&&(this._sendMessage(e,t),!0)}},{key:"broadcastMessage",value:function(e,t,n){if(this.enabled&&this.mounted)if("number"==typeof e){var r=e,o=t,a=n;if(this.sendMessage(o,a),r>0)for(var i=0;i<this.children.length;i++)this.children[i].broadcastMessage(r-1,o,a)}else{var u=e,s=t;this.sendMessage(u,s);for(var l=0;l<this.children.length;l++)this.children[l].broadcastMessage(u,s)}}},{key:"append",value:function(e){var t=this,n=f.default.parseXML(e),r=[];return n.forEach(function(e){var n=l.default.parse(e,null,null);t.addChild(n),r.push(n)}),r}},{key:"addChildByName",value:function(e,n){if("string"!=typeof e){var r=v.default.nodeDeclarations.get(e),o=new t(r,null);if(n)for(var a in n){var i=a.indexOf("|")!==-1?x.default.fromFQN(a):new x.default(a);o.setValue(i,n[a])}return this.addChild(o),o}this.addChildByName(new x.default(e),n)}},{key:"addChild",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e._deleted)throw new Error("deleted node never use.");if(null!=t&&"number"!=typeof t)throw new Error("insert index should be number or null or undefined.");e._parent=this;var r=null==t?this.children.length:t;this.children.splice(r,0,e);var o=e.checkTreeConstraints(),a=this._callRecursively(function(e){return e.checkTreeConstraints()},function(e){return e._parent?[e._parent]:[]}).reduce(function(e,t){return e.concat(t)}),i=o.concat(a).filter(function(e){return e});if(0!==i.length){var u=i.reduce(function(e,t){return e+"\n"+t});throw new Error("tree constraint is not satisfied.\n"+u)}if(n){var s=this.element[g.default.getNodeListIndexByElementIndex(this.element,r)];this.element.insertBefore(e.element,s)}e._tree=this._tree,e._companion=this._companion,this.mounted&&e.setMounted(!0)}},{key:"callRecursively",value:function(e){return this._callRecursively(e,function(e){return e.children})}},{key:"removeChild",value:function(e){var t=this.detachChild(e);t&&t.delete()}},{key:"detachChild",value:function(e){var t=this.children.indexOf(e);if(t===-1)return null;e.setMounted(!1),e._parent=null,this.children.splice(t,1),this.element.removeChild(e.element);var n=this._callRecursively(function(e){return e.checkTreeConstraints()},function(e){return e._parent?[e._parent]:[]}).reduce(function(e,t){return e.concat(t)}).filter(function(e){return e});if(0!==n.length){var r=n.reduce(function(e,t){return e+"\n"+t});throw new Error("tree constraint is not satisfied.\n"+r)}return e}},{key:"detach",value:function(){if(!this.parent)throw new Error("root Node cannot be detached.");this.parent.detachChild(this)}},{key:"getValue",value:function(e){return console.warn("getValue is obsolate. please use getAttribute instead of"),this.getAttribute(e)}},{key:"getAttribute",value:function(e){e=E.default.ensureTobeNSIdentity(e);var t=this.attributes.get(e);if(t)return t.Value;var n=this._attrBuffer[e.fqn];return void 0!==n?n:void console.warn('attribute "'+e.name+'" is not found.')}},{key:"setValue",value:function(e,t){console.warn("setValue is obsolate. please use setAttribute instead of"),this.setAttribute(e,t)}},{key:"setAttribute",value:function(e,t){e=E.default.ensureTobeNSIdentity(e);var n=this.attributes.get(e);n?n.Value=t:(console.warn('attribute "'+e.name+'" is not found.'),this._attrBuffer[e.fqn]=t)}},{key:"addAttribute",value:function(e){this.attributes.set(e.name,e);var t=this._attrBuffer[e.name.fqn];void 0!==t&&(e.Value=t,delete this._attrBuffer[e.name.fqn])}},{key:"setMounted",value:function(e){this._mounted!==e&&(e?(this._mounted=e,this._clearMessageBuffer("unmount"),this._sendMessageForced("awake"),this._sendMessageBuffer("mount"),this.children.forEach(function(t){t.setMounted(e)})):(this._clearMessageBuffer("mount"),this.children.forEach(function(t){t.setMounted(e)}),this._sendMessageBuffer("unmount"),this._sendMessageForced("dispose"),this._tree=null,this._companion=null,this._mounted=e))}},{key:"index",value:function(){return this._parent?this._parent.children.indexOf(this):-1}},{key:"removeAttribute",value:function(e){this.attributes.delete(e.name)}},{key:"addComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=v.default.componentDeclarations.get(e),o=r.generateInstance();t=t||{};for(var a in t)o.setValue(a,t[a]);return this._addComponentDirectly(o,n),o}},{key:"_addComponentDirectly",value:function(e,t){var n=this;if(e.node)throw new Error("component never change attached node");e.isDefaultComponent=!!t,e.node=this;var r=this.componentsElement[g.default.getNodeListIndexByElementIndex(this.componentsElement,this._components.length)];this.componentsElement.insertBefore(e.element,r),this._components.push(e),e.addEnabledObserver(function(e){e.enabled&&(n._resolveBufferdMessageTo(e,"mount"),n._resolveBufferdMessageTo(e,"unmount"))}),t&&(e.attributes.forEach(function(e){return n.addAttribute(e)}),this._defaultValueResolved&&e.attributes.forEach(function(e){return e.resolveDefaultValue(g.default.getAttributes(n.element))})),this._mounted&&(this._sendMessageForcedTo(e,"awake"),this._sendMessageBufferTo(e,"mount"))}},{key:"getComponents",value:function(){return this._components}},{key:"getComponent",value:function(e){if("string"==typeof e)return this.getComponent(E.default.ensureTobeNSIdentity(e));for(var t=0;t<this._components.length;t++)if(this._components[t].name.fqn===e.fqn)return this._components[t];return null}},{key:"resolveAttributesValue",value:function(){var e=this;this._defaultValueResolved=!0,this._components.forEach(function(t){t.resolveDefaultAttributes(g.default.getAttributes(e.element))})}},{key:"checkTreeConstraints",value:function(){var e=this,t=this.nodeDeclaration.treeConstraints;if(!t)return[];var n=t.map(function(t){return t(e)}).filter(function(e){return null!==e});return 0===n.length?null:n}},{key:"notifyActivenessUpdate",value:function(){this.isActive&&(this._resolveBufferdMessage(this.mounted?"mount":"unmount"),this.children.forEach(function(e){e.notifyActivenessUpdate()}))}},{key:"_sendMessageToComponent",value:function(e,t,n){if(t=E.default.ensureTobeMessage(t),!e.enabled||!this.isActive)return!1;var r=e[t];return"function"==typeof r&&r.bind(e)(n),!0}},{key:"_resolveBufferdMessageTo",value:function(e,t){if(!e.enabled||!this.isActive)return!1;t=E.default.ensureTobeMessage(t);var n=this._messageBuffer.findIndex(function(n){return n.message===t&&n.target===e});if(n>=0){var r=e[t];return"function"==typeof r&&r.bind(e)(),this._messageBuffer.splice(n,1),!0}return!1}},{key:"_sendMessage",value:function(e,t){var n=this;this._components.forEach(function(r){n._sendMessageToComponent(r,e,t)})}},{key:"_sendMessageForced",value:function(e){var t=this;this._components.forEach(function(n){t._sendMessageForcedTo(n,e)})}},{key:"_sendMessageBuffer",value:function(e){var t=this;this._components.forEach(function(n){t._sendMessageBufferTo(n,e)})}},{key:"_sendMessageBufferTo",value:function(e,t){t=E.default.ensureTobeMessage(t);var n=this._messageBuffer.findIndex(function(n){return n.message===t&&n.target===e});if(!e.enabled||!this.isActive)return n<0&&this._messageBuffer.push({message:t,target:e}),!1;var r=e[t];return"function"==typeof r&&r.bind(e)(),n>=0&&this._messageBuffer.splice(n,1),!0}},{key:"_sendMessageForcedTo",value:function(e,t){t=E.default.ensureTobeMessage(t);var n=e[t];"function"==typeof n&&n.bind(e)()}},{key:"_resolveBufferdMessage",value:function(e){var t=this;e=E.default.ensureTobeMessage(e);var n=this._messageBuffer.filter(function(t){return t.message===e});n.forEach(function(n){t._resolveBufferdMessageTo(n.target,e)})}},{key:"_clearMessageBuffer",value:function(e){e=E.default.ensureTobeMessage(e),this._messageBuffer=this._messageBuffer.filter(function(t){return t.message!==e})}},{key:"_callRecursively",value:function(e,t){var n=e(this),r=t(this),o=r.map(function(t){return t.callRecursively(e)}),a=o.reduce(function(e,t){return e.concat(t)},[]);return a.unshift(n),a}},{key:"name",get:function(){return this.nodeDeclaration.name}},{key:"tree",get:function(){if(!this.mounted)throw new Error("this node is not mounted");return this._tree}},{key:"deleted",get:function(){return this._deleted}},{key:"isActive",get:function(){return this._parent?this._parent.isActive&&this.enabled:this.enabled}},{key:"enabled",get:function(){return this.getAttribute("enabled")},set:function(e){this.setAttribute("enabled",e)}},{key:"companion",get:function(){return this._companion}},{key:"parent",get:function(){return this._parent}},{key:"hasChildren",get:function(){return this.children.length>0}},{key:"mounted",get:function(){return this._mounted}}],[{key:"fromElement",value:function(e){return v.default.nodeDictionary[e.getAttribute("x-gr-id")]}}]),t}(y.default);t.default=I},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t.ComponentInterface=function(){function e(t){n(this,e),this.components=t}return r(e,[{key:"get",value:function(e,t,n){var r=this.components;if(void 0===e){if(0===r.length||0===r[0].length||0===r[0][0].length)return null;if(1===r.length&&1===r[0].length||1===r[0][0].length)return r[0][0][0];throw new Error("There are too many candidate")}if(void 0===t){if(0===r.length||0===r[0].length||r[0][0].length<=e)return null;if(1===r.length&&1===r[0].length)return r[0][0][e];throw new Error("There are too many candidate")}if(void 0===n){if(0===r.length||r[0].length<=t||r[0][t].length<=e)return null;if(1===r.length)return r[0][t][e];throw new Error("There are too many candidate")}return r.length<=n||r[n].length<=t||r[n][t].length<=e?null:r[n][t][e]}},{key:"forEach",value:function(e){return this.components.forEach(function(t,n){t.forEach(function(t,r){t.forEach(function(t,o){e(t,o,r,n)})})}),this}},{key:"first",value:function(e){if(!e)return this.first(function(){return!0});for(var t=0;t<this.components.length;t++)for(var n=this.components[t],r=0;r<n.length;t++)for(var o=n[r],a=0;a<o.length;a++){var i=o[a];if(e(i,t,r,a))return i}return null}},{key:"isEmpty",value:function(){var e=!0;return this.forEach(function(t){e=!1}),e}},{key:"getAttribute",value:function(e){if(this.isEmpty())throw new Error("component interface is empty.");return this.components[0][0][0].getValue(e)}},{key:"setAttribute",value:function(e,t){this.forEach(function(n){n.setValue(e,t)})}},{key:"attr",value:function(e,t){return void 0===t?(console.warn("attr is obsolate. please use getAttribute instead of."),this.getAttribute(e)):(console.warn("attr is obsolate. please use setAttribute instead of."),void this.setAttribute(e,t))}},{key:"count",value:function(){return 0===this.components.length?0:this.components.map(function(e){return e.map(function(e){return e.length}).reduce(function(e,t){return e+t},0)}).reduce(function(e,t){return e+t},0)}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(15),u=r(i),s=n(24),l=r(s),c=n(10),f=r(c),h=n(9),d=r(h),p=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},v=function(){function e(){o(this,e)}return a(e,null,[{key:"loadFromScriptTag",value:function(e){return p(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,o,a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.getAttribute("src"),r=void 0,!n){t.next=10;break}return o=new XMLHttpRequest,o.open("GET",n),t.next=7,d.default.send(o);case 7:r=o.responseText,t.next=11;break;case 10:r=e.text;case 11:a=f.default.parseXML(r,"GOML"),i=l.default.parse(a[0],null,e),u.default.addRootNode(e,i);case 14:case"end":return t.stop()}},t,this)}))}},{key:"loadFromQuery",value:function(t){for(var n=document.querySelectorAll(t),r=[],o=0;o<n.length;o++)r[o]=e.loadFromScriptTag(n.item(o));return 0===r.length&&u.default.debug&&console.warn("There was no goml file detected. Have you specified `type='text/goml'` to the script tag?"),Promise.all(r)}},{key:"loadForPage",value:function(){return p(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadFromQuery('script[type="text/goml"]');case 2:case"end":return t.stop()}},t,this)}))}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(){return f.initialize(),u.default.noConflictPreserve=window.gr,window.gr=window.GrimoireJS=u.default};var i=n(15),u=r(i),s=n(27),l=r(s),c=function(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,u)}s((r=r.apply(e,t)).next())})},f=function(){function e(){o(this,e)}return a(e,null,[{key:"initialize",value:function(){return c(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e._copyGLConstants(),u.default.initialize(),t.next=5,e._waitForDOMLoading();case 5:return t.next=7,u.default.resolvePlugins();case 7:return t.next=9,l.default.loadForPage();case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.error(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}))}},{key:"_copyGLConstants",value:function(){if(!WebGLRenderingContext.ONE)for(var e in WebGLRenderingContext.prototype)if(/^[A-Z]/.test(e)){var t=WebGLRenderingContext.prototype[e];WebGLRenderingContext[e]=t}}},{key:"_waitForDOMLoading",value:function(){return new Promise(function(e){window.addEventListener("DOMContentLoaded",function(){e()})})}}]),e}()}])})},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function i(){v&&d&&(v=!1,d.length?p=d.concat(p):m=-1,p.length&&u())}function u(){if(!v){var e=o(i);v=!0;for(var t=p.length;t;){for(d=p,p=[];++m<t;)d&&d[m].run();m=-1,t=p.length}d=null,v=!1,a(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var c,f,h=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,p=[],v=!1,m=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new s(e,t)),1!==p.length||v||o(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,n){(function(t,n){!function(t){"use strict";function r(e,t,n,r){var o=t&&t.prototype instanceof a?t:a,i=Object.create(o.prototype),u=new p(r||[]);return i._invoke=f(e,n,u),i}function o(e,t,n){
try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function a(){}function i(){}function u(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function l(e){this.arg=e}function c(e){function t(n,r,a,i){var u=o(e[n],e,r);if("throw"!==u.type){var s=u.arg,c=s.value;return c instanceof l?Promise.resolve(c.arg).then(function(e){t("next",e,a,i)},function(e){t("throw",e,a,i)}):Promise.resolve(c).then(function(e){s.value=e,a(s)},i)}i(u.arg)}function r(e,n){function r(){return new Promise(function(r,o){t(e,n,r,o)})}return a=a?a.then(r,r):r()}"object"==typeof n&&n.domain&&(t=n.domain.bind(t));var a;this._invoke=r}function f(e,t,n){var r=S;return function(a,i){if(r===I)throw new Error("Generator is already running");if(r===F){if("throw"===a)throw i;return m()}for(;;){var u=n.delegate;if(u){if("return"===a||"throw"===a&&u.iterator[a]===y){n.delegate=null;var s=u.iterator.return;if(s){var l=o(s,u.iterator,i);if("throw"===l.type){a="throw",i=l.arg;continue}}if("return"===a)continue}var l=o(u.iterator[a],u.iterator,i);if("throw"===l.type){n.delegate=null,a="throw",i=l.arg;continue}a="next",i=y;var c=l.arg;if(!c.done)return r=E,c;n[u.resultName]=c.value,n.next=u.nextLoc,n.delegate=null}if("next"===a)n.sent=n._sent=i;else if("throw"===a){if(r===S)throw r=F,i;n.dispatchException(i)&&(a="next",i=y)}else"return"===a&&n.abrupt("return",i);r=I;var l=o(e,t,n);if("normal"===l.type){r=n.done?F:E;var c={value:l.arg,done:n.done};if(l.arg!==k)return c;n.delegate&&"next"===a&&(i=y)}else"throw"===l.type&&(r=F,a="throw",i=l.arg)}}}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function d(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function p(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function v(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(b.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=y,t.done=!0,t};return r.next=r}}return{next:m}}function m(){return{value:y,done:!0}}var y,b=Object.prototype.hasOwnProperty,g="function"==typeof Symbol?Symbol:{},_=g.iterator||"@@iterator",M=g.toStringTag||"@@toStringTag",w="object"==typeof e,x=t.regeneratorRuntime;if(x)return void(w&&(e.exports=x));x=t.regeneratorRuntime=w?e.exports:{},x.wrap=r;var S="suspendedStart",E="suspendedYield",I="executing",F="completed",k={},O=u.prototype=a.prototype;i.prototype=O.constructor=u,u.constructor=i,u[M]=i.displayName="GeneratorFunction",x.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},x.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,M in e||(e[M]="GeneratorFunction")),e.prototype=Object.create(O),e},x.awrap=function(e){return new l(e)},s(c.prototype),x.async=function(e,t,n,o){var a=new c(r(e,t,n,o));return x.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},s(O),O[_]=function(){return this},O[M]="Generator",O.toString=function(){return"[object Generator]"},x.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},x.values=v,p.prototype={constructor:p,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.tryEntries.forEach(d),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=y)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,r){return a.type="throw",a.arg=e,n.next=t,!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var i=b.call(o,"catchLoc"),u=b.call(o,"finallyLoc");if(i&&u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&b.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?this.next=o.finallyLoc:this.complete(a),k},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),d(n),k}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;d(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:v(e),resultName:t,nextLoc:n},k}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,function(){return this}(),n(338))},function(e,t,n,r){var o=n(r);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n,r,o,a){var i=n(r),u=n(o),s=n(a);e.exports=function(e){return function(t,n,r){var o,a=i(t),l=u(a.length),c=s(r,l);if(e&&n!=n){for(;l>c;)if(o=a[c++],o!=o)return!0}else for(;l>c;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n,r){var o=n(r);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n,r){e.exports=!n(r)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n,r,o){var a=n(r),i=n(o).document,u=a(i)&&a(i.createElement);e.exports=function(e){return u?i.createElement(e):{}}},function(e,t,n,r,o,a){var i=n(r),u=n(o);e.exports=n(a)?function(e,t,n){return i.f(e,t,u(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n,r,o,a){e.exports=!n(r)&&!n(o)(function(){return 7!=Object.defineProperty(n(a)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n,r){var o=n(r);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t,n,r,o,a,i,u,s){"use strict";var l=n(r),c=n(o),f=n(a),h=n(i),d=n(u),p=Object.assign;e.exports=!p||n(s)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=p({},e)[n]||Object.keys(p({},t)).join("")!=r})?function(e,t){for(var n=h(e),r=arguments.length,o=1,a=c.f,i=f.f;r>o;)for(var u,s=d(arguments[o++]),p=a?l(s).concat(a(s)):l(s),v=p.length,m=0;v>m;)i.call(s,u=p[m++])&&(n[u]=s[u]);return n}:p},function(e,t,n,r,o,a,i){var u=n(r),s=n(o),l=n(a),c=Object.defineProperty;t.f=n(i)?Object.defineProperty:function(e,t,n){if(u(e),t=l(t,!0),u(n),s)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n,r,o,a,i){var u=n(r),s=n(o),l=n(a)(!1),c=n(i)("IE_PROTO");e.exports=function(e,t){var n,r=s(e),o=0,a=[];for(n in r)n!=c&&u(r,n)&&a.push(n);for(;t.length>o;)u(r,n=t[o++])&&(~l(a,n)||a.push(n));return a}},function(e,t,n,r,o){var a=n(r),i=n(o);e.exports=Object.keys||function(e){return a(e,i)}},function(e,t,n,r,o){var a=n(r)("keys"),i=n(o);e.exports=function(e){return a[e]||(a[e]=i(e))}},function(e,t,n,r){var o=n(r),a="__core-js_shared__",i=o[a]||(o[a]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n,r){var o=n(r),a=Math.max,i=Math.min;e.exports=function(e,t){return e=o(e),e<0?a(e+t,0):i(e,t)}},function(e,t,n,r,o){var a=n(r),i=n(o);e.exports=function(e){return a(i(e))}},function(e,t,n,r){var o=n(r),a=Math.min;e.exports=function(e){return e>0?a(o(e),9007199254740991):0}},function(e,t,n,r){var o=n(r);e.exports=function(e){return Object(o(e))}},function(e,t,n,r){var o=n(r);e.exports=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n,r,o){var a=n(r);a(a.S+a.F,"Object",{assign:n(o)})}]))});
//# sourceMappingURL=grimoire-preset-basic.min.js.map
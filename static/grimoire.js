!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(11),o=r(a),i=n(10),u=r(i),s={},l=(0,u.default)();(0,o.default)(l||{},s),window.GrimoireJS.lib.basic=s,e.default=l},function(t,e,n){t.exports=!n(2)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(16);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(7),a=n(6);t.exports=function(t){return r(a(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(41),n(40),n(39),e.default=function(){}},function(t,e,n){t.exports={default:n(12),__esModule:!0}},function(t,e,n){n(38),t.exports=n(5).Object.assign},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(4);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var r=n(9),a=n(34),o=n(33);t.exports=function(t){return function(e,n,i){var u,s=r(e),l=a(s.length),f=o(i,l);if(t&&n!=n){for(;l>f;)if(u=s[f++],u!=u)return!0}else for(;l>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(13);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(4),a=n(3).document,o=r(a)&&r(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(3),a=n(5),o=n(17),i=n(22),u="prototype",s=function(t,e,n){var l,f,c,d=t&s.F,h=t&s.G,v=t&s.S,p=t&s.P,m=t&s.B,y=t&s.W,g=h?a:a[e]||(a[e]={}),_=g[u],M=h?r:v?r[e]:(r[e]||{})[u];h&&(n=e);for(l in n)f=!d&&M&&void 0!==M[l],f&&l in g||(c=f?M[l]:n[l],g[l]=h&&"function"!=typeof M[l]?n[l]:m&&f?o(c,r):y&&M[l]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[u]=t[u],e}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((g.virtual||(g.virtual={}))[l]=c,t&s.R&&_&&!_[l]&&i(_,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(25),a=n(30);t.exports=n(1)?function(t,e,n){return r.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(1)&&!n(2)(function(){return 7!=Object.defineProperty(n(18)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){"use strict";var r=n(28),a=n(26),o=n(29),i=n(35),u=n(7),s=Object.assign;t.exports=!s||n(2)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=i(t),s=arguments.length,l=1,f=a.f,c=o.f;s>l;)for(var d,h=u(arguments[l++]),v=f?r(h).concat(f(h)):r(h),p=v.length,m=0;p>m;)c.call(h,d=v[m++])&&(n[d]=h[d]);return n}:s},function(t,e,n){var r=n(14),a=n(23),o=n(36),i=Object.defineProperty;e.f=n(1)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),a)try{return i(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(21),a=n(9),o=n(15)(!1),i=n(31)("IE_PROTO");t.exports=function(t,e){var n,u=a(t),s=0,l=[];for(n in u)n!=i&&r(u,n)&&l.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~o(l,n)||l.push(n));return l}},function(t,e,n){var r=n(27),a=n(19);t.exports=Object.keys||function(t){return r(t,a)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(32)("keys"),a=n(37);t.exports=function(t){return r[t]||(r[t]=a(t))}},function(t,e,n){var r=n(3),a="__core-js_shared__",o=r[a]||(r[a]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(8),a=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?a(t+e,0):o(t,e)}},function(t,e,n){var r=n(8),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},function(t,e,n){var r=n(6);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(!r(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!r(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(20);r(r.S+r.F,"Object",{assign:n(24)})},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(38),u=r(i),s=n(113),l=r(s),f=n(114),c=r(f),d=n(115),h=r(d),v=n(120),p=r(v),m=n(121),y=r(m),g=n(135),_=r(g),M=n(139),b=r(M),x=n(141),w=r(x),S=n(146),E=r(S),I=n(147),F=r(I),k=n(149),D=r(k),A=n(153),C=r(A),P=n(154),O=r(P),R=n(155),T=r(R),N=n(164),L=r(N),j=n(165),z=r(j),q=n(185),V=r(q),B=n(186),Y=r(B),G=n(187),W=r(G),U=n(189),X=r(U),Z=n(191),$=r(Z),H=n(192),Q=r(H),J=n(194),K=r(J),tt=n(196),et=r(tt),nt=n(140),rt=r(nt),at=n(197),ot=r(at),it=n(198),ut=r(it),st=n(199),lt=r(st),ft=n(200),ct=r(ft),dt=n(201),ht=r(dt),vt=n(202),pt=r(vt),mt=n(203),yt=r(mt),gt=n(204),_t=r(gt),Mt=n(206),bt=r(Mt),xt=n(207),wt=r(xt),St=n(214),Et=r(St),It=n(216),Ft=r(It),kt=n(217),Dt=r(kt),At=n(219),Ct=r(At),Pt=n(220),Ot=r(Pt),Rt=n(222),Tt=r(Rt),Nt=n(223),Lt=r(Nt),jt=n(224),zt=r(jt),qt=n(225),Vt=r(qt),Bt=n(226),Yt=r(Bt),Gt=n(227),Wt=r(Gt),Ut=n(228),Xt=r(Ut),Zt=n(229),$t=r(Zt),Ht=n(231),Qt=r(Ht),Jt=n(232),Kt=r(Jt),te=n(233),ee=r(te),ne=n(234),re=r(ne),ae=n(236),oe=r(ae),ie=n(221),ue=r(ie),se=n(238),le=r(se),fe=n(148),ce=r(fe),de=n(237),he=r(de),ve=n(168),pe=r(ve),me=n(240),ye=r(me),ge=n(173),_e=r(ge),Me=n(177),be=r(Me),xe=n(167),we=r(xe),Se=n(183),Ee=r(Se),Ie=n(166),Fe=r(Ie),ke=n(163),De=r(ke),Ae=n(169),Ce=r(Ae),Pe=n(156),Oe=r(Pe),Re=n(230),Te=r(Re),Ne=n(182),Le=r(Ne),je=n(175),ze=r(je),qe=n(172),Ve=r(qe),Be=n(176),Ye=r(Be),Ge=n(170),We=r(Ge),Ue=n(171),Xe=r(Ue),Ze=n(180),$e=r(Ze),He=n(178),Qe=r(He),Je=n(239),Ke=r(Je),tn=n(195),en=r(tn),nn=n(145),rn=r(nn),an=n(161),on=r(an),un=n(190),sn=r(un),ln=n(143),fn=r(ln),cn=n(160),dn=r(cn),hn=n(142),vn=r(hn),pn=n(162),mn=r(pn),yn=n(205),gn=r(yn),_n=n(244),Mn=r(_n),bn={Asset:{AssetLoader:u.default,CacheResolver:l.default,ExternalResourceResolver:c.default,ImageResolver:h.default,TextFileResolver:p.default},Camera:{PerspectiveCamera:y.default},Components:{AssetLoadingManagerComponent:_.default,CameraComponent:b.default,CanvasInitializerComponent:w.default,FullscreenComponent:E.default,GeometryComponent:F.default,GeometryRegistoryComponent:D.default,HTMLBinderComponent:C.default,LoopManagerComponent:O.default,MaterialComponent:T.default,MaterialContainerComponent:L.default,MaterialImporterComponent:z.default,MaterialManagerComponent:V.default,MeshRendererComponent:Y.default,MouseCameraControlComponent:W.default,RenderBufferComponent:X.default,RendererComponent:$.default,RendererManagerComponent:Q.default,RenderQuadComponent:K.default,RenderSceneComponent:et.default,SceneComponent:rt.default,TextureBufferComponent:ot.default,TextureComponent:ut.default,TransformComponent:lt.default},Constraint:{ChildrenComponentConstraint:ct.default,NoChildConstraint:ht.default,ParentConstraint:pt.default,RootConstraint:yt.default},Converters:{Angle2DConverter:_t.default,BooleanConverter:bt.default,CanvasSizeConverter:wt.default,Color3Converter:Et.default,Color4Converter:Ft.default,ComponentConverter:Dt.default,EnumConverter:Ct.default,GeometryConverter:Ot.default,MaterialConverter:Tt.default,NumberArrayConverter:Lt.default,NumberConverter:zt.default,ObjectConverter:Vt.default,Rotation3Converter:Yt.default,StringArrayConverter:Wt.default,StringConverter:Xt.default,TextureConverter:$t.default,Vector2Converter:Qt.default,Vector3Converter:Kt.default,Vector4Converter:ee.default,ViewportConverter:re.default},Geometry:{DefaultPrimitives:oe.default,Geometry:ue.default,GeometryBuilder:le.default,GeometryFactory:ce.default,GeometryUtility:he.default},Material:{DefaultMacro:pe.default,DefaultMaterial:ye.default,EnvUniformValueResolver:_e.default,ImportResolver:be.default,MacroRegistory:we.default,Material:Ee.default,MaterialFactory:Fe.default,Pass:De.default,PassFactory:Ce.default,SORTPass:Oe.default,TextureReference:Te.default,Transformers:{AnnotationRemover:Le.default,CommentRemover:ze.default,GLSLUtil:Ve.default,ImportTransformer:Ye.default,SORTPassParser:We.default,UniformRegisterer:Xe.default,VariableAnnotationRemover:$e.default,VariableParser:Qe.default}},Resource:{Buffer:Ke.default,FrameBuffer:en.default,GLExtRequestor:rn.default,Program:on.default,RenderBuffer:sn.default,ResourceBase:fn.default,Shader:dn.default,Texture2D:vn.default,UniformProxy:mn.default},Util:{RotationParser:gn.default}},xn=(0,Mn.default)();(0,o.default)(xn||{},bn),window.GrimoireJS.lib.fundamental=bn,e.default=xn},function(t,e,n){t.exports={default:n(2),__esModule:!0}},function(t,e,n){n(3),t.exports=n(6).Object.assign},function(t,e,n){var r=n(4);r(r.S+r.F,"Object",{assign:n(19)})},function(t,e,n){var r=n(5),a=n(6),o=n(7),i=n(9),u="prototype",s=function(t,e,n){var l,f,c,d=t&s.F,h=t&s.G,v=t&s.S,p=t&s.P,m=t&s.B,y=t&s.W,g=h?a:a[e]||(a[e]={}),_=g[u],M=h?r:v?r[e]:(r[e]||{})[u];h&&(n=e);for(l in n)f=!d&&M&&void 0!==M[l],f&&l in g||(c=f?M[l]:n[l],g[l]=h&&"function"!=typeof M[l]?n[l]:m&&f?o(c,r):y&&M[l]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[u]=t[u],e}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((g.virtual||(g.virtual={}))[l]=c,t&s.R&&_&&!_[l]&&i(_,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(8);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(10),a=n(18);t.exports=n(14)?function(t,e,n){return r.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(11),a=n(13),o=n(17),i=Object.defineProperty;e.f=n(14)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),a)try{return i(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(12);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(14)&&!n(15)(function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(12),a=n(5).document,o=r(a)&&r(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},function(t,e,n){var r=n(12);t.exports=function(t,e){if(!r(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!r(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(20),a=n(35),o=n(36),i=n(37),u=n(24),s=Object.assign;t.exports=!s||n(15)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=i(t),s=arguments.length,l=1,f=a.f,c=o.f;s>l;)for(var d,h=u(arguments[l++]),v=f?r(h).concat(f(h)):r(h),p=v.length,m=0;p>m;)c.call(h,d=v[m++])&&(n[d]=h[d]);return n}:s},function(t,e,n){var r=n(21),a=n(34);t.exports=Object.keys||function(t){return r(t,a)}},function(t,e,n){var r=n(22),a=n(23),o=n(27)(!1),i=n(31)("IE_PROTO");t.exports=function(t,e){var n,u=a(t),s=0,l=[];for(n in u)n!=i&&r(u,n)&&l.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~o(l,n)||l.push(n));return l}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(24),a=n(26);t.exports=function(t){return r(a(t))}},function(t,e,n){var r=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(23),a=n(28),o=n(30);t.exports=function(t){return function(e,n,i){var u,s=r(e),l=a(s.length),f=o(i,l);if(t&&n!=n){for(;l>f;)if(u=s[f++],u!=u)return!0}else for(;l>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(29),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(29),a=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?a(t+e,0):o(t,e)}},function(t,e,n){var r=n(32)("keys"),a=n(33);t.exports=function(t){return r[t]||(r[t]=a(t))}},function(t,e,n){var r=n(5),a="__core-js_shared__",o=r[a]||(r[a]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(26);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(43),u=r(i),s=n(48),l=r(s),f=n(49),c=r(f),d=n(53),h=r(d),v=n(88),p=r(v),m=n(96),y=r(m),g=n(112),_=r(g),M=function(t,e,n,r){return new(n||(n=y.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},b=function(t){function e(){(0,l.default)(this,e);var t=(0,h.default)(this,(e.__proto__||(0,u.default)(e)).apply(this,arguments));return t.registerCount=0,t.loadCount=0,t.completeCount=0,t.errorCount=0,t.promise=new y.default(function(e){t._resolve=e}),t}return(0,p.default)(e,t),(0,c.default)(e,[{key:"register",value:function(t){var e=this;return this.registerCount++,new y.default(function(n,r){(function(){return M(this,void 0,void 0,o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:e.t0=e.sent,n(e.t0),this.loadCount++,e.next=12;break;case 8:e.prev=8,e.t1=e.catch(0),r(e.t1),this.errorCount++;case 12:this.completeCount++,this._checkLoadCompleted();case 14:case"end":return e.stop()}},e,this,[[0,8]])}))}).bind(e)()})}},{key:"_checkLoadCompleted",value:function(){this.emit("progress",this),this.registerCount===this.completeCount&&this._resolve()}}]),e}(_.default);e.default=b},function(t,e,n){t.exports=n(40)},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(41),a)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}}).call(e,function(){return this}())},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var a=Object.create((e||o).prototype),i=new v(r||[]);return a._invoke=c(t,n,i),a}function a(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function u(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){this.arg=t}function f(t){function e(n,r,o,i){var u=a(t[n],t,r);if("throw"!==u.type){var s=u.arg,f=s.value;return f instanceof l?Promise.resolve(f.arg).then(function(t){e("next",t,o,i)},function(t){e("throw",t,o,i)}):Promise.resolve(f).then(function(t){s.value=t,o(s)},i)}i(u.arg)}function r(t,n){function r(){return new Promise(function(r,a){e(t,n,r,a)})}return o=o?o.then(r,r):r()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var o;this._invoke=r}function c(t,e,n){var r=S;return function(o,i){if(r===I)throw new Error("Generator is already running");if(r===F){if("throw"===o)throw i;return m()}for(;;){var u=n.delegate;if(u){if("return"===o||"throw"===o&&u.iterator[o]===y){n.delegate=null;var s=u.iterator.return;if(s){var l=a(s,u.iterator,i);if("throw"===l.type){o="throw",i=l.arg;continue}}if("return"===o)continue}var l=a(u.iterator[o],u.iterator,i);if("throw"===l.type){n.delegate=null,o="throw",i=l.arg;continue}o="next",i=y;var f=l.arg;if(!f.done)return r=E,f;n[u.resultName]=f.value,n.next=u.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=i;else if("throw"===o){if(r===S)throw r=F,i;n.dispatchException(i)&&(o="next",i=y)}else"return"===o&&n.abrupt("return",i);r=I;var l=a(t,e,n);if("normal"===l.type){r=n.done?F:E;var f={value:l.arg,done:n.done};if(l.arg!==k)return f;n.delegate&&"next"===o&&(i=y)}else"throw"===l.type&&(r=F,o="throw",i=l.arg)}}}function d(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function v(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(d,this),this.reset(!0)}function p(t){if(t){var e=t[M];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=y,e.done=!0,e};return r.next=r}}return{next:m}}function m(){return{value:y,done:!0}}var y,g=Object.prototype.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},M=_.iterator||"@@iterator",b=_.toStringTag||"@@toStringTag",x="object"==typeof t,w=e.regeneratorRuntime;if(w)return void(x&&(t.exports=w));w=e.regeneratorRuntime=x?t.exports:{},w.wrap=r;var S="suspendedStart",E="suspendedYield",I="executing",F="completed",k={},D=u.prototype=o.prototype;i.prototype=D.constructor=u,u.constructor=i,u[b]=i.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(D),t},w.awrap=function(t){return new l(t)},s(f.prototype),w.async=function(t,e,n,a){var o=new f(r(t,e,n,a));return w.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(D),D[M]=function(){return this},D[b]="Generator",D.toString=function(){return"[object Generator]"},w.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},w.values=p,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var i=g.call(a,"catchLoc"),u=g.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?this.next=a.finallyLoc:this.complete(o),k},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),k}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;h(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:p(t),resultName:e,nextLoc:n},k}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(42))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function o(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function i(){p&&h&&(p=!1,h.length?v=h.concat(v):m=-1,v.length&&u())}function u(){if(!p){var t=a(i);p=!0;for(var e=v.length;e;){for(h=v,v=[];++m<e;)h&&h[m].run();m=-1,e=v.length}h=null,p=!1,o(t)}}function s(t,e){this.fun=t,this.array=e}function l(){}var f,c,d=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var h,v=[],p=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new s(t,e)),1!==v.length||p||a(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e,n){t.exports={default:n(44),__esModule:!0}},function(t,e,n){n(45),t.exports=n(6).Object.getPrototypeOf},function(t,e,n){var r=n(37),a=n(46);n(47)("getPrototypeOf",function(){return function(t){return a(r(t))}})},function(t,e,n){var r=n(22),a=n(37),o=n(31)("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},function(t,e,n){var r=n(4),a=n(6),o=n(15);t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],i={};i[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(50),o=r(a);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={default:n(51),__esModule:!0}},function(t,e,n){n(52);var r=n(6).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(4);r(r.S+r.F*!n(14),"Object",{defineProperty:n(10).f})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(54),o=r(a);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(55),o=r(a),i=n(74),u=r(i),s="function"==typeof u.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?"symbol":typeof t};e.default="function"==typeof u.default&&"symbol"===s(o.default)?function(t){return"undefined"==typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?"symbol":"undefined"==typeof t?"undefined":s(t)}},function(t,e,n){t.exports={default:n(56),__esModule:!0}},function(t,e,n){n(57),n(69),t.exports=n(73).f("iterator")},function(t,e,n){"use strict";var r=n(58)(!0);n(59)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(29),a=n(26);t.exports=function(t){return function(e,n){var o,i,u=String(a(e)),s=r(n),l=u.length;return s<0||s>=l?t?"":void 0:(o=u.charCodeAt(s),o<55296||o>56319||s+1===l||(i=u.charCodeAt(s+1))<56320||i>57343?t?u.charAt(s):o:t?u.slice(s,s+2):(o-55296<<10)+(i-56320)+65536)}}},function(t,e,n){"use strict";var r=n(60),a=n(4),o=n(61),i=n(9),u=n(22),s=n(62),l=n(63),f=n(67),c=n(46),d=n(68)("iterator"),h=!([].keys&&"next"in[].keys()),v="@@iterator",p="keys",m="values",y=function(){return this};t.exports=function(t,e,n,g,_,M,b){l(n,e,g);var x,w,S,E=function(t){if(!h&&t in D)return D[t];switch(t){case p:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},I=e+" Iterator",F=_==m,k=!1,D=t.prototype,A=D[d]||D[v]||_&&D[_],C=A||E(_),P=_?F?E("entries"):C:void 0,O="Array"==e?D.entries||A:A;if(O&&(S=c(O.call(new t)),S!==Object.prototype&&(f(S,I,!0),r||u(S,d)||i(S,d,y))),F&&A&&A.name!==m&&(k=!0,C=function(){return A.call(this)}),r&&!b||!h&&!k&&D[d]||i(D,d,C),s[e]=C,s[I]=y,_)if(x={values:F?C:E(m),keys:M?C:E(p),entries:P},b)for(w in x)w in D||o(D,w,x[w]);else a(a.P+a.F*(h||k),e,x);return x}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(9)},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(64),a=n(18),o=n(67),i={};n(9)(i,n(68)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(i,{next:a(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(11),a=n(65),o=n(34),i=n(31)("IE_PROTO"),u=function(){},s="prototype",l=function(){var t,e=n(16)("iframe"),r=o.length,a="<",i=">";for(e.style.display="none",n(66).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(a+"script"+i+"document.F=Object"+a+"/script"+i),t.close(),l=t.F;r--;)delete l[s][o[r]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[s]=r(t),n=new u,u[s]=null,n[i]=t):n=l(),void 0===e?n:a(n,e)}},function(t,e,n){var r=n(10),a=n(11),o=n(20);t.exports=n(14)?Object.defineProperties:function(t,e){a(t);for(var n,i=o(e),u=i.length,s=0;u>s;)r.f(t,n=i[s++],e[n]);return t}},function(t,e,n){t.exports=n(5).document&&document.documentElement},function(t,e,n){var r=n(10).f,a=n(22),o=n(68)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(32)("wks"),a=n(33),o=n(5).Symbol,i="function"==typeof o,u=t.exports=function(t){return r[t]||(r[t]=i&&o[t]||(i?o:a)("Symbol."+t))};u.store=r},function(t,e,n){n(70);for(var r=n(5),a=n(9),o=n(62),i=n(68)("toStringTag"),u=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],s=0;s<5;s++){var l=u[s],f=r[l],c=f&&f.prototype;c&&!c[i]&&a(c,i,l),o[l]=o.Array}},function(t,e,n){"use strict";var r=n(71),a=n(72),o=n(62),i=n(23);t.exports=n(59)(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,n):"values"==e?a(0,t[n]):a(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){e.f=n(68)},function(t,e,n){t.exports={default:n(75),__esModule:!0}},function(t,e,n){n(76),n(85),n(86),n(87),t.exports=n(6).Symbol},function(t,e,n){"use strict";var r=n(5),a=n(22),o=n(14),i=n(4),u=n(61),s=n(77).KEY,l=n(15),f=n(32),c=n(67),d=n(33),h=n(68),v=n(73),p=n(78),m=n(79),y=n(80),g=n(81),_=n(11),M=n(23),b=n(17),x=n(18),w=n(64),S=n(82),E=n(84),I=n(10),F=n(20),k=E.f,D=I.f,A=S.f,C=r.Symbol,P=r.JSON,O=P&&P.stringify,R="prototype",T=h("_hidden"),N=h("toPrimitive"),L={}.propertyIsEnumerable,j=f("symbol-registry"),z=f("symbols"),q=f("op-symbols"),V=Object[R],B="function"==typeof C,Y=r.QObject,G=!Y||!Y[R]||!Y[R].findChild,W=o&&l(function(){
return 7!=w(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=k(V,e);r&&delete V[e],D(t,e,n),r&&t!==V&&D(V,e,r)}:D,U=function(t){var e=z[t]=w(C[R]);return e._k=t,e},X=B&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},Z=function(t,e,n){return t===V&&Z(q,e,n),_(t),e=b(e,!0),_(n),a(z,e)?(n.enumerable?(a(t,T)&&t[T][e]&&(t[T][e]=!1),n=w(n,{enumerable:x(0,!1)})):(a(t,T)||D(t,T,x(1,{})),t[T][e]=!0),W(t,e,n)):D(t,e,n)},$=function(t,e){_(t);for(var n,r=y(e=M(e)),a=0,o=r.length;o>a;)Z(t,n=r[a++],e[n]);return t},H=function(t,e){return void 0===e?w(t):$(w(t),e)},Q=function(t){var e=L.call(this,t=b(t,!0));return!(this===V&&a(z,t)&&!a(q,t))&&(!(e||!a(this,t)||!a(z,t)||a(this,T)&&this[T][t])||e)},J=function(t,e){if(t=M(t),e=b(e,!0),t!==V||!a(z,e)||a(q,e)){var n=k(t,e);return!n||!a(z,e)||a(t,T)&&t[T][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=A(M(t)),r=[],o=0;n.length>o;)a(z,e=n[o++])||e==T||e==s||r.push(e);return r},tt=function(t){for(var e,n=t===V,r=A(n?q:M(t)),o=[],i=0;r.length>i;)!a(z,e=r[i++])||n&&!a(V,e)||o.push(z[e]);return o};B||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(q,n),a(this,T)&&a(this[T],t)&&(this[T][t]=!1),W(this,t,x(1,n))};return o&&G&&W(V,t,{configurable:!0,set:e}),U(t)},u(C[R],"toString",function(){return this._k}),E.f=J,I.f=Z,n(83).f=S.f=K,n(36).f=Q,n(35).f=tt,o&&!n(60)&&u(V,"propertyIsEnumerable",Q,!0),v.f=function(t){return U(h(t))}),i(i.G+i.W+i.F*!B,{Symbol:C});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)h(et[nt++]);for(var et=F(h.store),nt=0;et.length>nt;)p(et[nt++]);i(i.S+i.F*!B,"Symbol",{for:function(t){return a(j,t+="")?j[t]:j[t]=C(t)},keyFor:function(t){if(X(t))return m(j,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!B,"Object",{create:H,defineProperty:Z,defineProperties:$,getOwnPropertyDescriptor:J,getOwnPropertyNames:K,getOwnPropertySymbols:tt}),P&&i(i.S+i.F*(!B||l(function(){var t=C();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,n,r=[t],a=1;arguments.length>a;)r.push(arguments[a++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,O.apply(P,r)}}}),C[R][N]||n(9)(C[R],N,C[R].valueOf),c(C,"Symbol"),c(Math,"Math",!0),c(r.JSON,"JSON",!0)},function(t,e,n){var r=n(33)("meta"),a=n(12),o=n(22),i=n(10).f,u=0,s=Object.isExtensible||function(){return!0},l=!n(15)(function(){return s(Object.preventExtensions({}))}),f=function(t){i(t,r,{value:{i:"O"+ ++u,w:{}}})},c=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[r].i},d=function(t,e){if(!o(t,r)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[r].w},h=function(t){return l&&v.NEED&&s(t)&&!o(t,r)&&f(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:c,getWeak:d,onFreeze:h}},function(t,e,n){var r=n(5),a=n(6),o=n(60),i=n(73),u=n(10).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:i.f(t)})}},function(t,e,n){var r=n(20),a=n(23);t.exports=function(t,e){for(var n,o=a(t),i=r(o),u=i.length,s=0;u>s;)if(o[n=i[s++]]===e)return n}},function(t,e,n){var r=n(20),a=n(35),o=n(36);t.exports=function(t){var e=r(t),n=a.f;if(n)for(var i,u=n(t),s=o.f,l=0;u.length>l;)s.call(t,i=u[l++])&&e.push(i);return e}},function(t,e,n){var r=n(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(23),a=n(83).f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return a(t)}catch(t){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==o.call(t)?u(t):a(r(t))}},function(t,e,n){var r=n(21),a=n(34).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},function(t,e,n){var r=n(36),a=n(18),o=n(23),i=n(17),u=n(22),s=n(13),l=Object.getOwnPropertyDescriptor;e.f=n(14)?l:function(t,e){if(t=o(t),e=i(e,!0),s)try{return l(t,e)}catch(t){}if(u(t,e))return a(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,n){n(78)("asyncIterator")},function(t,e,n){n(78)("observable")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(89),o=r(a),i=n(93),u=r(i),s=n(54),l=r(s);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,l.default)(e)));t.prototype=(0,u.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){t.exports={default:n(90),__esModule:!0}},function(t,e,n){n(91),t.exports=n(6).Object.setPrototypeOf},function(t,e,n){var r=n(4);r(r.S,"Object",{setPrototypeOf:n(92).set})},function(t,e,n){var r=n(12),a=n(11),o=function(t,e){if(a(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(7)(Function.call,n(84).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(94),__esModule:!0}},function(t,e,n){n(95);var r=n(6).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(4);r(r.S,"Object",{create:n(64)})},function(t,e,n){t.exports={default:n(97),__esModule:!0}},function(t,e,n){n(85),n(57),n(69),n(98),t.exports=n(6).Promise},function(t,e,n){"use strict";var r,a,o,i=n(60),u=n(5),s=n(7),l=n(99),f=n(4),c=n(12),d=n(8),h=n(100),v=n(101),p=n(105),m=n(106).set,y=n(108)(),g="Promise",_=u.TypeError,M=u.process,b=u[g],M=u.process,x="process"==l(M),w=function(){},S=!!function(){try{var t=b.resolve(1),e=(t.constructor={})[n(68)("species")]=function(t){t(w,w)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof e}catch(t){}}(),E=function(t,e){return t===e||t===b&&e===o},I=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},F=function(t){return E(b,t)?new k(t):new a(t)},k=a=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw _("Bad Promise constructor");e=t,n=r}),this.resolve=d(e),this.reject=d(n)},D=function(t){try{t()}catch(t){return{error:t}}},A=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,a=1==t._s,o=0,i=function(e){var n,o,i=a?e.ok:e.fail,u=e.resolve,s=e.reject,l=e.domain;try{i?(a||(2==t._h&&O(t),t._h=1),i===!0?n=r:(l&&l.enter(),n=i(r),l&&l.exit()),n===e.promise?s(_("Promise-chain cycle")):(o=I(n))?o.call(n,u,s):u(n)):s(r)}catch(t){s(t)}};n.length>o;)i(n[o++]);t._c=[],t._n=!1,e&&!t._h&&C(t)})}},C=function(t){m.call(u,function(){var e,n,r,a=t._v;if(P(t)&&(e=D(function(){x?M.emit("unhandledRejection",a,t):(n=u.onunhandledrejection)?n({promise:t,reason:a}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",a)}),t._h=x||P(t)?2:1),t._a=void 0,e)throw e.error})},P=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!P(e.promise))return!1;return!0},O=function(t){m.call(u,function(){var e;x?M.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},T=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _("Promise can't be resolved itself");(e=I(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,s(T,r,1),s(R,r,1))}catch(t){R.call(r,t)}}):(n._v=t,n._s=1,A(n,!1))}catch(t){R.call({_w:n,_d:!1},t)}}};S||(b=function(t){h(this,b,g,"_h"),d(t),r.call(this);try{t(s(T,this,1),s(R,this,1))}catch(t){R.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(109)(b.prototype,{then:function(t,e){var n=F(p(this,b));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=x?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),k=function(){var t=new r;this.promise=t,this.resolve=s(T,t,1),this.reject=s(R,t,1)}),f(f.G+f.W+f.F*!S,{Promise:b}),n(67)(b,g),n(110)(g),o=n(6)[g],f(f.S+f.F*!S,g,{reject:function(t){var e=F(this),n=e.reject;return n(t),e.promise}}),f(f.S+f.F*(i||!S),g,{resolve:function(t){if(t instanceof b&&E(t.constructor,this))return t;var e=F(this),n=e.resolve;return n(t),e.promise}}),f(f.S+f.F*!(S&&n(111)(function(t){b.all(t).catch(w)})),g,{all:function(t){var e=this,n=F(e),r=n.resolve,a=n.reject,o=D(function(){var n=[],o=0,i=1;v(t,!1,function(t){var u=o++,s=!1;n.push(void 0),i++,e.resolve(t).then(function(t){s||(s=!0,n[u]=t,--i||r(n))},a)}),--i||r(n)});return o&&a(o.error),n.promise},race:function(t){var e=this,n=F(e),r=n.reject,a=D(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return a&&r(a.error),n.promise}})},function(t,e,n){var r=n(25),a=n(68)("toStringTag"),o="Arguments"==r(function(){return arguments}()),i=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=i(e=Object(t),a))?n:o?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(7),a=n(102),o=n(103),i=n(11),u=n(28),s=n(104),l={},f={},e=t.exports=function(t,e,n,c,d){var h,v,p,m,y=d?function(){return t}:s(t),g=r(n,c,e?2:1),_=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(h=u(t.length);h>_;_++)if(m=e?g(i(v=t[_])[0],v[1]):g(t[_]),m===l||m===f)return m}else for(p=y.call(t);!(v=p.next()).done;)if(m=a(p,g,v.value,e),m===l||m===f)return m};e.BREAK=l,e.RETURN=f},function(t,e,n){var r=n(11);t.exports=function(t,e,n,a){try{return a?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(62),a=n(68)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[a]===t)}},function(t,e,n){var r=n(99),a=n(68)("iterator"),o=n(62);t.exports=n(6).getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(11),a=n(8),o=n(68)("species");t.exports=function(t,e){var n,i=r(t).constructor;return void 0===i||void 0==(n=r(i)[o])?e:a(n)}},function(t,e,n){var r,a,o,i=n(7),u=n(107),s=n(66),l=n(16),f=n(5),c=f.process,d=f.setImmediate,h=f.clearImmediate,v=f.MessageChannel,p=0,m={},y="onreadystatechange",g=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){g.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++p]=function(){u("function"==typeof t?t:Function(t),e)},r(p),p},h=function(t){delete m[t]},"process"==n(25)(c)?r=function(t){c.nextTick(i(g,t,1))}:v?(a=new v,o=a.port2,a.port1.onmessage=_,r=i(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",_,!1)):r=y in l("script")?function(t){s.appendChild(l("script"))[y]=function(){s.removeChild(this),g.call(t)}}:function(t){setTimeout(i(g,t,1),0)}),t.exports={set:d,clear:h}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(5),a=n(106).set,o=r.MutationObserver||r.WebKitMutationObserver,i=r.process,u=r.Promise,s="process"==n(25)(i);t.exports=function(){var t,e,n,l=function(){var r,a;for(s&&(r=i.domain)&&r.exit();t;){a=t.fn,t=t.next;try{a()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(s)n=function(){i.nextTick(l)};else if(o){var f=!0,c=document.createTextNode("");new o(l).observe(c,{characterData:!0}),n=function(){c.data=f=!f}}else if(u&&u.resolve){var d=u.resolve();n=function(){d.then(l)}}else n=function(){a.call(r,l)};return function(r){var a={fn:r,next:void 0};e&&(e.next=a),t||(t=a,n()),e=a}}},function(t,e,n){var r=n(9);t.exports=function(t,e,n){for(var a in e)n&&t[a]?t[a]=e[a]:r(t,a,e[a]);return t}},function(t,e,n){"use strict";var r=n(5),a=n(6),o=n(10),i=n(14),u=n(68)("species");t.exports=function(t){var e="function"==typeof a[t]?a[t]:r[t];i&&e&&!e[u]&&o.f(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(68)("iterator"),a=!1;try{var o=[7][r]();o.return=function(){a=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var o=[7],i=o[r]();i.next=function(){return{done:n=!0}},o[r]=function(){return i},t(o)}catch(t){}return n}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.Base.EEObject},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(96),c=r(f),d=function(t,e,n,r){return new(n||(n=c.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},h=function(){function t(e){(0,u.default)(this,t),this.toAbsolute=e,this.cache={},this.resolvers={}}return(0,l.default)(t,[{key:"resolve",value:function(t,e){return d(this,void 0,void 0,o.default.mark(function n(){var r,a;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=this.toAbsolute(t),!this._cached(r)){n.next=5;break}return n.abrupt("return",this.cache[r]);case 5:if(!this._resolving(r)){n.next=11;break}return n.next=8,this.resolvers[r];case 8:return n.abrupt("return",n.sent);case 11:return this.resolvers[r]=e(r),n.next=14,this.resolvers[r];case 14:return a=n.sent,this._resolved(r,a),n.abrupt("return",a);case 17:case"end":return n.stop()}},n,this)}))}},{key:"_cached",value:function(t){return"undefined"!=typeof this.cache[t]}},{key:"_resolving",value:function(t){return"undefined"!=typeof this.resolvers[t]}},{key:"_resolved",value:function(t,e){delete this.resolvers[t],this.cache[t]=e}}]),t}();e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(113),p=r(v),m=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,e._toAbsolute))}return(0,h.default)(e,t),(0,l.default)(e,null,[{key:"_toAbsolute",value:function(t){var e=document.createElement("a");return e.href=t,e.protocol+"//"+e.host+e.pathname+e.search+e.hash}}]),e}(p.default);e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ImageResolver=void 0;var a=n(96),o=r(a),i=n(43),u=r(i),s=n(48),l=r(s),f=n(49),c=r(f),d=n(53),h=r(d),v=n(116),p=r(v),m=n(88),y=r(m),g=n(114),_=r(g),M=e.ImageResolver=function(t){function e(){return(0,l.default)(this,e),(0,h.default)(this,(e.__proto__||(0,u.default)(e)).apply(this,arguments))}return(0,y.default)(e,t),(0,c.default)(e,[{key:"resolve",value:function(t){return(0,p.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"resolve",this).call(this,t,function(t){return new o.default(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=function(t){n(t)},r.src=t})})}}]),e}(_.default);e.default=new M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(43),o=r(a),i=n(117),u=r(i);e.default=function t(e,n,r){null===e&&(e=Function.prototype);var a=(0,u.default)(e,n);if(void 0===a){var i=(0,o.default)(e);return null===i?void 0:t(i,n,r)}if("value"in a)return a.value;var s=a.get;if(void 0!==s)return s.call(r)}},function(t,e,n){t.exports={default:n(118),__esModule:!0}},function(t,e,n){n(119);var r=n(6).Object;t.exports=function(t,e){return r.getOwnPropertyDescriptor(t,e)}},function(t,e,n){var r=n(23),a=n(84).f;n(47)("getOwnPropertyDescriptor",function(){return function(t,e){return a(r(t),e)}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.TextFileResolver=void 0;var a=n(96),o=r(a),i=n(43),u=r(i),s=n(48),l=r(s),f=n(49),c=r(f),d=n(53),h=r(d),v=n(116),p=r(v),m=n(88),y=r(m),g=n(114),_=r(g),M=e.TextFileResolver=function(t){function e(){return(0,l.default)(this,e),(0,h.default)(this,(e.__proto__||(0,u.default)(e)).apply(this,arguments))}return(0,y.default)(e,t),(0,c.default)(e,[{key:"resolve",value:function(t){return(0,p.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"resolve",this).call(this,t,function(t){return new o.default(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(t){e(r.responseText)},r.onerror=function(t){n(t)},r.send()})})}}]),e}(_.default);e.default=new M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=n(122),l=r(s),f=n(123),c=r(f),d=n(124),h=r(d),v=n(125),p=function(){function t(){(0,o.default)(this,t),this._viewMatrix=new h.default,this._projectionMatrix=new h.default,this._invProjectionMatrix=new h.default,this._projectionViewMatrix=new h.default,this._eyeCache=l.default.Zero,this._lookAtCache=l.default.Zero,this._upCache=l.default.Zero}return(0,u.default)(t,[{key:"getViewMatrix",value:function(){return this._viewMatrix}},{key:"getProjectionMatrix",value:function(){return this._projectionMatrix}},{key:"getInvProjectionMatrix",value:function(){return this._invProjectionMatrix}},{key:"getProjectionViewMatrix",value:function(){return this._projectionViewMatrix}},{key:"getFar",value:function(){return this._far}},{key:"setFar",value:function(t){this._far=t,this._recalculateProjection()}},{key:"getNear",value:function(){return this._near}},{key:"setNear",value:function(t){this._near=t,this._recalculateProjection()}},{key:"getAspect",value:function(){return this._aspect}},{key:"setAspect",value:function(t){this._aspect=t,this._recalculateProjection()}},{key:"getFovy",value:function(){return this._fovy}},{key:"setFovy",value:function(t){this._fovy=t,this._recalculateProjection()}},{key:"updateTransform",value:function(e){v.vec3.transformMat4(this._eyeCache.rawElements,l.default.Zero.rawElements,e.globalTransform.rawElements),v.vec4.transformMat4(this._lookAtCache.rawElements,t._frontOrigin.rawElements,e.globalTransform.rawElements),v.vec3.add(this._lookAtCache.rawElements,this._lookAtCache.rawElements,this._eyeCache.rawElements),v.vec4.transformMat4(this._upCache.rawElements,t._upOrigin.rawElements,e.globalTransform.rawElements),v.mat4.lookAt(this._viewMatrix.rawElements,this._eyeCache.rawElements,this._lookAtCache.rawElements,this._upCache.rawElements),v.mat4.mul(this._projectionViewMatrix.rawElements,this._projectionMatrix.rawElements,this._viewMatrix.rawElements)}},{key:"_recalculateProjection",value:function(){v.mat4.perspective(this._projectionMatrix.rawElements,this._fovy,this._aspect,this._near,this._far),v.mat4.mul(this._projectionViewMatrix.rawElements,this._projectionMatrix.rawElements,this._viewMatrix.rawElements),v.mat4.invert(this._invProjectionMatrix.rawElements,this._projectionMatrix.rawElements)}}]),t}();e.default=p,p._frontOrigin=new c.default(0,0,-1,0),p._upOrigin=new c.default(0,1,0,0)},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.lib.math.Vector3},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.lib.math.Vector4},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.lib.math.Matrix},function(t,e,n){e.glMatrix=n(126),e.mat2=n(127),e.mat2d=n(128),e.mat3=n(129),e.mat4=n(130),e.quat=n(131),e.vec2=n(134),e.vec3=n(132),e.vec4=n(133)},function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1;const r=new Function("return this")();n.SIMD_AVAILABLE=n.ARRAY_TYPE===r.Float32Array&&"SIMD"in r,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var a=Math.PI/180;n.toRadian=function(t){return t*a},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){var r=n(126),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.fromValues=function(t,e,n,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o},a.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},a.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=n*i,t):null},a.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},a.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],l=n[2],f=n[3];return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=r*l+o*f,t[3]=a*l+i*f,t},a.mul=a.multiply,a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=a*s+i*u,t[2]=r*-u+o*s,t[3]=a*-u+i*s,t},a.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},a.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},a.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},a.sub=a.subtract,a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1],l=e[2],f=e[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))},a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},t.exports=a},function(t,e,n){var r=n(126),a={};a.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.fromValues=function(t,e,n,a,o,i){var u=new r.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=a,u[4]=o,u[5]=i,u},a.set=function(t,e,n,r,a,o,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=n*o-r*a;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*u-o*i)*s,t[5]=(r*i-n*u)*s,t):null},a.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=n[0],f=n[1],c=n[2],d=n[3],h=n[4],v=n[5];return t[0]=r*l+o*f,t[1]=a*l+i*f,t[2]=r*c+o*d,t[3]=a*c+i*d,t[4]=r*h+o*v+u,t[5]=a*h+i*v+s,t},a.mul=a.multiply,a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=Math.sin(n),f=Math.cos(n);return t[0]=r*f+o*l,t[1]=a*f+i*l,t[2]=r*-l+o*f,t[3]=a*-l+i*f,t[4]=u,t[5]=s,t},a.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=n[0],f=n[1];return t[0]=r*l,t[1]=a*l,t[2]=o*f,t[3]=i*f,t[4]=u,t[5]=s,t},a.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=n[0],f=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*l+o*f+u,t[5]=a*l+i*f+s,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},a.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=e[0],f=e[1],c=e[2],d=e[3],h=e[4],v=e[5];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-h)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(s-v)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))},t.exports=a},function(t,e,n){var r=n(126),a={};a.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},a.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromValues=function(t,e,n,a,o,i,u,s,l){var f=new r.ARRAY_TYPE(9);return f[0]=t,f[1]=e,f[2]=n,f[3]=a,f[4]=o,f[5]=i,f[6]=u,f[7]=s,f[8]=l,f},a.set=function(t,e,n,r,a,o,i,u,s,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8],c=f*i-u*l,d=-f*o+u*s,h=l*o-i*s,v=n*c+r*d+a*h;return v?(v=1/v,t[0]=c*v,t[1]=(-f*r+a*l)*v,t[2]=(u*r-a*i)*v,t[3]=d*v,t[4]=(f*n-a*s)*v,t[5]=(-u*n+a*o)*v,t[6]=h*v,t[7]=(-l*n+r*s)*v,t[8]=(i*n-r*o)*v,t):null},a.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8];return t[0]=i*f-u*l,t[1]=a*l-r*f,t[2]=r*u-a*i,t[3]=u*s-o*f,t[4]=n*f-a*s,t[5]=a*o-n*u,t[6]=o*l-i*s,t[7]=r*s-n*l,t[8]=n*i-r*o,t},a.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8];return e*(l*o-i*s)+n*(-l*a+i*u)+r*(s*a-o*u)},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=n[0],h=n[1],v=n[2],p=n[3],m=n[4],y=n[5],g=n[6],_=n[7],M=n[8];return t[0]=d*r+h*i+v*l,t[1]=d*a+h*u+v*f,t[2]=d*o+h*s+v*c,t[3]=p*r+m*i+y*l,t[4]=p*a+m*u+y*f,t[5]=p*o+m*s+y*c,t[6]=g*r+_*i+M*l,t[7]=g*a+_*u+M*f,t[8]=g*o+_*s+M*c,t},a.mul=a.multiply,a.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=n[0],h=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=d*r+h*i+l,t[7]=d*a+h*u+f,t[8]=d*o+h*s+c,t},a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=Math.sin(n),h=Math.cos(n);return t[0]=h*r+d*i,t[1]=h*a+d*u,t[2]=h*o+d*s,t[3]=h*i-d*r,t[4]=h*u-d*a,t[5]=h*s-d*o,t[6]=l,t[7]=f,t[8]=c,t},a.scale=function(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},a.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,l=n*i,f=r*i,c=r*u,d=a*i,h=a*u,v=a*s,p=o*i,m=o*u,y=o*s;return t[0]=1-c-v,t[3]=f-y,t[6]=d+m,t[1]=f+y,t[4]=1-l-v,t[7]=h-p,t[2]=d-m,t[5]=h+p,t[8]=1-l-c,t},a.normalFromMat4=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8],c=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],y=e[15],g=n*u-r*i,_=n*s-a*i,M=n*l-o*i,b=r*s-a*u,x=r*l-o*u,w=a*l-o*s,S=f*p-c*v,E=f*m-d*v,I=f*y-h*v,F=c*m-d*p,k=c*y-h*p,D=d*y-h*m,A=g*D-_*k+M*F+b*I-x*E+w*S;return A?(A=1/A,t[0]=(u*D-s*k+l*F)*A,t[1]=(s*I-i*D-l*E)*A,t[2]=(i*k-u*I+l*S)*A,t[3]=(a*k-r*D-o*F)*A,t[4]=(n*D-a*I+o*E)*A,t[5]=(r*I-n*k-o*S)*A,t[6]=(p*w-m*x+y*b)*A,t[7]=(m*M-v*w-y*_)*A,t[8]=(v*x-p*M+y*g)*A,t):null},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],f=t[7],c=t[8],d=e[0],h=e[1],v=e[2],p=e[3],m=e[4],y=e[5],g=t[6],_=e[7],M=e[8];
return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-v)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-m)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-y)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(f-_)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(c-M)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(M))},t.exports=a},function(t,e,n){var r=n(126),a={scalar:{},SIMD:{}};a.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.fromValues=function(t,e,n,a,o,i,u,s,l,f,c,d,h,v,p,m){var y=new r.ARRAY_TYPE(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=a,y[4]=o,y[5]=i,y[6]=u,y[7]=s,y[8]=l,y[9]=f,y[10]=c,y[11]=d,y[12]=h,y[13]=v,y[14]=p,y[15]=m,y},a.set=function(t,e,n,r,a,o,i,u,s,l,f,c,d,h,v,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t[9]=f,t[10]=c,t[11]=d,t[12]=h,t[13]=v,t[14]=p,t[15]=m,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.scalar.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},a.SIMD.transpose=function(t,e){var n,r,a,o,i,u,s,l,f,c;return n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),s=SIMD.Float32x4.shuffle(i,u,0,2,4,6),l=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),i=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(a,o,2,3,6,7),f=SIMD.Float32x4.shuffle(i,u,0,2,4,6),c=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,c),t},a.transpose=r.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8],c=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],y=e[15],g=n*u-r*i,_=n*s-a*i,M=n*l-o*i,b=r*s-a*u,x=r*l-o*u,w=a*l-o*s,S=f*p-c*v,E=f*m-d*v,I=f*y-h*v,F=c*m-d*p,k=c*y-h*p,D=d*y-h*m,A=g*D-_*k+M*F+b*I-x*E+w*S;return A?(A=1/A,t[0]=(u*D-s*k+l*F)*A,t[1]=(a*k-r*D-o*F)*A,t[2]=(p*w-m*x+y*b)*A,t[3]=(d*x-c*w-h*b)*A,t[4]=(s*I-i*D-l*E)*A,t[5]=(n*D-a*I+o*E)*A,t[6]=(m*M-v*w-y*_)*A,t[7]=(f*w-d*M+h*_)*A,t[8]=(i*k-u*I+l*S)*A,t[9]=(r*I-n*k-o*S)*A,t[10]=(v*x-p*M+y*g)*A,t[11]=(c*M-f*x-h*g)*A,t[12]=(u*E-i*F-s*S)*A,t[13]=(n*F-r*E+a*S)*A,t[14]=(p*_-v*b-m*g)*A,t[15]=(f*b-c*_+d*g)*A,t):null},a.SIMD.invert=function(t,e){var n,r,a,o,i,u,s,l,f,c,d=SIMD.Float32x4.load(e,0),h=SIMD.Float32x4.load(e,4),v=SIMD.Float32x4.load(e,8),p=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(d,h,0,1,4,5),r=SIMD.Float32x4.shuffle(v,p,0,1,4,5),n=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(d,h,2,3,6,7),o=SIMD.Float32x4.shuffle(v,p,2,3,6,7),a=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(r,i),s=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),f=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),l=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),f),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),l),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),f),c=SIMD.Float32x4.mul(n,u),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),i=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(i,i))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,f)),t):null},a.invert=r.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8],c=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],y=e[15];return t[0]=u*(d*y-h*m)-c*(s*y-l*m)+p*(s*h-l*d),t[1]=-(r*(d*y-h*m)-c*(a*y-o*m)+p*(a*h-o*d)),t[2]=r*(s*y-l*m)-u*(a*y-o*m)+p*(a*l-o*s),t[3]=-(r*(s*h-l*d)-u*(a*h-o*d)+c*(a*l-o*s)),t[4]=-(i*(d*y-h*m)-f*(s*y-l*m)+v*(s*h-l*d)),t[5]=n*(d*y-h*m)-f*(a*y-o*m)+v*(a*h-o*d),t[6]=-(n*(s*y-l*m)-i*(a*y-o*m)+v*(a*l-o*s)),t[7]=n*(s*h-l*d)-i*(a*h-o*d)+f*(a*l-o*s),t[8]=i*(c*y-h*p)-f*(u*y-l*p)+v*(u*h-l*c),t[9]=-(n*(c*y-h*p)-f*(r*y-o*p)+v*(r*h-o*c)),t[10]=n*(u*y-l*p)-i*(r*y-o*p)+v*(r*l-o*u),t[11]=-(n*(u*h-l*c)-i*(r*h-o*c)+f*(r*l-o*u)),t[12]=-(i*(c*m-d*p)-f*(u*m-s*p)+v*(u*d-s*c)),t[13]=n*(c*m-d*p)-f*(r*m-a*p)+v*(r*d-a*c),t[14]=-(n*(u*m-s*p)-i*(r*m-a*p)+v*(r*s-a*u)),t[15]=n*(u*d-s*c)-i*(r*d-a*c)+f*(r*s-a*u),t},a.SIMD.adjoint=function(t,e){var n,r,a,o,i,u,s,l,f,c,d,h,v;return n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),f=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),i=SIMD.Float32x4.shuffle(f,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,f,1,3,5,7),f=SIMD.Float32x4.shuffle(n,r,2,3,6,7),l=SIMD.Float32x4.shuffle(a,o,2,3,6,7),s=SIMD.Float32x4.shuffle(f,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,f,1,3,5,7),f=SIMD.Float32x4.mul(s,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.mul(u,f),d=SIMD.Float32x4.mul(i,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),c),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,f),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),f=SIMD.Float32x4.mul(u,s),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),c),v=SIMD.Float32x4.mul(i,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,f)),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,f),v),v=SIMD.Float32x4.swizzle(v,2,3,0,1),f=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),c),h=SIMD.Float32x4.mul(i,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,f)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,f),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.mul(i,u),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),h),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,f),v),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,f),h),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(s,f)),f=SIMD.Float32x4.mul(i,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,f)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,f),h),f=SIMD.Float32x4.swizzle(f,2,3,0,1),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),d),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,f)),f=SIMD.Float32x4.mul(i,s),f=SIMD.Float32x4.swizzle(f,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),d),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(u,f)),f=SIMD.Float32x4.swizzle(f,2,3,0,1),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,f)),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,f),v),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,d),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,v),t},a.adjoint=r.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8],f=t[9],c=t[10],d=t[11],h=t[12],v=t[13],p=t[14],m=t[15],y=e*i-n*o,g=e*u-r*o,_=e*s-a*o,M=n*u-r*i,b=n*s-a*i,x=r*s-a*u,w=l*v-f*h,S=l*p-c*h,E=l*m-d*h,I=f*p-c*v,F=f*m-d*v,k=c*m-d*p;return y*k-g*F+_*I+M*E-b*S+x*w},a.SIMD.multiply=function(t,e,n){var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.load(n,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,s);var l=SIMD.Float32x4.load(n,4),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(t,4,f);var c=SIMD.Float32x4.load(n,8),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),i))));SIMD.Float32x4.store(t,8,d);var h=SIMD.Float32x4.load(n,12),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,v),t},a.scalar.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=e[9],h=e[10],v=e[11],p=e[12],m=e[13],y=e[14],g=e[15],_=n[0],M=n[1],b=n[2],x=n[3];return t[0]=_*r+M*u+b*c+x*p,t[1]=_*a+M*s+b*d+x*m,t[2]=_*o+M*l+b*h+x*y,t[3]=_*i+M*f+b*v+x*g,_=n[4],M=n[5],b=n[6],x=n[7],t[4]=_*r+M*u+b*c+x*p,t[5]=_*a+M*s+b*d+x*m,t[6]=_*o+M*l+b*h+x*y,t[7]=_*i+M*f+b*v+x*g,_=n[8],M=n[9],b=n[10],x=n[11],t[8]=_*r+M*u+b*c+x*p,t[9]=_*a+M*s+b*d+x*m,t[10]=_*o+M*l+b*h+x*y,t[11]=_*i+M*f+b*v+x*g,_=n[12],M=n[13],b=n[14],x=n[15],t[12]=_*r+M*u+b*c+x*p,t[13]=_*a+M*s+b*d+x*m,t[14]=_*o+M*l+b*h+x*y,t[15]=_*i+M*f+b*v+x*g,t},a.multiply=r.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(t,e,n){var r,a,o,i,u,s,l,f,c,d,h,v,p=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*y+e[12],t[13]=e[1]*p+e[5]*m+e[9]*y+e[13],t[14]=e[2]*p+e[6]*m+e[10]*y+e[14],t[15]=e[3]*p+e[7]*m+e[11]*y+e[15]):(r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=e[9],h=e[10],v=e[11],t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=l,t[7]=f,t[8]=c,t[9]=d,t[10]=h,t[11]=v,t[12]=r*p+u*m+c*y+e[12],t[13]=a*p+s*m+d*y+e[13],t[14]=o*p+l*m+h*y+e[14],t[15]=i*p+f*m+v*y+e[15]),t},a.SIMD.translate=function(t,e,n){var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(r,SIMD.Float32x4.add(a,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,s),t},a.translate=r.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.SIMD.scale=function(t,e,n){var r,a,o,i=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),a=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.scale=r.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(t,e,n,a){var o,i,u,s,l,f,c,d,h,v,p,m,y,g,_,M,b,x,w,S,E,I,F,k,D=a[0],A=a[1],C=a[2],P=Math.sqrt(D*D+A*A+C*C);return Math.abs(P)<r.EPSILON?null:(P=1/P,D*=P,A*=P,C*=P,o=Math.sin(n),i=Math.cos(n),u=1-i,s=e[0],l=e[1],f=e[2],c=e[3],d=e[4],h=e[5],v=e[6],p=e[7],m=e[8],y=e[9],g=e[10],_=e[11],M=D*D*u+i,b=A*D*u+C*o,x=C*D*u-A*o,w=D*A*u-C*o,S=A*A*u+i,E=C*A*u+D*o,I=D*C*u+A*o,F=A*C*u-D*o,k=C*C*u+i,t[0]=s*M+d*b+m*x,t[1]=l*M+h*b+y*x,t[2]=f*M+v*b+g*x,t[3]=c*M+p*b+_*x,t[4]=s*w+d*S+m*E,t[5]=l*w+h*S+y*E,t[6]=f*w+v*S+g*E,t[7]=c*w+p*S+_*E,t[8]=s*I+d*F+m*k,t[9]=l*I+h*F+y*k,t[10]=f*I+v*F+g*k,t[11]=c*I+p*F+_*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},a.scalar.rotateX=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],s=e[7],l=e[8],f=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+l*r,t[5]=i*a+f*r,t[6]=u*a+c*r,t[7]=s*a+d*r,t[8]=l*a-o*r,t[9]=f*a-i*r,t[10]=c*a-u*r,t[11]=d*a-s*r,t},a.SIMD.rotateX=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateX=r.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],l=e[8],f=e[9],c=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-l*r,t[1]=i*a-f*r,t[2]=u*a-c*r,t[3]=s*a-d*r,t[8]=o*r+l*a,t[9]=i*r+f*a,t[10]=u*r+c*a,t[11]=s*r+d*a,t},a.SIMD.rotateY=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,a))),t},a.rotateY=r.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],l=e[4],f=e[5],c=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+l*r,t[1]=i*a+f*r,t[2]=u*a+c*r,t[3]=s*a+d*r,t[4]=l*a-o*r,t[5]=f*a-i*r,t[6]=c*a-u*r,t[7]=d*a-s*r,t},a.SIMD.rotateZ=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateZ=r.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,e,n){var a,o,i,u=n[0],s=n[1],l=n[2],f=Math.sqrt(u*u+s*s+l*l);return Math.abs(f)<r.EPSILON?null:(f=1/f,u*=f,s*=f,l*=f,a=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=u*u*i+o,t[1]=s*u*i+l*a,t[2]=l*u*i-s*a,t[3]=0,t[4]=u*s*i-l*a,t[5]=s*s*i+o,t[6]=l*s*i+u*a,t[7]=0,t[8]=u*l*i+s*a,t[9]=s*l*i-u*a,t[10]=l*l*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},a.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotationTranslation=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,s=a+a,l=o+o,f=r*u,c=r*s,d=r*l,h=a*s,v=a*l,p=o*l,m=i*u,y=i*s,g=i*l;return t[0]=1-(h+p),t[1]=c+g,t[2]=d-y,t[3]=0,t[4]=c-g,t[5]=1-(f+p),t[6]=v+m,t[7]=0,t[8]=d+y,t[9]=v-m,t[10]=1-(f+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},a.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},a.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},a.fromRotationTranslationScale=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=a+a,l=o+o,f=i+i,c=a*s,d=a*l,h=a*f,v=o*l,p=o*f,m=i*f,y=u*s,g=u*l,_=u*f,M=r[0],b=r[1],x=r[2];return t[0]=(1-(v+m))*M,t[1]=(d+_)*M,t[2]=(h-g)*M,t[3]=0,t[4]=(d-_)*b,t[5]=(1-(c+m))*b,t[6]=(p+y)*b,t[7]=0,t[8]=(h+g)*x,t[9]=(p-y)*x,t[10]=(1-(c+v))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},a.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],s=e[3],l=o+o,f=i+i,c=u+u,d=o*l,h=o*f,v=o*c,p=i*f,m=i*c,y=u*c,g=s*l,_=s*f,M=s*c,b=r[0],x=r[1],w=r[2],S=a[0],E=a[1],I=a[2];return t[0]=(1-(p+y))*b,t[1]=(h+M)*b,t[2]=(v-_)*b,t[3]=0,t[4]=(h-M)*x,t[5]=(1-(d+y))*x,t[6]=(m+g)*x,t[7]=0,t[8]=(v+_)*w,t[9]=(m-g)*w,t[10]=(1-(d+p))*w,t[11]=0,t[12]=n[0]+S-(t[0]*S+t[4]*E+t[8]*I),t[13]=n[1]+E-(t[1]*S+t[5]*E+t[9]*I),t[14]=n[2]+I-(t[2]*S+t[6]*E+t[10]*I),t[15]=1,t},a.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,l=n*i,f=r*i,c=r*u,d=a*i,h=a*u,v=a*s,p=o*i,m=o*u,y=o*s;return t[0]=1-c-v,t[1]=f+y,t[2]=d-m,t[3]=0,t[4]=f-y,t[5]=1-l-v,t[6]=h+p,t[7]=0,t[8]=d+m,t[9]=h-p,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.frustum=function(t,e,n,r,a,o,i){var u=1/(n-e),s=1/(a-r),l=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*s,t[10]=(i+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*l,t[15]=0,t},a.perspective=function(t,e,n,r,a){var o=1/Math.tan(e/2),i=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},a.perspectiveFromFieldOfView=function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((i-u)*s*.5),t[9]=(a-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},a.ortho=function(t,e,n,r,a,o,i){var u=1/(e-n),s=1/(r-a),l=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*s,t[14]=(i+o)*l,t[15]=1,t},a.lookAt=function(t,e,n,o){var i,u,s,l,f,c,d,h,v,p,m=e[0],y=e[1],g=e[2],_=o[0],M=o[1],b=o[2],x=n[0],w=n[1],S=n[2];return Math.abs(m-x)<r.EPSILON&&Math.abs(y-w)<r.EPSILON&&Math.abs(g-S)<r.EPSILON?a.identity(t):(d=m-x,h=y-w,v=g-S,p=1/Math.sqrt(d*d+h*h+v*v),d*=p,h*=p,v*=p,i=M*v-b*h,u=b*d-_*v,s=_*h-M*d,p=Math.sqrt(i*i+u*u+s*s),p?(p=1/p,i*=p,u*=p,s*=p):(i=0,u=0,s=0),l=h*s-v*u,f=v*i-d*s,c=d*u-h*i,p=Math.sqrt(l*l+f*f+c*c),p?(p=1/p,l*=p,f*=p,c*=p):(l=0,f=0,c=0),t[0]=i,t[1]=l,t[2]=d,t[3]=0,t[4]=u,t[5]=f,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=v,t[11]=0,t[12]=-(i*m+u*y+s*g),t[13]=-(l*m+f*y+c*g),t[14]=-(d*m+h*y+v*g),t[15]=1,t)},a.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],f=t[7],c=t[8],d=t[9],h=t[10],v=t[11],p=t[12],m=t[13],y=t[14],g=t[15],_=e[0],M=e[1],b=e[2],x=e[3],w=e[4],S=e[5],E=e[6],I=e[7],F=e[8],k=e[9],D=e[10],A=e[11],C=e[12],P=e[13],O=e[14],R=e[15];return Math.abs(n-_)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-b)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-w)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(s-S)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-E)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(f-I)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(c-F)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(d-k)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(h-D)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(v-A)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(p-C)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(m-P)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-O)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(g-R)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(R))},t.exports=a},function(t,e,n){var r=n(126),a=n(129),o=n(132),i=n(133),u={};u.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,a,i){var s=o.dot(a,i);return s<-.999999?(o.cross(t,e,a),o.length(t)<1e-6&&o.cross(t,n,a),o.normalize(t,t),u.setAxisAngle(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,a,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var t=a.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],u.normalize(e,u.fromMat3(e,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t},u.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},u.add=i.add,u.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],l=n[2],f=n[3];return t[0]=r*f+i*u+a*l-o*s,t[1]=a*f+i*s+o*u-r*l,t[2]=o*f+i*l+r*s-a*u,t[3]=i*f-r*u-a*s-o*l,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-r*u,t},u.rotateY=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=a*s+i*u,t[2]=o*s+r*u,t[3]=i*s-a*u,t},u.rotateZ=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=a*s-r*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},u.calculateW=function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,e,n,r){var a,o,i,u,s,l=e[0],f=e[1],c=e[2],d=e[3],h=n[0],v=n[1],p=n[2],m=n[3];return o=l*h+f*v+c*p+d*m,o<0&&(o=-o,h=-h,v=-v,p=-p,m=-m),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,s=Math.sin(r*a)/i):(u=1-r,s=r),t[0]=u*l+s*h,t[1]=u*f+s*v,t[2]=u*c+s*p,t[3]=u*d+s*m,t},u.sqlerp=function(){var t=u.create(),e=u.create();return function(n,r,a,o,i,s){return u.slerp(t,r,i,s),u.slerp(e,a,o,s),u.slerp(n,t,e,2*s*(1-s)),n}}(),u.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},u.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*o+i]-e[3*i+o])*n,t[o]=(e[3*o+a]+e[3*a+o])*n,t[i]=(e[3*i+a]+e[3*a+i])*n}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,e,n){var r=n(126),a={};a.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,n){var a=new r.ARRAY_TYPE(3);return a[0]=t,a[1]=e,a[2]=n,a},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2];return t[0]=a*s-o*u,t[1]=o*i-r*s,t[2]=r*u-a*i,t},a.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t},a.hermite=function(t,e,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,l=i*(o-1),f=i*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*l+a[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*l+a[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*l+a[2]*f,t},a.bezier=function(t,e,n,r,a,o){var i=1-o,u=i*i,s=o*o,l=u*i,f=3*o*u,c=3*s*i,d=s*o;return t[0]=e[0]*l+n[0]*f+r[0]*c+a[0]*d,t[1]=e[1]*l+n[1]*f+r[1]*c+a[1]*d,t[2]=e[2]*l+n[2]*f+r[2]*c+a[2]*d,t},a.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,o=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=a*e,t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,t},a.transformMat3=function(t,e,n){var r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],
t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t},a.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],l=n[3],f=l*r+u*o-s*a,c=l*a+s*r-i*o,d=l*o+i*a-u*r,h=-i*r-u*a-s*o;return t[0]=f*l+h*-i+c*-s-d*-u,t[1]=c*l+h*-u+d*-i-f*-s,t[2]=d*l+h*-s+f*-u-c*-i,t},a.rotateX=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateY=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateZ=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,s;for(n||(n=3),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),a.angle=function(t,e){var n=a.fromValues(t[0],t[1],t[2]),r=a.fromValues(e[0],e[1],e[2]);a.normalize(n,n),a.normalize(r,r);var o=a.dot(n,r);return o>1?0:Math.acos(o)},a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=e[0],u=e[1],s=e[2];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},t.exports=a},function(t,e,n){var r=n(126),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,n,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t},a.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),a.normalize(t,t),a.scale(t,t,e),t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t},a.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],l=n[3],f=l*r+u*o-s*a,c=l*a+s*r-i*o,d=l*o+i*a-u*r,h=-i*r-u*a-s*o;return t[0]=f*l+h*-i+c*-s-d*-u,t[1]=c*l+h*-u+d*-i-f*-s,t[2]=d*l+h*-s+f*-u-c*-i,t[3]=e[3],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,s;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1],l=e[2],f=e[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))},t.exports=a},function(t,e,n){var r=n(126),a={};a.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,n){return t[0]=e,t[1]=n,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},a.lerp=function(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t},a.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},a.transformMat2=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},a.transformMat2d=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},a.transformMat3=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,s;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a.equals=function(t,e){var n=t[0],a=t[1],o=e[0],i=e[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-i)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))},t.exports=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(43),u=r(i),s=n(48),l=r(s),f=n(49),c=r(f),d=n(53),h=r(d),v=n(88),p=r(v),m=n(96),y=r(m),g=n(136),_=r(g),M=n(38),b=r(M),x=n(137),w=r(x),S=n(138),E=r(S),I=function(t,e,n,r){return new(n||(n=y.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},F=function(t){function e(){(0,l.default)(this,e);var t=(0,h.default)(this,(e.__proto__||(0,u.default)(e)).apply(this,arguments));return t.loader=new b.default,t}return(0,p.default)(e,t),(0,c.default)(e,[{key:"$treeInitialized",value:function(){this.attributes.get("autoStart").Value&&this._autoStart(),this._documentResolver()}},{key:"$awake",value:function(){var t=this;this.companion.set(_.default.ns(this.name.ns)("loader"),this.loader),this.loader.register(new y.default(function(e){t._documentResolver=e}));var e=this.companion.get("canvasContainer");if(this.getValue("enableLoader")){var n=document.createElement("div");n.innerHTML=E.default,n.style.width=n.style.height="100%",e.appendChild(n),this._loaderElement=n}}},{key:"_autoStart",value:function(){return I(this,void 0,void 0,o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.promise;case 2:this._loaderElement&&this._loaderElement.remove(),this.node.emit("asset-load-completed"),this.tree("goml").setAttribute("loopEnabled",!0);case 5:case"end":return t.stop()}},t,this)}))}}]),e}(w.default);e.default=F,F.attributes={loadingProgress:{defaultValue:0,converter:"Number"},autoStart:{defaultValue:!0,converter:"Boolean"},anableLoader:{defaultValue:!1,converter:"Boolean"}}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.Node.Component},function(t,e){t.exports='<div style="width:100%;height:100%;position: relative;">\n    <div style="width: 55px;height: 55px;border-radius: 100%;border: 5px solid #381794;border-right-color: #FC659D;animation: rotate 1s linear infinite;position: absolute;top: 0;left: 0;right: 0;bottom: 0;margin: auto;"></div>\n</div>\n<style type="text/css">\n    @keyframes rotate {\n        from {\n            transform: rotate(0deg);\n        }\n        to {\n            transform: rotate(360deg);\n        }\n    }\n</style>\n'},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(121),p=r(v),m=n(140),y=r(m),g=n(137),_=r(g),M=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){this.containedScene=e._findContainedScene(this.node);var t=this.camera=new p.default;this.transform=this.node.getComponent("Transform"),this.$transformUpdated(this.transform),this.getAttribute("far").addObserver(function(e){t.setFar(e.Value)},!0),this.getAttribute("near").addObserver(function(e){t.setNear(e.Value)},!0),this.getAttribute("fovy").addObserver(function(e){t.setFovy(e.Value)},!0),this.getAttribute("aspect").addObserver(function(e){t.setAspect(e.Value)},!0),this.getAttribute("autoAspect").boundTo("_autoAspect")}},{key:"updateContainedScene",value:function(t){this.containedScene&&this.containedScene.updateScene(t)}},{key:"renderScene",value:function(t){this.containedScene&&(this._justifyAspect(t),t.sceneDescription=this.containedScene.sceneDescription,t.defaultTexture=this.companion.get("defaultTexture"),this.containedScene.node.broadcastMessage("render",t))}},{key:"$transformUpdated",value:function(t){this.camera&&this.camera.updateTransform(t)}},{key:"_justifyAspect",value:function(t){if(this._autoAspect){var e=t.viewport.Width/t.viewport.Height;this._aspectCache!==e&&(this.setValue("aspect",e),this._aspectCache=e)}}}],[{key:"_findContainedScene",value:function(t){if(t.parent){var n=t.parent.getComponent("Scene");return n&&n instanceof y.default?n:e._findContainedScene(t.parent)}return null}}]),e}(_.default);e.default=M,M.attributes={fovy:{defaultValue:.3,converter:"Number"},near:{defaultValue:.01,converter:"Number"},far:{defaultValue:10,converter:"Number"},aspect:{defaultValue:1.6,converter:"Number"},autoAspect:{defaultValue:!0,converter:"Boolean"}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(137),p=r(v),m=function(t){function e(){(0,u.default)(this,e);var t=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments));return t.sceneDescription={},t}return(0,h.default)(e,t),(0,l.default)(e,[{key:"updateScene",value:function(t){this._lastUpdateIndex!==t&&(this.node.broadcastMessage("update",this.sceneDescription),this._lastUpdateIndex=t)}}]),e}(p.default);e.default=m,m.attributes={}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a,o=n(43),i=r(o),u=n(48),s=r(u),l=n(49),f=r(l),c=n(53),d=r(c),h=n(88),v=r(h),p=n(136),m=r(p),y=n(142),g=r(y),_=n(145),M=r(_),b=n(137),x=r(b),w=m.default.ns("HTTP://GRIMOIRE.GL/NS/DEFAULT");!function(t){t[t.Aspect=0]="Aspect",t[t.Fit=1]="Fit",t[t.Manual=2]="Manual"}(a||(a={}));var S=function(t){function e(){return(0,s.default)(this,e),(0,d.default)(this,(e.__proto__||(0,i.default)(e)).apply(this,arguments))}return(0,v.default)(e,t),(0,f.default)(e,[{key:"$awake",value:function(){var t=this;this._scriptTag=this.companion.get("scriptElement"),this._isContainedInBody(this._scriptTag)&&this._generateCanvas(this._scriptTag),this.attributes.get("width").addObserver(function(e){t._resize()}),this.attributes.get("height").addObserver(function(e){t._resize()})}},{key:"_generateCanvas",value:function(t){var e=this;this.canvas=document.createElement("canvas"),window.addEventListener("resize",function(){return e._onWindowResize()}),this._configureCanvas(this.canvas,t);var n=this._getContext(this.canvas);return this._defaultTexture=new g.default(n),this._defaultTexture.update(0,1,1,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,new Uint8Array([0,0,0,0])),this.companion.set(w("gl"),n),this.companion.set(w("canvasElement"),this.canvas),this.companion.set(w("GLExtRequestor"),new M.default(n)),this.companion.set(w("defaultTexture"),this._defaultTexture),this.canvas}},{key:"_resize",value:function(t){var e=(this.companion.get("canvasElement"),this.getValue("width")),n=this.getValue("height");if(this._widthMode=this._asResizeMode(e),this._heightMode=this._asResizeMode(n),this._widthMode===this._heightMode&&this._widthMode===a.Aspect)throw new Error("Width and height could not have aspect mode in same time!");this._widthMode===a.Aspect&&(this._ratio=e.aspect),this._heightMode===a.Aspect&&(this._ratio=n.aspect),this._widthMode===a.Manual&&this._applyManualWidth(e.size,t),this._heightMode===a.Manual&&this._applyManualHeight(n.size,t),this._onWindowResize(t)}},{key:"_onWindowResize",value:function(t){var e=this._getParentSize();this._widthMode===a.Fit&&this._applyManualWidth(e.width,t),this._heightMode===a.Fit&&this._applyManualHeight(e.height,t)}},{key:"_applyManualWidth",value:function(t,e){t!==this.canvas.width&&(this.canvas.width=t,this._canvasContainer.style.width=t+"px",e||this.node.broadcastMessage(1,"resizeCanvas"),this._heightMode===a.Aspect&&this._applyManualHeight(t/this._ratio,e))}},{key:"_applyManualHeight",value:function(t,e){t!==this.canvas.height&&(this.canvas.height=t,this._canvasContainer.style.height=t+"px",e||this.node.broadcastMessage(1,"resizeCanvas"),this._widthMode===a.Aspect&&this._applyManualWidth(t*this._ratio,e))}},{key:"_getParentSize",value:function(){var t=this._canvasContainer.parentElement,e=t.getBoundingClientRect();return e}},{key:"_asResizeMode",value:function(t){return"fit"===t.mode?a.Fit:"aspect"===t.mode?a.Aspect:a.Manual}},{key:"_configureCanvas",value:function(t,e){t.style.position="absolute",t.style.top="0px",t.style.left="0px",this._canvasContainer=document.createElement("div"),this._canvasContainer.style.position="relative",this._canvasContainer.style.overflow="hidden",this._canvasContainer.appendChild(t),this.getValue("containerId")&&(this._canvasContainer.id=this.getValue("containerId")),this.getValue("containerClass")&&(this._canvasContainer.className=this.getValue("containerClass")),this.companion.set(w("canvasContainer"),this._canvasContainer),e.parentElement.insertBefore(this._canvasContainer,e.nextSibling),this._resize(!0)}},{key:"_getContext",value:function(t){var e=t.getContext("webgl");return e||(e=t.getContext("webgl-experimental")),e}},{key:"_isContainedInBody",value:function(t){return!!t.parentElement&&("BODY"===t.parentNode.nodeName||this._isContainedInBody(t.parentElement))}}]),e}(x.default);S.attributes={width:{defaultValue:"fit",converter:"CanvasSize"},height:{defaultValue:480,converter:"CanvasSize"},containerId:{defaultValue:void 0,converter:"String"},containerClass:{defaultValue:"gr-container",converter:"String"}},e.default=S},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(116),h=r(d),v=n(88),p=r(v),m=n(143),y=r(m),g=function(t){function e(t){(0,u.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return n._texParameterChanged=!0,n._magFilter=WebGLRenderingContext.LINEAR,n._minFilter=WebGLRenderingContext.LINEAR,n._wrapS=WebGLRenderingContext.REPEAT,n._wrapT=WebGLRenderingContext.REPEAT,n.texture=t.createTexture(),n}return(0,p.default)(e,t),(0,l.default)(e,[{key:"update",value:function(t,e,n,r,a,o,i,u){this.gl.bindTexture(WebGLRenderingContext.TEXTURE_2D,this.texture);var s=!1,l=void 0,f=void 0,c=void 0;void 0===n?(s=!!e,l=t):(c=t,f=e),void 0===n?l instanceof HTMLImageElement?this.gl.texImage2D(WebGLRenderingContext.TEXTURE_2D,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,this._justifyImage(l)):l instanceof HTMLCanvasElement?this.gl.texImage2D(WebGLRenderingContext.TEXTURE_2D,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,this._justifyCanvas(l)):l instanceof HTMLVideoElement&&this.gl.texImage2D(WebGLRenderingContext.TEXTURE_2D,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,this._justifyVideo(l)):(void 0===i&&(i=null),this.gl.texImage2D(WebGLRenderingContext.TEXTURE_2D,c,a,f,n,r,a,o,i)),this.valid=!0}},{key:"register",value:function(t){this.gl.activeTexture(WebGLRenderingContext.TEXTURE0+t),this.gl.bindTexture(WebGLRenderingContext.TEXTURE_2D,this.texture),this._texParameterChanged&&this._updateTexParameter()}},{key:"destroy",value:function(){(0,h.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"destroy",this).call(this),this.gl.deleteTexture(this.texture)}},{key:"_justifyImage",value:function(t){var e=t.naturalWidth,n=t.naturalHeight,r=Math.pow(2,Math.log(Math.min(e,n))/Math.LN2|0);if(e!==n||e!==r){var a=document.createElement("canvas");return a.height=a.width=r,a.getContext("2d").drawImage(t,0,0,e,n,0,0,r,r),a}return t}},{key:"_justifyCanvas",value:function(t){var e=t.width,n=t.height,r=Math.pow(2,Math.log(Math.min(e,n))/Math.LN2|0);return e===n&&e===r||(t.height=t.width=r),t}},{key:"_justifyVideo",value:function(t){var e=t.videoWidth,n=t.videoHeight,r=Math.pow(2,Math.log(Math.min(e,n))/Math.LN2|0);if(e!==n||e!==r){var a=document.createElement("canvas");return a.height=a.width=r,a.getContext("2d").drawImage(t,0,0,e,n,0,0,r,r),a}return t}},{key:"_updateTexParameter",value:function(){this.gl.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGLRenderingContext.TEXTURE_MIN_FILTER,this._minFilter),this.gl.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGLRenderingContext.TEXTURE_MAG_FILTER,this._magFilter),this.gl.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGLRenderingContext.TEXTURE_WRAP_S,this._wrapS),this.gl.texParameteri(WebGLRenderingContext.TEXTURE_2D,WebGLRenderingContext.TEXTURE_WRAP_T,this._wrapT),this._texParameterChanged=!1}},{key:"magFilter",get:function(){return this._magFilter},set:function(t){this._magFilter!==t&&(this._texParameterChanged=!0,this._magFilter=t)}},{key:"minFilter",get:function(){return this._minFilter},set:function(t){this._minFilter!==t&&(this._texParameterChanged=!0,this._minFilter=t)}},{key:"wrapS",get:function(){return this._wrapS},set:function(t){this._wrapS!==t&&(this._texParameterChanged=!0,this._wrapS=t)}},{key:"wrapT",get:function(){return this._wrapT},set:function(t){this._wrapT!==t&&(this._texParameterChanged=!0,this._wrapT=t)}}]),e}(y.default);e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(96),o=r(a),i=n(43),u=r(i),s=n(48),l=r(s),f=n(49),c=r(f),d=n(53),h=r(d),v=n(88),p=r(v),m=n(144),y=r(m),g=function(t){function e(t){(0,l.default)(this,e);var n=(0,h.default)(this,(e.__proto__||(0,u.default)(e)).call(this));return n.gl=t,n.destroyed=!1,n.valid=!1,n}return(0,p.default)(e,t),(0,c.default)(e,[{key:"destroy",value:function(){this.destroyed=!0}},{key:"valid",get:function(){return this._valid},set:function(t){var e=this;this._valid!==t&&(this._valid=t,this._valid?this._validResolve(this):this.validPromise=new o.default(function(t){e._validResolve=t}))}}]),e}(y.default);e.default=g},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.Base.IDObject},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=function(){function t(e){(0,o.default)(this,t),this.gl=e,this.extensions={},this._readyExtensions={},this._resolveRequested(),t._requestObserver.push(this._resolveExtensionSafely)}return(0,u.default)(t,[{key:"_resolveRequested",value:function(){var e=this;t._requestedExtensions.forEach(function(t){e._resolveExtensionSafely(t.extensionName)})}},{key:"_resolveExtensionSafely",value:function(e){var n=t._requestedExtensions[t._requestIndexOf(e)];if(!this._resolveExtension(n.extensionName)&&n.isNecessary)throw new Error("A WebGL extension '"+n.extensionName+"' was requested. But that is not supported on this device.")}},{key:"_resolveExtension",value:function(e){if(this._readyExtensions[e])return!0;var n=void 0;return n="undefined"==typeof t._customExtensionResolvers[e]?this.extensions[e]=this.gl.getExtension(e):this.extensions[e]=t._customExtensionResolvers[e](this.gl),this._readyExtensions[e]=void 0!==this.extensions[e],!!this._readyExtensions[e]}}],[{key:"request",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t._requestIndexOf(e);r>-1&&n?t._requestedExtensions[r]={extensionName:e,isNecessary:n}:r===-1&&t._requestedExtensions.push({extensionName:e,isNecessary:n}),t._requestObserver.forEach(function(t){return t(e)})}},{key:"_requestIndexOf",value:function(e){for(var n=0;n<t._requestedExtensions.length;n++)if(t._requestedExtensions[n].extensionName===e)return n;return-1}}]),t}();e.default=s,s._requestedExtensions=[],s._customExtensionResolvers={},s._requestObserver=[],s._customExtensionResolvers.WEBGL_color_buffer_float=function(t){var e=void 0;if(null===t.getExtension("WEBGL_color_buffer_float")){var n=t.createFramebuffer(),r=t.createTexture();t.bindFramebuffer(t.FRAMEBUFFER,n),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.FLOAT,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0),e=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE,t.deleteTexture(r),t.deleteFramebuffer(n)}else e=!0;return e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(137),p=r(v),m=function(t){function e(){(0,u.default)(this,e);var t=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments));return t._fullscreen=!1,t}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){var t=this;this.getAttribute("fullscreen").addObserver(function(e){t._fullscreen!==e.Value&&(t._fullscreen=e.Value,t._switchFullscreen())})}},{key:"_switchFullscreen",value:function(){this._fullscreen?this.requestFullscreen(this.companion.get("canvasContainer")):this.exitFullscreen()}},{key:"requestFullscreen",value:function(t){if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else if(t.msRequestFullscreen)t.msRequestFullscreen();else{if(!t.requestFullscreen)return void console.error("");t.requestFullscreen()}}},{key:"exitFullscreen",value:function(){document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen&&document.exitFullscreen()}}]),e}(p.default);e.default=m,m.attributes={fullscreen:{converter:"Boolean",defaultValue:!1}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(148),p=r(v),m=n(137),y=r(m),g=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$mount",value:function(){var t=this.getValue("type");if(t){var e=this.companion.get("GeometryFactory"),n=p.default.factoryArgumentDeclarations[t],r={};for(var a in n)this.__addAtribute(a,n[a]),r[a]=this.getValue(a);this.geometry=e.instanciate(t,r);var o=this.companion.get("GeometryRegistory"),i=this.getValue("name");if(!i)throw new Error("Name was not specified");o.addGeometry(i,this.geometry)}}}]),e}(y.default);e.default=g,g.attributes={type:{converter:"String",defaultValue:void 0},name:{converter:"String",defaultValue:void 0}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=function(){function t(e){(0,o.default)(this,t),this.gl=e}return(0,u.default)(t,[{key:"instanciate",value:function(e,n){var r=t.factoryDelegates[e];if(!r)throw new Error("Can not instanciate unknown geometry type "+e);return r(this.gl,n)}},{key:"instanciateAsDefault",value:function(e){var n=t.factoryArgumentDeclarations[e],r={};for(var a in n){var o=n[a];r[a]=o.defaultValue}return this.instanciate(e,r)}}],[{key:"addType",value:function(e,n,r){t.factoryDelegates[e]=r,t.factoryArgumentDeclarations[e]=n}}]),t}();e.default=s,s.factoryDelegates={},s.factoryArgumentDeclarations={}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(150),o=r(a),i=n(43),u=r(i),s=n(48),l=r(s),f=n(49),c=r(f),d=n(53),h=r(d),v=n(88),p=r(v),m=n(148),y=r(m),g=n(137),_=r(g),M=n(136),b=r(M),x=function(t){function e(){(0,l.default)(this,e);var t=(0,h.default)(this,(e.__proto__||(0,u.default)(e)).apply(this,arguments));return t._geometries={},t}return(0,p.default)(e,t),(0,c.default)(e,[{key:"$awake",value:function(){this._factory=new y.default(this.companion.get("gl")),this.companion.set(this.name,this),this.companion.set(b.default.ns(this.name.ns)("GeometryFactory"),this._factory);var t=!0,e=!1,n=void 0;try{for(var r,a=(0,o.default)(this.getValue("defaultGeometry"));!(t=(r=a.next()).done);t=!0){var i=r.value;this.addGeometry(i,this._factory.instanciateAsDefault(i))}}catch(t){e=!0,n=t}finally{try{!t&&a.return&&a.return()}finally{if(e)throw n}}}},{key:"addGeometry",value:function(t,e){this._geometries[t]=e}},{key:"removeGeometry",value:function(t){this._geometries[t]&&delete this._geometries[t]}},{key:"getGeometry",value:function(t){return this._geometries[t]}}]),e}(_.default);e.default=x,x.attributes={defaultGeometry:{converter:"StringArray",defaultValue:["quad","cube","sphere"]}}},function(t,e,n){t.exports={default:n(151),__esModule:!0}},function(t,e,n){n(69),n(57),t.exports=n(152)},function(t,e,n){var r=n(11),a=n(104);t.exports=n(6).getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(137),p=r(v),m=n(123),y=r(m),g=n(124),_=r(g),M=function(t){function e(){(0,u.default)(this,e);var t=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments));return t._isFirstCall=!0,t}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){this._canvasContainer=this.companion.get("canvasContainer"),this._currentTransform=this.node.getComponent("Transform")}},{key:"$mount",value:function(){this._canvasContainer=this.companion.get("canvasContainer"),this._currentTransform=this.node.getComponent("Transform")}},{key:"$treeInitialized",value:function(){var t=this;this.getAttribute("targetRenderer").addObserver(function(e){t._rendererQuery!==e.Value&&t._onRendererChanged()},!0),this.getAttribute("htmlQuery").addObserver(function(e){t._onQueryChanged(e.Value)},!0)}},{key:"$render",value:function(t){if(this._isFirstCall&&(this._onRendererChanged(),this._isFirstCall=!1),this._queriedElement&&t.caller.node===this._targetNode){var e=t.viewport,n=_.default.transform(this._currentTransform.calcPVM(t.camera.camera),new y.default(0,0,0,1)),r={x:n.X/n.W,y:n.Y/n.W,z:n.Z/n.W};if(r.z>=-1&&r.z<=1){var a={x:e.Left+(r.x+1)/2*e.Width,y:e.Top+(r.y+1)/2*e.Height};this._queriedElement.style.visibility="visible",this._queriedElement.style.left=a.x+"px",this._queriedElement.style.bottom=a.y+"px"}else this._queriedElement.style.visibility="hidden"}}},{key:"_restoreDefault",value:function(){this._canvasContainer.removeChild(this._queriedElement),this._parentCache.appendChild(this._queriedElement);var t=this._queriedElement.style,e=this._styleCache;t.position=e.position,t.left=e.left,t.bottom=e.bottom,t.visibility=e.visibility}},{key:"_beginTrack",value:function(){this._parentCache.removeChild(this._queriedElement),this._canvasContainer.appendChild(this._queriedElement),this._queriedElement.style.position="absolute"}},{key:"_onRendererChanged",value:function(){var t=this,e=!1;this.tree(this.getValue("targetRenderer")).forEach(function(n){return!!e||(t._targetNode=n,void(e=!0))})}},{key:"_onQueryChanged",
value:function(t){var e=void 0;if(t&&""!==t&&(e=document.querySelectorAll(t)),this._queriedElement&&this._restoreDefault(),e&&0!==e.length){this._queriedElement=e.item(0);var n=this._queriedElement.style;this._styleCache={position:n.position,visibility:n.visibility,left:n.left,bottom:n.bottom},this._parentCache=this._queriedElement.parentElement,this._beginTrack()}else this._queriedElement=void 0,this._parentCache=void 0}}]),e}(p.default);e.default=M,M.attributes={htmlQuery:{defaultValue:void 0,converter:"String"},targetRenderer:{defaultValue:"render-scene",converter:"String"}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(137),p=r(v),m=function(t){function e(){(0,u.default)(this,e);var t=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments));return t._loopActions=[],t._loopIndex=0,t}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){var t=this;this.attributes.get("loopEnabled").addObserver(function(e){t._begin()}),this._registerNextLoop=window.requestAnimationFrame?function(){window.requestAnimationFrame(t._loop.bind(t))}:function(){window.setTimeout(t._loop.bind(t),1e3/60)}}},{key:"register",value:function(t,e){this._loopActions.push({action:t,priorty:e}),this._loopActions.sort(function(t,e){return t.priorty-e.priorty})}},{key:"_begin",value:function(){this._registerNextLoop()}},{key:"_loop",value:function(){var t=this;this._loopActions.forEach(function(e){return e.action(t._loopIndex)}),this._loopIndex++,this._registerNextLoop()}}]),e}(p.default);m.attributes={loopEnabled:{defaultValue:!1,converter:"Boolean"}},e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(54),u=r(i),s=n(150),l=r(s),f=n(43),c=r(f),d=n(48),h=r(d),v=n(49),p=r(v),m=n(53),y=r(m),g=n(88),_=r(g),M=n(96),b=r(M),x=n(156),w=r(x),S=n(137),E=r(S),I=n(143),F=r(I),k=function(t,e,n,r){return new(n||(n=b.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},D=function(t){function e(){(0,h.default)(this,e);var t=(0,y.default)(this,(e.__proto__||(0,c.default)(e)).apply(this,arguments));return t.materialArgs={},t}return(0,_.default)(e,t),(0,p.default)(e,[{key:"$mount",value:function(){var t=this.getValue("type");t&&(this.materialPromise=this.companion.get("MaterialFactory").instanciate(t),this._registerAttributes())}},{key:"_registerAttributes",value:function(){return k(this,void 0,void 0,o.default.mark(function t(){var e,n=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.materialPromise;case 2:return this.material=t.sent,e=[],this.material.pass.forEach(function(t){if(t instanceof w.default){var r=function(){var r=t,a=function(t){n.__addAtribute(t,r.sort.gomlAttributes[t]),n.attributes.get(t).addObserver(function(e){n.materialArgs[t]=e.Value});var a=n.materialArgs[t]=n.getValue(t);a instanceof F.default&&e.push(a.validPromise)};for(var o in r.sort.gomlAttributes)a(o);var i=!0,s=!1,f=void 0;try{for(var c,d=function(){var t=c.value;switch(t.type){case"int":return n.__addAtribute(t.attributeName,{converter:"Number",defaultValue:t.default}),n.getAttribute(t.attributeName).addObserver(function(e){r.setMacro(t.macroName,""+Math.floor(e.Value))},!0),{v:{v:void 0}};case"bool":return n.__addAtribute(t.attributeName,{converter:"Boolean",defaultValue:t.default}),n.getAttribute(t.attributeName).addObserver(function(e){r.setMacro(t.macroName,e.Value)},!0),{v:{v:void 0}};default:throw new Error("Unexpected macro type "+t.type)}},h=(0,l.default)(r.sort.macros);!(i=(c=h.next()).done);i=!0){var v=d();if("object"===("undefined"==typeof v?"undefined":(0,u.default)(v)))return v.v}}catch(t){s=!0,f=t}finally{try{!i&&h.return&&h.return()}finally{if(s)throw f}}}();if("object"===("undefined"==typeof r?"undefined":(0,u.default)(r)))return r.v}}),t.next=7,b.default.all(e);case 7:this.ready=!0;case 8:case"end":return t.stop()}},t,this)}))}}]),e}(E.default);e.default=D,D.attributes={type:{converter:"String",defaultValue:void 0}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(150),o=r(a),i=n(157),u=r(i),s=n(43),l=r(s),f=n(48),c=r(f),d=n(49),h=r(d),v=n(53),p=r(v),m=n(88),y=r(m),g=n(160),_=r(g),M=n(161),b=r(M),x=n(163),w=r(x),S=function(t){function e(t,n){(0,c.default)(this,e);var r=(0,p.default)(this,(e.__proto__||(0,l.default)(e)).call(this));return r.factory=t,r.sort=n,r._macroValues={},r.attributes=(0,u.default)(n.attributes),r.gl=t.gl,r.fs=new _.default(r.gl,WebGLRenderingContext.FRAGMENT_SHADER),r.vs=new _.default(r.gl,WebGLRenderingContext.VERTEX_SHADER),r.program=new b.default(r.gl),t.macro.addObserver(function(){r._updateProgram()}),r._updateProgram(),r}return(0,y.default)(e,t),(0,h.default)(e,[{key:"setMacro",value:function(t,e){"boolean"==typeof e?this._macroValues[t]=e?"":null:this._macroValues[t]=e,this._updateProgram()}},{key:"getMacro",value:function(t){return this._macroValues[t]}},{key:"__beforeDraw",value:function(t){for(var e in this.sort.gomlAttributes)this.sort.gomlAttributes[e].register(this.program.uniforms,t);var n=!0,r=!1,a=void 0;try{for(var i,u=(0,o.default)(this.sort.systemRegisterers);!(n=(i=u.next()).done);n=!0){var s=i.value;s(this.program.uniforms,t)}}catch(t){r=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}var l=!0,f=!1,c=void 0;try{for(var d,h=(0,o.default)(this.sort.configurator);!(l=(d=h.next()).done);l=!0){var v=d.value;v(this.gl)}}catch(t){f=!0,c=t}finally{try{!l&&h.return&&h.return()}finally{if(f)throw c}}}},{key:"_updateProgram",value:function(){this.fs.update(this._generateShaderCode("FS")),this.vs.update(this._generateShaderCode("VS")),this.program.update([this.vs,this.fs])}},{key:"_generateShaderCode",value:function(t){return"#define "+t+"\n"+this.factory.shaderHeader+"\n"+this.factory.macro.macroString+"\n"+this._getMaterialMacro()+"\n/*BEGINNING OF USER CODE*/\n"+this.sort.shaderSource}},{key:"_getMaterialMacro",value:function(){var t="";for(var e in this._macroValues)null!==this._macroValues[e]&&(t+="#define "+e+" "+this._macroValues[e]+"\n");return t}}]),e}(w.default);e.default=S},function(t,e,n){t.exports={default:n(158),__esModule:!0}},function(t,e,n){n(159),t.exports=n(6).Object.keys},function(t,e,n){var r=n(37),a=n(20);n(47)("keys",function(){return function(t){return a(r(t))}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(116),h=r(d),v=n(88),p=r(v),m=n(143),y=r(m),g=function(t){function e(t,n,r){(0,u.default)(this,e);var a=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return a.type=n,a.sourceCode=r,a.shader=t.createShader(n),r&&a.update(r),a}return(0,p.default)(e,t),(0,l.default)(e,[{key:"update",value:function(t){if(this.gl.shaderSource(this.shader,t),this.gl.compileShader(this.shader),!this.gl.getShaderParameter(this.shader,WebGLRenderingContext.COMPILE_STATUS))throw new Error("Compiling shader failed.\nSourceCode:\n"+t+"\n\nErrorCode:"+this.gl.getShaderInfoLog(this.shader));this.sourceCode=t,this.valid=!0}},{key:"destroy",value:function(){(0,h.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"destroy",this).call(this),this.gl.deleteShader(this.shader)}}]),e}(y.default);e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(116),h=r(d),v=n(88),p=r(v),m=n(162),y=r(m),g=n(143),_=r(g),M=function(t){function e(t){(0,u.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return n._uniformLocations={},n._attributeLocations={},n.uniforms=new y.default(n),n.program=t.createProgram(),n}return(0,p.default)(e,t),(0,l.default)(e,[{key:"update",value:function(t){var e=this;if(this.valid){var n=this.gl.getAttachedShaders(this.program);n.forEach(function(t){return e.gl.detachShader(e.program,t)})}if(t.forEach(function(t){e.gl.attachShader(e.program,t.shader)}),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,WebGLRenderingContext.LINK_STATUS)){var r=this.gl.getProgramInfoLog(this.program);throw new Error("LINK FAILED\n"+r)}this.valid=!0}},{key:"use",value:function(){this.gl.useProgram(this.program),this.uniforms.onUse()}},{key:"destroy",value:function(){(0,h.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"destroy",this).call(this),this.gl.deleteProgram(this.program)}},{key:"findAttributeLocation",value:function(t){return"undefined"==typeof this._attributeLocations[t]?(this._attributeLocations[t]=this.gl.getAttribLocation(this.program,t),this._safeEnableVertexAttribArray(this._attributeLocations[t]),this._attributeLocations[t]):this._attributeLocations[t]}},{key:"findUniformLocation",value:function(t){return"undefined"==typeof this._uniformLocations[t]?this._uniformLocations[t]=this.gl.getUniformLocation(this.program,t):this._uniformLocations[t]}},{key:"_safeEnableVertexAttribArray",value:function(t){t<0||this.gl.enableVertexAttribArray(t)}}]),e}(_.default);e.default=M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=function(){function t(e){(0,o.default)(this,t),this.program=e,this._currentTextureRegister=0,this._gl=e.gl}return(0,u.default)(t,[{key:"uniformBool",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform1i(t,e?1:0)})}},{key:"uniformMatrix",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniformMatrix4fv(t,!1,e.rawElements)})}},{key:"uniformFloat",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform1f(t,e)})}},{key:"uniformFloatArray",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform1fv(t,e)})}},{key:"uniformInt",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform1i(t,e)})}},{key:"uniformVector2",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform2f(t,e.X,e.Y)})}},{key:"uniformVector2Array",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform2fv(t,e)})}},{key:"uniformVector3",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform3f(t,e.X,e.Y,e.Z)})}},{key:"uniformVector3Array",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform3fv(t,e)})}},{key:"uniformColor3",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform3f(t,e.R,e.G,e.B)})}},{key:"uniformVector4",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform4f(t,e.X,e.Y,e.Z,e.W)})}},{key:"uniformVector4Array",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform4fv(t,e)})}},{key:"uniformColor4",value:function(t,e){var n=this;this._pass(t,function(t){return n._gl.uniform4f(t,e.R,e.G,e.B,e.A)})}},{key:"uniformTexture2D",value:function(t,e){e.valid?(e.register(this._currentTextureRegister),this.uniformInt(t,this._currentTextureRegister),this._currentTextureRegister++):console.warn("The texture assigned to '"+t+"' is not valid.")}},{key:"onUse",value:function(){this._currentTextureRegister=0}},{key:"_pass",value:function(t,e){var n=this.program.findUniformLocation(t);n&&e(n)}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=function(){function t(){(0,o.default)(this,t),this.attributes=[]}return(0,u.default)(t,[{key:"draw",value:function(t){this.program&&(this.program.use(),this.__beforeDraw(t),t.geometry.draw(t.targetBuffer,this.attributes,this.program,t.drawCount,t.drawOffset))}},{key:"__beforeDraw",value:function(t){}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(54),o=r(a),i=n(150),u=r(i),s=n(39),l=r(s),f=n(43),c=r(f),d=n(48),h=r(d),v=n(49),p=r(v),m=n(53),y=r(m),g=n(88),_=r(g),M=n(96),b=r(M),x=n(143),w=r(x),S=n(156),E=r(S),I=n(137),F=r(I),k=n(136),D=r(k),A=function(t,e,n,r){return new(n||(n=b.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},C=function(t){function e(){(0,h.default)(this,e);var t=(0,y.default)(this,(e.__proto__||(0,c.default)(e)).apply(this,arguments));return t.materialArgs={},t.ready=!1,t.useMaterial=!1,t}return(0,_.default)(e,t),(0,p.default)(e,[{key:"$mount",value:function(){this.getAttribute("material").addObserver(this._onMaterialChanged),this.companion.get("loader").register(this._onMaterialChanged())}},{key:"_onMaterialChanged",value:function(){return A(this,void 0,void 0,l.default.mark(function t(){var e;return l.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getValue("material"),void 0!==e){t.next=4;break}return this.useMaterial=!1,t.abrupt("return");case 4:this.useMaterial=!0,this._materialComponent?this._prepareExternalMaterial(e):this._prepareInternalMaterial(e);case 6:case"end":return t.stop()}},t,this)}))}},{key:"_prepareExternalMaterial",value:function(t){return A(this,void 0,void 0,l.default.mark(function e(){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.companion.get("loader"),n.register(t),e.next=4,t;case 4:r=e.sent,this.material=r,this.materialArgs=this._materialComponent.materialArgs,this.ready=!0;case 8:case"end":return e.stop()}},e,this)}))}},{key:"_prepareInternalMaterial",value:function(t){return A(this,void 0,void 0,l.default.mark(function e(){var n,r,a,i=this;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.companion.get("loader"),n.register(t),t){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,t;case 6:r=e.sent,a=[],r.pass.forEach(function(t){if(t instanceof E.default){var e=function(){var e=t,n=function(t){var n=e.sort.gomlAttributes[t];i.__addAtribute(t,n),i.getAttribute(t).addObserver(function(e){i.materialArgs[t]=e.Value});var r=i.materialArgs[t]=i.getValue(t);r instanceof w.default&&a.push(r.validPromise)};for(var r in e.sort.gomlAttributes)n(r);var s=!0,l=!1,f=void 0;try{for(var c,d=function(){var t=c.value;switch(t.type){case"int":return i.__addAtribute(t.attributeName,{converter:"Number",defaultValue:t.default}),i.getAttribute(t.attributeName).addObserver(function(n){e.setMacro(t.macroName,""+Math.floor(n.Value))},!0),{v:{v:void 0}};case"bool":return i.__addAtribute(t.attributeName,{converter:"Boolean",defaultValue:t.default}),i.getAttribute(t.attributeName).addObserver(function(n){e.setMacro(t.macroName,n.Value)},!0),{v:{v:void 0}}}},h=(0,u.default)(e.sort.macros);!(s=(c=h.next()).done);s=!0){var v=d();if("object"===("undefined"==typeof v?"undefined":(0,o.default)(v)))return v.v}}catch(t){l=!0,f=t}finally{try{!s&&h.return&&h.return()}finally{if(l)throw f}}}();if("object"===("undefined"==typeof e?"undefined":(0,o.default)(e)))return e.v}}),b.default.all(a),this.material=r,this.ready=!0;case 12:case"end":return e.stop()}},e,this)}))}}],[{key:"rewriteDefaultMaterial",value:function(t){t!==e._defaultMaterial&&(e._defaultMaterial=t,D.default.componentDeclarations.get("MaterialContainer").attributes.material.defaultValue="new("+t+")")}},{key:"defaultMaterial",get:function(){return this._defaultMaterial}}]),e}(F.default);e.default=C,C.attributes={material:{converter:"Material",defaultValue:"new(unlit)",componentBoundTo:"_materialComponent"}},C._defaultMaterial="unlit"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(166),p=r(v),m=n(137),y=r(m),g=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){if(!this.getValue("typeName")||!this.getValue("src"))throw new Error("type or src cannot be null in material importer");p.default.addSORTMaterialFromURL(this.getValue("typeName"),this.getValue("src"))}}]),e}(y.default);e.default=g,g.attributes={typeName:{defaultValue:void 0,converter:"String"},src:{defaultValue:void 0,converter:"String"}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(96),c=r(f),d=n(156),h=r(d),v=n(167),p=r(v),m=n(169),y=r(m),g=n(120),_=r(g),M=n(183),b=r(M),x=n(184),w=r(x),S=function(t,e,n,r){return new(n||(n=c.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},E=function(){function t(e){(0,u.default)(this,t),this.gl=e,this.shaderHeader=t.defaultShaderHeader,this.macro=new p.default}return(0,l.default)(t,[{key:"instanciate",value:function(e){return S(this,void 0,void 0,o.default.mark(function n(){return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.factories[e]){n.next=4;break}return n.abrupt("return",t.factories[e](this));case 4:return n.next=6,this._waitForRegistered(e);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},n,this)}))}},{key:"_waitForRegistered",value:function(e){var n=this;return new c.default(function(r){t._onRegister(e,function(){r(t.factories[e](n))})})}}],[{key:"addMaterialType",value:function(e,n){t.factories[e]=n,t.registerdHandlers[e]&&t.registerdHandlers[e].forEach(function(t){return t()})}},{key:"addSORTMaterial",value:function(e,n){return S(this,void 0,void 0,o.default.mark(function r(){var a;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.default.passInfoFromSORT(n);case 2:a=r.sent,t.addMaterialType(e,function(t){var e=a.map(function(e){return new h.default(t,e)});return new b.default(e)});case 4:case"end":return r.stop()}},r,this)}))}},{key:"addSORTMaterialFromURL",value:function(e,n){return S(this,void 0,void 0,o.default.mark(function r(){var a;return o.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_.default.resolve(n);case 2:return a=r.sent,r.next=5,t.addSORTMaterial(e,a);case 5:case"end":return r.stop()}},r,this)}))}},{key:"_onRegister",value:function(e,n){t.registerdHandlers[e]?t.registerdHandlers[e].push(n):t.registerdHandlers[e]=[n]}}]),t}();e.default=E,E.defaultShaderHeader=w.default,E.factories={},E.registerdHandlers={}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=n(168),l=r(s),f=function(){function t(){(0,o.default)(this,t),this.macroString="",this._macro={},this._observers=[];for(var e in l.default)this.setValue(e,l.default[e])}return(0,u.default)(t,[{key:"setValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._macro[t]!==e&&(this._macro[t]=e,this.macroString=this._getMacroString(),this._notifyMacroChanged())}},{key:"getValue",value:function(t){return this._macro[t]}},{key:"addObserver",value:function(t){this._observers.push(t)}},{key:"removeObserver",value:function(t){for(var e=0;e<this._observers.length;e++)this._observers[e]===t&&this._observers.splice(e,1)}},{key:"_getMacroString",value:function(){var t="";for(var e in this._macro)t+=this._genSingleMacroString(e,this._macro[e]);return t}},{key:"_notifyMacroChanged",value:function(){for(var t=0;t<this._observers.length;t++)this._observers[t]()}},{key:"_genSingleMacroString",value:function(t,e){if(void 0===e)throw new Error("Macro value of "+t+" can't be undefined");return null===e?"#define "+t+"\n":"#define "+t+" "+e+"\n"}}]),t}();e.default=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={GRIMOIRE:null,WEBGL_VERSION:"1"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(96),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(170),c=r(f),d=function(){function t(){(0,u.default)(this,t)}return(0,l.default)(t,null,[{key:"passInfoFromSORT",value:function(t){var e=t.split("@Pass");return e.splice(0,1),o.default.all(e.map(function(t){return c.default.parse(t)}))}}]),t}();e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(96),c=r(f),d=n(171),h=r(d),v=n(175),p=r(v),m=n(176),y=r(m),g=n(178),_=r(g),M=n(180),b=r(M),x=n(181),w=r(x),S=n(182),E=r(S),I=function(t,e,n,r){return new(n||(n=c.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},F=function(){function t(){(0,u.default)(this,t)}return(0,l.default)(t,null,[{key:"parse",value:function(e){return I(this,void 0,void 0,o.default.mark(function n(){var r,a;return o.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r={origin:e,info:{shaderSource:e,uniforms:{},attributes:{},macros:[],configurator:[],systemRegisterers:[],gomlAttributes:{}}},a=0;case 2:if(!(a<t.transformers.length)){n.next=9;break}return n.next=5,t.transformers[a](r);case 5:r=n.sent;case 6:a++,n.next=2;break;case 9:return n.abrupt("return",r.info);case 10:case"end":return n.stop()}},n,this)}))}}]),t}();e.default=F,F.transformers=[p.default,y.default,(0,_.default)("uniform"),(0,_.default)("attribute"),w.default,E.default,b.default,h.default]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e,n){return{converter:t,defaultValue:e,register:n}}function o(t,e){return t.variableAnnotation.default?t.variableAnnotation.default:e}function i(t){return m(this,void 0,void 0,l.default.mark(function e(){var n,r,i,u,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=t.info.gomlAttributes,i=function(e){if("_"===e.charAt(0))return"continue";var n=e,i=t.info.uniforms,u=i[e],s=u.variableAnnotation;if(h.default.isPrimitive(u.variableType))if(u.isArray)switch(u.variableType){case"float":var l=new Array;l=l.map(function(t){return 0}),r[n]=a("NumberArray",o(u,l),function(t,e){t.uniformFloatArray(n,e.attributeValues[n])});break;default:throw new Error("Unsupported array type "+u.variableType)}else!function(){switch(u.variableType){case"bool":r[n]=a("Boolean",o(u,!1),function(t,e){t.uniformBool(n,e.attributeValues[n])});break;case"float":r[n]=a("Number",o(u,0),function(t,e){t.uniformFloat(n,e.attributeValues[n])});break;case"vec2":r[n]=a("Vector2",o(u,"0,0"),function(t,e){t.uniformVector2(n,e.attributeValues[n])});break;case"vec3":"color"===s.type?r[n]=a("Color3",o(u,"#000"),function(t,e){t.uniformColor3(n,e.attributeValues[n])}):r[n]=a("Vector3",o(u,"0,0,0"),function(t,e){t.uniformVector3(n,e.attributeValues[n])});break;case"vec4":"color"===s.type?r[n]=a("Color4",o(u,"#0000"),function(t,e){t.uniformColor4(n,e.attributeValues[n])}):r[n]=a("Vector4",o(u,"0,0,0,0"),function(t,e){t.uniformVector4(n,e.attributeValues[n])});break;case"sampler2D":var t=void 0;s.usedFlag&&void 0!==s.usedFlag&&(t=s.usedFlag),r[n]=a("Texture",o(u,void 0),function(e,r){var a=void 0;r.attributeValues[n]&&(a=r.attributeValues[n].get(r.buffers))?(e.uniformTexture2D(n,a),t&&e.uniformBool(t,!0)):(e.uniformTexture2D(n,r.defaultTexture),t&&e.uniformBool(t,!1))});break;default:throw new Error("Unsupported type was found")}}()},e.t0=l.default.keys(t.info.uniforms);case 4:if((e.t1=e.t0()).done){e.next=11;break}if(u=e.t1.value,s=i(u),"continue"!==s){e.next=9;break}return e.abrupt("continue",4);case 9:e.next=4;break;case 11:return e.next=13,c.default.all(n);case 13:case"end":return e.stop()}},e,this)}))}function u(t){var e=t.info.systemRegisterers;for(var n in t.info.uniforms)if("_"===n.charAt(0)){var r=t.info.uniforms[n],a=p.default.resolve(n,r);if(a){e.push(a);continue}}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(39),l=r(s),f=n(96),c=r(f);e.default=function(t){return m(this,void 0,void 0,l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(t);case 2:return u(t),e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}))};var d=n(172),h=r(d),v=n(173),p=r(v),m=function(t,e,n,r){return new(n||(n=c.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"isPrimitive",value:function(e){return t._primitives.indexOf(e)>=0}}]),t}();e.default=s,s._primitives=["float","bool","int","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","mat2","mat3","mat4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=n(174),l=r(s),f=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"addResolver",value:function(e,n){t.resolvers[e]=n}},{key:"addDynamicResolver",value:function(e){t.dynamicResolvers.push(e)}},{key:"resolve",value:function(e,n){if(t.resolvers[e])return t.resolvers[e](n,e);for(var r=null,a=0;a<t.dynamicResolvers.length;a++)if(r=t.dynamicResolvers[a](n,e),null!=r)return r}}]),t}();e.default=f,f.resolvers={},f.dynamicResolvers=[],f.addResolver("_matPVM",function(t,e){return function(t,n){return t.uniformMatrix(e,n.transform.calcPVM(n.camera.camera))}}),f.addResolver("_matP",function(t,e){return function(t,n){return t.uniformMatrix(e,n.camera.camera.getProjectionMatrix())}}),f.addResolver("_matV",function(t,e){return function(t,n){return t.uniformMatrix(e,n.camera.camera.getViewMatrix())}}),f.addResolver("_matM",function(t,e){return function(t,n){return t.uniformMatrix(e,n.transform.globalTransform)}}),f.addResolver("_matVM",function(t,e){return function(t,n){return t.uniformMatrix(e,n.transform.calcVM(n.camera.camera))}}),f.addResolver("_matPV",function(t,e){return function(t,n){return t.uniformMatrix(e,n.camera.camera.getProjectionViewMatrix())}}),f.addResolver("_time",function(t,e){return function(t,n){return t.uniformFloat(e,Date.now()%1e6)}}),f.addResolver("_viewportSize",function(t,e){var n=new l.default(0,0);return function(t,r){n.X=r.viewport.Width,n.Y=r.viewport.Height,t.uniformVector2(e,n)}}),f.addResolver("_cameraPosition",function(t,e){return function(t,n){return t.uniformVector3(e,n.camera.transform.globalPosition)}}),f.addResolver("_cameraDirection",function(t,e){return function(t,n){return t.uniformVector3(e,n.camera.transform.forward)}})},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.lib.math.Vector2},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){for(var e="",n=!1,r=!1,a=0;a<t.length;a++){var o=t.charAt(a);if("/"===o&&a+1<t.length){if("/"===t.charAt(a+1)&&!r){n=!0,a++;continue}if("*"===t.charAt(a+1)&&!n){r=!0,a++;continue}}"*"===o&&r&&a+1<t.length&&"/"===t.charAt(a+1)?(r=!1,a++):"\n"===o&&n?n=!1:n||r||(e+=o)}return e}Object.defineProperty(e,"__esModule",{value:!0});var o=n(39),i=r(o),u=n(96),s=r(u);e.default=function(t){return l(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.info.shaderSource=a(t.info.shaderSource),e.abrupt("return",t);case 2:case"end":return e.stop()}},e,this)}))};var l=function(t,e,n,r){return new(n||(n=s.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return c(this,void 0,void 0,i.default.mark(function e(){var n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=/\s*@import\s+"([^"]+)"/.exec(t)){e.next=4;break}return e.abrupt("break",16);case 4:return r=void 0,e.next=7,f.default.resolve(n[1]);case 7:return e.t0=e.sent,e.next=10,a(e.t0);case 10:if(r=e.sent){e.next=13;break}throw new Error("Required shader chunk '"+n[1]+"' was not found!!");case 13:t=t.replace(n[0],"\n"+r+"\n"),e.next=0;break;case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}},e,this)}))}Object.defineProperty(e,"__esModule",{value:!0});var o=n(39),i=r(o),u=n(96),s=r(u);e.default=function(t){return c(this,void 0,void 0,i.default.mark(function e(){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t.info.shaderSource);case 2:return n=e.sent,t.info.shaderSource=n,e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}))};var l=n(177),f=r(l),c=function(t,e,n,r){return new(n||(n=s.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ImportResolver=void 0;var a=n(39),o=r(a),i=n(43),u=r(i),s=n(48),l=r(s),f=n(49),c=r(f),d=n(53),h=r(d),v=n(116),p=r(v),m=n(88),y=r(m),g=n(96),_=r(g),M=n(113),b=r(M),x=function(t,e,n,r){return new(n||(n=_.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},w=e.ImportResolver=function(t){function e(){(0,l.default)(this,e);var t=(0,h.default)(this,(e.__proto__||(0,u.default)(e)).call(this,function(t){var n=/^https?:\/\/.*/gm;return n.test(t)?e._toAbsolute(t):t}));return t.staticImports={},t}return(0,y.default)(e,t),(0,c.default)(e,[{key:"resolve",value:function(t){var n=this;return(0,p.default)(e.prototype.__proto__||(0,u.default)(e.prototype),"resolve",this).call(this,t,function(e){return n._resolve(t)})}},{key:"_resolve",value:function(t){return x(this,void 0,void 0,o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.staticImports[t]){e.next=4;break}return e.abrupt("return",this.staticImports[t]);case 4:return e.next=6,this._fromExternal(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}))}},{key:"_fromExternal",value:function(t){return new _.default(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(t){e(r.responseText)},r.onerror=function(t){n(t)},r.send()})}}],[{key:"_toAbsolute",value:function(t){var e=document.createElement("a");return e.href=t,e.protocol+"//"+e.host+e.pathname+e.search+e.hash}}]),e}(b.default);e.default=new w},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t
}}function a(t){return d.default.parse(t)}function o(t){return new RegExp("(?:@(\\{.+\\}))?\\s*"+t+"\\s+(?:(lowp|mediump|highp)\\s+)?([a-z0-9A-Z]+)\\s+([a-zA-Z0-9_]+)(?:\\s*\\[\\s*([a-zA-Z0-9_]+)\\s*\\]\\s*)?\\s*;","g")}function i(t,e){for(var n={},r=o(e),i=void 0,u=function(){var t=i[4],e=i[3],r=i[2],o=i[1],u=void 0!==i[5],s=void 0;u&&!function(){var t=parseInt(i[5],10);s=function(){return t},isNaN(t)&&(s=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return t[s]}))}(),n[t]={variableName:t,variableType:e,variablePrecision:r,variableAnnotation:o?a(o):{},isArray:u,arrayLength:s}};i=r.exec(t);)u();return n}Object.defineProperty(e,"__esModule",{value:!0});var u=n(39),s=r(u),l=n(96),f=r(l);e.default=function(t){return function(e){return h(this,void 0,void 0,s.default.mark(function n(){var r;return s.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=i(e.info.shaderSource,t),n.t0=t,n.next="uniform"===n.t0?4:"attribute"===n.t0?6:8;break;case 4:return e.info.uniforms=r,n.abrupt("break",9);case 6:return e.info.attributes=r,n.abrupt("break",9);case 8:throw new Error("Unknown variable type!!");case 9:return n.abrupt("return",e);case 10:case"end":return n.stop()}},n,this)}))}};var c=n(179),d=r(c),h=function(t,e,n,r){return new(n||(n=f.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})}},function(t,e,n){var r=e;r.parse=function(){"use strict";var t,e,n,r,a,o,i={"'":"'",'"':'"',"\\":"\\","/":"/","\n":"",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},u=[" ","\t","\r","\n","\v","\f","","\ufeff"],s=function(t){return""===t?"EOF":"'"+t+"'"},l=function(r){var o=new SyntaxError;throw o.message=r+" at line "+e+" column "+n+" of the JSON5 data. Still to read: "+JSON.stringify(a.substring(t-1,t+19)),o.at=t,o.lineNumber=e,o.columnNumber=n,o},f=function(o){return o&&o!==r&&l("Expected "+s(o)+" instead of "+s(r)),r=a.charAt(t),t++,n++,("\n"===r||"\r"===r&&"\n"!==c())&&(e++,n=0),r},c=function(){return a.charAt(t)},d=function(){var t=r;for("_"!==r&&"$"!==r&&(r<"a"||r>"z")&&(r<"A"||r>"Z")&&l("Bad identifier as unquoted key");f()&&("_"===r||"$"===r||r>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9");)t+=r;return t},h=function(){var t,e="",n="",a=10;if("-"!==r&&"+"!==r||(e=r,f(r)),"I"===r)return t=_(),("number"!=typeof t||isNaN(t))&&l("Unexpected word for number"),"-"===e?-t:t;if("N"===r)return t=_(),isNaN(t)||l("expected word to be NaN"),t;switch("0"===r&&(n+=r,f(),"x"===r||"X"===r?(n+=r,f(),a=16):r>="0"&&r<="9"&&l("Octal literal")),a){case 10:for(;r>="0"&&r<="9";)n+=r,f();if("."===r)for(n+=".";f()&&r>="0"&&r<="9";)n+=r;if("e"===r||"E"===r)for(n+=r,f(),"-"!==r&&"+"!==r||(n+=r,f());r>="0"&&r<="9";)n+=r,f();break;case 16:for(;r>="0"&&r<="9"||r>="A"&&r<="F"||r>="a"&&r<="f";)n+=r,f()}return t="-"===e?-n:+n,isFinite(t)?t:void l("Bad number")},v=function(){var t,e,n,a,o="";if('"'===r||"'"===r)for(n=r;f();){if(r===n)return f(),o;if("\\"===r)if(f(),"u"===r){for(a=0,e=0;e<4&&(t=parseInt(f(),16),isFinite(t));e+=1)a=16*a+t;o+=String.fromCharCode(a)}else if("\r"===r)"\n"===c()&&f();else{if("string"!=typeof i[r])break;o+=i[r]}else{if("\n"===r)break;o+=r}}l("Bad string")},p=function(){"/"!==r&&l("Not an inline comment");do if(f(),"\n"===r||"\r"===r)return void f();while(r)},m=function(){"*"!==r&&l("Not a block comment");do for(f();"*"===r;)if(f("*"),"/"===r)return void f("/");while(r);l("Unterminated block comment")},y=function(){"/"!==r&&l("Not a comment"),f("/"),"/"===r?p():"*"===r?m():l("Unrecognized comment")},g=function(){for(;r;)if("/"===r)y();else{if(!(u.indexOf(r)>=0))return;f()}},_=function(){switch(r){case"t":return f("t"),f("r"),f("u"),f("e"),!0;case"f":return f("f"),f("a"),f("l"),f("s"),f("e"),!1;case"n":return f("n"),f("u"),f("l"),f("l"),null;case"I":return f("I"),f("n"),f("f"),f("i"),f("n"),f("i"),f("t"),f("y"),1/0;case"N":return f("N"),f("a"),f("N"),NaN}l("Unexpected "+s(r))},M=function(){var t=[];if("["===r)for(f("["),g();r;){if("]"===r)return f("]"),t;if(","===r?l("Missing array element"):t.push(o()),g(),","!==r)return f("]"),t;f(","),g()}l("Bad array")},b=function(){var t,e={};if("{"===r)for(f("{"),g();r;){if("}"===r)return f("}"),e;if(t='"'===r||"'"===r?v():d(),g(),f(":"),e[t]=o(),g(),","!==r)return f("}"),e;f(","),g()}l("Bad object")};return o=function(){switch(g(),r){case"{":return b();case"[":return M();case'"':case"'":return v();case"-":case"+":case".":return h();default:return r>="0"&&r<="9"?h():_()}},function(i,u){var s;return a=String(i),t=0,e=1,n=1,r=" ",s=o(),g(),r&&l("Syntax error"),"function"==typeof u?function t(e,n){var r,a,o=e[n];if(o&&"object"==typeof o)for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(a=t(o,r),void 0!==a?o[r]=a:delete o[r]);return u.call(e,n,o)}({"":s},""):s}}(),r.stringify=function(t,e,n){function a(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||t>="0"&&t<="9"||"_"===t||"$"===t}function o(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"||"_"===t||"$"===t}function i(t){if("string"!=typeof t)return!1;if(!o(t[0]))return!1;for(var e=1,n=t.length;e<n;){if(!a(t[e]))return!1;e++}return!0}function u(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function s(t){return"[object Date]"===Object.prototype.toString.call(t)}function l(t){for(var e=0;e<p.length;e++)if(p[e]===t)throw new TypeError("Converting circular structure to JSON")}function f(t,e,n){if(!t)return"";t.length>10&&(t=t.substring(0,10));for(var r=n?"":"\n",a=0;a<e;a++)r+=t;return r}function c(t){return m.lastIndex=0,m.test(t)?'"'+t.replace(m,function(t){var e=y[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function d(t,e,n){var r,a,o=h(t,e,n);switch(o&&!s(o)&&(o=o.valueOf()),typeof o){case"boolean":return o.toString();case"number":return isNaN(o)||!isFinite(o)?"null":o.toString();case"string":return c(o.toString());case"object":if(null===o)return"null";if(u(o)){l(o),r="[",p.push(o);for(var m=0;m<o.length;m++)a=d(o,m,!1),r+=f(v,p.length),r+=null===a||"undefined"==typeof a?"null":a,m<o.length-1?r+=",":v&&(r+="\n");p.pop(),r+=f(v,p.length,!0)+"]"}else{l(o),r="{";var y=!1;p.push(o);for(var g in o)if(o.hasOwnProperty(g)){var _=d(o,g,!1);n=!1,"undefined"!=typeof _&&null!==_&&(r+=f(v,p.length),y=!0,e=i(g)?g:c(g),r+=e+":"+(v?" ":"")+_+",")}p.pop(),r=y?r.substring(0,r.length-1)+f(v,p.length)+"}":"{}"}return r;default:return}}if(e&&"function"!=typeof e&&!u(e))throw new Error("Replacer must be a function or an array");var h=function(t,n,r){var a=t[n];return a&&a.toJSON&&"function"==typeof a.toJSON&&(a=a.toJSON()),"function"==typeof e?e.call(t,n,a):e?r||u(t)||e.indexOf(n)>=0?a:void 0:a};r.isWord=i;var v,p=[];n&&("string"==typeof n?v=n:"number"==typeof n&&n>=0&&(v=f(" ",n,!0)));var m=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,y={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g={"":t};return void 0===t?h(g,"",!0):d(g,"",!0)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){for(var e=void 0;e=/@\{.+\}/g.exec(t);)t=t.substr(0,e.index)+t.substring(e.index+e[0].length,t.length);return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(39),i=r(o),u=n(96),s=r(u);e.default=function(t){return l(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.info.shaderSource=a(t.info.shaderSource),e.abrupt("return",t);case 2:case"end":return e.stop()}},e,this)}))};var l=function(t,e,n,r){return new(n||(n=s.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){var e,n;return f.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=/@([a-zA-Z]+)\(([^)]*)\)/g,n=void 0;case 2:if(!(n=e.exec(t))){r.next=7;break}return r.next=5,{name:n[1],args:n[2].split(",")};case 5:r.next=2;break;case 7:case"end":return r.stop()}},h[0],this)}function o(t,e){return e?function(e){e.enable(t)}:function(e){e.disable(t)}}function i(t,e){if(t.length!==e)throw new Error("The arguments should contain "+e+" of items but there was "+t.length);return t.map(function(t){var e=WebGLRenderingContext[t.toUpperCase().trim()];if(void 0!==e)return e;throw new Error("Specified WebGL constant "+t+" was not found")})}function u(t,e){if(4!==e.length)throw new Error("ExposeMacro must have 4 of arguments");t.macros.push({type:e[0],attributeName:e[1],macroName:e[2],default:e[3]})}function s(t){for(var e=a(t.shaderSource),n=void 0,r=[],s=!0,l=!0,f=!0;(n=e.next())&&!n.done;){var c=n.value;!function(){switch(c.name){case"NoDepth":s=!1;break;case"DepthFunc":s=!0;var e=i(c.args,1);r.push(function(t){t.depthFunc(e[0])});break;case"NoBlend":l=!1;break;case"NoCull":f=!1;break;case"CullFace":f=!0;var n=i(c.args,1);r.push(function(t){t.cullFace(n[0])});break;case"BlendFunc":l=!0;var a=i(c.args,2);r.push(function(t){t.blendFunc(a[0],a[1])});break;case"BlendFuncSeparate":l=!0;var o=i(c.args,4);r.push(function(t){t.blendFuncSeparate(o[0],o[1],o[2],o[3])});break;case"BlendEquation":l=!0;var d=i(c.args,1);r.push(function(t){t.blendEquation(d[0])});break;case"BlendEquationSeparate":l=!0;var h=i(c.args,2);r.push(function(t){t.blendEquationSeparate(h[0],h[1])});break;case"ExposeMacro":u(t,c.args)}}()}r.unshift(o(WebGLRenderingContext.DEPTH_TEST,s)),r.unshift(o(WebGLRenderingContext.BLEND,l)),r.unshift(o(WebGLRenderingContext.CULL_FACE,f)),t.configurator=r}Object.defineProperty(e,"__esModule",{value:!0});var l=n(39),f=r(l),c=n(96),d=r(c);e.default=function(t){return v(this,void 0,void 0,f.default.mark(function e(){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(t.info),e.abrupt("return",t);case 2:case"end":return e.stop()}},e,this)}))};var h=[a].map(f.default.mark),v=function(t,e,n,r){return new(n||(n=d.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){for(var e=/(\s*@[a-zA-Z]*\([^)]*\))/;;){var n=e.exec(t);if(!n)break;t=t.replace(n[0],"")}return t}Object.defineProperty(e,"__esModule",{value:!0});var o=n(39),i=r(o),u=n(96),s=r(u);e.default=function(t){return l(this,void 0,void 0,i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.info.shaderSource=a(t.info.shaderSource),e.abrupt("return",t);case 2:case"end":return e.stop()}},e,this)}))};var l=function(t,e,n,r){return new(n||(n=s.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=function(){function t(e){(0,o.default)(this,t),this.pass=e}return(0,u.default)(t,[{key:"draw",value:function(t){this.pass.forEach(function(e){return e.draw(t)})}}]),t}();e.default=s},function(t,e){t.exports="/*Header start*/\n// helper macros\n#ifdef FS\n  #define FS_PREC(prec,type) precision prec type;\n  #define VS_PREC(prec,type)\n#endif\n#ifdef VS\n#define VS_PREC(prec,type) precision prec type;\n#define FS_PREC(prec,type)\n#endif\n// constants\n#define PI 3.141592653589793\n#define E 2.718281828459045\n#define LN2 0.6931471805599453\n#define LN10 2.302585092994046\n#define LOG2E 1.4426950408889634\n#define LOG10E 0.4342944819032518\n#define SQRT2 1.4142135623730951\n#define SQRT1_2 0.7071067811865476\n/*Header end*/\n"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(136),p=r(v),m=n(166),y=r(m),g=n(137),_=r(g),M=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){var t=p.default.ns(this.name.ns);this.companion.set(t("MaterialFactory"),new y.default(this.companion.get("gl")))}}]),e}(_.default);e.default=M,M.attributes={}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(137),p=r(v),m=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){this.getAttribute("targetBuffer").boundTo("_targetBuffer"),this.getAttribute("layer").boundTo("_layer"),this.getAttribute("drawOffset").boundTo("_drawOffset"),this.getAttribute("drawCount").boundTo("_drawCount"),this.getAttribute("geometry").boundTo("_geometry")}},{key:"$mount",value:function(){this._transformComponent=this.node.getComponent("Transform"),this._materialContainer=this.node.getComponent("MaterialContainer")}},{key:"$render",value:function(t){if(this._layer===t.layer&&this._geometry&&(t.material||this._materialContainer.ready)){var e={targetBuffer:this._targetBuffer,geometry:this._geometry,attributeValues:null,camera:t.camera,transform:this._transformComponent,buffers:t.buffers,viewport:t.viewport,drawCount:this._drawCount,drawOffset:this._drawOffset,sceneDescription:t.sceneDescription,defaultTexture:t.defaultTexture};t.material?(e.attributeValues=t.materialArgs,t.material.draw(e)):(e.attributeValues=this._materialContainer.materialArgs,this._materialContainer.material.draw(e)),this.companion.get("gl").flush()}}}]),e}(p.default);e.default=m,m.attributes={geometry:{converter:"Geometry",defaultValue:"quad"},targetBuffer:{converter:"String",defaultValue:"default"},layer:{converter:"String",defaultValue:"default"},drawCount:{converter:"Number",defaultValue:Number.MAX_VALUE},drawOffset:{converter:"Number",defaultValue:0}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(122),p=r(v),m=n(188),y=r(m),g=n(124),_=r(g),M=n(137),b=r(M),x=function(t){function e(){(0,u.default)(this,e);var t=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments));return t._origin=new p.default(0,0,0),t._lastScreenPos=null,t._xsum=0,t._ysum=0,t._center=0,t}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){this.getAttribute("center").boundTo("_center"),this.getAttribute("rotateSpeed").boundTo("_rotateSpeed"),this.getAttribute("zoomSpeed").boundTo("_zoomSpeed"),this.getAttribute("moveSpeed").boundTo("_moveSpeed"),this._transform=this.node.getComponent("Transform")}},{key:"$mount",value:function(){this._initialRight=p.default.copy(this._transform.right),this._initialUp=p.default.copy(this._transform.up),this._initialDirection=this._transform.localPosition.subtractWith(this._origin),this._initialRotation=this._transform.localRotation,this._origin=this._transform.localPosition.addWith(this._transform.forward.multiplyWith(this._center));var t=this.companion.get("canvasElement");t.addEventListener("mousemove",this._mouseMove.bind(this)),t.addEventListener("contextmenu",this._contextMenu.bind(this)),t.addEventListener("mousewheel",this._mouseWheel.bind(this))}},{key:"_contextMenu",value:function(t){t.preventDefault()}},{key:"_mouseMove",value:function(t){if(null===this._lastScreenPos)return void(this._lastScreenPos={x:t.screenX,y:t.screenY});var e=!1,n=t.screenX-this._lastScreenPos.x,r=t.screenY-this._lastScreenPos.y,a=this._transform.localPosition.subtractWith(this._origin).magnitude;if((1&t.buttons)>0&&(this._xsum+=n,this._ysum+=r,this._ysum=Math.min(50*Math.PI,this._ysum),this._ysum=Math.max(50*-Math.PI,this._ysum),e=!0),(2&t.buttons)>0){var o=-n*this._moveSpeed*.01,i=r*this._moveSpeed*.01;this._origin=this._origin.addWith(this._transform.right.multiplyWith(o)).addWith(this._transform.up.multiplyWith(i)),a=this._transform.localPosition.subtractWith(this._origin).magnitude,e=!0}if(e){var u=y.default.angleAxis(-this._xsum*this._rotateSpeed,this._initialUp),s=y.default.angleAxis(-this._ysum*this._rotateSpeed,this._initialRight),l=y.default.multiply(u,s),f=_.default.rotationQuaternion(l),c=_.default.transformNormal(f,this._initialDirection);this._transform.localPosition=this._origin.addWith(p.default.normalize(c).multiplyWith(a)),this._transform.localRotation=y.default.multiply(this._initialRotation,l)}this._lastScreenPos={x:t.screenX,y:t.screenY}}},{key:"_mouseWheel",value:function(t){var e=p.default.normalize(p.default.subtract(this._transform.localPosition,this._origin)),n=-t.deltaY*this._zoomSpeed,r=p.default.subtract(this._origin,this._transform.localPosition).magnitude,a=Math.max(1,r-n);this._transform.localPosition=this._origin.addWith(e.multiplyWith(a)),t.preventDefault()}}]),e}(b.default);e.default=x,x.attributes={rotateSpeed:{defaultValue:.01,converter:"Number"},zoomSpeed:{defaultValue:.05,converter:"Number"},moveSpeed:{defaultValue:1,converter:"Number"},center:{defaultValue:20,converter:"Number"}}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.lib.math.Quaternion},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(190),p=r(v),m=n(137),y=r(m),g=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$mount",value:function(){this.buffer=new p.default(this.companion.get("gl"))}},{key:"$unmount",value:function(){this.buffer.destroy(),this.buffer=null}},{key:"$resizeBuffer",value:function(t){if(!this.getValue("name"))throw new Error("Attribute 'name' must be specified.");this.buffer.update(WebGLRenderingContext.DEPTH_COMPONENT16,t.widthPowerOf2,t.heightPowerOf2),t.buffers[this.getValue("name")]=this.buffer}}]),e}(y.default);e.default=g,g.attributes={name:{converter:"String",defaultValue:void 0}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(116),h=r(d),v=n(88),p=r(v),m=n(143),y=r(m),g=function(t){function e(t){(0,u.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return n.renderBuffer=t.createRenderbuffer(),n}return(0,p.default)(e,t),(0,l.default)(e,[{key:"update",value:function(t,e,n){this.gl.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,this.renderBuffer),this.gl.renderbufferStorage(WebGLRenderingContext.RENDERBUFFER,t,e,n),this.valid=!0}},{key:"bind",value:function(){this.gl.bindRenderbuffer(WebGLRenderingContext.RENDERBUFFER,this.renderBuffer)}},{key:"destroy",value:function(){this.gl.deleteRenderbuffer(this.renderBuffer),(0,h.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"destroy",this).call(this)}}]),e}(y.default);e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(137),p=r(v),m=function(t){function e(){(0,u.default)(this,e);var t=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments));return t._buffers={},t}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$mount",value:function(){var t=this;this._gl=this.companion.get("gl"),this._canvas=this.companion.get("canvasElement"),this._camera=this.getValue("camera"),this.getAttribute("camera").addObserver(function(e){return t._camera=e.Value}),this.getAttribute("viewport").addObserver(function(e){t._viewportSizeGenerator=e.Value,t.$resizeCanvas()}),this._viewportSizeGenerator=this.getValue("viewport")}},{key:"$treeInitialized",value:function(){this.$resizeCanvas()}},{key:"$resizeCanvas",value:function(){this._viewportCache=this._viewportSizeGenerator(this._canvas);var t=this._getSizePowerOf2(this._viewportCache.Width,this._viewportCache.Height);0===this.node.children.length&&this.node.addChildByName("render-scene",{}),this.node.broadcastMessage("resizeBuffer",{widthPowerOf2:t.width,heightPowerOf2:t.height,width:this._viewportCache.Width,height:this._viewportCache.Height,buffers:this._buffers}),this.node.broadcastMessage("bufferUpdated",{buffers:this._buffers})}},{key:"$renderViewport",value:function(t){this.node.broadcastMessage("render",{camera:this._camera,viewport:this._viewportCache,buffers:this._buffers,loopIndex:t.loopIndex})}},{key:"_getSizePowerOf2",value:function(t,e){var n=Math.pow(2,Math.log(t)/Math.LN2|0),r=Math.pow(2,Math.log(e)/Math.LN2|0);return{width:n,height:r}}}]),e}(p.default);e.default=m,m.attributes={camera:{converter:"Component",defaultValue:"camera",target:"Camera"},viewport:{converter:"Viewport",defaultValue:"auto"}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(193),p=r(v),m=n(137),y=r(m),g=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){this.getAttribute("bgColor").boundTo("_bgColor"),this.getAttribute("clearDepth").boundTo("_clearDepth")}},{key:"$mount",value:function(){this.gl=this.companion.get("gl")}},{key:"$treeInitialized",value:function(){this.node.getComponent("LoopManager").register(this.onloop.bind(this),1e3),this.getValue("complementRenderer")&&0===this.node.getChildrenByNodeName("renderer").length&&this.node.addChildByName("renderer",{})}},{key:"onloop",value:function(t){if(this.enabled){var e=this._bgColor;this.gl.clearColor(e.R,e.G,e.B,e.A),this.gl.clearDepth(this._clearDepth),this.gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT|WebGLRenderingContext.DEPTH_BUFFER_BIT),this.node.broadcastMessage(1,"renderViewport",{loopIndex:t})}}}]),e}(y.default);e.default=g,g.attributes={bgColor:{defaultValue:new p.default(0,0,0,0),converter:"Color4"},clearDepth:{defaultValue:1,converter:"Number"},complementRenderer:{defaultValue:!0,converter:"Boolean"}}},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.lib.math.Color4},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(195),p=r(v),m=n(137),y=r(m),g=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){this.getAttribute("targetBuffer").boundTo("_targetBuffer"),this.getAttribute("clearColor").boundTo("_clearColor"),this.getAttribute("clearColorEnabled").boundTo("_clearColorEnabled"),this.getAttribute("clearDepthEnabled").boundTo("_clearDepthEnabled"),this.getAttribute("clearDepth").boundTo("_clearDepth")}},{key:"$mount",value:function(){this._gl=this.companion.get("gl"),this._canvas=this.companion.get("canvasElement");var t=this.companion.get("GeometryRegistory");this._geom=t.getGeometry("quad"),this._materialContainer=this.node.getComponent("MaterialContainer")}},{key:"$bufferUpdated",value:function(t){var e=this.getValue("out");"default"!==e&&(this._fbo=new p.default(this.companion.get("gl")),this._fbo.update(t.buffers[e]));var n=this.getValue("depthBuffer");n&&this._fbo&&this._fbo.update(t.buffers[n])}},{key:"$render",value:function(t){if(this._materialContainer.ready){this._fbo?(this._fbo.bind(),this._gl.viewport(0,0,t.viewport.Width,t.viewport.Height)):(this._gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this._gl.viewport(t.viewport.Left,this._canvas.height-t.viewport.Bottom,t.viewport.Width,t.viewport.Height)),this._fbo&&this._clearColorEnabled&&(this._gl.clearColor(this._clearColor.R,this._clearColor.G,this._clearColor.B,this._clearColor.A),this._gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT)),this._clearDepthEnabled&&(this._gl.clearDepth(this._clearDepth),this._gl.clear(WebGLRenderingContext.DEPTH_BUFFER_BIT));var e={targetBuffer:this._targetBuffer,geometry:this._geom,attributeValues:{},camera:null,transform:null,buffers:t.buffers,viewport:t.viewport,defaultTexture:this.companion.get("defaultTexture")};e.attributeValues=this._materialContainer.materialArgs,this._materialContainer.material.draw(e),this._gl.flush()}}}]),e}(y.default);e.default=g,g.attributes={out:{defaultValue:"default",converter:"String"},depthBuffer:{defaultValue:void 0,converter:"String"},targetBuffer:{defaultValue:"default",converter:"String"},clearColor:{defaultValue:"#0000",converter:"Color4"},clearColorEnabled:{defaultValue:!0,converter:"Boolean"},clearDepthEnabled:{defaultValue:!0,converter:"Boolean"},clearDepth:{defaultValue:1,converter:"Number"}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(116),h=r(d),v=n(88),p=r(v),m=n(190),y=r(m),g=n(142),_=r(g),M=n(143),b=r(M),x=function(t){function e(t){(0,u.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return n.fbo=t.createFramebuffer(),n}return(0,p.default)(e,t),(0,l.default)(e,[{key:"update",value:function(t,e,n){if(this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbo),t instanceof _.default){if("undefined"==typeof n&&(n=0),"undefined"==typeof e&&(e=0),this.gl.framebufferTexture2D(WebGLRenderingContext.FRAMEBUFFER,WebGLRenderingContext.COLOR_ATTACHMENT0+n,WebGLRenderingContext.TEXTURE_2D,t.texture,e),this.gl.checkFramebufferStatus(WebGLRenderingContext.FRAMEBUFFER)!==WebGLRenderingContext.FRAMEBUFFER_COMPLETE)throw new Error("INCOMPLETE framebuffer")}else if(t instanceof y.default){var r=e;"undefined"==typeof e&&(r=WebGLRenderingContext.DEPTH_ATTACHMENT),this.gl.framebufferRenderbuffer(WebGLRenderingContext.FRAMEBUFFER,r,WebGLRenderingContext.RENDERBUFFER,t.renderBuffer)}this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null)}},{key:"bind",value:function(){this.gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,this.fbo)}},{key:"destroy",value:function(){(0,h.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"destroy",this).call(this),this.gl.deleteFramebuffer(this.fbo)}}]),e}(b.default);e.default=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(137),p=r(v),m=n(195),y=r(m),g=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){this.getAttribute("layer").boundTo("_layer"),this.getAttribute("clearColor").boundTo("_clearColor"),this.getAttribute("clearColorEnabled").boundTo("_clearColorEnabled"),this.getAttribute("clearDepthEnabled").boundTo("_clearDepthEnabled"),this.getAttribute("clearDepth").boundTo("_clearDepth"),this.getAttribute("camera").boundTo("_camera")}},{key:"$mount",value:function(){this._gl=this.companion.get("gl"),this._canvas=this.companion.get("canvasElement"),this._materialContainer=this.node.getComponent("MaterialContainer")}},{key:"$bufferUpdated",value:function(t){var e=this.getValue("out");"default"!==e&&(this._fbo=new y.default(this.companion.get("gl")),this._fbo.update(t.buffers[e]));var n=this.getValue("depthBuffer");n&&this._fbo&&this._fbo.update(t.buffers[n])}},{key:"$render",value:function(t){var e=this._camera?this._camera:t.camera;if(e){this._fbo?(this._fbo.bind(),this._gl.viewport(0,0,t.viewport.Width,t.viewport.Height)):(this._gl.bindFramebuffer(WebGLRenderingContext.FRAMEBUFFER,null),this._gl.viewport(t.viewport.Left,this._canvas.height-t.viewport.Bottom,t.viewport.Width,t.viewport.Height)),this._fbo&&this._clearColorEnabled&&(this._gl.clearColor(this._clearColor.R,this._clearColor.G,this._clearColor.B,this._clearColor.A),this._gl.clear(WebGLRenderingContext.COLOR_BUFFER_BIT)),this._clearDepthEnabled&&(this._gl.clearDepth(this._clearDepth),this._gl.clear(WebGLRenderingContext.DEPTH_BUFFER_BIT)),t.camera.updateContainedScene(t.loopIndex);var n=this._materialContainer.useMaterial;t.camera.renderScene({caller:this,camera:e,buffers:t.buffers,layer:this._layer,viewport:t.viewport,material:n?this._materialContainer.material:void 0,materialArgs:n?this._materialContainer.material:void 0,loopIndex:t.loopIndex})}}}]),e}(p.default);e.default=g,g.attributes={layer:{converter:"String",defaultValue:"default"},depthBuffer:{defaultValue:void 0,converter:"String"},out:{converter:"String",defaultValue:"default"},clearColor:{defaultValue:"#0000",converter:"Color4"},clearColorEnabled:{defaultValue:!0,converter:"Boolean"},clearDepthEnabled:{defaultValue:!0,converter:"Boolean"},clearDepth:{defaultValue:1,converter:"Number"},camera:{defaultValue:void 0,converter:"Component",target:"Camera"}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(142),p=r(v),m=n(137),y=r(m),g=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$mount",value:function(){this.buffer=new p.default(this.companion.get("gl"))}},{key:"$unmount",value:function(){this.buffer.destroy(),this.buffer=null}},{key:"$resizeBuffer",value:function(t){if(!this.getValue("name"))throw new Error("Attribute 'name' must be specified.");this.buffer.update(0,t.widthPowerOf2,t.heightPowerOf2,0,WebGLRenderingContext.RGBA,WebGLRenderingContext.UNSIGNED_BYTE,null),t.buffers[this.getValue("name")]=this.buffer}}]),e}(y.default);e.default=g,g.attributes={name:{converter:"String",defaultValue:void 0},format:{converter:"Enum",defaultValue:WebGLRenderingContext.RGBA,table:{RGBA:WebGLRenderingContext.RGBA,RGB:WebGLRenderingContext.RGB}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(43),u=r(i),s=n(48),l=r(s),f=n(49),c=r(f),d=n(53),h=r(d),v=n(88),p=r(v),m=n(96),y=r(m),g=n(142),_=r(g),M=n(137),b=r(M),x=n(115),w=r(x),S=function(t,e,n,r){return new(n||(n=y.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},E=function(t){function e(){return(0,l.default)(this,e),(0,h.default)(this,(e.__proto__||(0,u.default)(e)).apply(this,arguments))}return(0,p.default)(e,t),(0,c.default)(e,[{key:"$mount",value:function(){var t=this,e=this.getValue("src");this._texture=new _.default(this.companion.get("gl")),this._texture.magFilter=this.getValue("magFilter"),this._texture.minFilter=this.getValue("minFilter"),this._texture.wrapT=this.getValue("wrapT"),
this._texture.wrapS=this.getValue("wrapS"),this.attributes.get("magFilter").addObserver(function(e){return t._texture.magFilter=e.Value}),this.attributes.get("minFilter").addObserver(function(e){return t._texture.minFilter=e.Value}),this.attributes.get("wrapS").addObserver(function(e){return t._texture.wrapS=e.Value}),this.attributes.get("wrapT").addObserver(function(e){return t._texture.wrapT=e.Value}),e&&this._loadTask(e)}},{key:"_loadTask",value:function(t){return S(this,void 0,void 0,o.default.mark(function e(){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.resolve(t);case 2:n=e.sent,this._texture.update(n);case 4:case"end":return e.stop()}},e,this)}))}}]),e}(b.default);e.default=E,E.attributes={src:{converter:"String",defaultValue:void 0},minFilter:{converter:"Enum",defaultValue:"LINEAR",table:{LINEAR:WebGLRenderingContext.LINEAR,NEAREST:WebGLRenderingContext.NEAREST,NEAREST_MIPMAP_NEAREST:WebGLRenderingContext.NEAREST_MIPMAP_NEAREST,NEAREST_MIPMAP_LINEAR:WebGLRenderingContext.NEAREST_MIPMAP_LINEAR,LINEAR_MIPMAP_NEAREST:WebGLRenderingContext.LINEAR_MIPMAP_NEAREST,LINEAR_MIPMAP_LINEAR:WebGLRenderingContext.LINEAR_MIPMAP_LINEAR}},magFilter:{converter:"Enum",defaultValue:"LINEAR",table:{LINEAR:WebGLRenderingContext.LINEAR,NEAREST:WebGLRenderingContext.NEAREST}},wrapS:{converter:"Enum",defaultValue:"REPEAT",table:{REPEAT:WebGLRenderingContext.REPEAT,MIRRORED_REPEAT:WebGLRenderingContext.MIRRORED_REPEAT,CLAMP_TO_EDGE:WebGLRenderingContext.CLAMP_TO_EDGE}},wrapT:{converter:"Enum",defaultValue:"REPEAT",table:{REPEAT:WebGLRenderingContext.REPEAT,MIRRORED_REPEAT:WebGLRenderingContext.MIRRORED_REPEAT,CLAMP_TO_EDGE:WebGLRenderingContext.CLAMP_TO_EDGE}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(88),h=r(d),v=n(124),p=r(v),m=n(122),y=r(m),g=n(123),_=r(g),M=n(188),b=r(M),x=n(125),w=n(137),S=r(w),E=function(t){function e(){(0,u.default)(this,e);var t=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments));return t.localTransform=new p.default,t.globalTransform=new p.default,t._children=[],t._cachePVM=new p.default,t._cacheVM=new p.default,t._forward=new y.default([0,0,-1,0]),t._up=new y.default([0,1,0,0]),t._right=new y.default([1,0,0,0]),t._globalPosition=new y.default([0,0,0]),t._globalScale=new y.default([1,1,1]),t}return(0,h.default)(e,t),(0,l.default)(e,[{key:"calcPVM",value:function(t){return x.mat4.mul(this._cachePVM.rawElements,t.getProjectionViewMatrix().rawElements,this.globalTransform.rawElements),this._cachePVM}},{key:"calcVM",value:function(t){return x.mat4.mul(this._cacheVM.rawElements,t.getViewMatrix().rawElements,this.globalTransform.rawElements),this._cacheVM}},{key:"$awake",value:function(){var t=this;this.attributes.get("position").addObserver(function(){t._localPosition=t.attributes.get("position").Value,t.updateTransform()}),this.attributes.get("rotation").addObserver(function(){t._localRotation=t.attributes.get("rotation").Value,t.updateTransform()}),this.attributes.get("scale").addObserver(function(){t._localScale=t.attributes.get("scale").Value,t.updateTransform()}),this._localPosition=this.attributes.get("position").Value,this._localRotation=this.attributes.get("rotation").Value,this._localScale=this.attributes.get("scale").Value,this.updateTransform()}},{key:"$mount",value:function(){this._parentTransform=this.node.parent.getComponent("Transform"),this._parentTransform&&this._parentTransform._children.push(this),this.updateTransform()}},{key:"$unmount",value:function(){this._parentTransform&&(this._parentTransform._children.splice(this._parentTransform._children.indexOf(this),1),this._parentTransform=null)}},{key:"updateTransform",value:function(){x.mat4.fromRotationTranslationScale(this.localTransform.rawElements,this._localRotation.rawElements,this._localPosition.rawElements,this._localScale.rawElements),this.updateGlobalTransform()}},{key:"updateGlobalTransform",value:function(){this._parentTransform?x.mat4.mul(this.globalTransform.rawElements,this._parentTransform.globalTransform.rawElements,this.localTransform.rawElements):x.mat4.copy(this.globalTransform.rawElements,this.localTransform.rawElements),this._updateDirections(),this._updateGlobalProperty(),this.node.sendMessage("transformUpdated",this),this._children.forEach(function(t){return t.updateGlobalTransform()})}},{key:"_updateDirections",value:function(){x.vec4.transformMat4(this._forward.rawElements,e._forwardBase.rawElements,this.globalTransform.rawElements),x.vec4.transformMat4(this._up.rawElements,e._upBase.rawElements,this.globalTransform.rawElements),x.vec4.transformMat4(this._right.rawElements,e._rightBase.rawElements,this.globalTransform.rawElements)}},{key:"_updateGlobalProperty",value:function(){this._parentTransform?(x.vec3.transformMat4(this._globalPosition.rawElements,this._localPosition.rawElements,this._parentTransform.globalTransform.rawElements),x.vec3.transformMat4(this._globalScale.rawElements,this._localScale.rawElements,this._parentTransform.globalTransform.rawElements)):(x.vec3.copy(this._globalPosition.rawElements,this._localPosition.rawElements),x.vec3.copy(this._globalScale.rawElements,this._localScale.rawElements))}},{key:"globalPosition",get:function(){return this._globalPosition}},{key:"localPosition",get:function(){return this._localPosition},set:function(t){this._localPosition=t,this.attributes.get("position").Value=t}},{key:"localRotation",get:function(){return this._localRotation},set:function(t){this._localRotation=t,this.attributes.get("rotation").Value=t}},{key:"globalScale",get:function(){return this._globalScale}},{key:"localScale",get:function(){return this._localScale},set:function(t){this._localScale=t,this.attributes.get("scale").Value=t}},{key:"forward",get:function(){return this._forward}},{key:"up",get:function(){return this._up}},{key:"right",get:function(){return this._right}}]),e}(S.default);e.default=E,E.attributes={position:{converter:"Vector3",defaultValue:y.default.Zero},rotation:{converter:"Rotation3",defaultValue:b.default.Identity},scale:{converter:"Vector3",defaultValue:y.default.One}},E._forwardBase=new _.default(0,0,-1,0),E._upBase=new _.default(0,1,0,0),E._rightBase=new _.default(1,0,0,0)},function(t,e){"use strict";function n(t){return function(e){return a(e,t)?null:"ChildrenComponentConstraint Error:"+e.name}}function r(t,e){return e.every(function(e){return null!==t.getComponent(e)})}function a(t,e){return!!r(t,e)&&t.children.every(function(t){return a(t,e)})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){"use strict";function n(){return function(t){return 0===t.children.length?null:"NoChildConstraint fail:"+t.name}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){"use strict";function n(t){return function(e){return t.every(function(t){return null!=e.getComponent(t)})?null:"ParentConstraint Error:"+e.name}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){"use strict";function n(){return function(t){return t.parent?"RootConstraint: this node: "+t.name.fqn+" must be tree root.":null}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return i.default.parseAngle(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(205),i=r(o);e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=n(122),l=r(s),f=n(188),c=r(f),d=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"parseAngle",value:function(t){var e=/^ *(-? *(?:0|[1-9]\d*)(?: *\.\d+)?) *(?:\/ *((?:0|[1-9]\d*)(?: *\.\d+)?))? *(p|prad|deg|d|r|rad)? *$/gm,n=e.exec(t);if(null==n)throw new Error("faild parse Angle string:'"+t+"'");var r=parseFloat(n[1]);n[2]&&(r/=parseFloat(n[2]));var a=n[3];return null==a&&(a="d"),"r"===a||"rad"===a?r:"p"===a||"prad"===a?r*Math.PI:r/180*Math.PI}},{key:"parseRotation3D",value:function(e){var n=/^ *(x|y|z) *\(([^\(\)]+)\) *$/gm,r=/^ *axis *\(([^\(\),]+),([^\(\),]+),([^\(\),]+),([^\(\),]+)\) *$/gm,a=/^ *([^\(\),]+),([^\(\),]+),([^\(\),]+) *$/gm,o=n.exec(e);if(o){if("x"===o[1])return c.default.angleAxis(t.parseAngle(o[2]),l.default.XUnit);if("y"===o[1])return c.default.angleAxis(t.parseAngle(o[2]),l.default.YUnit);if("z"===o[1])return c.default.angleAxis(t.parseAngle(o[2]),l.default.ZUnit)}var i=r.exec(e);if(i){var u=t.parseAngle(i[1]),s=parseFloat(i[2]),f=parseFloat(i[3]),d=parseFloat(i[4]);return c.default.angleAxis(u,new l.default(s,f,d))}var h=a.exec(e);if(h)return c.default.euler(t.parseAngle(h[1]),t.parseAngle(h[2]),t.parseAngle(h[3]));throw new Error("Unknown format for rotation3D:'"+e+"'")}}]),t}();e.default=d},function(t,e){"use strict";function n(t){if("boolean"==typeof t)return t;if("string"==typeof t)switch(t){case"true":return!0;case"false":return!1;default:throw new Error("Invalid string "+t+" for parsing as boolean")}throw new Error("Parsing failed")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if("fit"===t)return{mode:"fit"};if("string"==typeof t){var e=/aspect\(([\d+(?.\d*)?]+)\)/.exec(t);if(e)return{mode:"aspect",aspect:(0,i.default)(e[1])}}return{mode:"manual",size:(0,i.default)(t)}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(208),i=r(o);e.default=a},function(t,e,n){t.exports={default:n(209),__esModule:!0}},function(t,e,n){n(210),t.exports=parseFloat},function(t,e,n){var r=n(4),a=n(211);r(r.S+r.F*(Number.parseFloat!=a),"Number",{parseFloat:a})},function(t,e,n){var r=n(5).parseFloat,a=n(212).trim;t.exports=1/r(n(213)+"-0")!==-(1/0)?function(t){var e=a(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){var r=n(4),a=n(26),o=n(15),i=n(213),u="["+i+"]",s="",l=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$"),c=function(t,e,n){var a={},u=o(function(){return!!i[t]()||s[t]()!=s}),l=a[t]=u?e(d):i[t];n&&(a[n]=l),r(r.P+r.F*u,"String",a)},d=c.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(f,"")),t};t.exports=c},function(t,e){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t instanceof i.default)return t;if(t instanceof s.default)return new i.default(t.R,t.G,t.B);if("string"==typeof t)return i.default.parse(t);throw new Error(t+" can not be parsed as Color4.")}Object.defineProperty(e,"__esModule",{value:!0});var o=n(215),i=r(o),u=n(193),s=r(u);e.default=a},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.lib.math.Color3},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t instanceof s.default)return t;if(t instanceof i.default)return new s.default(t.R,t.G,t.B,1);if("string"==typeof t)return s.default.parse(t);throw new Error(t+" can not be parsed as Color4.")}Object.defineProperty(e,"__esModule",{value:!0});var o=n(215),i=r(o),u=n(193),s=r(u);e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(!this.declaration.target)throw new Error("Component converter require to be specified target");if(t instanceof s.default)return t.getComponent(this.declaration.target);if(t instanceof i.default){if(t.name===this.declaration.target)return t;throw new Error("Specified component must be "+this.declaration.target)}return this.tree(t)(this.declaration.target).get(0,0,0)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(137),i=r(o),u=n(218),s=r(u);e.default=a},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.Node.GomlNode},function(t,e){"use strict";function n(t){if(!this.declaration.table)throw new Error("Enum converter needs to be specified table in attribute dictionary");if("number"==typeof t)return t;if("string"==typeof t){var e=this.declaration.table[t];if(e)return e;throw new Error("Specified value is not exisiting in the relation table")}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return"string"==typeof t?this.companion.get("GeometryRegistory").getGeometry(t):t instanceof i.default?t:void 0}Object.defineProperty(e,"__esModule",{value:!0});var o=n(221),i=r(o);e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=function(){function t(e,n,r){(0,o.default)(this,t),this.verticies=e,this.attribInfo=n,this.indicies=r,this._validateGLContext();for(var a in n)if("undefined"==typeof e[n[a].bufferName])throw new Error("The buffer request by "+n[a].bufferName+" is not contained in geometry.")}return(0,u.default)(t,[{key:"draw",value:function(t,e,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.MAX_VALUE,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=this.indicies[t];e.forEach(function(t){var e=r.attribInfo[t];if(!e)throw new Error("There is no such vertex buffer");var a=n.findAttributeLocation(t);if(!(a<0)){var o=r.verticies[e.bufferName];o.bind(),r._gl.vertexAttribPointer(a,e.size,e.type,!1,e.stride,e.offset)}}),i.index.bind(),this._gl.drawElements(i.topology,Math.min(i.count,a),i.type,Math.min(o*i.byteSize,(i.count-1)*i.byteSize))}},{key:"_validateGLContext",value:function(){for(var t in this.indicies){var e=this.indicies[t];if(this._gl||(this._gl=e.index.gl),this._gl!==e.index.gl)throw new Error("All index buffers should be initialized with same context")}for(var n in this.verticies){var r=this.verticies[n];if(this._gl!==r.gl)throw new Error("All vertex buffers should be initialized with same context")}}}]),t}();e.default=s},function(t,e){"use strict";function n(t){if("string"==typeof t){var e=/\s*new\s*\(\s*([a-zA-Z\d\-]+)\s*\)/,n=void 0;if(n=e.exec(t))return this.component[this.declaration.componentBoundTo]=null,this.companion.get("MaterialFactory").instanciate(n[1]);var r=this.tree(t)("Material").get();return this.component[this.declaration.componentBoundTo]=r,r.materialPromise}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){if(t instanceof Array)return t;if("string"==typeof t){var e=t.split(",");return e.map(function(t){return(0,i.default)(t)})}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(208),i=r(o);e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return(0,i.default)(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(208),i=r(o);e.default=a},function(t,e){"use strict";function n(t){return t}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return t instanceof s.default?t:i.default.parseRotation3D(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(205),i=r(o),u=n(188),s=r(u);e.default=a},function(t,e){"use strict";function n(t){if(Array.isArray(t))return t;if("string"==typeof t){var e=t.split(",");return e.map(function(t){return t})}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){"use strict";function n(t){return"string"==typeof t?t:"undefined"==typeof t?t:"function"==typeof t.toString?t.toString():void 0}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){t.update(e),requestAnimationFrame(function(){return a(t,e)})}function o(t){var e=/(query|backbuffer|video)\((.+)\)[^\)]*$/,n=void 0;return(n=e.exec(t))?{type:n[1],param:n[2]}:null}function i(t){var e=document.createElement("video");return e.src=t,e}function u(t,e){var n=new v.default(t);return e.play(),n.update(e),a(n,e),n}function s(t){var e=this;if(t instanceof v.default)return new d.default(t);if("string"==typeof t){var n=o(t);if(n){var r=function(){var t=n.param;switch(n.type){case"backbuffer":return{v:new d.default(function(e){return e[t]})};case"video":return{v:new d.default(u(e.companion.get("gl"),i(t)))}}}();if("object"===("undefined"==typeof r?"undefined":(0,f.default)(r)))return r.v}else{var a=function(){var n=new v.default(e.companion.get("gl"));return m.default.resolve(t).then(function(t){n.update(t)}),e.companion.get("loader").register(n.validPromise),{v:new d.default(n)}}();if("object"===("undefined"==typeof a?"undefined":(0,f.default)(a)))return a.v}}if("object"===("undefined"==typeof t?"undefined":(0,f.default)(t)))if(t instanceof HTMLImageElement){var s=function(){var n=new v.default(e.companion.get("gl"));return t.complete&&t.naturalWidth?n.update(t):t.onload=function(){n.update(t)},{v:new d.default(n)}}();if("object"===("undefined"==typeof s?"undefined":(0,f.default)(s)))return s.v}else{if(t instanceof HTMLCanvasElement){var l=new v.default(this.companion.get("gl"));return l.update(t),new d.default(l)}if(t instanceof HTMLVideoElement)return new d.default(u(this.companion.get("gl"),t))}}Object.defineProperty(e,"__esModule",{value:!0});var l=n(54),f=r(l),c=n(230),d=r(c),h=n(142),v=r(h),p=n(115),m=r(p);e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=function(){function t(e){(0,o.default)(this,t),this.rawResource=e,this._isFunctionalProxy="function"==typeof e}return(0,u.default)(t,[{key:"get",value:function(t){return this._isFunctionalProxy?this.rawResource(t):this.rawResource}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return t instanceof i.default?t:i.default.parse(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(174),i=r(o);e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return t instanceof i.default?t:i.default.parse(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(122),i=r(o);e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t){return t instanceof i.default?t:i.default.parse(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=n(123),i=r(o);e.default=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var n=/(\d+)\s*%/,r=void 0;if(r=n.exec(e)){var a=(0,l.default)(r[1]);return Math.floor(t*a*.01)}return Math.floor((0,l.default)(e))}function o(t){if(t instanceof c.default)return function(){return t};if("string"==typeof t){if("auto"===t)return function(t){return new c.default(0,0,t.width,t.height)};var e=function(){var e=t.split(",");if(4!==e.length)throw new Error("Invalid viewport size was specified.");return{v:function(t){return new c.default(a(t.width,e[0]),a(t.height,e[1]),a(t.width,e[2]),a(t.height,e[3]))}}}();if("object"===("undefined"==typeof e?"undefined":(0,u.default)(e)))return e.v}throw new Error(t+" could not be parsed")}Object.defineProperty(e,"__esModule",{value:!0});var i=n(54),u=r(i),s=n(208),l=r(s),f=n(235),c=r(f);e.default=o},function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=window.GrimoireJS.lib.math.Rectangle},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(122),c=r(f),d=n(237),h=r(d),v=n(148),p=r(v),m=n(238),y=r(m),g=function(){function t(){(0,u.default)(this,t)}return(0,l.default)(t,null,[{key:"register",value:function(){t._registerTriangle(),t._registerQuad(),t._registerCube(),t._registerSphere(),t._registerCircle(),t._registerCylinder(),t._registerCone(),t._registerPlane()}},{key:"_registerTriangle",value:function(){p.default.addType("triangle",{},function(t,e){return y.default.build(t,{indicies:{default:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.triangleIndex(0),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.linesFromTriangles(h.default.triangleIndex(0)),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:h.default.triangleSize(),getGenerators:function(){return{position:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.trianglePosition(c.default.Zero,c.default.YUnit,c.default.XUnit),"t0",1);case 1:case"end":return t.stop()}},t,this)}),normal:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.triangleNormal(c.default.ZUnit),"t0",1);case 1:case"end":return t.stop()}},t,this)}),texCoord:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.triangleTexCoord(),"t0",1);case 1:case"end":return t.stop()}},t,this)})}}}}})})}},{key:"_registerQuad",value:function(){p.default.addType("quad",{},function(t,e){return y.default.build(t,{indicies:{default:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.quadIndex(0),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.linesFromTriangles(h.default.quadIndex(0)),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:h.default.quadSize(),getGenerators:function(){return{position:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.quadPosition(c.default.Zero,c.default.YUnit,c.default.XUnit),"t0",1);case 1:case"end":return t.stop()}},t,this)}),normal:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.quadNormal(c.default.ZUnit),"t0",1);case 1:case"end":return t.stop()}},t,this)}),texCoord:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.quadTexCoord(),"t0",1);case 1:case"end":return t.stop()}},t,this)})}}}}})})}},{key:"_registerCube",value:function(){p.default.addType("cube",{},function(t,e){return y.default.build(t,{indicies:{default:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.cubeIndex(0),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.linesFromTriangles(h.default.cubeIndex(0)),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:h.default.cubeSize(),getGenerators:function(){return{position:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.cubePosition(c.default.Zero,c.default.YUnit,c.default.XUnit,c.default.ZUnit.negateThis()),"t0",1);case 1:case"end":return t.stop()}},t,this)}),normal:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.cubeNormal(c.default.Zero,c.default.YUnit,c.default.XUnit,c.default.ZUnit.negateThis()),"t0",1);case 1:case"end":return t.stop()}},t,this)}),texCoord:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.cubeTexCoord(),"t0",1);case 1:case"end":return t.stop()}},t,this)})}}}}})})}},{key:"_registerSphere",value:function(){p.default.addType("sphere",{divVertical:{converter:"Number",defaultValue:100},divHorizontal:{converter:"Number",defaultValue:100}},function(t,e){var n=e.divHorizontal,r=e.divVertical;return y.default.build(t,{indicies:{default:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.sphereIndex(0,n,r),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.linesFromTriangles(h.default.sphereIndex(0,n,r)),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:h.default.sphereSize(n,r),getGenerators:function(){return{position:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.spherePosition(c.default.Zero,c.default.YUnit,c.default.XUnit,c.default.ZUnit.negateThis(),n,r),"t0",1);case 1:case"end":return t.stop()}},t,this)}),normal:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.sphereNormal(c.default.YUnit,c.default.XUnit,c.default.ZUnit.negateThis(),n,r),"t0",1);case 1:case"end":return t.stop()}},t,this)}),texCoord:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.sphereTexCoord(n,r),"t0",1);case 1:case"end":return t.stop()}},t,this)})}}}}})})}},{key:"_registerCircle",value:function(){p.default.addType("circle",{divide:{converter:"Number",defaultValue:50}},function(t,e){var n=e.divide;return y.default.build(t,{indicies:{default:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.ellipseIndex(0,n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.linesFromTriangles(h.default.ellipseIndex(0,n)),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:h.default.ellipseSize(n),getGenerators:function(){return{position:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.ellipsePosition(c.default.Zero,c.default.YUnit,c.default.XUnit,n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),normal:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.ellipseNormal(c.default.ZUnit,n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),texCoord:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.ellipseTexCoord(n),"t0",1);case 1:case"end":return t.stop()}},t,this)})}}}}})})}},{key:"_registerCylinder",value:function(){p.default.addType("cylinder",{divide:{converter:"Number",defaultValue:50}},function(t,e){var n=e.divide;return y.default.build(t,{indicies:{default:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.cylinderIndex(0,n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.linesFromTriangles(h.default.cylinderIndex(0,n)),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:h.default.cylinderSize(n),getGenerators:function(){return{position:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.cylinderPosition(c.default.Zero,c.default.YUnit,c.default.XUnit,c.default.ZUnit.negateThis(),n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),normal:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.cylinderNormal(c.default.Zero,c.default.YUnit,c.default.XUnit,c.default.ZUnit.negateThis(),n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),texCoord:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.cylinderTexCoord(n),"t0",1);case 1:case"end":return t.stop()}},t,this)})}}}}})})}},{key:"_registerCone",value:function(){p.default.addType("cone",{divide:{converter:"Number",defaultValue:50}},function(t,e){var n=e.divide;return y.default.build(t,{indicies:{default:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.coneIndex(0,n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.linesFromTriangles(h.default.coneIndex(0,n)),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:h.default.coneSize(n),getGenerators:function(){return{position:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.conePosition(c.default.Zero,c.default.YUnit,c.default.XUnit,c.default.ZUnit.negateThis(),n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),normal:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.coneNormal(c.default.Zero,c.default.YUnit,c.default.XUnit,c.default.ZUnit.negateThis(),n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),texCoord:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.coneTexCoord(n),"t0",1);case 1:case"end":return t.stop()}},t,this)})}}}}})})}},{key:"_registerPlane",value:function(){p.default.addType("plane",{divide:{converter:"Number",defaultValue:10}},function(t,e){var n=e.divide;return y.default.build(t,{indicies:{default:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.planeIndex(0,n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.TRIANGLES},wireframe:{generator:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.linesFromTriangles(h.default.planeIndex(0,n)),"t0",1);case 1:case"end":return t.stop()}},t,this)}),topology:WebGLRenderingContext.LINES}},verticies:{main:{size:{position:3,normal:3,texCoord:2},count:h.default.planeSize(n),
getGenerators:function(){return{position:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.planePosition(c.default.Zero,c.default.YUnit,c.default.XUnit,n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),normal:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.planeNormal(c.default.ZUnit,n),"t0",1);case 1:case"end":return t.stop()}},t,this)}),texCoord:o.default.mark(function t(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(h.default.planeTexCoord(n),"t0",1);case 1:case"end":return t.stop()}},t,this)})}}}}})})}}]),t}();e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(150),o=r(a),i=n(39),u=r(i),s=n(48),l=r(s),f=n(49),c=r(f),d=n(122),h=r(d),v=function(){function t(){(0,l.default)(this,t)}return(0,c.default)(t,null,[{key:"fromArray",value:u.default.mark(function t(e){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<e.length)){t.next=7;break}return t.next=4,e[n];case 4:n++,t.next=1;break;case 7:case"end":return t.stop()}},t,this)})},{key:"linesFromTriangles",value:u.default.mark(function t(e){var n,r,a,i,s,l,f,c,d,h,v;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new Array(3),r=0,a=!0,i=!1,s=void 0,t.prev=5,l=(0,o.default)(e);case 7:if(a=(f=l.next()).done){t.next=17;break}if(c=f.value,n[r%3]=c,r%3!==2){t.next=13;break}return d=n[0],h=n[1],v=n[2],t.delegateYield([d,h,h,v,v,d],"t0",13);case 13:r++;case 14:a=!0,t.next=7;break;case 17:t.next=23;break;case 19:t.prev=19,t.t1=t.catch(5),i=!0,s=t.t1;case 23:t.prev=23,t.prev=24,!a&&l.return&&l.return();case 26:if(t.prev=26,!i){t.next=29;break}throw s;case 29:return t.finish(26);case 30:return t.finish(23);case 31:case"end":return t.stop()}},t,this,[[5,19,23,31],[24,,26,30]])})},{key:"ellipsePosition",value:u.default.mark(function t(e,n,r,a){var o,i,s,l,f;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.X;case 2:return t.next=4,e.Y;case 4:return t.next=6,e.Z;case 6:o=2*Math.PI/a,i=0;case 8:if(!(i<a)){t.next=21;break}return s=o*i,l=Math.sin(2*Math.PI-s),f=Math.cos(2*Math.PI-s),t.next=14,e.X+f*n.X+l*r.X;case 14:return t.next=16,e.Y+f*n.Y+l*r.Y;case 16:return t.next=18,e.Z+f*n.Z+l*r.Z;case 18:i++,t.next=8;break;case 21:case"end":return t.stop()}},t,this)})},{key:"trianglePosition",value:u.default.mark(function t(e,n,r){var a,o,i;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.addWith(n),o=e.subtractWith(n).addWith(r),i=e.subtractWith(n).subtractWith(r),t.delegateYield(a.rawElements,"t0",4);case 4:return t.delegateYield(o.rawElements,"t1",5);case 5:return t.delegateYield(i.rawElements,"t2",6);case 6:case"end":return t.stop()}},t,this)})},{key:"cubePosition",value:u.default.mark(function e(n,r,a,o){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.quadPosition(n.subtractWith(o),r,a),"t0",1);case 1:return e.delegateYield(t.quadPosition(n.addWith(o),r,a.negateThis()),"t1",2);case 2:return e.delegateYield(t.quadPosition(n.addWith(r),o,a),"t2",3);case 3:return e.delegateYield(t.quadPosition(n.addWith(a),o,r.negateThis()),"t3",4);case 4:return e.delegateYield(t.quadPosition(n.subtractWith(r),o,a.negateThis()),"t4",5);case 5:return e.delegateYield(t.quadPosition(n.subtractWith(a),o,r),"t5",6);case 6:case"end":return e.stop()}},e,this)})},{key:"quadPosition",value:u.default.mark(function t(e,n,r){var a,o,i,s;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.subtractWith(r).addWith(n),o=e.addWith(r).addWith(n),i=e.addWith(r).subtractWith(n),s=e.subtractWith(r).subtractWith(n),t.delegateYield(a.rawElements,"t0",5);case 5:return t.delegateYield(o.rawElements,"t1",6);case 6:return t.delegateYield(i.rawElements,"t2",7);case 7:return t.delegateYield(s.rawElements,"t3",8);case 8:case"end":return t.stop()}},t,this)})},{key:"planePosition",value:u.default.mark(function t(e,n,r,a){var o,i,s,l,f,c;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=e.addWith(r).multiplyWith(2),i=e.subtractWith(n).multiplyWith(2),s=-a/2;case 3:if(!(s<a/2+1)){t.next=13;break}l=-a/2;case 5:if(!(l<a/2+1)){t.next=10;break}return t.delegateYield(o.multiplyWith(l/a).addWith(i.multiplyWith(s/a)).rawElements,"t0",7);case 7:l++,t.next=5;break;case 10:s++,t.next=3;break;case 13:f=-a/2;case 14:if(!(f<a/2+1)){t.next=24;break}c=-a/2;case 16:if(!(c<a/2+1)){t.next=21;break}return t.delegateYield(o.multiplyWith(c/a).addWith(i.multiplyWith(f/a)).rawElements,"t1",18);case 18:c++,t.next=16;break;case 21:f++,t.next=14;break;case 24:case"end":return t.stop()}},t,this)})},{key:"cylinderPosition",value:u.default.mark(function e(n,r,a,o,i){var s,l,f,c,d,v,p,m,y,g;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.ellipsePosition(n.addWith(r),o,a,i),"t0",1);case 1:return e.delegateYield(t.ellipsePosition(n.subtractWith(r),o,h.default.negate(a),i),"t1",2);case 2:s=2*Math.PI/i,l=Math.cos(s/2),f=Math.sin(s/2),c=i%2==0?s/2:0,d=0;case 7:if(!(d<i)){e.next=17;break}return v=s/2+s*d,p=Math.sin((Math.PI-s)/2-v-c),m=Math.cos((Math.PI-s)/2-v-c),y=new h.default(l*m,n.Y,l*p),g=new h.default(Math.cos(-s/2-v-c),n.Y,Math.sin(-s/2-v-c)),e.delegateYield(t.quadPosition(y,r,h.default.multiply(f,g)),"t2",14);case 14:d++,e.next=7;break;case 17:case"end":return e.stop()}},e,this)})},{key:"conePosition",value:u.default.mark(function e(n,r,a,o,i){var s,l,f,c,d,v,p,m,y,g;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.ellipsePosition(n.subtractWith(r),o,h.default.negate(a),i),"t0",1);case 1:s=2*Math.PI/i,l=Math.cos(s/2)/2,f=Math.sin(s/2),c=i%2==1?s/2:0,d=0;case 6:if(!(d<i)){e.next=16;break}return v=s*d,p=Math.sin((Math.PI-s)/2-v-c),m=Math.cos((Math.PI-s)/2-v-c),y=new h.default(l*m,n.Y,l*p),g=new h.default(Math.cos(-s/2-v-c),n.Y,Math.sin(-s/2-v-c)),e.delegateYield(t.trianglePosition(y,r.subtractWith(y),h.default.multiply(f,g)),"t1",13);case 13:d++,e.next=6;break;case 16:case"end":return e.stop()}},e,this)})},{key:"spherePosition",value:u.default.mark(function t(e,n,r,a,o,i){var s,l,f,c,d,h,v,p;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.addWith(n).rawElements,"t0",1);case 1:return t.delegateYield(e.subtractWith(n).rawElements,"t1",2);case 2:s=2*Math.PI/i,l=Math.PI/(o+1),f=1;case 5:if(!(f<=o)){t.next=19;break}c=l*f,d=Math.sin(c),h=n.multiplyWith(Math.cos(c)),v=0;case 10:if(!(v<=i)){t.next=16;break}return p=s*v,t.delegateYield(r.multiplyWith(Math.cos(p)).addWith(a.multiplyWith(Math.sin(p))).multiplyWith(d).addWith(h).rawElements,"t2",13);case 13:v++,t.next=10;break;case 16:f++,t.next=5;break;case 19:case"end":return t.stop()}},t,this)})},{key:"quadNormal",value:u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.rawElements,"t0",1);case 1:return t.delegateYield(e.rawElements,"t1",2);case 2:return t.delegateYield(e.rawElements,"t2",3);case 3:return t.delegateYield(e.rawElements,"t3",4);case 4:case"end":return t.stop()}},t,this)})},{key:"ellipseNormal",value:u.default.mark(function t(e,n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<n+1)){t.next=6;break}return t.delegateYield(e.rawElements,"t0",3);case 3:r++,t.next=1;break;case 6:case"end":return t.stop()}},t,this)})},{key:"triangleNormal",value:u.default.mark(function t(e){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(e.rawElements,"t0",1);case 1:return t.delegateYield(e.rawElements,"t1",2);case 2:return t.delegateYield(e.rawElements,"t2",3);case 3:case"end":return t.stop()}},t,this)})},{key:"cubeNormal",value:u.default.mark(function e(n,r,a,o){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.quadNormal(o.negateThis()),"t0",1);case 1:return e.delegateYield(t.quadNormal(o),"t1",2);case 2:return e.delegateYield(t.quadNormal(r),"t2",3);case 3:return e.delegateYield(t.quadNormal(a),"t3",4);case 4:return e.delegateYield(t.quadNormal(r.negateThis()),"t4",5);case 5:return e.delegateYield(t.quadNormal(a.negateThis()),"t5",6);case 6:case"end":return e.stop()}},e,this)})},{key:"cylinderNormal",value:u.default.mark(function e(n,r,a,o,i){var s,l,f,c,d,v,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.ellipseNormal(r,i),"t0",1);case 1:return e.delegateYield(t.ellipseNormal(r.negateThis(),i),"t1",2);case 2:s=2*Math.PI/i,l=new h.default(Math.cos(-s/2),n.Y,Math.sin(-s/2)),f=0;case 5:if(!(f<i)){e.next=18;break}return c=s*(f+1),d=Math.sin(Math.PI/2-c),v=Math.cos(Math.PI/2-c),p=new h.default(Math.cos(-s/2-c),n.Y,Math.sin(-s/2-c)),e.delegateYield(h.default.cross(l,r).rawElements,"t2",11);case 11:return e.delegateYield(h.default.cross(p,r).rawElements,"t3",12);case 12:return e.delegateYield(h.default.cross(p,r).rawElements,"t4",13);case 13:return e.delegateYield(h.default.cross(l,r).rawElements,"t5",14);case 14:l=p;case 15:f++,e.next=5;break;case 18:case"end":return e.stop()}},e,this)})},{key:"coneNormal",value:u.default.mark(function e(n,r,a,o,i){var s,l,f,c,d,v,p,m,y;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.ellipseNormal(r.negateThis(),i),"t0",1);case 1:s=Math.PI/i,l=Math.cos(s/2)/2,f=h.default.cross(new h.default(Math.cos(s/2),n.Y,Math.sin(s/2)),r.subtractWith(new h.default(l*Math.cos((Math.PI+s)/2),n.Y,l*Math.sin((Math.PI+s)/2)))),c=0;case 5:if(!(c<2*i)){e.next=18;break}return d=s*c,v=Math.sin((Math.PI-s)/2-d),p=Math.cos((Math.PI-s)/2-d),m=new h.default(l*p,n.Y,l*v),y=new h.default(Math.cos(-s/2-d),n.Y,Math.sin(-s/2-d)),e.delegateYield(h.default.cross(y,r.subtractWith(m)).rawElements,"t1",12);case 12:if(c%2!=1){e.next=15;break}return e.delegateYield(f.rawElements,"t2",14);case 14:f=h.default.cross(y,r.subtractWith(m));case 15:c++,e.next=5;break;case 18:return e.delegateYield(h.default.cross(new h.default(Math.cos(s/2),n.Y,Math.sin(s/2)),r.subtractWith(new h.default(l*Math.cos((Math.PI+s)/2),n.Y,l*Math.sin((Math.PI+s)/2)))).rawElements,"t3",19);case 19:case"end":return e.stop()}},e,this)})},{key:"planeNormal",value:u.default.mark(function e(n,r){var a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.planeSize(r)/2,o=0;case 2:if(!(o<a)){e.next=7;break}return e.delegateYield(n.rawElements,"t0",4);case 4:o++,e.next=2;break;case 7:i=0;case 8:if(!(i<a)){e.next=13;break}return e.delegateYield(n.negateThis().rawElements,"t1",10);case 10:i++,e.next=8;break;case 13:case"end":return e.stop()}},e,this)})},{key:"sphereNormal",value:u.default.mark(function e(n,r,a,o,i){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.spherePosition(h.default.Zero,n,r,a,o,i),"t0",1);case 1:case"end":return e.stop()}},e,this)})},{key:"sphereTexCoord",value:u.default.mark(function t(e,n){var r,a,o,i,s,l,f;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield([0,0,0,1],"t0",1);case 1:r=2*Math.PI/n,a=Math.PI/(e+1),o=1;case 4:if(!(o<=e)){t.next=17;break}i=a*o,s=Math.sin(i),l=0;case 8:if(!(l<=n)){t.next=14;break}return f=r*l,t.delegateYield([f/Math.PI/2,i/Math.PI],"t1",11);case 11:l++,t.next=8;break;case 14:o++,t.next=4;break;case 17:case"end":return t.stop()}},t,this)})},{key:"quadTexCoord",value:u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield([0,0],"t0",1);case 1:return t.delegateYield([1,0],"t1",2);case 2:return t.delegateYield([1,1],"t2",3);case 3:return t.delegateYield([0,1],"t3",4);case 4:case"end":return t.stop()}},t,this)})},{key:"cubeTexCoord",value:u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<6)){e.next=6;break}return e.delegateYield(t.quadTexCoord(),"t0",3);case 3:n++,e.next=1;break;case 6:case"end":return e.stop()}},e,this)})},{key:"triangleTexCoord",value:u.default.mark(function t(){return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield([0,0],"t0",1);case 1:return t.delegateYield([1,0],"t1",2);case 2:return t.delegateYield([0,1],"t2",3);case 3:case"end":return t.stop()}},t,this)})},{key:"ellipseTexCoord",value:u.default.mark(function t(e){var n,r,a;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield([.5,.5],"t0",1);case 1:n=2*Math.PI/e,r=0;case 3:if(!(r<e)){t.next=9;break}return a=n*r,t.delegateYield([.5+Math.cos(a+Math.PI)/2,.5+Math.sin(a+Math.PI)/2],"t1",6);case 6:r++,t.next=3;break;case 9:case"end":return t.stop()}},t,this)})},{key:"planeTexCoord",value:u.default.mark(function t(e){var n,r,a,o;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=0;case 1:if(!(n<e+1)){t.next=11;break}r=0;case 3:if(!(r<e+1)){t.next=8;break}return t.delegateYield([r/e,n/e],"t0",5);case 5:r++,t.next=3;break;case 8:n++,t.next=1;break;case 11:a=0;case 12:if(!(a<e+1)){t.next=22;break}o=0;case 14:if(!(o<e+1)){t.next=19;break}return t.delegateYield([o/e,a/e],"t1",16);case 16:o++,t.next=14;break;case 19:a++,t.next=12;break;case 22:case"end":return t.stop()}},t,this)})},{key:"cylinderTexCoord",value:u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.ellipseTexCoord(n),"t0",1);case 1:return e.delegateYield(t.ellipseTexCoord(n),"t1",2);case 2:r=1/n,a=0;case 4:if(!(a<n)){e.next=12;break}return e.delegateYield([r*a,0],"t2",6);case 6:return e.delegateYield([r*(a+1),0],"t3",7);case 7:return e.delegateYield([r*(a+1),1],"t4",8);case 8:return e.delegateYield([r*a,1],"t5",9);case 9:a++,e.next=4;break;case 12:case"end":return e.stop()}},e,this)})},{key:"coneTexCoord",value:u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.ellipseTexCoord(n),"t0",1);case 1:r=Math.PI/2/n,a=0;case 3:if(!(a<n)){e.next=11;break}return o=-r*a,e.delegateYield([0,0],"t1",6);case 6:return e.delegateYield([Math.cos(o-r),Math.sin(o-r)],"t2",7);case 7:return e.delegateYield([Math.cos(o),Math.sin(o)],"t3",8);case 8:a++,e.next=3;break;case 11:case"end":return e.stop()}},e,this)})},{key:"triangleIndex",value:u.default.mark(function t(e){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.delegateYield([n,n+2,n+1],"t0",2);case 2:case"end":return t.stop()}},t,this)})},{key:"quadIndex",value:u.default.mark(function t(e){var n;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e,t.delegateYield([n,n+2,n+1,n,n+3,n+2],"t0",2);case 2:case"end":return t.stop()}},t,this)})},{key:"cubeIndex",value:u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.quadSize(),a=0;case 2:if(!(a<6)){e.next=7;break}return e.delegateYield(t.quadIndex(n+r*a),"t0",4);case 4:a++,e.next=2;break;case 7:case"end":return e.stop()}},e,this)})},{key:"sphereIndex",value:u.default.mark(function t(e,n,r){var a,o,i,s,l,f,c;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=function(t,n){return e+(r+1)*n+2+t},o=e,i=e+1,s=0;case 4:if(!(s<r)){t.next=14;break}return t.next=7,o;case 7:return t.next=9,a(s,0);case 9:return t.next=11,a(s+1,0);case 11:s++,t.next=4;break;case 14:l=0;case 15:if(!(l<n-1)){t.next=36;break}f=0;case 17:if(!(f<r)){t.next=33;break}return t.next=20,a(f,l);case 20:return t.next=22,a(f,l+1);case 22:return t.next=24,a(f+1,l);case 24:return t.next=26,a(f,l+1);case 26:return t.next=28,a(f+1,l+1);case 28:return t.next=30,a(f+1,l);case 30:f++,t.next=17;break;case 33:l++,t.next=15;break;case 36:c=0;case 37:if(!(c<r)){t.next=47;break}return t.next=40,i;case 40:return t.next=42,a(c+1,n-1);case 42:return t.next=44,a(c,n-1);case 44:c++,t.next=37;break;case 47:case"end":return t.stop()}},t,this)})},{key:"cylinderIndex",value:u.default.mark(function e(n,r){var a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ellipseSize(r),o=t.quadSize(),e.delegateYield(t.ellipseIndex(n,r),"t0",3);case 3:return e.delegateYield(t.ellipseIndex(n+a,r),"t1",4);case 4:i=0;case 5:if(!(i<r)){e.next=10;break}return e.delegateYield(t.quadIndex(n+2*a+o*i),"t2",7);case 7:i++,e.next=5;break;case 10:case"end":return e.stop()}},e,this)})},{key:"coneIndex",value:u.default.mark(function e(n,r){var a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.ellipseSize(r),o=t.triangleSize(),e.delegateYield(t.ellipseIndex(n,r),"t0",3);case 3:i=0;case 4:if(!(i<r)){e.next=9;break}return e.delegateYield(t.triangleIndex(n+a+i*o),"t1",6);case 6:i++,e.next=4;break;case 9:case"end":return e.stop()}},e,this)})},{key:"planeIndex",value:u.default.mark(function e(n,r){var a,o,i,s,l,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n,o=t.planeSize(r)/2,i=0;case 3:if(!(i<r)){e.next=15;break}s=0;case 5:if(!(s<r)){e.next=12;break}return a=n+s+i*(r+1),e.delegateYield([a,a+r+2,a+1],"t0",8);case 8:return e.delegateYield([a,a+r+1,a+r+2],"t1",9);case 9:s++,e.next=5;break;case 12:i++,e.next=3;break;case 15:l=0;case 16:if(!(l<r)){e.next=28;break}f=0;case 18:if(!(f<r)){e.next=25;break}return a=n+f+l*(r+1)+o,e.delegateYield([a,a+1,a+r+2],"t2",21);case 21:return e.delegateYield([a,a+r+2,a+r+1],"t3",22);case 22:f++,e.next=18;break;case 25:l++,e.next=16;break;case 28:case"end":return e.stop()}},e,this)})},{key:"ellipseIndex",value:u.default.mark(function t(e,n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<n-1)){t.next=6;break}return t.delegateYield([e,e+1+r,e+2+r],"t0",3);case 3:r++,t.next=1;break;case 6:return t.delegateYield([e,e+n,e+1],"t1",7);case 7:case"end":return t.stop()}},t,this)})},{key:"quadSize",value:function(){return 4}},{key:"triangleSize",value:function(){return 3}},{key:"cubeSize",value:function(){return 6*t.quadSize()}},{key:"sphereSize",value:function(t,e){return 2+t*(e+1)}},{key:"cylinderSize",value:function(e){return 2*t.ellipseSize(e)+e*t.quadSize()}},{key:"coneSize",value:function(e){return t.ellipseSize(e)+e*t.triangleSize()}},{key:"planeSize",value:function(t){return(t+1)*(t+1)*2}},{key:"ellipseSize",value:function(t){return t+1}}]),t}();e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(150),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(239),c=r(f),d=n(221),h=r(d),v=function(){function t(){(0,u.default)(this,t)}return(0,l.default)(t,null,[{key:"build",value:function(t,e){var n={},r={};for(var a in e.verticies){var o=4,i=e.verticies[a],u=0;for(var s in i.size){if(r[s])throw new Error("Attribute variable name was dupelicated");var l=i.size[s];r[s]={size:l,offset:u*o,bufferName:a,type:i.type?i.type:WebGLRenderingContext.FLOAT,stride:0},u+=l}for(var f in i.size)r[f].stride=u*o;var d=new Array(u*i.count),v=i.getGenerators(),p=[],m=[],y=v.beforeEach?v.beforeEach():void 0;for(var g in i.size)if("beforeEach"!==g){var _=v[g];p.push(_()),m.push(i.size[g])}for(var M=0,b=0;b<i.count;b++){if(y&&y.next().done)throw new Error("before each was ended before reaching count.");for(var x=0;x<p.length;x++)for(var w=p[x],S=0;S<m[x];S++){var E=w.next();if(E.done)throw new Error("Generator function finished before reaching specified count");d[M]=E.value,M++}}n[a]=new c.default(t,WebGLRenderingContext.ARRAY_BUFFER,i.usage?i.usage:WebGLRenderingContext.STATIC_DRAW),n[a].update(new Float32Array(d))}return new h.default(n,r,this._generateIndicies(t,e.indicies))}},{key:"_generateIndicies",value:function(t,e){var n={};for(var r in e){var a=[],i=e[r],u=!0,s=!1,l=void 0;try{for(var f,d=(0,o.default)(i.generator());!(u=(f=d.next()).done);u=!0){var h=f.value;a.push(h)}}catch(t){s=!0,l=t}finally{try{!u&&d.return&&d.return()}finally{if(s)throw l}}var v=this._getIndexType(a.length),p=new c.default(t,WebGLRenderingContext.ELEMENT_ARRAY_BUFFER,WebGLRenderingContext.STATIC_DRAW);p.update(new v.ctor(a)),n[r]={count:a.length,index:p,type:v.format,byteSize:v.byteSize,topology:i.topology?i.topology:WebGLRenderingContext.TRIANGLES}}return n}},{key:"_getIndexType",value:function(t){var e=WebGLRenderingContext.UNSIGNED_INT,n=Uint32Array,r=4;if(t<256)e=WebGLRenderingContext.UNSIGNED_BYTE,n=Uint8Array,r=1;else if(t<65535)e=WebGLRenderingContext.UNSIGNED_SHORT,n=Uint16Array,r=2;else if(t>=4294967296)throw new Error("Too many index of geometry!");return{format:e,ctor:n,byteSize:r}}}]),t}();e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(43),o=r(a),i=n(48),u=r(i),s=n(49),l=r(s),f=n(53),c=r(f),d=n(116),h=r(d),v=n(88),p=r(v),m=n(143),y=r(m),g=function(t){function e(t,n,r){(0,u.default)(this,e);var a=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this,t));return a.target=n,a.usage=r,a.buffer=t.createBuffer(),a}return(0,p.default)(e,t),(0,l.default)(e,[{key:"update",value:function(t,e){this.bind(),e?(this.valid||this.gl.bufferData(this.target,t+e.byteLength,this.usage),this.gl.bufferSubData(this.target,t,e)):"number"==typeof t?this.gl.bufferData(this.target,t,this.usage):this.gl.bufferData(this.target,t,this.usage),this.valid=!0}},{key:"bind",value:function(){this.gl.bindBuffer(this.target,this.buffer)}},{key:"destroy",value:function(){(0,h.default)(e.prototype.__proto__||(0,o.default)(e.prototype),"destroy",this).call(this),this.gl.deleteBuffer(this.buffer)}}]),e}(y.default);e.default=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48),o=r(a),i=n(49),u=r(i),s=n(166),l=r(s),f=n(241),c=r(f),d=n(242),h=r(d),v=n(243),p=r(v),m=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"register",value:function(){l.default.addSORTMaterial("unlit",c.default),l.default.addSORTMaterial("unlit-texture",p.default),l.default.addSORTMaterial("unlit-color",h.default)}}]),t}();e.default=m},function(t,e){t.exports='@Pass\nFS_PREC(mediump,float)\nvarying vec2 vTexCoord;\n#ifdef VS\nattribute vec3 position;\nattribute vec2 texCoord;\nuniform mat4 _matPVM;\nvoid main()\n{\n  gl_Position = _matPVM * vec4(position,1.0);\n  vTexCoord = texCoord;\n}\n#endif\n#ifdef FS\n@{type:"color",default:"white"}\nuniform vec4 color;\n@{usedFlag:"_textureUsed"}\nuniform sampler2D texture;\nuniform bool _textureUsed;\nvoid main(void)\n{\n  if(_textureUsed){\n    gl_FragColor = color * texture2D(texture,vTexCoord);\n  }else{\n    gl_FragColor = color;\n }\n}\n#endif\n'},function(t,e){t.exports='@Pass\nFS_PREC(mediump,float)\nvarying vec2 vTexCoord;\n#ifdef VS\nattribute vec3 position;\nattribute vec2 texCoord;\nuniform mat4 _matPVM;\nvoid main()\n{\n  gl_Position = _matPVM * vec4(position,1.0);\n  vTexCoord = texCoord;\n}\n#endif\n#ifdef FS\n@{type:"color",default:"white"}\nuniform vec4 color;\nvoid main(void)\n{\n    gl_FragColor = color;\n}\n#endif\n'},function(t,e){t.exports="@Pass\nFS_PREC(mediump,float)\nvarying vec2 vTexCoord;\n#ifdef VS\nattribute vec3 position;\nattribute vec2 texCoord;\nuniform mat4 _matPVM;\nvoid main()\n{\n  gl_Position = _matPVM * vec4(position,1.0);\n  vTexCoord = texCoord;\n}\n#endif\n#ifdef FS\nuniform sampler2D texture;\nvoid main(void)\n{\n  gl_FragColor = texture2D(texture,vTexCoord);\n}\n#endif\n"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(96),u=r(i),s=n(240),l=r(s),f=n(236),c=r(f),d=n(136),h=r(d),v=n(135),p=r(v),m=n(139),y=r(m),g=n(141),_=r(g),M=n(146),b=r(M),x=n(147),w=r(x),S=n(149),E=r(S),I=n(153),F=r(I),k=n(154),D=r(k),A=n(155),C=r(A),P=n(164),O=r(P),R=n(165),T=r(R),N=n(185),L=r(N),j=n(186),z=r(j),q=n(187),V=r(q),B=n(189),Y=r(B),G=n(191),W=r(G),U=n(192),X=r(U),Z=n(194),$=r(Z),H=n(196),Q=r(H),J=n(140),K=r(J),tt=n(197),et=r(tt),nt=n(198),rt=r(nt),at=n(199),ot=r(at),it=n(204),ut=r(it),st=n(206),lt=r(st),ft=n(207),ct=r(ft),dt=n(214),ht=r(dt),vt=n(216),pt=r(vt),mt=n(217),yt=r(mt),gt=n(219),_t=r(gt),Mt=n(220),bt=r(Mt),xt=n(222),wt=r(xt),St=n(229),Et=r(St),It=n(223),Ft=r(It),kt=n(224),Dt=r(kt),At=n(225),Ct=r(At),Pt=n(226),Ot=r(Pt),Rt=n(227),Tt=r(Rt),Nt=n(228),Lt=r(Nt),jt=n(231),zt=r(jt),qt=n(232),Vt=r(qt),Bt=n(233),Yt=r(Bt),Gt=n(234),Wt=r(Gt),Ut=function(t,e,n,r){return new(n||(n=u.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})};e.default=function(){h.default.register(function(){return Ut(void 0,void 0,void 0,o.default.mark(function t(){var e;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=h.default.ns("HTTP://GRIMOIRE.GL/NS/DEFAULT"),h.default.registerComponent(e("AssetLoadingManager"),p.default),h.default.registerComponent(e("Camera"),y.default),h.default.registerComponent(e("CanvasInitializer"),_.default),h.default.registerComponent(e("Fullscreen"),b.default),h.default.registerComponent(e("Geometry"),w.default),h.default.registerComponent(e("GeometryRegistory"),E.default),h.default.registerComponent(e("HTMLBinder"),F.default),h.default.registerComponent(e("LoopManager"),D.default),h.default.registerComponent(e("Material"),C.default),h.default.registerComponent(e("MaterialContainer"),O.default),h.default.registerComponent(e("MaterialImporter"),T.default),h.default.registerComponent(e("MaterialManager"),L.default),h.default.registerComponent(e("MeshRenderer"),z.default),h.default.registerComponent(e("MouseCameraControl"),V.default),h.default.registerComponent(e("RenderBuffer"),Y.default),h.default.registerComponent(e("Renderer"),W.default),h.default.registerComponent(e("RendererManager"),X.default),h.default.registerComponent(e("RenderQuad"),$.default),h.default.registerComponent(e("RenderScene"),Q.default),h.default.registerComponent(e("Scene"),K.default),h.default.registerComponent(e("TextureBuffer"),et.default),h.default.registerComponent(e("Texture"),rt.default),h.default.registerComponent(e("Transform"),ot.default),h.default.registerConverter(e("Angle2D"),ut.default),h.default.registerConverter(e("Boolean"),lt.default),h.default.registerConverter(e("CanvasSize"),ct.default),h.default.registerConverter(e("Color3"),ht.default),h.default.registerConverter(e("Color4"),pt.default),h.default.registerConverter(e("Component"),yt.default),h.default.registerConverter(e("Enum"),_t.default),h.default.registerConverter(e("Geometry"),bt.default),h.default.registerConverter(e("Material"),wt.default),h.default.registerConverter(e("Texture"),Et.default),h.default.registerConverter(e("NumberArray"),Ft.default),h.default.registerConverter(e("Number"),Dt.default),h.default.registerConverter(e("Object"),Ct.default),h.default.registerConverter(e("Rotation3"),Ot.default),h.default.registerConverter(e("StringArray"),Tt.default),h.default.registerConverter(e("String"),Lt.default),h.default.registerConverter(e("Texture2D"),Et.default),h.default.registerConverter(e("Vector2"),zt.default),h.default.registerConverter(e("Vector3"),Vt.default),h.default.registerConverter(e("Vector4"),Yt.default),h.default.registerConverter(e("Viewport"),Wt.default),h.default.registerNode("goml",["CanvasInitializer","LoopManager","AssetLoadingManager","GeometryRegistory","MaterialManager","RendererManager","Fullscreen"]),h.default.registerNode("renderer",["Renderer"]),h.default.registerNode("scene",["Scene"]),h.default.registerNode("camera",["Transform","Camera"]),h.default.registerNode("empty",[]),h.default.registerNode("object",["Transform"]),h.default.registerNode("geometry",["Geometry"]),h.default.registerNode("texture",["Texture"]),h.default.registerNode("mesh",["Transform","MaterialContainer","MeshRenderer"]),h.default.registerNode("material",["Material"]),h.default.registerNode("import-material",["MaterialImporter"]),h.default.registerNode("texture-buffer",["TextureBuffer"]),h.default.registerNode("render-buffer",["RenderBuffer"]),h.default.registerNode("render-scene",["MaterialContainer","RenderScene"],{material:null}),h.default.registerNode("render-quad",["MaterialContainer","RenderQuad"],{material:null}),c.default.register(),l.default.register();case 62:case"end":return t.stop()}},t,this)}))})}}])})},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(38),u=r(i),s=n(104),l=r(s),f=n(105),c=r(f),d=n(107),h=r(d),v=n(108),p=r(v),m=n(110),y=r(m),g=n(109),_=r(g),M=n(111),b=r(M),x=n(112),w=r(x),S=n(113),E=r(S),I=n(114),F=r(I),k=n(44),D=r(k),A=n(106),C=r(A),P=n(115),O=r(P),R=n(93),T=r(R),N=n(116),L=r(N),j={AABB:u.default,Color3:l.default,Color4:c.default,Colors:h.default,Matrix:p.default,MatrixArray:y.default,MatrixBase:_.default,PointList:b.default,Quaternion:w.default,Rectangle:E.default,Vector2:F.default,Vector3:D.default,Vector4:C.default,VectorArray:O.default,VectorBase:T.default},z=(0,L.default)();(0,o.default)(z||{},j),window.GrimoireJS.lib.math=j,e.default=z},function(t,e,n){t.exports={default:n(2),__esModule:!0}},function(t,e,n){n(3),t.exports=n(6).Object.assign},function(t,e,n){var r=n(4);r(r.S+r.F,"Object",{assign:n(19)})},function(t,e,n){var r=n(5),a=n(6),o=n(7),i=n(9),u="prototype",s=function(t,e,n){var l,f,c,d=t&s.F,h=t&s.G,v=t&s.S,p=t&s.P,m=t&s.B,y=t&s.W,g=h?a:a[e]||(a[e]={}),_=g[u],M=h?r:v?r[e]:(r[e]||{})[u];h&&(n=e);for(l in n)f=!d&&M&&void 0!==M[l],f&&l in g||(c=f?M[l]:n[l],g[l]=h&&"function"!=typeof M[l]?n[l]:m&&f?o(c,r):y&&M[l]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[u]=t[u],e}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((g.virtual||(g.virtual={}))[l]=c,t&s.R&&_&&!_[l]&&i(_,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(8);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(10),a=n(18);t.exports=n(14)?function(t,e,n){return r.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(11),a=n(13),o=n(17),i=Object.defineProperty;e.f=n(14)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),a)try{return i(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(12);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(14)&&!n(15)(function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7;
}}).a})},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(12),a=n(5).document,o=r(a)&&r(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},function(t,e,n){var r=n(12);t.exports=function(t,e){if(!r(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!r(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(20),a=n(35),o=n(36),i=n(37),u=n(24),s=Object.assign;t.exports=!s||n(15)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=i(t),s=arguments.length,l=1,f=a.f,c=o.f;s>l;)for(var d,h=u(arguments[l++]),v=f?r(h).concat(f(h)):r(h),p=v.length,m=0;p>m;)c.call(h,d=v[m++])&&(n[d]=h[d]);return n}:s},function(t,e,n){var r=n(21),a=n(34);t.exports=Object.keys||function(t){return r(t,a)}},function(t,e,n){var r=n(22),a=n(23),o=n(27)(!1),i=n(31)("IE_PROTO");t.exports=function(t,e){var n,u=a(t),s=0,l=[];for(n in u)n!=i&&r(u,n)&&l.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~o(l,n)||l.push(n));return l}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(24),a=n(26);t.exports=function(t){return r(a(t))}},function(t,e,n){var r=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(23),a=n(28),o=n(30);t.exports=function(t){return function(e,n,i){var u,s=r(e),l=a(s.length),f=o(i,l);if(t&&n!=n){for(;l>f;)if(u=s[f++],u!=u)return!0}else for(;l>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(29),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(29),a=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?a(t+e,0):o(t,e)}},function(t,e,n){var r=n(32)("keys"),a=n(33);t.exports=function(t){return r[t]||(r[t]=a(t))}},function(t,e,n){var r=n(5),a="__core-js_shared__",o=r[a]||(r[a]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(26);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(44),l=r(s),f=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,[{key:"expandAABB",value:function(t){null==this.pointLBF&&(this.pointLBF=l.default.copy(t),this.pointRTN=l.default.copy(t)),this.pointLBF=l.default.min(t,this.pointLBF),this.pointRTN=l.default.max(t,this.pointRTN)}},{key:"clear",value:function(){this.pointLBF=null,this.pointRTN=null}},{key:"toMathematicaCuboid",value:function(){return"Cuboid["+this.pointLBF.toMathematicaString()+","+this.pointRTN.toMathematicaString()+"]"}},{key:"Width",get:function(){return Math.abs(this.pointLBF.X-this.pointRTN.X)}},{key:"Height",get:function(){return Math.abs(this.pointLBF.Y-this.pointRTN.Y)}},{key:"Distance",get:function(){return Math.abs(this.pointLBF.Z-this.pointRTN.Z)}}]),t}();e.default=f},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(41),o=r(a);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={default:n(42),__esModule:!0}},function(t,e,n){n(43);var r=n(6).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(4);r(r.S+r.F*!n(14),"Object",{defineProperty:n(10).f})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(45),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(50),c=r(f),d=n(85),h=r(d),v=n(93),p=r(v),m=n(94),y=function(t){function e(t,n,r){(0,u.default)(this,e);var a=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return"undefined"==typeof n?(a.rawElements=t,(0,c.default)(a)):(a.rawElements=[t,n,r],a)}return(0,h.default)(e,t),(0,l.default)(e,[{key:"toMathematicaString",value:function(){return"{"+this.X+","+this.Y+","+this.Z+"}"}},{key:"normalizeThis",value:function(){return e.normalize(this)}},{key:"dotWith",value:function(t){return e.dot(this,t)}},{key:"addWith",value:function(t){return e.add(this,t)}},{key:"subtractWith",value:function(t){return e.subtract(this,t)}},{key:"multiplyWith",value:function(t){return e.multiply(t,this)}},{key:"negateThis",value:function(){return e.negate(this)}},{key:"equalWith",value:function(t){return e.equals(this,t)}},{key:"nearlyEqualWith",value:function(t){return e.nearlyEquals(this,t)}},{key:"crossWith",value:function(t){return e.cross(this,t)}},{key:"toString",value:function(){return"("+this.X+", "+this.Y+", "+this.Z+")"}},{key:"toDisplayString",value:function(){return"Vector3"+this.toString()}},{key:"normalized",get:function(){return this.multiplyWith(1/this.magnitude)}},{key:"X",get:function(){return this.rawElements[0]},set:function(t){this.rawElements[0]=+t}},{key:"Y",get:function(){return this.rawElements[1]},set:function(t){this.rawElements[1]=+t}},{key:"Z",get:function(){return this.rawElements[2]},set:function(t){this.rawElements[2]=+t}},{key:"ElementCount",get:function(){return 3}}],[{key:"copy",value:function(t){return new e(t.X,t.Y,t.Z)}},{key:"dot",value:function(t,e){return m.vec3.dot(t.rawElements,e.rawElements)}},{key:"add",value:function(t,n){var r=m.vec3.create();return new e(m.vec3.add(r,t.rawElements,n.rawElements))}},{key:"subtract",value:function(t,n){var r=m.vec3.create();return new e(m.vec3.sub(r,t.rawElements,n.rawElements))}},{key:"multiply",value:function(t,n){var r=m.vec3.create();return new e(m.vec3.scale(r,n.rawElements,t))}},{key:"negate",value:function(t){return e.multiply(-1,t)}},{key:"equals",value:function(t,e){return p.default.__elementEquals(t,e)}},{key:"nearlyEquals",value:function(t,e){return p.default.__nearlyElementEquals(t,e)}},{key:"normalize",value:function(t){var n=m.vec3.create();return new e(m.vec3.normalize(n,t.rawElements))}},{key:"cross",value:function(t,n){var r=m.vec3.create();return new e(m.vec3.cross(r,t.rawElements,n.rawElements))}},{key:"min",value:function(t,n){return new e(p.default.__fromGenerationFunction(t,n,function(t,e,n){return Math.min(e.rawElements[t],n.rawElements[t])}))}},{key:"max",value:function(t,n){return new e(p.default.__fromGenerationFunction(t,n,function(t,e,n){return Math.max(e.rawElements[t],n.rawElements[t])}))}},{key:"angle",value:function(t,n){return Math.acos(e.dot(t.normalized,n.normalized))}},{key:"parse",value:function(t){var n=p.default.__parse(t),r=n.elements;if(r&&(1===r.length||3===r.length)){var a=void 0;return a=1===r.length?new e(r[0],r[0],r[0]):new e(r[0],r[1],r[2]),n.needNormalize&&(a=a.normalizeThis()),n.coefficient&&(a=a.multiplyWith(n.coefficient)),n.needNegate&&(a=a.negateThis()),a}}},{key:"XUnit",get:function(){return new e(1,0,0)}},{key:"YUnit",get:function(){return new e(0,1,0)}},{key:"ZUnit",get:function(){return new e(0,0,1)}},{key:"Zero",get:function(){return new e(0,0,0)}},{key:"One",get:function(){return new e(1,1,1)}}]),e}(p.default);e.default=y},function(t,e,n){t.exports={default:n(46),__esModule:!0}},function(t,e,n){n(47),t.exports=n(6).Object.getPrototypeOf},function(t,e,n){var r=n(37),a=n(48);n(49)("getPrototypeOf",function(){return function(t){return a(r(t))}})},function(t,e,n){var r=n(22),a=n(37),o=n(31)("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},function(t,e,n){var r=n(4),a=n(6),o=n(15);t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],i={};i[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(51),o=r(a);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(52),o=r(a),i=n(71),u=r(i),s="function"==typeof u.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?"symbol":typeof t};e.default="function"==typeof u.default&&"symbol"===s(o.default)?function(t){return"undefined"==typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?"symbol":"undefined"==typeof t?"undefined":s(t)}},function(t,e,n){t.exports={default:n(53),__esModule:!0}},function(t,e,n){n(54),n(66),t.exports=n(70).f("iterator")},function(t,e,n){"use strict";var r=n(55)(!0);n(56)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(29),a=n(26);t.exports=function(t){return function(e,n){var o,i,u=String(a(e)),s=r(n),l=u.length;return s<0||s>=l?t?"":void 0:(o=u.charCodeAt(s),o<55296||o>56319||s+1===l||(i=u.charCodeAt(s+1))<56320||i>57343?t?u.charAt(s):o:t?u.slice(s,s+2):(o-55296<<10)+(i-56320)+65536)}}},function(t,e,n){"use strict";var r=n(57),a=n(4),o=n(58),i=n(9),u=n(22),s=n(59),l=n(60),f=n(64),c=n(48),d=n(65)("iterator"),h=!([].keys&&"next"in[].keys()),v="@@iterator",p="keys",m="values",y=function(){return this};t.exports=function(t,e,n,g,_,M,b){l(n,e,g);var x,w,S,E=function(t){if(!h&&t in D)return D[t];switch(t){case p:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},I=e+" Iterator",F=_==m,k=!1,D=t.prototype,A=D[d]||D[v]||_&&D[_],C=A||E(_),P=_?F?E("entries"):C:void 0,O="Array"==e?D.entries||A:A;if(O&&(S=c(O.call(new t)),S!==Object.prototype&&(f(S,I,!0),r||u(S,d)||i(S,d,y))),F&&A&&A.name!==m&&(k=!0,C=function(){return A.call(this)}),r&&!b||!h&&!k&&D[d]||i(D,d,C),s[e]=C,s[I]=y,_)if(x={values:F?C:E(m),keys:M?C:E(p),entries:P},b)for(w in x)w in D||o(D,w,x[w]);else a(a.P+a.F*(h||k),e,x);return x}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(9)},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(61),a=n(18),o=n(64),i={};n(9)(i,n(65)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(i,{next:a(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(11),a=n(62),o=n(34),i=n(31)("IE_PROTO"),u=function(){},s="prototype",l=function(){var t,e=n(16)("iframe"),r=o.length,a="<",i=">";for(e.style.display="none",n(63).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(a+"script"+i+"document.F=Object"+a+"/script"+i),t.close(),l=t.F;r--;)delete l[s][o[r]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[s]=r(t),n=new u,u[s]=null,n[i]=t):n=l(),void 0===e?n:a(n,e)}},function(t,e,n){var r=n(10),a=n(11),o=n(20);t.exports=n(14)?Object.defineProperties:function(t,e){a(t);for(var n,i=o(e),u=i.length,s=0;u>s;)r.f(t,n=i[s++],e[n]);return t}},function(t,e,n){t.exports=n(5).document&&document.documentElement},function(t,e,n){var r=n(10).f,a=n(22),o=n(65)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(32)("wks"),a=n(33),o=n(5).Symbol,i="function"==typeof o,u=t.exports=function(t){return r[t]||(r[t]=i&&o[t]||(i?o:a)("Symbol."+t))};u.store=r},function(t,e,n){n(67);for(var r=n(5),a=n(9),o=n(59),i=n(65)("toStringTag"),u=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],s=0;s<5;s++){var l=u[s],f=r[l],c=f&&f.prototype;c&&!c[i]&&a(c,i,l),o[l]=o.Array}},function(t,e,n){"use strict";var r=n(68),a=n(69),o=n(59),i=n(23);t.exports=n(56)(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,n):"values"==e?a(0,t[n]):a(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){e.f=n(65)},function(t,e,n){t.exports={default:n(72),__esModule:!0}},function(t,e,n){n(73),n(82),n(83),n(84),t.exports=n(6).Symbol},function(t,e,n){"use strict";var r=n(5),a=n(22),o=n(14),i=n(4),u=n(58),s=n(74).KEY,l=n(15),f=n(32),c=n(64),d=n(33),h=n(65),v=n(70),p=n(75),m=n(76),y=n(77),g=n(78),_=n(11),M=n(23),b=n(17),x=n(18),w=n(61),S=n(79),E=n(81),I=n(10),F=n(20),k=E.f,D=I.f,A=S.f,C=r.Symbol,P=r.JSON,O=P&&P.stringify,R="prototype",T=h("_hidden"),N=h("toPrimitive"),L={}.propertyIsEnumerable,j=f("symbol-registry"),z=f("symbols"),q=f("op-symbols"),V=Object[R],B="function"==typeof C,Y=r.QObject,G=!Y||!Y[R]||!Y[R].findChild,W=o&&l(function(){return 7!=w(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=k(V,e);r&&delete V[e],D(t,e,n),r&&t!==V&&D(V,e,r)}:D,U=function(t){var e=z[t]=w(C[R]);return e._k=t,e},X=B&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},Z=function(t,e,n){return t===V&&Z(q,e,n),_(t),e=b(e,!0),_(n),a(z,e)?(n.enumerable?(a(t,T)&&t[T][e]&&(t[T][e]=!1),n=w(n,{enumerable:x(0,!1)})):(a(t,T)||D(t,T,x(1,{})),t[T][e]=!0),W(t,e,n)):D(t,e,n)},$=function(t,e){_(t);for(var n,r=y(e=M(e)),a=0,o=r.length;o>a;)Z(t,n=r[a++],e[n]);return t},H=function(t,e){return void 0===e?w(t):$(w(t),e)},Q=function(t){var e=L.call(this,t=b(t,!0));return!(this===V&&a(z,t)&&!a(q,t))&&(!(e||!a(this,t)||!a(z,t)||a(this,T)&&this[T][t])||e)},J=function(t,e){if(t=M(t),e=b(e,!0),t!==V||!a(z,e)||a(q,e)){var n=k(t,e);return!n||!a(z,e)||a(t,T)&&t[T][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=A(M(t)),r=[],o=0;n.length>o;)a(z,e=n[o++])||e==T||e==s||r.push(e);return r},tt=function(t){for(var e,n=t===V,r=A(n?q:M(t)),o=[],i=0;r.length>i;)!a(z,e=r[i++])||n&&!a(V,e)||o.push(z[e]);return o};B||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(q,n),a(this,T)&&a(this[T],t)&&(this[T][t]=!1),W(this,t,x(1,n))};return o&&G&&W(V,t,{configurable:!0,set:e}),U(t)},u(C[R],"toString",function(){return this._k}),E.f=J,I.f=Z,n(80).f=S.f=K,n(36).f=Q,n(35).f=tt,o&&!n(57)&&u(V,"propertyIsEnumerable",Q,!0),v.f=function(t){return U(h(t))}),i(i.G+i.W+i.F*!B,{Symbol:C});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)h(et[nt++]);for(var et=F(h.store),nt=0;et.length>nt;)p(et[nt++]);i(i.S+i.F*!B,"Symbol",{for:function(t){return a(j,t+="")?j[t]:j[t]=C(t)},keyFor:function(t){if(X(t))return m(j,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!B,"Object",{create:H,defineProperty:Z,defineProperties:$,getOwnPropertyDescriptor:J,getOwnPropertyNames:K,getOwnPropertySymbols:tt}),P&&i(i.S+i.F*(!B||l(function(){var t=C();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,n,r=[t],a=1;arguments.length>a;)r.push(arguments[a++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,O.apply(P,r)}}}),C[R][N]||n(9)(C[R],N,C[R].valueOf),c(C,"Symbol"),c(Math,"Math",!0),c(r.JSON,"JSON",!0)},function(t,e,n){var r=n(33)("meta"),a=n(12),o=n(22),i=n(10).f,u=0,s=Object.isExtensible||function(){return!0},l=!n(15)(function(){return s(Object.preventExtensions({}))}),f=function(t){i(t,r,{value:{i:"O"+ ++u,w:{}}})},c=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[r].i},d=function(t,e){if(!o(t,r)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[r].w},h=function(t){return l&&v.NEED&&s(t)&&!o(t,r)&&f(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:c,getWeak:d,onFreeze:h}},function(t,e,n){var r=n(5),a=n(6),o=n(57),i=n(70),u=n(10).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:i.f(t)})}},function(t,e,n){var r=n(20),a=n(23);t.exports=function(t,e){for(var n,o=a(t),i=r(o),u=i.length,s=0;u>s;)if(o[n=i[s++]]===e)return n}},function(t,e,n){var r=n(20),a=n(35),o=n(36);t.exports=function(t){var e=r(t),n=a.f;if(n)for(var i,u=n(t),s=o.f,l=0;u.length>l;)s.call(t,i=u[l++])&&e.push(i);return e}},function(t,e,n){var r=n(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(23),a=n(80).f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return a(t)}catch(t){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==o.call(t)?u(t):a(r(t))}},function(t,e,n){var r=n(21),a=n(34).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},function(t,e,n){var r=n(36),a=n(18),o=n(23),i=n(17),u=n(22),s=n(13),l=Object.getOwnPropertyDescriptor;e.f=n(14)?l:function(t,e){if(t=o(t),e=i(e,!0),s)try{return l(t,e)}catch(t){}if(u(t,e))return a(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,n){n(75)("asyncIterator")},function(t,e,n){n(75)("observable")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(86),o=r(a),i=n(90),u=r(i),s=n(51),l=r(s);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,l.default)(e)));t.prototype=(0,u.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){t.exports={default:n(87),__esModule:!0}},function(t,e,n){n(88),t.exports=n(6).Object.setPrototypeOf},function(t,e,n){var r=n(4);r(r.S,"Object",{setPrototypeOf:n(89).set})},function(t,e,n){var r=n(12),a=n(11),o=function(t,e){if(a(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(7)(Function.call,n(81).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(91),__esModule:!0}},function(t,e,n){n(92);var r=n(6).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(4);r(r.S,"Object",{create:n(61)})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=function(){function t(){(0,o.default)(this,t),this._magnitudeSquaredCache=-1,this._magnitudeCache=-1}return(0,u.default)(t,[{key:"magnitude",get:function(){return this._magnitudeCache<0&&(this._magnitudeCache=Math.sqrt(this.sqrMagnitude)),this._magnitudeCache}},{key:"ElementCount",get:function(){return 0}},{key:"sqrMagnitude",get:function(){if(this._magnitudeSquaredCache<0){for(var t=0,e=this.rawElements,n=0;n<this.ElementCount;n++)t+=e[n]*e[n];this._magnitudeSquaredCache=t}return this._magnitudeSquaredCache}}],[{key:"__elementEquals",value:function(t,e){if(t.ElementCount!==e.ElementCount)return!1;for(var n=0;n<t.ElementCount;n++)if(t.rawElements[n]!==e.rawElements[n])return!1;return!0}},{key:"__nearlyElementEquals",value:function(t,e){if(t.ElementCount!==e.ElementCount)return!1;for(var n=.01,r=0;r<t.ElementCount;r++)if(Math.abs(t.rawElements[r]-e.rawElements[r])>n)return!1;return!0}},{key:"__fromGenerationFunction",value:function(t,e,n){for(var r=new Float32Array(t.ElementCount),a=0;a<r.length;a++)r[a]=n(a,t,e);return r}},{key:"__parse",value:function(e){var n=/(-?)([\d,E\+\-\.]+)?(n)?\(([-\d,E\+\.\s]+)\)/g,r=n.exec(e);if(r){if(!r[4])throw new Error("The specified string '"+e+"' is not containing braced vector.");return{needNormalize:"n"===r[3],needNegate:"-"===r[1],coefficient:parseFloat(r[2]),elements:t._parseRawVector(r[4])}}return{needNormalize:!1,needNegate:!1,elements:t._parseRawVector(e),coefficient:void 0}}},{key:"_parseRawVector",value:function(t){for(var e=t.split(","),n=new Array(e.length),r=0;r<e.length;r++)if(n[r]=parseFloat(e[r]),isNaN(n[r]))throw new Error("Unexpected vector string "+t);return n}}]),t}();e.default=s},function(t,e,n){e.glMatrix=n(95),e.mat2=n(96),e.mat2d=n(97),e.mat3=n(98),e.mat4=n(99),e.quat=n(100),e.vec2=n(103),e.vec3=n(101),e.vec4=n(102)},function(t,e){var n={};n.EPSILON=1e-6,n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,n.RANDOM=Math.random,n.ENABLE_SIMD=!1;const r=new Function("return this")();n.SIMD_AVAILABLE=n.ARRAY_TYPE===r.Float32Array&&"SIMD"in r,n.USE_SIMD=n.ENABLE_SIMD&&n.SIMD_AVAILABLE,n.setMatrixArrayType=function(t){n.ARRAY_TYPE=t};var a=Math.PI/180;n.toRadian=function(t){return t*a},n.equals=function(t,e){return Math.abs(t-e)<=n.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))},t.exports=n},function(t,e,n){var r=n(95),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},a.fromValues=function(t,e,n,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o},a.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},a.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=n*i,t):null},a.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},a.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],l=n[2],f=n[3];return t[0]=r*u+o*s,t[1]=a*u+i*s,t[2]=r*l+o*f,t[3]=a*l+i*f,t},a.mul=a.multiply,a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=a*s+i*u,t[2]=r*-u+o*s,t[3]=a*-u+i*s,t},a.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=a*u,t[2]=o*s,t[3]=i*s,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},a.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},a.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},a.sub=a.subtract,a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1],l=e[2],f=e[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))},a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},t.exports=a},function(t,e,n){var r=n(95),a={};a.create=function(){var t=new r.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},a.fromValues=function(t,e,n,a,o,i){var u=new r.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=a,u[4]=o,u[5]=i,u},a.set=function(t,e,n,r,a,o,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=n*o-r*a;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-a*s,t[3]=n*s,t[4]=(a*u-o*i)*s,t[5]=(r*i-n*u)*s,t):null},a.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=n[0],f=n[1],c=n[2],d=n[3],h=n[4],v=n[5];return t[0]=r*l+o*f,t[1]=a*l+i*f,t[2]=r*c+o*d,t[3]=a*c+i*d,t[4]=r*h+o*v+u,t[5]=a*h+i*v+s,t},a.mul=a.multiply,a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=Math.sin(n),f=Math.cos(n);return t[0]=r*f+o*l,t[1]=a*f+i*l,t[2]=r*-l+o*f,t[3]=a*-l+i*f,t[4]=u,t[5]=s,t},a.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=n[0],f=n[1];return t[0]=r*l,t[1]=a*l,t[2]=o*f,t[3]=i*f,t[4]=u,t[5]=s,t},a.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=n[0],f=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*l+o*f+u,t[5]=a*l+i*f+s,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},a.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=e[0],f=e[1],c=e[2],d=e[3],h=e[4],v=e[5];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(a-f)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-c)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))&&Math.abs(i-d)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-h)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))&&Math.abs(s-v)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))},t.exports=a},function(t,e,n){var r=n(95),a={};a.create=function(){var t=new r.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},a.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromValues=function(t,e,n,a,o,i,u,s,l){var f=new r.ARRAY_TYPE(9);return f[0]=t,f[1]=e,f[2]=n,f[3]=a,f[4]=o,f[5]=i,f[6]=u,f[7]=s,f[8]=l,f},a.set=function(t,e,n,r,a,o,i,u,s,l){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},a.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8],c=f*i-u*l,d=-f*o+u*s,h=l*o-i*s,v=n*c+r*d+a*h;return v?(v=1/v,t[0]=c*v,t[1]=(-f*r+a*l)*v,t[2]=(u*r-a*i)*v,t[3]=d*v,t[4]=(f*n-a*s)*v,t[5]=(-u*n+a*o)*v,t[6]=h*v,t[7]=(-l*n+r*s)*v,t[8]=(i*n-r*o)*v,t):null},a.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8];return t[0]=i*f-u*l,t[1]=a*l-r*f,t[2]=r*u-a*i,t[3]=u*s-o*f,t[4]=n*f-a*s,t[5]=a*o-n*u,t[6]=o*l-i*s,t[7]=r*s-n*l,t[8]=n*i-r*o,t},a.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8];return e*(l*o-i*s)+n*(-l*a+i*u)+r*(s*a-o*u)},a.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=n[0],h=n[1],v=n[2],p=n[3],m=n[4],y=n[5],g=n[6],_=n[7],M=n[8];return t[0]=d*r+h*i+v*l,t[1]=d*a+h*u+v*f,t[2]=d*o+h*s+v*c,t[3]=p*r+m*i+y*l,t[4]=p*a+m*u+y*f,t[5]=p*o+m*s+y*c,t[6]=g*r+_*i+M*l,t[7]=g*a+_*u+M*f,t[8]=g*o+_*s+M*c,t},a.mul=a.multiply,a.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=n[0],h=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=d*r+h*i+l,t[7]=d*a+h*u+f,t[8]=d*o+h*s+c,t},a.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=Math.sin(n),h=Math.cos(n);return t[0]=h*r+d*i,t[1]=h*a+d*u,t[2]=h*o+d*s,t[3]=h*i-d*r,t[4]=h*u-d*a,t[5]=h*s-d*o,t[6]=l,t[7]=f,t[8]=c,t},a.scale=function(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},a.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},a.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},a.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,l=n*i,f=r*i,c=r*u,d=a*i,h=a*u,v=a*s,p=o*i,m=o*u,y=o*s;return t[0]=1-c-v,t[3]=f-y,t[6]=d+m,t[1]=f+y,t[4]=1-l-v,t[7]=h-p,t[2]=d-m,t[5]=h+p,t[8]=1-l-c,t},a.normalFromMat4=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8],c=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],y=e[15],g=n*u-r*i,_=n*s-a*i,M=n*l-o*i,b=r*s-a*u,x=r*l-o*u,w=a*l-o*s,S=f*p-c*v,E=f*m-d*v,I=f*y-h*v,F=c*m-d*p,k=c*y-h*p,D=d*y-h*m,A=g*D-_*k+M*F+b*I-x*E+w*S;
return A?(A=1/A,t[0]=(u*D-s*k+l*F)*A,t[1]=(s*I-i*D-l*E)*A,t[2]=(i*k-u*I+l*S)*A,t[3]=(a*k-r*D-o*F)*A,t[4]=(n*D-a*I+o*E)*A,t[5]=(r*I-n*k-o*S)*A,t[6]=(p*w-m*x+y*b)*A,t[7]=(m*M-v*w-y*_)*A,t[8]=(v*x-p*M+y*g)*A,t):null},a.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],f=t[7],c=t[8],d=e[0],h=e[1],v=e[2],p=e[3],m=e[4],y=e[5],g=t[6],_=e[7],M=e[8];return Math.abs(n-d)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(a-h)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-v)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-m)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(s-y)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(l-g)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(f-_)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(c-M)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(M))},t.exports=a},function(t,e,n){var r=n(95),a={scalar:{},SIMD:{}};a.create=function(){var t=new r.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.clone=function(t){var e=new r.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.fromValues=function(t,e,n,a,o,i,u,s,l,f,c,d,h,v,p,m){var y=new r.ARRAY_TYPE(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=a,y[4]=o,y[5]=i,y[6]=u,y[7]=s,y[8]=l,y[9]=f,y[10]=c,y[11]=d,y[12]=h,y[13]=v,y[14]=p,y[15]=m,y},a.set=function(t,e,n,r,a,o,i,u,s,l,f,c,d,h,v,p,m){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=s,t[8]=l,t[9]=f,t[10]=c,t[11]=d,t[12]=h,t[13]=v,t[14]=p,t[15]=m,t},a.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.scalar.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},a.SIMD.transpose=function(t,e){var n,r,a,o,i,u,s,l,f,c;return n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),i=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),s=SIMD.Float32x4.shuffle(i,u,0,2,4,6),l=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,0,s),SIMD.Float32x4.store(t,4,l),i=SIMD.Float32x4.shuffle(n,r,2,3,6,7),u=SIMD.Float32x4.shuffle(a,o,2,3,6,7),f=SIMD.Float32x4.shuffle(i,u,0,2,4,6),c=SIMD.Float32x4.shuffle(i,u,1,3,5,7),SIMD.Float32x4.store(t,8,f),SIMD.Float32x4.store(t,12,c),t},a.transpose=r.USE_SIMD?a.SIMD.transpose:a.scalar.transpose,a.scalar.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8],c=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],y=e[15],g=n*u-r*i,_=n*s-a*i,M=n*l-o*i,b=r*s-a*u,x=r*l-o*u,w=a*l-o*s,S=f*p-c*v,E=f*m-d*v,I=f*y-h*v,F=c*m-d*p,k=c*y-h*p,D=d*y-h*m,A=g*D-_*k+M*F+b*I-x*E+w*S;return A?(A=1/A,t[0]=(u*D-s*k+l*F)*A,t[1]=(a*k-r*D-o*F)*A,t[2]=(p*w-m*x+y*b)*A,t[3]=(d*x-c*w-h*b)*A,t[4]=(s*I-i*D-l*E)*A,t[5]=(n*D-a*I+o*E)*A,t[6]=(m*M-v*w-y*_)*A,t[7]=(f*w-d*M+h*_)*A,t[8]=(i*k-u*I+l*S)*A,t[9]=(r*I-n*k-o*S)*A,t[10]=(v*x-p*M+y*g)*A,t[11]=(c*M-f*x-h*g)*A,t[12]=(u*E-i*F-s*S)*A,t[13]=(n*F-r*E+a*S)*A,t[14]=(p*_-v*b-m*g)*A,t[15]=(f*b-c*_+d*g)*A,t):null},a.SIMD.invert=function(t,e){var n,r,a,o,i,u,s,l,f,c,d=SIMD.Float32x4.load(e,0),h=SIMD.Float32x4.load(e,4),v=SIMD.Float32x4.load(e,8),p=SIMD.Float32x4.load(e,12);return i=SIMD.Float32x4.shuffle(d,h,0,1,4,5),r=SIMD.Float32x4.shuffle(v,p,0,1,4,5),n=SIMD.Float32x4.shuffle(i,r,0,2,4,6),r=SIMD.Float32x4.shuffle(r,i,1,3,5,7),i=SIMD.Float32x4.shuffle(d,h,2,3,6,7),o=SIMD.Float32x4.shuffle(v,p,2,3,6,7),a=SIMD.Float32x4.shuffle(i,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,i,1,3,5,7),i=SIMD.Float32x4.mul(a,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.mul(r,i),s=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,i),u),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),i=SIMD.Float32x4.mul(r,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),u),f=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,i)),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),i=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(r,2,3,0,1),o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),a=SIMD.Float32x4.swizzle(a,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),u),l=SIMD.Float32x4.mul(n,i),i=SIMD.Float32x4.swizzle(i,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(a,i)),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,i),l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.mul(n,r),i=SIMD.Float32x4.swizzle(i,1,0,3,2),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),l),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(a,i),f),i=SIMD.Float32x4.swizzle(i,2,3,0,1),l=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,i),l),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(a,i)),i=SIMD.Float32x4.mul(n,o),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(a,i)),l=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),l),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(a,i),s),l=SIMD.Float32x4.sub(l,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.mul(n,a),i=SIMD.Float32x4.swizzle(i,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,i),s),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(r,i)),i=SIMD.Float32x4.swizzle(i,2,3,0,1),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(o,i)),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,i),f),c=SIMD.Float32x4.mul(n,u),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,2,3,0,1),c),c=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(c,1,0,3,2),c),i=SIMD.Float32x4.reciprocalApproximation(c),c=SIMD.Float32x4.sub(SIMD.Float32x4.add(i,i),SIMD.Float32x4.mul(c,SIMD.Float32x4.mul(i,i))),(c=SIMD.Float32x4.swizzle(c,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(c,u)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(c,s)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(c,l)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(c,f)),t):null},a.invert=r.USE_SIMD?a.SIMD.invert:a.scalar.invert,a.scalar.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],s=e[6],l=e[7],f=e[8],c=e[9],d=e[10],h=e[11],v=e[12],p=e[13],m=e[14],y=e[15];return t[0]=u*(d*y-h*m)-c*(s*y-l*m)+p*(s*h-l*d),t[1]=-(r*(d*y-h*m)-c*(a*y-o*m)+p*(a*h-o*d)),t[2]=r*(s*y-l*m)-u*(a*y-o*m)+p*(a*l-o*s),t[3]=-(r*(s*h-l*d)-u*(a*h-o*d)+c*(a*l-o*s)),t[4]=-(i*(d*y-h*m)-f*(s*y-l*m)+v*(s*h-l*d)),t[5]=n*(d*y-h*m)-f*(a*y-o*m)+v*(a*h-o*d),t[6]=-(n*(s*y-l*m)-i*(a*y-o*m)+v*(a*l-o*s)),t[7]=n*(s*h-l*d)-i*(a*h-o*d)+f*(a*l-o*s),t[8]=i*(c*y-h*p)-f*(u*y-l*p)+v*(u*h-l*c),t[9]=-(n*(c*y-h*p)-f*(r*y-o*p)+v*(r*h-o*c)),t[10]=n*(u*y-l*p)-i*(r*y-o*p)+v*(r*l-o*u),t[11]=-(n*(u*h-l*c)-i*(r*h-o*c)+f*(r*l-o*u)),t[12]=-(i*(c*m-d*p)-f*(u*m-s*p)+v*(u*d-s*c)),t[13]=n*(c*m-d*p)-f*(r*m-a*p)+v*(r*d-a*c),t[14]=-(n*(u*m-s*p)-i*(r*m-a*p)+v*(r*s-a*u)),t[15]=n*(u*d-s*c)-i*(r*d-a*c)+f*(r*s-a*u),t},a.SIMD.adjoint=function(t,e){var n,r,a,o,i,u,s,l,f,c,d,h,v;return n=SIMD.Float32x4.load(e,0),r=SIMD.Float32x4.load(e,4),a=SIMD.Float32x4.load(e,8),o=SIMD.Float32x4.load(e,12),f=SIMD.Float32x4.shuffle(n,r,0,1,4,5),u=SIMD.Float32x4.shuffle(a,o,0,1,4,5),i=SIMD.Float32x4.shuffle(f,u,0,2,4,6),u=SIMD.Float32x4.shuffle(u,f,1,3,5,7),f=SIMD.Float32x4.shuffle(n,r,2,3,6,7),l=SIMD.Float32x4.shuffle(a,o,2,3,6,7),s=SIMD.Float32x4.shuffle(f,l,0,2,4,6),l=SIMD.Float32x4.shuffle(l,f,1,3,5,7),f=SIMD.Float32x4.mul(s,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.mul(u,f),d=SIMD.Float32x4.mul(i,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,f),c),d=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,f),d),d=SIMD.Float32x4.swizzle(d,2,3,0,1),f=SIMD.Float32x4.mul(u,s),f=SIMD.Float32x4.swizzle(f,1,0,3,2),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),c),v=SIMD.Float32x4.mul(i,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(l,f)),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,f),v),v=SIMD.Float32x4.swizzle(v,2,3,0,1),f=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,3,0,1),l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),s=SIMD.Float32x4.swizzle(s,2,3,0,1),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),c),h=SIMD.Float32x4.mul(i,f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(s,f)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,f),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),f=SIMD.Float32x4.mul(i,u),f=SIMD.Float32x4.swizzle(f,1,0,3,2),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),h),v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,f),v),f=SIMD.Float32x4.swizzle(f,2,3,0,1),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,f),h),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(s,f)),f=SIMD.Float32x4.mul(i,l),f=SIMD.Float32x4.swizzle(f,1,0,3,2),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(s,f)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,f),h),f=SIMD.Float32x4.swizzle(f,2,3,0,1),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,f),d),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,f)),f=SIMD.Float32x4.mul(i,s),f=SIMD.Float32x4.swizzle(f,1,0,3,2),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(l,f),d),v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(u,f)),f=SIMD.Float32x4.swizzle(f,2,3,0,1),d=SIMD.Float32x4.sub(d,SIMD.Float32x4.mul(l,f)),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,f),v),SIMD.Float32x4.store(t,0,c),SIMD.Float32x4.store(t,4,d),SIMD.Float32x4.store(t,8,h),SIMD.Float32x4.store(t,12,v),t},a.adjoint=r.USE_SIMD?a.SIMD.adjoint:a.scalar.adjoint,a.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],s=t[7],l=t[8],f=t[9],c=t[10],d=t[11],h=t[12],v=t[13],p=t[14],m=t[15],y=e*i-n*o,g=e*u-r*o,_=e*s-a*o,M=n*u-r*i,b=n*s-a*i,x=r*s-a*u,w=l*v-f*h,S=l*p-c*h,E=l*m-d*h,I=f*p-c*v,F=f*m-d*v,k=c*m-d*p;return y*k-g*F+_*I+M*E-b*S+x*w},a.SIMD.multiply=function(t,e,n){var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4.load(n,0),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),i))));SIMD.Float32x4.store(t,0,s);var l=SIMD.Float32x4.load(n,4),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(l,3,3,3,3),i))));SIMD.Float32x4.store(t,4,f);var c=SIMD.Float32x4.load(n,8),d=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(c,3,3,3,3),i))));SIMD.Float32x4.store(t,8,d);var h=SIMD.Float32x4.load(n,12),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,0,0,0,0),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,1,1,1,1),a),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(h,3,3,3,3),i))));return SIMD.Float32x4.store(t,12,v),t},a.scalar.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=e[9],h=e[10],v=e[11],p=e[12],m=e[13],y=e[14],g=e[15],_=n[0],M=n[1],b=n[2],x=n[3];return t[0]=_*r+M*u+b*c+x*p,t[1]=_*a+M*s+b*d+x*m,t[2]=_*o+M*l+b*h+x*y,t[3]=_*i+M*f+b*v+x*g,_=n[4],M=n[5],b=n[6],x=n[7],t[4]=_*r+M*u+b*c+x*p,t[5]=_*a+M*s+b*d+x*m,t[6]=_*o+M*l+b*h+x*y,t[7]=_*i+M*f+b*v+x*g,_=n[8],M=n[9],b=n[10],x=n[11],t[8]=_*r+M*u+b*c+x*p,t[9]=_*a+M*s+b*d+x*m,t[10]=_*o+M*l+b*h+x*y,t[11]=_*i+M*f+b*v+x*g,_=n[12],M=n[13],b=n[14],x=n[15],t[12]=_*r+M*u+b*c+x*p,t[13]=_*a+M*s+b*d+x*m,t[14]=_*o+M*l+b*h+x*y,t[15]=_*i+M*f+b*v+x*g,t},a.multiply=r.USE_SIMD?a.SIMD.multiply:a.scalar.multiply,a.mul=a.multiply,a.scalar.translate=function(t,e,n){var r,a,o,i,u,s,l,f,c,d,h,v,p=n[0],m=n[1],y=n[2];return e===t?(t[12]=e[0]*p+e[4]*m+e[8]*y+e[12],t[13]=e[1]*p+e[5]*m+e[9]*y+e[13],t[14]=e[2]*p+e[6]*m+e[10]*y+e[14],t[15]=e[3]*p+e[7]*m+e[11]*y+e[15]):(r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],s=e[5],l=e[6],f=e[7],c=e[8],d=e[9],h=e[10],v=e[11],t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=s,t[6]=l,t[7]=f,t[8]=c,t[9]=d,t[10]=h,t[11]=v,t[12]=r*p+u*m+c*y+e[12],t[13]=a*p+s*m+d*y+e[13],t[14]=o*p+l*m+h*y+e[14],t[15]=i*p+f*m+v*y+e[15]),t},a.SIMD.translate=function(t,e,n){var r=SIMD.Float32x4.load(e,0),a=SIMD.Float32x4.load(e,4),o=SIMD.Float32x4.load(e,8),i=SIMD.Float32x4.load(e,12),u=SIMD.Float32x4(n[0],n[1],n[2],0);e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11]),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(u,0,0,0,0)),a=SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(u,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(u,2,2,2,2));var s=SIMD.Float32x4.add(r,SIMD.Float32x4.add(a,SIMD.Float32x4.add(o,i)));return SIMD.Float32x4.store(t,12,s),t},a.translate=r.USE_SIMD?a.SIMD.translate:a.scalar.translate,a.scalar.scale=function(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.SIMD.scale=function(t,e,n){var r,a,o,i=SIMD.Float32x4(n[0],n[1],n[2],0);return r=SIMD.Float32x4.load(e,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,0,0,0,0))),a=SIMD.Float32x4.load(e,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(a,SIMD.Float32x4.swizzle(i,1,1,1,1))),o=SIMD.Float32x4.load(e,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2))),t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},a.scale=r.USE_SIMD?a.SIMD.scale:a.scalar.scale,a.rotate=function(t,e,n,a){var o,i,u,s,l,f,c,d,h,v,p,m,y,g,_,M,b,x,w,S,E,I,F,k,D=a[0],A=a[1],C=a[2],P=Math.sqrt(D*D+A*A+C*C);return Math.abs(P)<r.EPSILON?null:(P=1/P,D*=P,A*=P,C*=P,o=Math.sin(n),i=Math.cos(n),u=1-i,s=e[0],l=e[1],f=e[2],c=e[3],d=e[4],h=e[5],v=e[6],p=e[7],m=e[8],y=e[9],g=e[10],_=e[11],M=D*D*u+i,b=A*D*u+C*o,x=C*D*u-A*o,w=D*A*u-C*o,S=A*A*u+i,E=C*A*u+D*o,I=D*C*u+A*o,F=A*C*u-D*o,k=C*C*u+i,t[0]=s*M+d*b+m*x,t[1]=l*M+h*b+y*x,t[2]=f*M+v*b+g*x,t[3]=c*M+p*b+_*x,t[4]=s*w+d*S+m*E,t[5]=l*w+h*S+y*E,t[6]=f*w+v*S+g*E,t[7]=c*w+p*S+_*E,t[8]=s*I+d*F+m*k,t[9]=l*I+h*F+y*k,t[10]=f*I+v*F+g*k,t[11]=c*I+p*F+_*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},a.scalar.rotateX=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],s=e[7],l=e[8],f=e[9],c=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+l*r,t[5]=i*a+f*r,t[6]=u*a+c*r,t[7]=s*a+d*r,t[8]=l*a-o*r,t[9]=f*a-i*r,t[10]=c*a-u*r,t[11]=d*a-s*r,t},a.SIMD.rotateX=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,4),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateX=r.USE_SIMD?a.SIMD.rotateX:a.scalar.rotateX,a.scalar.rotateY=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],l=e[8],f=e[9],c=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-l*r,t[1]=i*a-f*r,t[2]=u*a-c*r,t[3]=s*a-d*r,t[8]=o*r+l*a,t[9]=i*r+f*a,t[10]=u*r+c*a,t[11]=s*r+d*a,t},a.SIMD.rotateY=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(i,a))),t},a.rotateY=r.USE_SIMD?a.SIMD.rotateY:a.scalar.rotateY,a.scalar.rotateZ=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],s=e[3],l=e[4],f=e[5],c=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+l*r,t[1]=i*a+f*r,t[2]=u*a+c*r,t[3]=s*a+d*r,t[4]=l*a-o*r,t[5]=f*a-i*r,t[6]=c*a-u*r,t[7]=d*a-s*r,t},a.SIMD.rotateZ=function(t,e,n){var r=SIMD.Float32x4.splat(Math.sin(n)),a=SIMD.Float32x4.splat(Math.cos(n));e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]);var o=SIMD.Float32x4.load(e,0),i=SIMD.Float32x4.load(e,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,a),SIMD.Float32x4.mul(i,r))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,a),SIMD.Float32x4.mul(o,r))),t},a.rotateZ=r.USE_SIMD?a.SIMD.rotateZ:a.scalar.rotateZ,a.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},a.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotation=function(t,e,n){var a,o,i,u=n[0],s=n[1],l=n[2],f=Math.sqrt(u*u+s*s+l*l);return Math.abs(f)<r.EPSILON?null:(f=1/f,u*=f,s*=f,l*=f,a=Math.sin(e),o=Math.cos(e),i=1-o,t[0]=u*u*i+o,t[1]=s*u*i+l*a,t[2]=l*u*i-s*a,t[3]=0,t[4]=u*s*i-l*a,t[5]=s*s*i+o,t[6]=l*s*i+u*a,t[7]=0,t[8]=u*l*i+s*a,t[9]=s*l*i-u*a,t[10]=l*l*i+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},a.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.fromRotationTranslation=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,s=a+a,l=o+o,f=r*u,c=r*s,d=r*l,h=a*s,v=a*l,p=o*l,m=i*u,y=i*s,g=i*l;return t[0]=1-(h+p),t[1]=c+g,t[2]=d-y,t[3]=0,t[4]=c-g,t[5]=1-(f+p),t[6]=v+m,t[7]=0,t[8]=d+y,t[9]=v-m,t[10]=1-(f+h),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},a.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},a.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},a.fromRotationTranslationScale=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],s=a+a,l=o+o,f=i+i,c=a*s,d=a*l,h=a*f,v=o*l,p=o*f,m=i*f,y=u*s,g=u*l,_=u*f,M=r[0],b=r[1],x=r[2];return t[0]=(1-(v+m))*M,t[1]=(d+_)*M,t[2]=(h-g)*M,t[3]=0,t[4]=(d-_)*b,t[5]=(1-(c+m))*b,t[6]=(p+y)*b,t[7]=0,t[8]=(h+g)*x,t[9]=(p-y)*x,t[10]=(1-(c+v))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},a.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],s=e[3],l=o+o,f=i+i,c=u+u,d=o*l,h=o*f,v=o*c,p=i*f,m=i*c,y=u*c,g=s*l,_=s*f,M=s*c,b=r[0],x=r[1],w=r[2],S=a[0],E=a[1],I=a[2];return t[0]=(1-(p+y))*b,t[1]=(h+M)*b,t[2]=(v-_)*b,t[3]=0,t[4]=(h-M)*x,t[5]=(1-(d+y))*x,t[6]=(m+g)*x,t[7]=0,t[8]=(v+_)*w,t[9]=(m-g)*w,t[10]=(1-(d+p))*w,t[11]=0,t[12]=n[0]+S-(t[0]*S+t[4]*E+t[8]*I),t[13]=n[1]+E-(t[1]*S+t[5]*E+t[9]*I),t[14]=n[2]+I-(t[2]*S+t[6]*E+t[10]*I),t[15]=1,t},a.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,s=a+a,l=n*i,f=r*i,c=r*u,d=a*i,h=a*u,v=a*s,p=o*i,m=o*u,y=o*s;return t[0]=1-c-v,t[1]=f+y,t[2]=d-m,t[3]=0,t[4]=f-y,t[5]=1-l-v,t[6]=h+p,t[7]=0,t[8]=d+m,t[9]=h-p,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},a.frustum=function(t,e,n,r,a,o,i){var u=1/(n-e),s=1/(a-r),l=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*s,t[10]=(i+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*l,t[15]=0,t},a.perspective=function(t,e,n,r,a){var o=1/Math.tan(e/2),i=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},a.perspectiveFromFieldOfView=function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(i+u),l=2/(a+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-((i-u)*s*.5),t[9]=(a-o)*l*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},a.ortho=function(t,e,n,r,a,o,i){var u=1/(e-n),s=1/(r-a),l=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*s,t[14]=(i+o)*l,t[15]=1,t},a.lookAt=function(t,e,n,o){var i,u,s,l,f,c,d,h,v,p,m=e[0],y=e[1],g=e[2],_=o[0],M=o[1],b=o[2],x=n[0],w=n[1],S=n[2];return Math.abs(m-x)<r.EPSILON&&Math.abs(y-w)<r.EPSILON&&Math.abs(g-S)<r.EPSILON?a.identity(t):(d=m-x,h=y-w,v=g-S,p=1/Math.sqrt(d*d+h*h+v*v),d*=p,h*=p,v*=p,i=M*v-b*h,u=b*d-_*v,s=_*h-M*d,p=Math.sqrt(i*i+u*u+s*s),p?(p=1/p,i*=p,u*=p,s*=p):(i=0,u=0,s=0),l=h*s-v*u,f=v*i-d*s,c=d*u-h*i,p=Math.sqrt(l*l+f*f+c*c),p?(p=1/p,l*=p,f*=p,c*=p):(l=0,f=0,c=0),t[0]=i,t[1]=l,t[2]=d,t[3]=0,t[4]=u,t[5]=f,t[6]=h,t[7]=0,t[8]=s,t[9]=c,t[10]=v,t[11]=0,t[12]=-(i*m+u*y+s*g),t[13]=-(l*m+f*y+c*g),t[14]=-(d*m+h*y+v*g),t[15]=1,t)},a.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},a.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t},a.sub=a.subtract,a.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},a.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=t[4],s=t[5],l=t[6],f=t[7],c=t[8],d=t[9],h=t[10],v=t[11],p=t[12],m=t[13],y=t[14],g=t[15],_=e[0],M=e[1],b=e[2],x=e[3],w=e[4],S=e[5],E=e[6],I=e[7],F=e[8],k=e[9],D=e[10],A=e[11],C=e[12],P=e[13],O=e[14],R=e[15];return Math.abs(n-_)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(a-M)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-b)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(i-x)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-w)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(s-S)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(l-E)<=r.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(f-I)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(c-F)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(F))&&Math.abs(d-k)<=r.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(h-D)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(D))&&Math.abs(v-A)<=r.EPSILON*Math.max(1,Math.abs(v),Math.abs(A))&&Math.abs(p-C)<=r.EPSILON*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(m-P)<=r.EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(y-O)<=r.EPSILON*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(g-R)<=r.EPSILON*Math.max(1,Math.abs(g),Math.abs(R))},t.exports=a},function(t,e,n){var r=n(95),a=n(98),o=n(101),i=n(102),u={};u.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.rotationTo=function(){var t=o.create(),e=o.fromValues(1,0,0),n=o.fromValues(0,1,0);return function(r,a,i){var s=o.dot(a,i);return s<-.999999?(o.cross(t,e,a),o.length(t)<1e-6&&o.cross(t,n,a),o.normalize(t,t),u.setAxisAngle(r,t,Math.PI),r):s>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(o.cross(t,a,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+s,u.normalize(r,r))}}(),u.setAxes=function(){var t=a.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],u.normalize(e,u.fromMat3(e,t))}}(),u.clone=i.clone,u.fromValues=i.fromValues,u.copy=i.copy,u.set=i.set,u.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},u.setAxisAngle=function(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t},u.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},u.add=i.add,u.multiply=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],s=n[1],l=n[2],f=n[3];return t[0]=r*f+i*u+a*l-o*s,t[1]=a*f+i*s+o*u-r*l,t[2]=o*f+i*l+r*s-a*u,t[3]=i*f-r*u-a*s-o*l,t},u.mul=u.multiply,u.scale=i.scale,u.rotateX=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=a*s+o*u,t[2]=o*s-a*u,t[3]=i*s-r*u,t},u.rotateY=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=a*s+i*u,t[2]=o*s+r*u,t[3]=i*s-a*u,t},u.rotateZ=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=a*s-r*u,t[2]=o*s+i*u,t[3]=i*s-o*u,t},u.calculateW=function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},u.dot=i.dot,u.lerp=i.lerp,u.slerp=function(t,e,n,r){var a,o,i,u,s,l=e[0],f=e[1],c=e[2],d=e[3],h=n[0],v=n[1],p=n[2],m=n[3];return o=l*h+f*v+c*p+d*m,o<0&&(o=-o,h=-h,v=-v,p=-p,m=-m),1-o>1e-6?(a=Math.acos(o),i=Math.sin(a),u=Math.sin((1-r)*a)/i,s=Math.sin(r*a)/i):(u=1-r,s=r),t[0]=u*l+s*h,t[1]=u*f+s*v,t[2]=u*c+s*p,t[3]=u*d+s*m,t},u.sqlerp=function(){var t=u.create(),e=u.create();return function(n,r,a,o,i,s){return u.slerp(t,r,i,s),u.slerp(e,a,o,s),u.slerp(n,t,e,2*s*(1-s)),n}}(),u.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},u.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},u.length=i.length,u.len=u.length,u.squaredLength=i.squaredLength,u.sqrLen=u.squaredLength,u.normalize=i.normalize,u.fromMat3=function(t,e){var n,r=e[0]+e[4]+e[8];if(r>0)n=Math.sqrt(r+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;n=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*n,n=.5/n,t[3]=(e[3*o+i]-e[3*i+o])*n,t[o]=(e[3*o+a]+e[3*a+o])*n,t[i]=(e[3*i+a]+e[3*a+i])*n}return t},u.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},u.exactEquals=i.exactEquals,u.equals=i.equals,t.exports=u},function(t,e,n){var r=n(95),a={};a.create=function(){var t=new r.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},a.fromValues=function(t,e,n){var a=new r.ARRAY_TYPE(3);return a[0]=t,a[1]=e,a[2]=n,a},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},a.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],r=t[2];
return Math.sqrt(e*e+n*n+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},a.cross=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2];return t[0]=a*s-o*u,t[1]=o*i-r*s,t[2]=r*u-a*i,t},a.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t},a.hermite=function(t,e,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,s=i*(o-2)+o,l=i*(o-1),f=i*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*l+a[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*l+a[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*l+a[2]*f,t},a.bezier=function(t,e,n,r,a,o){var i=1-o,u=i*i,s=o*o,l=u*i,f=3*o*u,c=3*s*i,d=s*o;return t[0]=e[0]*l+n[0]*f+r[0]*c+a[0]*d,t[1]=e[1]*l+n[1]*f+r[1]*c+a[1]*d,t[2]=e[2]*l+n[2]*f+r[2]*c+a[2]*d,t},a.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,a=2*r.RANDOM()-1,o=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=a*e,t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,t},a.transformMat3=function(t,e,n){var r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t},a.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],l=n[3],f=l*r+u*o-s*a,c=l*a+s*r-i*o,d=l*o+i*a-u*r,h=-i*r-u*a-s*o;return t[0]=f*l+h*-i+c*-s-d*-u,t[1]=c*l+h*-u+d*-i-f*-s,t[2]=d*l+h*-s+f*-u-c*-i,t},a.rotateX=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateY=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.rotateZ=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,s;for(n||(n=3),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),a.angle=function(t,e){var n=a.fromValues(t[0],t[1],t[2]),r=a.fromValues(e[0],e[1],e[2]);a.normalize(n,n),a.normalize(r,r);var o=a.dot(n,r);return o>1?0:Math.acos(o)},a.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=e[0],u=e[1],s=e[2];return Math.abs(n-i)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(o-s)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))},t.exports=a},function(t,e,n){var r=n(95),a={};a.create=function(){var t=new r.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,n,a){var o=new r.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=a,o},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t},a.random=function(t,e){return e=e||1,t[0]=r.RANDOM(),t[1]=r.RANDOM(),t[2]=r.RANDOM(),t[3]=r.RANDOM(),a.normalize(t,t),a.scale(t,t,e),t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t},a.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],s=n[2],l=n[3],f=l*r+u*o-s*a,c=l*a+s*r-i*o,d=l*o+i*a-u*r,h=-i*r-u*a-s*o;return t[0]=f*l+h*-i+c*-s-d*-u,t[1]=c*l+h*-u+d*-i-f*-s,t[2]=d*l+h*-s+f*-u-c*-i,t[3]=e[3],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,s;for(n||(n=4),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},a.equals=function(t,e){var n=t[0],a=t[1],o=t[2],i=t[3],u=e[0],s=e[1],l=e[2],f=e[3];return Math.abs(n-u)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(a-s)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(o-l)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-f)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))},t.exports=a},function(t,e,n){var r=n(95),a={};a.create=function(){var t=new r.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,n){return t[0]=e,t[1]=n,t},a.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},a.subtract=function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},a.sub=a.subtract,a.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},a.mul=a.multiply,a.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},a.div=a.divide,a.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},a.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},a.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},a.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},a.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},a.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},a.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},a.distance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)},a.dist=a.distance,a.squaredDistance=function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},a.len=a.length,a.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},a.normalize=function(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},a.lerp=function(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t},a.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},a.transformMat2=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},a.transformMat2d=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},a.transformMat3=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},a.transformMat4=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},a.forEach=function(){var t=a.create();return function(e,n,r,a,o,i){var u,s;for(n||(n=2),r||(r=0),s=a?Math.min(a*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},a.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},a.equals=function(t,e){var n=t[0],a=t[1],o=e[0],i=e[1];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-i)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))},t.exports=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(45),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(50),c=r(f),d=n(85),h=r(d),v=n(93),p=r(v),m=n(44),y=r(m),g=n(105),_=r(g),M=n(106),b=r(M),x=n(107),w=r(x),S=function(t){function e(t,n,r){(0,u.default)(this,e);var a=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return a.rawElements=[t,n,r],a}return(0,h.default)(e,t),(0,l.default)(e,[{key:"toVector",value:function(){return new y.default(this.R,this.G,this.B)}},{key:"toVector4",value:function(t){return"undefined"==typeof t&&(t=0),new b.default(this.R,this.G,this.B,t)}},{key:"equalWith",value:function(t){return e.equals(t,this)}},{key:"toString",value:function(){return"rgb("+Math.round(255*this.R)+", "+Math.round(255*this.G)+", "+Math.round(255*this.B)+")"}},{key:"toDisplayString",value:function(){var t="#";return t+=Math.round(255*this.R).toString(16).toUpperCase(),t+=Math.round(255*this.G).toString(16).toUpperCase(),t+=Math.round(255*this.B).toString(16).toUpperCase(),"Color3("+this.R+", "+this.G+", "+this.B+", "+t+")"}},{key:"R",get:function(){return this.rawElements[0]}},{key:"G",get:function(){return this.rawElements[1]}},{key:"B",get:function(){return this.rawElements[2]}},{key:"ElementCount",get:function(){return 3}}],[{key:"fromColor4",value:function(t){return new e(t.R,t.G,t.B)}},{key:"parse",value:function(t,n){return e.internalParse(t,!0,n)}},{key:"internalParse",value:function(t,n,r){if(n&&w.default[t]){var a=_.default.internalParse(w.default[t],!1,r);return e.fromColor4(a)}var o=void 0;if(n&&(o=t.match(/^#([0-9a-f]{3})$/i))){var i=o[1];return new e(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15)}if(o=t.match(/^#([0-9a-f]{6})$/i)){var u=o[1];return new e(parseInt(u.substr(0,2),16)/255,parseInt(u.substr(2,2),16)/255,parseInt(u.substr(4,2),16)/255)}var s=t.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(s&&n)return new e(parseInt(s[1],10)/255,parseInt(s[2],10)/255,parseInt(s[3],10)/255);if(!r)throw new Error("Unexpected color string"+t)}},{key:"equals",value:function(t,e){return p.default.__elementEquals(t,e)}}]),e}(p.default);e.default=S},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(45),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(50),c=r(f),d=n(85),h=r(d),v=n(93),p=r(v),m=n(106),y=r(m),g=n(107),_=r(g),M=function(t){function e(t,n,r,a){(0,u.default)(this,e);var i=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return i.rawElements=[t,n,r,a],i}return(0,h.default)(e,t),(0,l.default)(e,[{key:"toVector",value:function(){return new y.default(this.R,this.G,this.B,this.A)}},{key:"equalWith",value:function(t){return e.equals(t,this)}},{key:"toString",value:function(){return"rgba("+Math.round(255*this.R)+", "+Math.round(255*this.G)+", "+Math.round(255*this.B)+", "+Math.round(255*this.A)+")"}},{key:"toDisplayString",value:function(){var t="#";return t+=Math.round(255*this.R).toString(16).toUpperCase(),t+=Math.round(255*this.G).toString(16).toUpperCase(),t+=Math.round(255*this.B).toString(16).toUpperCase(),t+=Math.round(255*this.A).toString(16).toUpperCase(),"Color4("+this.R+", "+this.G+", "+this.B+", "+this.A+", "+t+")"}},{key:"R",get:function(){return this.rawElements[0]}},{key:"G",get:function(){return this.rawElements[1]}},{key:"B",get:function(){return this.rawElements[2]}},{key:"A",get:function(){return this.rawElements[3]}},{key:"ElementCount",get:function(){return 4}}],[{key:"internalParse",value:function(t,n,r){if(n&&_.default[t])return e.internalParse(_.default[t],!1);var a=void 0;if(n&&(a=t.match(/^#([0-9a-f]{3})$/i))){var o=a[1];return new e(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,1)}if(n&&(a=t.match(/^#([0-9a-f]{4})$/i))){var i=a[1];return new e(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,parseInt(i.charAt(3),16)/15)}if(a=t.match(/^#([0-9a-f]{6})$/i)){var u=a[1];return new e(parseInt(u.substr(0,2),16)/255,parseInt(u.substr(2,2),16)/255,parseInt(u.substr(4,2),16)/255,1)}if(n&&(a=t.match(/^#([0-9a-f]{8})$/i))){var s=a[1];return new e(parseInt(s.substr(0,2),16)/255,parseInt(s.substr(2,2),16)/255,parseInt(s.substr(4,2),16)/255,parseInt(s.substr(6,2),16)/255)}var l=t.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(l&&n)return new e(parseInt(l[1],10)/255,parseInt(l[2],10)/255,parseInt(l[3],10)/255,1);if(l=t.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\,\s*(\d+)\s*\)$/i),l&&n){var f=parseInt(l[4],10);return f=f<=1?f:f/255,new e(parseInt(l[1],10)/255,parseInt(l[2],10)/255,parseInt(l[3],10)/255,parseInt(l[4],10))}if(!r)throw new Error("Unexpected color string"+t)}},{key:"parse",value:function(t,n){return e.internalParse(t,!0,n)}},{key:"equals",value:function(t,e){return p.default.__elementEquals(t,e)}}]),e}(p.default);e.default=M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(45),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(50),c=r(f),d=n(85),h=r(d),v=n(93),p=r(v),m=n(94),y=function(t){function e(t,n,r,a){(0,u.default)(this,e);var i=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return"undefined"==typeof n?(i.rawElements=t,(0,c.default)(i)):(i.rawElements=[t,n,r,a],i)}return(0,h.default)(e,t),(0,l.default)(e,[{key:"normalizeThis",value:function(){return e.normalize(this)}},{key:"dotWith",value:function(t){return e.dot(this,t)}},{key:"addWith",value:function(t){return e.add(this,t)}},{key:"subtractWith",value:function(t){return e.subtract(this,t)}},{key:"multiplyWith",value:function(t){return e.multiply(t,this)}},{key:"negateThis",value:function(){return e.negate(this)}},{key:"equalWith",value:function(t){return e.equals(this,t)}},{key:"nearlyEqualWith",value:function(t){return e.nearlyEquals(this,t)}},{key:"toString",value:function(){return"("+this.X+", "+this.Y+", "+this.Z+", "+this.W+")"}},{key:"toDisplayString",value:function(){return"Vector4"+this.toString()}},{key:"toMathematicaString",value:function(){return"{"+this.X+","+this.Y+","+this.Z+","+this.W+"}"}},{key:"normalized",get:function(){return this.multiplyWith(1/this.magnitude)}},{key:"X",get:function(){return this.rawElements[0]},set:function(t){this.rawElements[0]=+t}},{key:"Y",get:function(){return this.rawElements[1]},set:function(t){this.rawElements[1]=+t}},{key:"Z",get:function(){return this.rawElements[2]},set:function(t){this.rawElements[2]=+t}},{key:"W",get:function(){return this.rawElements[3]},set:function(t){this.rawElements[3]=+t}},{key:"ElementCount",get:function(){return 4}}],[{key:"copy",value:function(t){return new e(t.X,t.Y,t.Z,t.W)}},{key:"dot",value:function(t,e){return m.vec4.dot(t.rawElements,e.rawElements)}},{key:"add",value:function(t,n){var r=m.vec4.create();return new e(m.vec4.add(r,t.rawElements,n.rawElements))}},{key:"subtract",value:function(t,n){var r=m.vec4.create();return new e(m.vec4.sub(r,t.rawElements,n.rawElements))}},{key:"multiply",value:function(t,n){var r=m.vec4.create();return new e(m.vec4.scale(r,n.rawElements,t))}},{key:"negate",value:function(t){return e.multiply(-1,t)}},{key:"equals",value:function(t,e){return p.default.__elementEquals(t,e)}},{key:"nearlyEquals",value:function(t,e){return p.default.__nearlyElementEquals(t,e)}},{key:"normalize",value:function(t){var n=m.vec4.create();return new e(m.vec4.normalize(n,t.rawElements))}},{key:"min",value:function(t,n){return new e(p.default.__fromGenerationFunction(t,n,function(t,e,n){return Math.min(e.rawElements[t],n.rawElements[t])}))}},{key:"max",value:function(t,n){return new e(p.default.__fromGenerationFunction(t,n,function(t,e,n){return Math.max(e.rawElements[t],n.rawElements[t])}))}},{key:"angle",value:function(t,n){return Math.acos(e.dot(t.normalized,n.normalized))}},{key:"parse",value:function(t){var n=p.default.__parse(t),r=n.elements;if(r&&(1===r.length||4===r.length)){var a=void 0;return a=1===r.length?new e(r[0],r[0],r[0],r[0]):new e(r[0],r[1],r[2],r[3]),n.needNormalize&&(a=a.normalizeThis()),n.coefficient&&(a=a.multiplyWith(n.coefficient)),n.needNegate&&(a=a.negateThis()),a}}},{key:"XUnit",get:function(){return new e(1,0,0,0)}},{key:"YUnit",get:function(){return new e(0,1,0,0)}},{key:"ZUnit",get:function(){return new e(0,0,1,0)}},{key:"WUnit",get:function(){return new e(0,0,0,1)}},{key:"One",get:function(){return new e(1,1,1,1)}},{key:"Zero",get:function(){return new e(0,0,0,0)}}]),e}(p.default);e.default=y},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(45),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(50),c=r(f),d=n(85),h=r(d),v=n(109),p=r(v),m=n(44),y=r(m),g=n(106),_=r(g),M=n(94),b=function(t){function e(t){(0,u.default)(this,e);var n=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return t?n.rawElements=t:n.rawElements=M.mat4.create(),n}return(0,h.default)(e,t),(0,l.default)(e,[{key:"getAt",value:function(t,e){return this.rawElements[4*e+t]}},{key:"setAt",value:function(t,e,n){this.rawElements[4*e+t]=n}},{key:"getBySingleIndex",value:function(t){return this.rawElements[t]}},{key:"getColmun",value:function(t){return new _.default(this.rawElements[4*t],this.rawElements[4*t+1],this.rawElements[4*t+2],this.rawElements[4*t+3])}},{key:"getRow",value:function(t){return new _.default(this.rawElements[t],this.rawElements[t+4],this.rawElements[t+8],this.rawElements[t+12])}},{key:"multiplyWith",value:function(t){return e.multiply(this,t)}},{key:"equalWith",value:function(t){return e.equals(t,this)}},{key:"toString",value:function(){return"|"+this.getBySingleIndex(0)+" "+this.getBySingleIndex(4)+" "+this.getBySingleIndex(8)+" "+this.getBySingleIndex(12)+"|\n\n                 |"+this.getBySingleIndex(1)+" "+this.getBySingleIndex(5)+" "+this.getBySingleIndex(9)+" "+this.getBySingleIndex(13)+"|\n\n                 |"+this.getBySingleIndex(2)+" "+this.getBySingleIndex(6)+" "+this.getBySingleIndex(10)+" "+this.getBySingleIndex(14)+"|\n\n                 |"+this.getBySingleIndex(3)+" "+this.getBySingleIndex(7)+" "+this.getBySingleIndex(11)+" "+this.getBySingleIndex(15)+"|"}},{key:"toMathematicaString",value:function(){return"{{"+this.getBySingleIndex(0)+","+this.getBySingleIndex(4)+","+this.getBySingleIndex(8)+","+this.getBySingleIndex(12)+"},\n                  {"+this.getBySingleIndex(1)+","+this.getBySingleIndex(5)+","+this.getBySingleIndex(9)+","+this.getBySingleIndex(13)+"},\n                  {"+this.getBySingleIndex(2)+","+this.getBySingleIndex(6)+","+this.getBySingleIndex(10)+","+this.getBySingleIndex(14)+"},\n                  {"+this.getBySingleIndex(3)+","+this.getBySingleIndex(7)+","+this.getBySingleIndex(11)+","+this.getBySingleIndex(15)+"}}"}},{key:"ElementCount",get:function(){return 16}},{key:"RowCount",get:function(){return 4}},{key:"ColmunCount",get:function(){return 4}}],[{key:"zero",value:function(){return new e([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}},{key:"identity",value:function(){return new e(M.mat4.create())}},{key:"fromElements",value:function(t,n,r,a,o,i,u,s,l,f,c,d,h,v,p,m){return new e([t,o,l,h,n,i,f,v,r,u,c,p,a,s,d,m])}},{key:"fromFunc",value:function(t){return new e([t(0,0),t(1,0),t(2,0),t(3,0),t(0,1),t(1,1),t(2,1),t(3,1),t(0,2),t(1,2),t(2,2),t(3,2),t(0,3),t(1,3),t(2,3),t(3,3)])}},{key:"equals",value:function(t,n){return e.__elementEquals(t,n)}},{key:"add",value:function(t,n){for(var r=M.mat4.create(),a=0;a<16;a++)r[a]=t.rawElements[a]+n.rawElements[a];return new e(r)}},{key:"subtract",value:function(t,n){return e.add(t,e.negate(n))}},{key:"scalarMultiply",value:function(t,n){var r=M.mat4.create();return M.mat4.multiply(r,[t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,t],n.rawElements),new e(r)}},{key:"multiply",value:function(t,n){var r=M.mat4.create();return new e(M.mat4.mul(r,t.rawElements,n.rawElements))}},{key:"trs",value:function(t,n,r){var a=M.mat4.create(),o=M.mat4.create();return M.mat4.mul(a,M.mat4.translate(a,M.mat4.create(),t.rawElements),M.mat4.fromQuat(o,n.rawElements)),M.mat4.scale(a,a,r.rawElements),new e(a)}},{key:"negate",value:function(t){return this.scalarMultiply(-1,t)}},{key:"transpose",value:function(t){var n=M.mat4.create();return new e(M.mat4.transpose(n,t.rawElements))}},{key:"transformPoint",value:function(t,e){var n=M.vec3.create();return M.vec3.transformMat4(n,e.rawElements,t.rawElements),new y.default(n)}},{key:"transformNormal",value:function(t,e){var n=M.vec4.create(),r=M.vec4.create();return r[0]=e.X,r[1]=e.Y,r[2]=e.Z,r[3]=0,M.vec4.transformMat4(n,r,t.rawElements),new y.default(n[0],n[1],n[2])}},{key:"transform",value:function(t,e){var n=M.vec4.create(),r=M.vec4.create();return r[0]=e.X,r[1]=e.Y,r[2]=e.Z,r[3]=e.W,M.vec4.transformMat4(n,r,t.rawElements),new _.default(n[0],n[1],n[2],n[3])}},{key:"determinant",value:function(t){return M.mat4.determinant(t.rawElements)}},{key:"inverse",value:function(t){var n=M.mat4.create();return new e(M.mat4.invert(n,t.rawElements))}},{key:"translate",value:function(t){var n=M.mat4.create();return M.mat4.translate(n,n,t.rawElements),new e(n)}},{key:"scale",value:function(t){var n=M.mat4.create();return M.mat4.scale(n,n,t.rawElements),new e(n)}},{key:"rotateX",value:function(t){var n=M.mat4.create();return M.mat4.rotateX(n,n,t),new e(n)}},{key:"rotateY",value:function(t){var n=M.mat4.create();return M.mat4.rotateY(n,n,t),new e(n)}},{key:"rotateZ",value:function(t){var n=M.mat4.create();return M.mat4.rotateZ(n,n,t),new e(n)}},{key:"rotationQuaternion",value:function(t){var n=M.quat.create(),r=M.mat4.create();return M.quat.normalize(n,t.rawElements),M.mat4.fromQuat(r,n),new e(r)}},{key:"frustum",value:function(t,n,r,a,o,i){var u=M.mat4.create();return M.mat4.frustum(u,t,n,r,a,o,i),new e(u)}},{key:"ortho",value:function(t,n,r,a,o,i){var u=M.mat4.create();return M.mat4.ortho(u,t,n,r,a,o,i),new e(u)}},{key:"perspective",value:function(t,n,r,a){var o=M.mat4.create();return M.mat4.perspective(o,t,n,r,a),new e(o)}},{key:"lookAt",value:function(t,n,r){var a=M.mat4.create();return M.mat4.lookAt(a,t.rawElements,n.rawElements,r.rawElements),new e(a)}}]),e}(p.default);e.default=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,[{key:"getAt",value:function(t,e){throw new Error("Not implemented")}},{key:"getBySingleIndex",value:function(t){throw new Error("Not implemented")}},{key:"RowCount",get:function(){return 0}},{key:"ColmunCount",get:function(){return 0}}],[{key:"__elementEquals",value:function(t,e){if(t.RowCount!==e.RowCount||t.ColmunCount!==e.ColmunCount)return!1;for(var n=t.RowCount*e.ColmunCount,r=0;r<n;r++)if(t.getBySingleIndex(r)!==e.getBySingleIndex(r))return!1;return!0}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(108),l=r(s),f=function(){function t(e){(0,o.default)(this,t),this.rawElements=new Float32Array(16*e)}return(0,u.default)(t,[{key:"getAt",value:function(t){var e=16*t;return new l.default(this.rawElements.slice(e,e+16))}},{key:"setAt",value:function(t,e){for(var n=0;n<16;n++)this.rawElements[16*t+n]=e.rawElements[n]}}],[{key:"getIdentityMatrixArray",value:function(e){for(var n=new t(e),r=0;r<e;r++)for(var a=0;a<4;a++)for(var o=0;o<4;o++)n.rawElements[16*r+4*a+o]=a===o?1:0;return n}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(44),l=r(s),f=n(94),c=n(38),d=r(c),h=function(){function t(e){if((0,o.default)(this,t),e){this.points=new Array(e.points.length);for(var n=0;n<e.points.length;n++)this.points[n]=l.default.copy(e.points[n])}else this.points=[]}return(0,u.default)(t,[{key:"addPoint",value:function(t){this.points.push(t)}},{key:"transform",value:function(t){for(var e=0;e<this.points.length;e++)f.vec3.transformMat4(this.points[e].rawElements,this.points[e].rawElements,t.rawElements)}},{key:"clear",value:function(){this.points.length=0}},{key:"getBoundingBox",value:function(){for(var t=new d.default,e=0;e<this.points.length;e++)t.expandAABB(this.points[e]);return t}},{key:"toMathematicaPoints",value:function(){for(var t="",e=0;e<this.points.length;e++)0!==e&&(t+=","),t+=this.points[e].toMathematicaString();return"Point[{"+t+"}]"}}],[{key:"initializeWithCube",value:function(t){return t.clear(),t.addPoint(new l.default(-1,1,-1)),t.addPoint(new l.default(-1,-1,-1)),t.addPoint(new l.default(1,-1,-1)),t.addPoint(new l.default(1,1,-1)),t.addPoint(new l.default(-1,1,1)),t.addPoint(new l.default(-1,-1,1)),t.addPoint(new l.default(1,-1,1)),t.addPoint(new l.default(1,1,1)),t}}]),t}();e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(44),l=r(s),f=n(94),c=n(108),d=r(c),h=function(){function t(e){(0,o.default)(this,t),this.rawElements=e}return(0,u.default)(t,[{key:"equalWith",value:function(e){return t.equals(this,e)}},{key:"normalize",value:function(){var e=f.quat.create();return new t(f.quat.normalize(e,this.rawElements))}},{key:"inverse",value:function(){var e=f.quat.create();return new t(f.quat.invert(e,this.rawElements))}},{key:"toAngleAxisString",value:function(){var t=2*Math.acos(this.W),e=Math.sqrt(1-this.W*this.W);return 180!==t&&0!==t?"axis("+t+","+this.X/e+","+this.Y/e+","+this.Z/e+")":0===t?"axis("+t+",0,1,0)":"axis(180d,"+this.X+","+this.Y+","+this.Z+")"}},{key:"toString",value:function(){return this.toAngleAxisString()}},{key:"factoringQuaternionZXY",value:function(){var t={x:0,y:0,z:0},e=d.default.rotationQuaternion(this),n=e.rawElements[6];return Math.abs(n)<.9999?(t.x=Math.asin(n),t.z=Math.atan2(-e.rawElements[4],e.rawElements[5]),t.y=Math.atan2(-e.rawElements[2],e.rawElements[10])):(t.y=0,t.x=Math.PI/2*n,t.z=Math.atan2(e.rawElements[1],e.rawElements[0])),t}},{key:"factoringQuaternionXYZ",value:function(){var t={x:0,y:0,z:0},e=d.default.rotationQuaternion(this),n=-e.rawElements[2];return Math.abs(n)<.9999?(t.x=Math.atan2(e.rawElements[6],e.rawElements[10]),t.y=Math.asin(n),t.z=Math.atan2(e.rawElements[1],e.rawElements[0])):(t.x=0,t.y=Math.PI/2*n,t.z=Math.atan2(-e.rawElements[4],e.rawElements[5])),t}},{key:"eularAngles",get:function(){var t=this.factoringQuaternionZXY();
return new l.default(t.x,t.y,t.z)},set:function(e){this.rawElements=t.euler(e.X,e.Y,e.Z).rawElements}},{key:"X",get:function(){return this.rawElements[0]}},{key:"Y",get:function(){return this.rawElements[1]}},{key:"Z",get:function(){return this.rawElements[2]}},{key:"W",get:function(){return this.rawElements[3]}},{key:"ImaginaryPart",get:function(){return new l.default(this.X,this.Y,this.Z)}},{key:"Conjugate",get:function(){var e=f.quat.create();return new t(f.quat.conjugate(e,this.rawElements))}},{key:"Length",get:function(){return f.quat.len(this.rawElements)}}],[{key:"equals",value:function(t,e){for(var n=0;n<4;n++)if(t.rawElements[n]!==e.rawElements[n])return!1;return!0}},{key:"add",value:function(e,n){var r=f.quat.create();return new t(f.quat.add(r,e.rawElements,n.rawElements))}},{key:"multiply",value:function(e,n){var r=f.quat.create();return new t(f.quat.mul(r,e.rawElements,n.rawElements))}},{key:"angleAxis",value:function(e,n){var r=f.vec3.create();r[0]=n.X,r[1]=n.Y,r[2]=n.Z;var a=f.quat.create();return new t(f.quat.setAxisAngle(a,r,+e))}},{key:"euler",value:function(e,n,r){return t.multiply(t.angleAxis(r,l.default.ZUnit),t.multiply(t.angleAxis(e,l.default.XUnit),t.angleAxis(n,l.default.YUnit)))}},{key:"eulerXYZ",value:function(e,n,r){return t.multiply(t.angleAxis(r,l.default.ZUnit),t.multiply(t.angleAxis(n,l.default.YUnit),t.angleAxis(e,l.default.XUnit)))}},{key:"slerp",value:function(e,n,r){var a=f.quat.create();return new t(f.quat.slerp(a,e.rawElements,n.rawElements,+r))}},{key:"angle",value:function(e,n){var r=t.multiply(n,e.inverse());return r=r.normalize(),2*Math.acos(r.W)}},{key:"fromToRotation",value:function(e,n){var r=l.default.cross(e.normalized,n.normalized),a=l.default.dot(e.normalized,n.normalized);return t.angleAxis(a,r)}},{key:"lookRotation",value:function(e,n){n=n||l.default.YUnit;var r=e.normalized,a=l.default.cross(n,r).normalized,o=l.default.cross(r,a),i=a.X,u=a.Y,s=a.Z,f=o.X,c=o.Y,d=o.Z,h=r.X,v=r.Y,p=r.Z,m=i+c+p;if(m>0){var y=Math.sqrt(1+m);return new t([.5*(d-v)/y,.5*(h-s)/y,.5*(u-f)/y,y/2])}if(i>=c&&i>=p){var g=Math.sqrt(1+i-c-p);return new t([.5*(u+f)/g,.5*(s+h)/g,.5*(d-v)/g,g/2])}if(c>p){var _=Math.sqrt(1+c-i-p);return new t([0*(f+u),5/_,.5*_,.5*(v+d)/_,.5*(h-s)/_])}var M=Math.sqrt(1+p-i-c);return new t([.5*(h+s)/M,.5*(v+d)/M,.5*M,.5*(u-f)/M])}},{key:"Identity",get:function(){return new t(f.quat.create())}}]),t}();e.default=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(114),l=r(s),f=function(){function t(e,n,r,a){(0,o.default)(this,t),this._left=e,this._top=n,this._width=r,this._height=a}return(0,u.default)(t,[{key:"contains",value:function(t,e){var n=void 0;return t instanceof l.default?(n=t.X,e=t.Y):n=t,this.Left<=n&&this.Right>=n&&this.Top<=e&&this.Bottom>=e}},{key:"toLocal",value:function(t,e){var n=void 0;return t instanceof l.default?(n=t.X,e=t.Y):n=t,n-=this.Left,e-=this.Top,t instanceof l.default?new l.default(n,e):[n,e]}},{key:"toString",value:function(){return"Rectangle("+this.Left+","+this.Top+"-"+this.Right+","+this.Bottom+")"}},{key:"Left",get:function(){return this._left}},{key:"Right",get:function(){return this.Left+this.Width}},{key:"Top",get:function(){return this._top}},{key:"Bottom",get:function(){return this._top+this._height}},{key:"Width",get:function(){return this._width}},{key:"Height",get:function(){return this._height}}],[{key:"equals",value:function(t,e){return t.Left===e.Left&&t.Right===e.Right&&t.Top===e.Top&&t.Bottom===e.Bottom}},{key:"edgeSizeEquals",value:function(t,e){return t.Width===e.Width&&t.Height===e.Height}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(45),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(50),c=r(f),d=n(85),h=r(d),v=n(93),p=r(v),m=n(94),y=function(t){function e(t,n){(0,u.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));return"undefined"==typeof n?(r.rawElements=t,(0,c.default)(r)):(r.rawElements=[t,n],r)}return(0,h.default)(e,t),(0,l.default)(e,[{key:"dotWith",value:function(t){return e.dot(this,t)}},{key:"addWith",value:function(t){return e.add(this,t)}},{key:"subtractWith",value:function(t){return e.subtract(t,this)}},{key:"multiplyWith",value:function(t){return e.multiply(t,this)}},{key:"negateThis",value:function(){return e.negate(this)}},{key:"equalWith",value:function(t){return e.equals(this,t)}},{key:"nearlyEqualWith",value:function(t){return e.nearlyEquals(this,t)}},{key:"normalizeThis",value:function(){return e.normalize(this)}},{key:"toString",value:function(){return"("+this.X+", "+this.Y+")"}},{key:"toDisplayString",value:function(){return"Vector2"+this.toString()}},{key:"toMathematicaString",value:function(){return"{"+this.X+", "+this.Y+"}"}},{key:"normalized",get:function(){return this.multiplyWith(1/this.magnitude)}},{key:"X",get:function(){return this.rawElements[0]},set:function(t){this.rawElements[0]=+t}},{key:"Y",get:function(){return this.rawElements[1]},set:function(t){this.rawElements[1]=+t}},{key:"ElementCount",get:function(){return 2}}],[{key:"copy",value:function(t){return new e(t.X,t.Y)}},{key:"parse",value:function(t){var n=p.default.__parse(t),r=n.elements;if(1===r.length||2===r.length){var a=void 0;return a=1===r.length?new e(r[0],r[0]):new e(r[0],r[1]),n.needNormalize&&(a=a.normalizeThis()),n.coefficient&&(a=a.multiplyWith(n.coefficient)),n.needNegate&&(a=a.negateThis()),a}}},{key:"dot",value:function(t,e){return m.vec2.dot(t.rawElements,e.rawElements)}},{key:"add",value:function(t,n){var r=m.vec2.create();return new e(m.vec2.add(r,t.rawElements,n.rawElements))}},{key:"subtract",value:function(t,n){var r=m.vec2.create();return new e(m.vec2.sub(r,t.rawElements,n.rawElements))}},{key:"multiply",value:function(t,n){var r=m.vec2.create();return new e(m.vec2.scale(r,n.rawElements,t))}},{key:"negate",value:function(t){return e.multiply(-1,t)}},{key:"equals",value:function(t,e){return p.default.__elementEquals(t,e)}},{key:"nearlyEquals",value:function(t,e){return p.default.__nearlyElementEquals(t,e)}},{key:"normalize",value:function(t){var n=m.vec2.create();return new e(m.vec2.normalize(n,t.rawElements))}},{key:"min",value:function(t,n){return new e(p.default.__fromGenerationFunction(t,n,function(t,e,n){return Math.min(e.rawElements[t],n.rawElements[t])}))}},{key:"max",value:function(t,n){return new e(p.default.__fromGenerationFunction(t,n,function(t,e,n){return Math.max(e.rawElements[t],n.rawElements[t])}))}},{key:"angle",value:function(t,n){return Math.acos(e.dot(t.normalized,n.normalized))}},{key:"XUnit",get:function(){return new e(1,0)}},{key:"YUnit",get:function(){return new e(0,1)}},{key:"One",get:function(){return new e(1,1)}},{key:"Zero",get:function(){return new e(0,0)}}]),e}(p.default);e.default=y},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(106),l=r(s),f=n(44),c=r(f),d=n(114),h=r(d),v=function(){function t(e){(0,o.default)(this,t),e?this.rawElements=new Array(e):this.rawElements=[]}return(0,u.default)(t,[{key:"equalWith",value:function(e){return t.equals(this,e)}},{key:"appendVector",value:function(t){this._verifyDimension(t),this.rawElements.push(t.rawElements)}},{key:"setVector",value:function(t,e){this._verifyDimension(e);for(var n=0;n<e.ElementCount;n++)this.rawElements[t*this._dimension+n]=e.rawElements[n]}},{key:"setRawArray",value:function(t,e){for(var n=0;n<this._dimension;n++)this.rawElements[t*this._dimension+n]=e[n]?e[n]:0}},{key:"getVector",value:function(t){switch(this._dimension){case 2:return new h.default(this.rawElements[t*this._dimension+0],this.rawElements[t*this._dimension+1]);case 3:return new c.default(this.rawElements[t*this._dimension+0],this.rawElements[t*this._dimension+1],this.rawElements[t*this._dimension+2]);case 4:return new l.default(this.rawElements[t*this._dimension+0],this.rawElements[t*this._dimension+1],this.rawElements[t*this._dimension+2],this.rawElements[t*this._dimension+3]);default:return null}}},{key:"setVectorArray",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;0!==t.length&&(this._verifyDimension(t[0]),t.forEach(function(t,r){if(e._dimension!==t.ElementCount)throw new Error("Unmatch unit size of vector element! at:"+r);for(var a=0;a<e._dimension;a++)e.rawElements[n+e._dimension*r+a]=t.rawElements[a]}))}},{key:"getVectorArray",value:function(){if(0===this.rawElements.length)return[];for(var t=new Array(this.rawElements.length/this._dimension),e=0;e<t.length;e++)t[e]=this.getVector(e);return t}},{key:"_verifyDimension",value:function(t){if("undefined"!=typeof this._dimension&&this._dimension!==t.ElementCount)throw new Error("Unmatch unit size of vectors!");"undefined"==typeof this._dimension&&(this._dimension=t.ElementCount)}},{key:"dimension",get:function(){return this._dimension}}],[{key:"zeroVectorArray",value:function(e,n){for(var r=new t(e*n),a=0;a<e*n;a++)r.rawElements[a]=0;return r._dimension=e,r}},{key:"fromArray",value:function(e,n){var r=new t(n.length);r._dimension=e;for(var a=0;a<n.length;a++)r.rawElements[a]=n[a];return r}},{key:"equals",value:function(t,e){if(t.rawElements.length!==e.rawElements.length||t._dimension!==e._dimension)return!1;for(var n=0;n<t.rawElements.length;n++)if(t.rawElements[n]!==e.rawElements[n])return!1;return!0}}]),t}();e.default=v},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}}])})},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=r(a),i=n(38),u=r(i),s=n(44),l=r(s),f=n(98),c=r(f),d=n(97),h=r(d),v=n(100),p=r(v),m=n(99),y=r(m),g=n(120),_=r(g),M=n(124),b=r(M),x=n(133),w=r(x),S=n(134),E=r(S),I=n(143),F=r(I),k=n(144),D=r(k),A=n(145),C=r(A),P=n(138),O=r(P),R=n(153),T=r(R),N=n(149),L=r(N),j=n(148),z=r(j),q=n(150),V=r(q),B=n(137),Y=r(B),G=n(135),W=r(G),U=n(146),X=r(U),Z=n(154),$=r(Z),H=n(152),Q=r(H),J=n(151),K=r(J),tt=n(147),et=r(tt),nt=n(136),rt=r(nt),at=n(155),ot=r(at),it={Base:{Constants:u.default,EEObject:l.default,Ensure:c.default,IDObject:h.default,NSDictionary:p.default,NSIdentity:y.default,NSSet:_.default,XMLHttpRequestAsync:b.default,XMLReader:w.default},Components:{GrimoireComponent:E.default},Converters:{BooleanConverter:F.default,StringArrayConverter:D.default,StringConverter:C.default},GrimoireInterface:O.default,Interface:{ComponentInterface:T.default,GomlInterface:L.default,GomlInterfaceGenerator:z.default,NodeInterface:V.default},Node:{Attribute:Y.default,Component:W.default,ComponentDeclaration:X.default,GomlLoader:$.default,GomlNode:Q.default,GomlParser:K.default,NodeDeclaration:et.default,NodeUtility:rt.default}},ut=(0,ot.default)();(0,o.default)(ut||{},it),e.default=ut},function(t,e,n){t.exports={default:n(2),__esModule:!0}},function(t,e,n){n(3),t.exports=n(6).Object.assign},function(t,e,n){var r=n(4);r(r.S+r.F,"Object",{assign:n(19)})},function(t,e,n){var r=n(5),a=n(6),o=n(7),i=n(9),u="prototype",s=function(t,e,n){var l,f,c,d=t&s.F,h=t&s.G,v=t&s.S,p=t&s.P,m=t&s.B,y=t&s.W,g=h?a:a[e]||(a[e]={}),_=g[u],M=h?r:v?r[e]:(r[e]||{})[u];h&&(n=e);for(l in n)f=!d&&M&&void 0!==M[l],f&&l in g||(c=f?M[l]:n[l],g[l]=h&&"function"!=typeof M[l]?n[l]:m&&f?o(c,r):y&&M[l]==c?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[u]=t[u],e}(c):p&&"function"==typeof c?o(Function.call,c):c,p&&((g.virtual||(g.virtual={}))[l]=c,t&s.R&&_&&!_[l]&&i(_,l,c)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(8);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,a){return t.call(e,n,r,a)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(10),a=n(18);t.exports=n(14)?function(t,e,n){return r.f(t,e,a(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(11),a=n(13),o=n(17),i=Object.defineProperty;e.f=n(14)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),a)try{return i(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(12);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(14)&&!n(15)(function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(15)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(12),a=n(5).document,o=r(a)&&r(a.createElement);t.exports=function(t){return o?a.createElement(t):{}}},function(t,e,n){var r=n(12);t.exports=function(t,e){if(!r(t))return t;var n,a;if(e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;if("function"==typeof(n=t.valueOf)&&!r(a=n.call(t)))return a;if(!e&&"function"==typeof(n=t.toString)&&!r(a=n.call(t)))return a;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){"use strict";var r=n(20),a=n(35),o=n(36),i=n(37),u=n(24),s=Object.assign;t.exports=!s||n(15)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=i(t),s=arguments.length,l=1,f=a.f,c=o.f;s>l;)for(var d,h=u(arguments[l++]),v=f?r(h).concat(f(h)):r(h),p=v.length,m=0;p>m;)c.call(h,d=v[m++])&&(n[d]=h[d]);return n}:s},function(t,e,n){var r=n(21),a=n(34);t.exports=Object.keys||function(t){return r(t,a)}},function(t,e,n){var r=n(22),a=n(23),o=n(27)(!1),i=n(31)("IE_PROTO");t.exports=function(t,e){var n,u=a(t),s=0,l=[];for(n in u)n!=i&&r(u,n)&&l.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~o(l,n)||l.push(n));return l}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(24),a=n(26);t.exports=function(t){return r(a(t))}},function(t,e,n){var r=n(25);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(23),a=n(28),o=n(30);t.exports=function(t){return function(e,n,i){var u,s=r(e),l=a(s.length),f=o(i,l);if(t&&n!=n){for(;l>f;)if(u=s[f++],u!=u)return!0}else for(;l>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(29),a=Math.min;t.exports=function(t){return t>0?a(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(29),a=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?a(t+e,0):o(t,e)}},function(t,e,n){var r=n(32)("keys"),a=n(33);t.exports=function(t){return r[t]||(r[t]=a(t))}},function(t,e,n){var r=n(5),a="__core-js_shared__",o=r[a]||(r[a]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(26);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"defaultNamespace",get:function(){return"HTTP://GRIMOIRE.GL/NS/DEFAULT"}}]),t}();e.default=s},function(t,e){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(41),o=r(a);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={default:n(42),__esModule:!0}},function(t,e,n){n(43);var r=n(6).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(4);r(r.S+r.F*!n(14),"Object",{defineProperty:n(10).f})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){e.forEach(function(e){(0,i.default)(e.prototype).forEach(function(n){t.prototype[n]=e.prototype[n]})})}Object.defineProperty(e,"__esModule",{value:!0});var o=n(45),i=r(o),u=n(51),s=r(u),l=n(39),f=r(l),c=n(55),d=r(c),h=n(88),v=r(h),p=n(96),m=n(97),y=r(m),g=function(t){function e(){return(0,f.default)(this,e),(0,d.default)(this,(e.__proto__||(0,s.default)(e)).call(this))}return(0,v.default)(e,t),e}(y.default);a(g,[p.EventEmitter]),e.default=g},function(t,e,n){t.exports={default:n(46),__esModule:!0}},function(t,e,n){n(47);var r=n(6).Object;t.exports=function(t){return r.getOwnPropertyNames(t)}},function(t,e,n){n(48)("getOwnPropertyNames",function(){return n(49).f})},function(t,e,n){var r=n(4),a=n(6),o=n(15);t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],i={};i[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",i)}},function(t,e,n){var r=n(23),a=n(50).f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return a(t)}catch(t){return i.slice()}};t.exports.f=function(t){return i&&"[object Window]"==o.call(t)?u(t):a(r(t))}},function(t,e,n){var r=n(21),a=n(34).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},function(t,e,n){t.exports={default:n(52),__esModule:!0}},function(t,e,n){n(53),t.exports=n(6).Object.getPrototypeOf},function(t,e,n){var r=n(37),a=n(54);n(48)("getPrototypeOf",function(){return function(t){return a(r(t))}})},function(t,e,n){var r=n(22),a=n(37),o=n(31)("IE_PROTO"),i=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=a(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?i:null}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(56),o=r(a);e.default=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":(0,o.default)(e))&&"function"!=typeof e?t:e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(57),o=r(a),i=n(76),u=r(i),s="function"==typeof u.default&&"symbol"==typeof o.default?function(t){return typeof t}:function(t){return t&&"function"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?"symbol":typeof t};e.default="function"==typeof u.default&&"symbol"===s(o.default)?function(t){return"undefined"==typeof t?"undefined":s(t)}:function(t){return t&&"function"==typeof u.default&&t.constructor===u.default&&t!==u.default.prototype?"symbol":"undefined"==typeof t?"undefined":s(t)}},function(t,e,n){t.exports={default:n(58),__esModule:!0}},function(t,e,n){n(59),n(71),t.exports=n(75).f("iterator")},function(t,e,n){"use strict";var r=n(60)(!0);n(61)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(29),a=n(26);t.exports=function(t){return function(e,n){var o,i,u=String(a(e)),s=r(n),l=u.length;return s<0||s>=l?t?"":void 0:(o=u.charCodeAt(s),o<55296||o>56319||s+1===l||(i=u.charCodeAt(s+1))<56320||i>57343?t?u.charAt(s):o:t?u.slice(s,s+2):(o-55296<<10)+(i-56320)+65536)}}},function(t,e,n){"use strict";var r=n(62),a=n(4),o=n(63),i=n(9),u=n(22),s=n(64),l=n(65),f=n(69),c=n(54),d=n(70)("iterator"),h=!([].keys&&"next"in[].keys()),v="@@iterator",p="keys",m="values",y=function(){return this};t.exports=function(t,e,n,g,_,M,b){l(n,e,g);var x,w,S,E=function(t){if(!h&&t in D)return D[t];switch(t){case p:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},I=e+" Iterator",F=_==m,k=!1,D=t.prototype,A=D[d]||D[v]||_&&D[_],C=A||E(_),P=_?F?E("entries"):C:void 0,O="Array"==e?D.entries||A:A;if(O&&(S=c(O.call(new t)),S!==Object.prototype&&(f(S,I,!0),r||u(S,d)||i(S,d,y))),F&&A&&A.name!==m&&(k=!0,C=function(){return A.call(this)}),r&&!b||!h&&!k&&D[d]||i(D,d,C),s[e]=C,s[I]=y,_)if(x={values:F?C:E(m),keys:M?C:E(p),entries:P},b)for(w in x)w in D||o(D,w,x[w]);else a(a.P+a.F*(h||k),e,x);return x}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(9)},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(66),a=n(18),o=n(69),i={};n(9)(i,n(70)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(i,{next:a(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(11),a=n(67),o=n(34),i=n(31)("IE_PROTO"),u=function(){},s="prototype",l=function(){var t,e=n(16)("iframe"),r=o.length,a="<",i=">";for(e.style.display="none",n(68).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(a+"script"+i+"document.F=Object"+a+"/script"+i),t.close(),l=t.F;r--;)delete l[s][o[r]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[s]=r(t),n=new u,u[s]=null,n[i]=t):n=l(),void 0===e?n:a(n,e)}},function(t,e,n){var r=n(10),a=n(11),o=n(20);t.exports=n(14)?Object.defineProperties:function(t,e){a(t);for(var n,i=o(e),u=i.length,s=0;u>s;)r.f(t,n=i[s++],e[n]);return t}},function(t,e,n){t.exports=n(5).document&&document.documentElement},function(t,e,n){var r=n(10).f,a=n(22),o=n(70)("toStringTag");t.exports=function(t,e,n){t&&!a(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(32)("wks"),a=n(33),o=n(5).Symbol,i="function"==typeof o,u=t.exports=function(t){return r[t]||(r[t]=i&&o[t]||(i?o:a)("Symbol."+t))};u.store=r},function(t,e,n){n(72);for(var r=n(5),a=n(9),o=n(64),i=n(70)("toStringTag"),u=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],s=0;s<5;s++){var l=u[s],f=r[l],c=f&&f.prototype;c&&!c[i]&&a(c,i,l),o[l]=o.Array}},function(t,e,n){"use strict";var r=n(73),a=n(74),o=n(64),i=n(23);t.exports=n(61)(Array,"Array",function(t,e){this._t=i(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,a(1)):"keys"==e?a(0,n):"values"==e?a(0,t[n]):a(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){e.f=n(70)},function(t,e,n){t.exports={default:n(77),__esModule:!0}},function(t,e,n){n(78),n(85),n(86),n(87),t.exports=n(6).Symbol},function(t,e,n){"use strict";var r=n(5),a=n(22),o=n(14),i=n(4),u=n(63),s=n(79).KEY,l=n(15),f=n(32),c=n(69),d=n(33),h=n(70),v=n(75),p=n(80),m=n(81),y=n(82),g=n(83),_=n(11),M=n(23),b=n(17),x=n(18),w=n(66),S=n(49),E=n(84),I=n(10),F=n(20),k=E.f,D=I.f,A=S.f,C=r.Symbol,P=r.JSON,O=P&&P.stringify,R="prototype",T=h("_hidden"),N=h("toPrimitive"),L={}.propertyIsEnumerable,j=f("symbol-registry"),z=f("symbols"),q=f("op-symbols"),V=Object[R],B="function"==typeof C,Y=r.QObject,G=!Y||!Y[R]||!Y[R].findChild,W=o&&l(function(){return 7!=w(D({},"a",{get:function(){return D(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=k(V,e);r&&delete V[e],D(t,e,n),r&&t!==V&&D(V,e,r)}:D,U=function(t){var e=z[t]=w(C[R]);return e._k=t,e},X=B&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},Z=function(t,e,n){return t===V&&Z(q,e,n),_(t),e=b(e,!0),_(n),a(z,e)?(n.enumerable?(a(t,T)&&t[T][e]&&(t[T][e]=!1),n=w(n,{enumerable:x(0,!1)})):(a(t,T)||D(t,T,x(1,{})),t[T][e]=!0),W(t,e,n)):D(t,e,n)},$=function(t,e){_(t);for(var n,r=y(e=M(e)),a=0,o=r.length;o>a;)Z(t,n=r[a++],e[n]);return t},H=function(t,e){return void 0===e?w(t):$(w(t),e)},Q=function(t){var e=L.call(this,t=b(t,!0));return!(this===V&&a(z,t)&&!a(q,t))&&(!(e||!a(this,t)||!a(z,t)||a(this,T)&&this[T][t])||e)},J=function(t,e){if(t=M(t),e=b(e,!0),t!==V||!a(z,e)||a(q,e)){var n=k(t,e);return!n||!a(z,e)||a(t,T)&&t[T][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=A(M(t)),r=[],o=0;n.length>o;)a(z,e=n[o++])||e==T||e==s||r.push(e);return r},tt=function(t){for(var e,n=t===V,r=A(n?q:M(t)),o=[],i=0;r.length>i;)!a(z,e=r[i++])||n&&!a(V,e)||o.push(z[e]);return o};B||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(q,n),a(this,T)&&a(this[T],t)&&(this[T][t]=!1),W(this,t,x(1,n))};return o&&G&&W(V,t,{configurable:!0,set:e}),U(t)},u(C[R],"toString",function(){return this._k}),E.f=J,I.f=Z,n(50).f=S.f=K,n(36).f=Q,n(35).f=tt,o&&!n(62)&&u(V,"propertyIsEnumerable",Q,!0),v.f=function(t){return U(h(t))}),i(i.G+i.W+i.F*!B,{Symbol:C});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)h(et[nt++]);for(var et=F(h.store),nt=0;et.length>nt;)p(et[nt++]);i(i.S+i.F*!B,"Symbol",{for:function(t){return a(j,t+="")?j[t]:j[t]=C(t)},keyFor:function(t){if(X(t))return m(j,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!B,"Object",{create:H,defineProperty:Z,defineProperties:$,getOwnPropertyDescriptor:J,getOwnPropertyNames:K,getOwnPropertySymbols:tt}),P&&i(i.S+i.F*(!B||l(function(){var t=C();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!X(t)){for(var e,n,r=[t],a=1;arguments.length>a;)r.push(arguments[a++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!X(e))return e}),r[1]=e,O.apply(P,r)}}}),C[R][N]||n(9)(C[R],N,C[R].valueOf),c(C,"Symbol"),c(Math,"Math",!0),c(r.JSON,"JSON",!0)},function(t,e,n){var r=n(33)("meta"),a=n(12),o=n(22),i=n(10).f,u=0,s=Object.isExtensible||function(){return!0},l=!n(15)(function(){return s(Object.preventExtensions({}))}),f=function(t){i(t,r,{value:{i:"O"+ ++u,w:{}}})},c=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[r].i},d=function(t,e){if(!o(t,r)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[r].w},h=function(t){return l&&v.NEED&&s(t)&&!o(t,r)&&f(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:c,getWeak:d,onFreeze:h}},function(t,e,n){var r=n(5),a=n(6),o=n(62),i=n(75),u=n(10).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:i.f(t)})}},function(t,e,n){var r=n(20),a=n(23);t.exports=function(t,e){for(var n,o=a(t),i=r(o),u=i.length,s=0;u>s;)if(o[n=i[s++]]===e)return n}},function(t,e,n){var r=n(20),a=n(35),o=n(36);t.exports=function(t){var e=r(t),n=a.f;if(n)for(var i,u=n(t),s=o.f,l=0;u.length>l;)s.call(t,i=u[l++])&&e.push(i);return e}},function(t,e,n){var r=n(25);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(36),a=n(18),o=n(23),i=n(17),u=n(22),s=n(13),l=Object.getOwnPropertyDescriptor;e.f=n(14)?l:function(t,e){if(t=o(t),e=i(e,!0),s)try{return l(t,e)}catch(t){}if(u(t,e))return a(!r.f.call(t,e),t[e])}},function(t,e){},function(t,e,n){n(80)("asyncIterator")},function(t,e,n){n(80)("observable")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(89),o=r(a),i=n(93),u=r(i),s=n(56),l=r(s);e.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":(0,l.default)(e)));t.prototype=(0,u.default)(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(o.default?(0,o.default)(t,e):t.__proto__=e)}},function(t,e,n){t.exports={default:n(90),__esModule:!0}},function(t,e,n){n(91),t.exports=n(6).Object.setPrototypeOf},function(t,e,n){var r=n(4);r(r.S,"Object",{setPrototypeOf:n(92).set})},function(t,e,n){var r=n(12),a=n(11),o=function(t,e){if(a(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(7)(Function.call,n(84).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){t.exports={default:n(94),__esModule:!0}},function(t,e,n){n(95);var r=n(6).Object;t.exports=function(t,e){return r.create(t,e)}},function(t,e,n){var r=n(4);r(r.S,"Object",{create:n(66)})},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"==typeof t}function a(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function i(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!a(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,u,s,l;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(n=this._events[t],i(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(o(n))for(u=Array.prototype.slice.call(arguments,1),l=n.slice(),a=l.length,s=0;s<a;s++)l[s].apply(this,u);return!0},n.prototype.addListener=function(t,e){var a;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(a=i(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,a&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),
"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),a||(a=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var a=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,a,i,u;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],i=n.length,a=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(u=i;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){a=u;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=function(){function t(){(0,o.default)(this,t),this.id=t.getUniqueRandom(10)}return(0,u.default)(t,[{key:"toString",value:function(){return this.getTypeName()}},{key:"getTypeName",value:function(){var t=/function (.{1,})\(/,e=t.exec(this.constructor.toString());return e&&e.length>1?e[1]:""}}],[{key:"getUniqueRandom",value:function(t){return Math.random().toString(36).slice(-t)}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(99),l=r(s),f=n(100),c=r(f),d=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"ensureString",value:function(t){if("string"==typeof t)return t;if("number"==typeof t)return t.toString();throw new Error("Specified argument can not convert into string")}},{key:"ensureNumber",value:function(t){if("string"==typeof t)return parseInt(t,10);if("number"==typeof t)return t;throw new Error("specified argument can not be converted into number")}},{key:"ensureTobeNSIdentity",value:function(t){if(t)return"string"==typeof t?new l.default(t):t}},{key:"ensureTobeNSIdentityArray",value:function(t){if(!t)return[];for(var e=[],n=0;n<t.length;n++)e.push(this.ensureTobeNSIdentity(t[n]));return e}},{key:"ensureTobeNSDictionary",value:function(t,e){if(!t)return new c.default;if(t instanceof c.default)return t;var n=new c.default;for(var r in t)n.set(new l.default(e,r),t[r]);return n}},{key:"ensureTobeMessage",value:function(t){return t.startsWith("$")?t:"$"+t}}]),t}();e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(38),l=r(s),f=function(){function t(e,n){(0,o.default)(this,t),n?(this.ns=e.toUpperCase(),this.name=n):(this.ns=l.default.defaultNamespace,this.name=e),this.name=t._ensureValidIdentity(this.name,!0),this.ns=t._ensureValidIdentity(this.ns),this.fqn=this.name+"|"+this.ns}return(0,u.default)(t,null,[{key:"fromFQN",value:function(e){var n=e.split("|");if(2!==n.length)throw new Error("Invalid fqn was given");return new t(n[1],n[0])}},{key:"_ensureValidIdentity",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.indexOf("|")>-1)throw new Error("Namespace and identity cannnot contain | ");if(e&&t.indexOf(".")>-1)throw new Error("identity cannnot contain .");if(null==t)throw new Error("Specified name was null or undefined");return t}}]),t}();e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(101),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(99),c=r(f),d=function(){function t(){(0,u.default)(this,t),this._nameObjectMap=new o.default,this._fqnObjectMap=new o.default}return(0,l.default)(t,[{key:"set",value:function(t,e){var n=void 0;this._nameObjectMap.has(t.name)?n=this._nameObjectMap.get(t.name):(n=new o.default,this._nameObjectMap.set(t.name,n)),n.set(t.fqn,e),this._fqnObjectMap.set(t.fqn,e)}},{key:"delete",value:function(t){if(this._fqnObjectMap.has(t.fqn)){var e=this._nameObjectMap.get(t.name);1===e.size?this._nameObjectMap.delete(t.name):e.delete(t.fqn),this._fqnObjectMap.delete(t.fqn)}}},{key:"get",value:function(t,e){if("string"==typeof t){if(e)return this.get(new c.default(t,e));var n=this._nameObjectMap.get(t);if(!n)return null;if(1===n.size){var r=n.values();return r.next().value}throw new Error("Specified tag name "+t+" is ambigious to identify.")}return t instanceof c.default?this.fromFQN(t.fqn):t.prefix?this.get(new c.default(t.namespaceURI,t.localName)):t.namespaceURI&&this._fqnObjectMap.has(t.localName+"|"+t.namespaceURI)?this.get(new c.default(t.namespaceURI,t.localName)):t&&t.ownerElement&&t.ownerElement.namespaceURI&&this._fqnObjectMap.has(t.localName+"|"+t.ownerElement.namespaceURI)?this.get(new c.default(t.ownerElement.namespaceURI,t.localName)):this.get(t.localName)}},{key:"fromFQN",value:function(t){return this._fqnObjectMap.get(t)}},{key:"isAmbigious",value:function(t){return this._nameObjectMap.get(t).size>1}},{key:"has",value:function(t){return this._nameObjectMap.has(t)}},{key:"pushDictionary",value:function(t){var e=this;return t._fqnObjectMap.forEach(function(t,n){var r=c.default.fromFQN(n);e.set(r,t)}),this}},{key:"toArray",value:function(){var t=[];return this._fqnObjectMap.forEach(function(e){t.push(e)}),t}},{key:"clone",value:function(){var e=new t;return e.pushDictionary(this)}},{key:"forEach",value:function(t){return this._fqnObjectMap.forEach(function(e,n){t(e,n)}),this}},{key:"map",value:function(e){var n=new t;return this._fqnObjectMap.forEach(function(t,r){var a=c.default.fromFQN(r);n.set(a,e(t,r))}),n}},{key:"clear",value:function(){this._nameObjectMap.clear(),this._fqnObjectMap.clear()}}]),t}();e.default=d},function(t,e,n){t.exports={default:n(102),__esModule:!0}},function(t,e,n){n(85),n(59),n(71),n(103),n(117),t.exports=n(6).Map},function(t,e,n){"use strict";var r=n(104);t.exports=n(113)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(this,t);return e&&e.v},set:function(t,e){return r.def(this,0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(10).f,a=n(66),o=n(105),i=n(7),u=n(106),s=n(26),l=n(107),f=n(61),c=n(74),d=n(112),h=n(14),v=n(79).fastKey,p=h?"_s":"size",m=function(t,e){var n,r=v(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,f){var c=t(function(t,r){u(t,c,e,"_i"),t._i=a(null),t._f=void 0,t._l=void 0,t[p]=0,void 0!=r&&l(r,n,t[f],t)});return o(c.prototype,{clear:function(){for(var t=this,e=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete e[n.i];t._f=t._l=void 0,t[p]=0},delete:function(t){var e=this,n=m(e,t);if(n){var r=n.n,a=n.p;delete e._i[n.i],n.r=!0,a&&(a.n=r),r&&(r.p=a),e._f==n&&(e._f=r),e._l==n&&(e._l=a),e[p]--}return!!n},forEach:function(t){u(this,c,"forEach");for(var e,n=i(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(n(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!m(this,t)}}),h&&r(c.prototype,"size",{get:function(){return s(this[p])}}),c},def:function(t,e,n){var r,a,o=m(t,e);return o?o.v=n:(t._l=o={i:a=v(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[p]++,"F"!==a&&(t._i[a]=o)),t},getEntry:m,setStrong:function(t,e,n){f(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?c(0,n.k):"values"==e?c(0,n.v):c(0,[n.k,n.v]):(t._t=void 0,c(1))},n?"entries":"values",!n,!0),d(e)}}},function(t,e,n){var r=n(9);t.exports=function(t,e,n){for(var a in e)n&&t[a]?t[a]=e[a]:r(t,a,e[a]);return t}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(7),a=n(108),o=n(109),i=n(11),u=n(28),s=n(110),l={},f={},e=t.exports=function(t,e,n,c,d){var h,v,p,m,y=d?function(){return t}:s(t),g=r(n,c,e?2:1),_=0;if("function"!=typeof y)throw TypeError(t+" is not iterable!");if(o(y)){for(h=u(t.length);h>_;_++)if(m=e?g(i(v=t[_])[0],v[1]):g(t[_]),m===l||m===f)return m}else for(p=y.call(t);!(v=p.next()).done;)if(m=a(p,g,v.value,e),m===l||m===f)return m};e.BREAK=l,e.RETURN=f},function(t,e,n){var r=n(11);t.exports=function(t,e,n,a){try{return a?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(64),a=n(70)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[a]===t)}},function(t,e,n){var r=n(111),a=n(70)("iterator"),o=n(64);t.exports=n(6).getIteratorMethod=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(25),a=n(70)("toStringTag"),o="Arguments"==r(function(){return arguments}()),i=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=i(e=Object(t),a))?n:o?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e,n){"use strict";var r=n(5),a=n(6),o=n(10),i=n(14),u=n(70)("species");t.exports=function(t){var e="function"==typeof a[t]?a[t]:r[t];i&&e&&!e[u]&&o.f(e,u,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(5),a=n(4),o=n(79),i=n(15),u=n(9),s=n(105),l=n(107),f=n(106),c=n(12),d=n(69),h=n(10).f,v=n(114)(0),p=n(14);t.exports=function(t,e,n,m,y,g){var _=r[t],M=_,b=y?"set":"add",x=M&&M.prototype,w={};return p&&"function"==typeof M&&(g||x.forEach&&!i(function(){(new M).entries().next()}))?(M=e(function(e,n){f(e,M,t,"_c"),e._c=new _,void 0!=n&&l(n,y,e[b],e)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in x&&(!g||"clear"!=t)&&u(M.prototype,t,function(n,r){if(f(this,M,t),!e&&g&&!c(n))return"get"==t&&void 0;var a=this._c[t](0===n?0:n,r);return e?this:a})}),"size"in x&&h(M.prototype,"size",{get:function(){return this._c.size}})):(M=m.getConstructor(e,t,y,b),s(M.prototype,n),o.NEED=!0),d(M,t),w[t]=M,a(a.G+a.W+a.F,w),g||m.setStrong(M,t,y),M}},function(t,e,n){var r=n(7),a=n(24),o=n(37),i=n(28),u=n(115);t.exports=function(t,e){var n=1==t,s=2==t,l=3==t,f=4==t,c=6==t,d=5==t||c,h=e||u;return function(e,u,v){for(var p,m,y=o(e),g=a(y),_=r(u,v,3),M=i(g.length),b=0,x=n?h(e,M):s?h(e,0):void 0;M>b;b++)if((d||b in g)&&(p=g[b],m=_(p,b,y),t))if(n)x[b]=m;else if(m)switch(t){case 3:return!0;case 5:return p;case 6:return b;case 2:x.push(p)}else if(f)return!1;return c?-1:l||f?f:x}}},function(t,e,n){var r=n(116);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(12),a=n(83),o=n(70)("species");t.exports=function(t){var e;return a(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!a(e.prototype)||(e=void 0),r(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){var r=n(4);r(r.P+r.R,"Map",{toJSON:n(118)("Map")})},function(t,e,n){var r=n(111),a=n(119);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return a(this)}}},function(t,e,n){var r=n(107);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(121),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=function(){function t(){(0,u.default)(this,t),this._contentArray=[]}return(0,l.default)(t,[{key:"push",value:function(t){var e=this._contentArray.findIndex(function(e){return e.fqn===t.fqn});return e===-1&&this._contentArray.push(t),this}},{key:"pushArray",value:function(t){var e=this;return t.forEach(function(t){e.push(t)}),this}},{key:"values",value:function(){return this._contentArray.values()}},{key:"toArray",value:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var a,i=(0,o.default)(this._contentArray);!(e=(a=i.next()).done);e=!0){var u=a.value;t.push(u)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return t}},{key:"clone",value:function(){var e=new t,n=!0,r=!1,a=void 0;try{for(var i,u=(0,o.default)(this._contentArray);!(n=(i=u.next()).done);n=!0){var s=i.value;e.push(s)}}catch(t){r=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}return e}},{key:"merge",value:function(t){var e=!0,n=!1,r=void 0;try{for(var a,i=(0,o.default)(t._contentArray);!(e=(a=i.next()).done);e=!0){var u=a.value;this.push(u)}}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}return this}}],[{key:"fromArray",value:function(e){var n=new t;return n.pushArray(e),n}}]),t}();e.default=f},function(t,e,n){t.exports={default:n(122),__esModule:!0}},function(t,e,n){n(71),n(59),t.exports=n(123)},function(t,e,n){var r=n(11),a=n(110);t.exports=n(6).getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(125),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=function(){function t(){(0,u.default)(this,t)}return(0,l.default)(t,null,[{key:"send",value:function(t,e){return new o.default(function(n,r){t.onload=function(t){n(t)},t.onerror=function(t){r(t)},t.send(e)})}}]),t}();e.default=f},function(t,e,n){t.exports={default:n(126),__esModule:!0}},function(t,e,n){n(85),n(59),n(71),n(127),t.exports=n(6).Promise},function(t,e,n){"use strict";var r,a,o,i=n(62),u=n(5),s=n(7),l=n(111),f=n(4),c=n(12),d=n(8),h=n(106),v=n(107),p=n(128),m=n(129).set,y=n(131)(),g="Promise",_=u.TypeError,M=u.process,b=u[g],M=u.process,x="process"==l(M),w=function(){},S=!!function(){try{var t=b.resolve(1),e=(t.constructor={})[n(70)("species")]=function(t){t(w,w)};return(x||"function"==typeof PromiseRejectionEvent)&&t.then(w)instanceof e}catch(t){}}(),E=function(t,e){return t===e||t===b&&e===o},I=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},F=function(t){return E(b,t)?new k(t):new a(t)},k=a=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw _("Bad Promise constructor");e=t,n=r}),this.resolve=d(e),this.reject=d(n)},D=function(t){try{t()}catch(t){return{error:t}}},A=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,a=1==t._s,o=0,i=function(e){var n,o,i=a?e.ok:e.fail,u=e.resolve,s=e.reject,l=e.domain;try{i?(a||(2==t._h&&O(t),t._h=1),i===!0?n=r:(l&&l.enter(),n=i(r),l&&l.exit()),n===e.promise?s(_("Promise-chain cycle")):(o=I(n))?o.call(n,u,s):u(n)):s(r)}catch(t){s(t)}};n.length>o;)i(n[o++]);t._c=[],t._n=!1,e&&!t._h&&C(t)})}},C=function(t){m.call(u,function(){var e,n,r,a=t._v;if(P(t)&&(e=D(function(){x?M.emit("unhandledRejection",a,t):(n=u.onunhandledrejection)?n({promise:t,reason:a}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",a)}),t._h=x||P(t)?2:1),t._a=void 0,e)throw e.error})},P=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!P(e.promise))return!1;return!0},O=function(t){m.call(u,function(){var e;x?M.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},T=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _("Promise can't be resolved itself");(e=I(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,s(T,r,1),s(R,r,1))}catch(t){R.call(r,t)}}):(n._v=t,n._s=1,A(n,!1))}catch(t){R.call({_w:n,_d:!1},t)}}};S||(b=function(t){h(this,b,g,"_h"),d(t),r.call(this);try{t(s(T,this,1),s(R,this,1))}catch(t){R.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(105)(b.prototype,{then:function(t,e){var n=F(p(this,b));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=x?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),k=function(){var t=new r;this.promise=t,this.resolve=s(T,t,1),this.reject=s(R,t,1)}),f(f.G+f.W+f.F*!S,{Promise:b}),n(69)(b,g),n(112)(g),o=n(6)[g],f(f.S+f.F*!S,g,{reject:function(t){var e=F(this),n=e.reject;return n(t),e.promise}}),f(f.S+f.F*(i||!S),g,{resolve:function(t){if(t instanceof b&&E(t.constructor,this))return t;var e=F(this),n=e.resolve;return n(t),e.promise}}),f(f.S+f.F*!(S&&n(132)(function(t){b.all(t).catch(w)})),g,{all:function(t){var e=this,n=F(e),r=n.resolve,a=n.reject,o=D(function(){var n=[],o=0,i=1;v(t,!1,function(t){var u=o++,s=!1;n.push(void 0),i++,e.resolve(t).then(function(t){s||(s=!0,n[u]=t,--i||r(n))},a)}),--i||r(n)});return o&&a(o.error),n.promise},race:function(t){var e=this,n=F(e),r=n.reject,a=D(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return a&&r(a.error),n.promise}})},function(t,e,n){var r=n(11),a=n(8),o=n(70)("species");t.exports=function(t,e){var n,i=r(t).constructor;return void 0===i||void 0==(n=r(i)[o])?e:a(n)}},function(t,e,n){var r,a,o,i=n(7),u=n(130),s=n(68),l=n(16),f=n(5),c=f.process,d=f.setImmediate,h=f.clearImmediate,v=f.MessageChannel,p=0,m={},y="onreadystatechange",g=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){g.call(t.data)};d&&h||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++p]=function(){u("function"==typeof t?t:Function(t),e)},r(p),p},h=function(t){delete m[t]},"process"==n(25)(c)?r=function(t){c.nextTick(i(g,t,1))}:v?(a=new v,o=a.port2,a.port1.onmessage=_,r=i(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",_,!1)):r=y in l("script")?function(t){s.appendChild(l("script"))[y]=function(){s.removeChild(this),g.call(t)}}:function(t){setTimeout(i(g,t,1),0)}),t.exports={set:d,clear:h}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(5),a=n(129).set,o=r.MutationObserver||r.WebKitMutationObserver,i=r.process,u=r.Promise,s="process"==n(25)(i);t.exports=function(){var t,e,n,l=function(){var r,a;for(s&&(r=i.domain)&&r.exit();t;){a=t.fn,t=t.next;try{a()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(s)n=function(){i.nextTick(l)};else if(o){var f=!0,c=document.createTextNode("");new o(l).observe(c,{characterData:!0}),n=function(){c.data=f=!f}}else if(u&&u.resolve){var d=u.resolve();n=function(){d.then(l)}}else n=function(){a.call(r,l)};return function(r){var a={fn:r,next:void 0};e&&(e.next=a),t||(t=a,n()),e=a}}},function(t,e,n){var r=n(70)("iterator"),a=!1;try{var o=[7][r]();o.return=function(){a=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!a)return!1;var n=!1;try{var o=[7],i=o[r]();i.next=function(){return{done:n=!0}},o[r]=function(){return i},t(o)}catch(t){}return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"parseXML",value:function(e,n){var r=function(e){var n=t._parser.parseFromString("<","text/xml");if(void 0===n.documentURI)return!1;var r=n.getElementsByTagName("parsererror").item(0).namespaceURI;return"http://www.w3.org/1999/xhtml"===r?e.getElementsByTagName("parsererror").length>0:e.getElementsByTagNameNS(r,"parsererror").length>0},a=t._parser.parseFromString(e,"text/xml");if(r(a))throw new Error("Error parsing XML");if(n&&a.documentElement.tagName.toUpperCase()!==n.toUpperCase())throw new Error("Specified document is invalid.");return[a.documentElement]}},{key:"getElements",value:function(t,e){for(var n=[],r=t.getElementsByTagName(e),a=0;a<r.length;a++)n.push(r.item(a));return n}},{key:"getSingleElement",value:function(e,n,r){var a=t.getElements(e,n);if(1===a.length)return a[0];if(0===a.length){if(r)throw new Error("The mandatory element "+n+" was required, but not found");return null}throw new Error("The element "+n+" requires to exist in single. But there is "+a.length+" count of elements")}},{key:"getAttribute",value:function(t,e,n){var r=t.attributes.getNamedItem(e);if(r)return r.value;if(n)throw new Error("The mandatory attribute "+e+" was required, but it was not found");return null}},{key:"getAttributeFloat",value:function(e,n,r){var a=t.getAttribute(e,n,r);return parseFloat(a)}},{key:"getAttributeInt",value:function(e,n,r){var a=t.getAttribute(e,n,r);return parseInt(a,10)}},{key:"getChildElements",value:function(t){for(var e=t.childNodes,n=[],r=0;r<e.length;r++)e.item(r)instanceof Element&&n.push(e.item(r));return n}},{key:"getAttributes",value:function(t,e){for(var n={},r=t.attributes,a=0;a<r.length;a++){var o=r.item(a);e&&o.namespaceURI!==e||(n[o.localName]=o.value)}return n}}]),t}();s._parser=new DOMParser,e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(51),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(55),c=r(f),d=n(88),h=r(d),v=n(135),p=r(v),m=function(t){function e(){return(0,u.default)(this,e),(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments))}return(0,h.default)(e,t),(0,l.default)(e,[{key:"$awake",value:function(){var t=this;this.node.resolveAttributesValue(),this.getAttribute("id").addObserver(function(e){t.node.element.id=e.Value}),this.getAttribute("class").addObserver(function(e){t.node.element.className=e.Value.join(" ")}),this.getAttribute("enabled").addObserver(function(e){t.node.isActive&&t.node.notifyActivenessUpdate()})}}]),e}(p.default);m.attributes={id:{converter:"String",defaultValue:null,readonly:!1},class:{converter:"StringArray",defaultValue:null,readonly:!1},enabled:{converter:"Boolean",defaultValue:!0,readonly:!1}},e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(51),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(55),c=r(f),d=n(88),h=r(d),v=n(136),p=r(v),m=n(137),y=r(m),g=n(97),_=r(g),M=function(t){function e(){(0,u.default)(this,e);var t=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).apply(this,arguments));return t.isDefaultComponent=!1,t._enabled=!0,t._handlers=[],t._additionalAttributesNames=[],t}return(0,h.default)(e,t),(0,l.default)(e,[{key:"getValue",value:function(t){var e=this.attributes.get(t);return e?e.Value:void 0}},{key:"setValue",value:function(t,e){var n=this.attributes.get(t);n&&(n.Value=e)}},{key:"getAttribute",value:function(t){return this.attributes.get(t)}},{key:"addEnabledObserver",value:function(t){this._handlers.push(t)}},{key:"removeEnabledObserver",value:function(t){for(var e=-1,n=0;n<this._handlers.length;n++)if(t===this._handlers[n]){e=n;break}e<0||this._handlers.splice(e,1)}},{key:"resolveDefaultAttributes",value:function(t){var e=this;this.isDefaultComponent?this.attributes.forEach(function(e){return e.resolveDefaultValue(t)}):!function(){var t=p.default.getAttributes(e.element);e.attributes.forEach(function(e){return e.resolveDefaultValue(t)})}()}},{key:"__addAtribute",value:function(t,e){if(!e)throw new Error("can not add attribute null or undefined.");var n=y.default.generateAttributeForComponent(t,e,this);if(this.isDefaultComponent&&this.node.addAttribute(n),this.isDefaultComponent)n.resolveDefaultValue(p.default.getAttributes(this.node.element));else{var r=p.default.getAttributes(this.element);n.resolveDefaultValue(r)}this._additionalAttributesNames.push(n.name)}},{key:"__removeAttributes",value:function(t){var e=this;if(t){var n=this._additionalAttributesNames.findIndex(function(e){return e.name===t});if(n<0)throw new Error("can not remove attributes :"+t);var r=this._additionalAttributesNames[n];this.isDefaultComponent&&this.node.removeAttribute(this.attributes.get(r)),this.attributes.delete(r),this._additionalAttributesNames.splice(n,1)}else this._additionalAttributesNames.forEach(function(t){e.__removeAttributes(t.name)})}},{key:"enabled",get:function(){return this._enabled},set:function(t){var e=this;this._enabled!==t&&(this._enabled=t,this._handlers.forEach(function(t){t(e)}))}},{key:"companion",get:function(){return this.node?this.node.companion:null}},{key:"tree",get:function(){return this.node?this.node.tree:null}}]),e}(_.default);e.default=M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"getNodeListIndexByElementIndex",value:function(t,e){var n=Array.prototype.slice.call(t.childNodes),r=n.filter(function(t){return 1===t.nodeType});e=e<0?r.length+e:e;var a=n.indexOf(r[e]);return a===-1?null:a}},{key:"getAttributes",value:function(t){for(var e={},n=t.attributes,r=0;r<n.length;r++){var a=n.item(r),o=a.name;e[o]=a.value}return e}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(98),l=r(s),f=n(99),c=r(f),d=n(138),h=r(d),v=function(){function t(){(0,o.default)(this,t),this._observers=[]}return(0,u.default)(t,[{key:"addObserver",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._observers.push(t),e&&t(this)}},{key:"removeObserver",value:function(t){for(var e=-1,n=0;n<this._observers.length;n++)if(t===this._observers[n]){e=n;break}e<0||this._observers.splice(e,1)}},{key:"boundTo",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.component;this.addObserver(function(n){e[t]=n.Value}),e[t]=this.Value}},{key:"resolveDefaultValue",value:function(t){if(void 0===this._value){var e=t[this.name.name];if(void 0!==e)return void(this.Value=e);var n=this.component.node.nodeDeclaration.defaultAttributesActual.get(this.name);if(void 0!==n)return void(this.Value=n);var r=this.declaration.defaultValue;this.Value=r}}},{key:"_notifyChange",value:function(){var t=this;this._observers.forEach(function(e){e(t)})}},{key:"tree",get:function(){return this.component.tree}},{key:"companion",get:function(){return this.component.companion}},{key:"Value",get:function(){try{return this.converter.convert(this._value)}catch(t){console.error(t)}},set:function(t){this._value=t,this._notifyChange()}}],[{key:"generateAttributeForComponent",value:function(e,n,r){var a=new t;a.name=new c.default(r.name.ns,e),a.component=r,a.declaration=n;var o=l.default.ensureTobeNSIdentity(n.converter);if(a.converter=h.default.converters.get(o),void 0===a.converter)throw new Error("Specified converter "+o.name+" was not found from registered converters.\n Component: "+a.component.name.fqn+"\n Attribute: "+a.name.name);return a.converter={convert:a.converter.convert.bind(a),name:a.converter.name},a.component.attributes.set(a.name,a),a}}]),t}();e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(89),o=r(a),i=n(93),u=r(i),s=n(56),l=r(s),f=n(139),c=r(f),d=n(39),h=r(d),v=n(40),p=r(v),m=n(125),y=r(m),g=n(143),_=r(g),M=n(134),b=r(M),x=n(144),w=r(x),S=n(145),E=r(S),I=n(38),F=r(I),k=n(146),D=r(k),A=n(135),C=r(A),P=n(120),O=r(P),R=n(147),T=r(R),N=n(99),L=r(N),j=n(100),z=r(j),q=n(148),V=r(q),B=n(98),Y=r(B),G=function(t,e,n,r){return new(n||(n=y.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},W=function(){function t(){(0,h.default)(this,t),this.nodeDeclarations=new z.default,this.converters=new z.default,this.componentDeclarations=new z.default,this.rootNodes={},this.loadTasks=[],this.lib={},this.nodeDictionary={},this.componentDictionary={},this.companion=new z.default,this.initializedEventHandler=[],this.debug=!1}return(0,p.default)(t,[{key:"ns",value:function(t){return function(e){return new L.default(t,e)}}},{key:"initialize",value:function(){this.registerConverter("String",E.default),this.registerConverter("StringArray",w.default),this.registerConverter("Boolean",_.default),this.registerComponent("GrimoireComponent",b.default),this.registerNode("GrimoireNodeBase",["GrimoireComponent"])}},{key:"register",value:function(t){this.loadTasks.push(t)}},{key:"resolvePlugins",value:function(){return G(this,void 0,void 0,c.default.mark(function t(){var e;return c.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.loadTasks.length)){t.next=7;break}return t.next=4,this.loadTasks[e]();case 4:e++,t.next=1;break;case 7:case"end":return t.stop()}},t,this)}))}},{key:"registerComponent",value:function(t,e){t=Y.default.ensureTobeNSIdentity(t);var n=e.attributes;e=this._ensureTobeComponentConstructor(e),this.componentDeclarations.set(t,new D.default(t,n,e))}},{key:"registerNode",value:function(t,e,n,r){t=Y.default.ensureTobeNSIdentity(t),e=Y.default.ensureTobeNSIdentityArray(e),n=Y.default.ensureTobeNSDictionary(n,t.ns),r=Y.default.ensureTobeNSIdentity(r),this.nodeDeclarations.set(t,new T.default(t,O.default.fromArray(e),n,r))}},{key:"registerConverter",value:function(t,e){t=Y.default.ensureTobeNSIdentity(t),this.converters.set(t,{name:t,convert:e})}},{key:"addRootNode",value:function(t,e){if(!e)throw new Error("can not register null to rootNodes.");this.rootNodes[e.id]=e,e.companion.set(this.ns(F.default.defaultNamespace)("scriptElement"),t);var n=e.callRecursively(function(t){return t.checkTreeConstraints()}).reduce(function(t,e){return t.concat(e)}).filter(function(t){return t});if(0!==n.length){var r=n.reduce(function(t,e){return t+"\n"+e});throw new Error("tree constraint is not satisfied.\n"+r)}return e.setMounted(!0),e.broadcastMessage("treeInitialized",{ownerScriptTag:t,id:e.id}),t.setAttribute("x-rootNodeId",e.id),this._onTreeInitialized(t),e.id}},{key:"getRootNode",value:function(t){var e=t.getAttribute("x-rootNodeId");return this.rootNodes[e]}},{key:"queryRootNodes",value:function(t){for(var e=document.querySelectorAll(t),n=[],r=0;r<e.length;r++){var a=this.getRootNode(e.item(r));a&&n.push(a)}return n}},{key:"clear",value:function(){this.nodeDeclarations.clear(),this.componentDeclarations.clear(),this.converters.clear();for(var t in this.rootNodes)delete this.rootNodes[t];this.loadTasks.splice(0,this.loadTasks.length),this.initialize()}},{key:"_ensureTobeComponentConstructor",value:function(t){if("function"==typeof t){if(!(t.prototype instanceof C.default)&&t!==C.default)throw new Error("Component constructor must extends Component class.")}else if("object"===("undefined"==typeof t?"undefined":(0,l.default)(t))){var e=function(){C.default.call(this)},n={};for(var r in t)"attributes"!==r&&(n[r]={
value:t[r]});e.prototype=(0,u.default)(C.default.prototype,n),Object.defineProperty(e,"attributes",{value:t.attributes}),t=e}else t||(t=C.default);return t}},{key:"_onTreeInitialized",value:function(t){this.initializedEventHandler.forEach(function(e){e(t.id,t.className,t)})}}]),t}(),U=new W,X=function(t){return"string"==typeof t?(0,V.default)(U.queryRootNodes(t)):void U.initializedEventHandler.push(t)};(0,o.default)(X,U),e.default=X},function(t,e,n){t.exports=n(140)},function(t,e,n){(function(e){var r="object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this,a=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=a&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(141),a)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(t){r.regeneratorRuntime=void 0}}).call(e,function(){return this}())},function(t,e,n){(function(e,n){!function(e){"use strict";function r(t,e,n,r){var a=e&&e.prototype instanceof o?e:o,i=Object.create(a.prototype),u=new v(r||[]);return i._invoke=c(t,n,u),i}function a(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function o(){}function i(){}function u(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function l(t){this.arg=t}function f(t){function e(n,r,o,i){var u=a(t[n],t,r);if("throw"!==u.type){var s=u.arg,f=s.value;return f instanceof l?Promise.resolve(f.arg).then(function(t){e("next",t,o,i)},function(t){e("throw",t,o,i)}):Promise.resolve(f).then(function(t){s.value=t,o(s)},i)}i(u.arg)}function r(t,n){function r(){return new Promise(function(r,a){e(t,n,r,a)})}return o=o?o.then(r,r):r()}"object"==typeof n&&n.domain&&(e=n.domain.bind(e));var o;this._invoke=r}function c(t,e,n){var r=S;return function(o,i){if(r===I)throw new Error("Generator is already running");if(r===F){if("throw"===o)throw i;return m()}for(;;){var u=n.delegate;if(u){if("return"===o||"throw"===o&&u.iterator[o]===y){n.delegate=null;var s=u.iterator.return;if(s){var l=a(s,u.iterator,i);if("throw"===l.type){o="throw",i=l.arg;continue}}if("return"===o)continue}var l=a(u.iterator[o],u.iterator,i);if("throw"===l.type){n.delegate=null,o="throw",i=l.arg;continue}o="next",i=y;var f=l.arg;if(!f.done)return r=E,f;n[u.resultName]=f.value,n.next=u.nextLoc,n.delegate=null}if("next"===o)n.sent=n._sent=i;else if("throw"===o){if(r===S)throw r=F,i;n.dispatchException(i)&&(o="next",i=y)}else"return"===o&&n.abrupt("return",i);r=I;var l=a(t,e,n);if("normal"===l.type){r=n.done?F:E;var f={value:l.arg,done:n.done};if(l.arg!==k)return f;n.delegate&&"next"===o&&(i=y)}else"throw"===l.type&&(r=F,o="throw",i=l.arg)}}}function d(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function v(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(d,this),this.reset(!0)}function p(t){if(t){var e=t[M];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(g.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=y,e.done=!0,e};return r.next=r}}return{next:m}}function m(){return{value:y,done:!0}}var y,g=Object.prototype.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},M=_.iterator||"@@iterator",b=_.toStringTag||"@@toStringTag",x="object"==typeof t,w=e.regeneratorRuntime;if(w)return void(x&&(t.exports=w));w=e.regeneratorRuntime=x?t.exports:{},w.wrap=r;var S="suspendedStart",E="suspendedYield",I="executing",F="completed",k={},D=u.prototype=o.prototype;i.prototype=D.constructor=u,u.constructor=i,u[b]=i.displayName="GeneratorFunction",w.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===i||"GeneratorFunction"===(e.displayName||e.name))},w.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(D),t},w.awrap=function(t){return new l(t)},s(f.prototype),w.async=function(t,e,n,a){var o=new f(r(t,e,n,a));return w.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(D),D[M]=function(){return this},D[b]="Generator",D.toString=function(){return"[object Generator]"},w.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},w.values=p,v.prototype={constructor:v,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&g.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return e("end");if(a.tryLoc<=this.prev){var i=g.call(a,"catchLoc"),u=g.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return e(a.catchLoc,!0);if(this.prev<a.finallyLoc)return e(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return e(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return e(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?this.next=a.finallyLoc:this.complete(o),k},complete:function(t,e){if("throw"===t.type)throw t.arg;"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=t.arg,this.next="end"):"normal"===t.type&&e&&(this.next=e)},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),k}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;h(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:p(t),resultName:e,nextLoc:n},k}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}(),n(142))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function o(t){if(c===clearTimeout)return clearTimeout(t);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{return c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}function i(){p&&h&&(p=!1,h.length?v=h.concat(v):m=-1,v.length&&u())}function u(){if(!p){var t=a(i);p=!0;for(var e=v.length;e;){for(h=v,v=[];++m<e;)h&&h[m].run();m=-1,e=v.length}h=null,p=!1,o(t)}}function s(t,e){this.fun=t,this.array=e}function l(){}var f,c,d=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(t){c=r}}();var h,v=[],p=!1,m=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];v.push(new s(t,e)),1!==v.length||p||a(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=l,d.addListener=l,d.once=l,d.off=l,d.removeListener=l,d.removeAllListeners=l,d.emit=l,d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){"use strict";function n(t){if("boolean"==typeof t)return t;if("string"==typeof t)switch(t){case"true":return!0;case"false":return!1;default:throw new Error("Invalid string "+t+" for parsing as boolean")}throw new Error("Parsing failed: "+t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){"use strict";function n(t){if(Array.isArray(t)||!t)return t;if("string"==typeof t)return t.split(" ");throw new Error("value is not supported by StringArrayConverter.:"+t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e){"use strict";function n(t){if("string"==typeof t)return t;if(!t)return t;if("function"==typeof t.toString)return t.toString();throw new Error("value is not supported by StringConverter.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(138),l=r(s),f=n(137),c=r(f),d=n(100),h=r(d),v=function(){function t(e,n,r){(0,o.default)(this,t),this.name=e,this.attributes=n,this.ctor=r}return(0,u.default)(t,[{key:"generateInstance",value:function(t){t=t?t:document.createElementNS(this.name.ns,this.name.name);var e=new this.ctor;t.setAttribute("x-gr-id",e.id),l.default.componentDictionary[e.id]=e,e.name=this.name,e.element=t,e.attributes=new h.default;for(var n in this.attributes)c.default.generateAttributeForComponent(n,this.attributes[n],e);return e}}]),t}();e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(98),l=r(s),f=n(99),c=r(f),d=n(138),h=r(d),v=function(){function t(e,n,r,a,i){(0,o.default)(this,t),this.name=e,this.defaultComponents=n,this.defaultAttributes=r,this.superNode=a,this._treeConstraints=i,this.superNode||"GRIMOIRENODEBASE"===this.name.name.toUpperCase()||(this.superNode=new c.default("GrimoireNodeBase"))}return(0,u.default)(t,[{key:"addDefaultComponent",value:function(t){var e=l.default.ensureTobeNSIdentity(t);this.defaultComponents.push(e),this._defaultComponentsActual&&this._defaultComponentsActual.push(e)}},{key:"_resolveInherites",value:function(){if(!this.superNode)return this._defaultComponentsActual=this.defaultComponents,void(this._defaultAttributesActual=this.defaultAttributes);var t=h.default.nodeDeclarations.get(this.superNode),e=t.defaultComponentsActual,n=t.defaultAttributesActual;this._defaultComponentsActual=e.clone().merge(this.defaultComponents),this._defaultAttributesActual=n.clone().pushDictionary(this.defaultAttributes)}},{key:"defaultComponentsActual",get:function(){return this._defaultComponentsActual||this._resolveInherites(),this._defaultComponentsActual}},{key:"defaultAttributesActual",get:function(){return this._defaultAttributesActual||this._resolveInherites(),this._defaultAttributesActual}},{key:"treeConstraints",get:function(){return this._treeConstraints}}]),t}();e.default=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(89),o=r(a);e.default=function(t){var e=new u.default(t),n=e.queryFunc.bind(e);return(0,o.default)(n,e),n};var i=n(149),u=r(i)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(89),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(138),c=r(f),d=n(150),h=r(d),v=n(152),p=r(v),m=function(){function t(e){(0,u.default)(this,t),this.rootNodes=e}return(0,l.default)(t,[{key:"getNodeById",value:function(t){var e=this;return new Array(this.rootNodes.length).map(function(n,r){return p.default.fromElement(e.rootNodes[r].element.ownerDocument.getElementById(t))})}},{key:"queryFunc",value:function t(e){var n=new h.default(this.queryNodes(e)),t=n.queryFunc.bind(n);return(0,o.default)(t,n),t}},{key:"queryNodes",value:function(t){return this.rootNodes.map(function(e){for(var n=e.element.ownerDocument.querySelectorAll(t),r=[],a=0;a<n.length;a++){var o=c.default.nodeDictionary[n.item(a).getAttribute("x-gr-id")];o&&r.push(o)}return r})}}]),t}();e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(56),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(98),c=r(f),d=n(138),h=r(d),v=n(133),p=r(v),m=n(151),y=r(m),g=n(153),_=r(g),M=function(){function t(e){if((0,u.default)(this,t),this.nodes=e,!e)throw new Error("nodes is null")}return(0,l.default)(t,[{key:"queryFunc",value:function(t){return new _.default(this._queryComponents(t))}},{key:"_queryComponents",value:function(t){return this.nodes.map(function(e){return e.map(function(e){for(var n=e.componentsElement.querySelectorAll(t),r=[],a=0;a<n.length;a++){var o=n[a],i=h.default.componentDictionary[o.getAttribute("x-gr-id")];i&&r.push(i)}return r})})}},{key:"isEmpty",value:function(){return 0===this.count()}},{key:"get",value:function(t,e){var n=this;if(void 0===t){if(this.isEmpty())throw new Error("this NodeInterface is empty.");return this.nodes[0][0]}if(void 0!==e){if(this.nodes.length<=t||this.nodes[t].length<=e)throw new Error("index out of range.");return this.nodes[t][e]}if(this.count()<=t)throw new Error("index out of range.");var r=function(){var e=t,r=null;return n.forEach(function(t){0===e&&(r=t),e--}),{v:r}}();if("object"===("undefined"==typeof r?"undefined":(0,o.default)(r)))return r.v}},{key:"getAttribute",value:function(t){if(this.nodes.length>0&&this.nodes[0].length>0)throw new Error("this NodeInterface is empty.");return this.get().attributes.get(c.default.ensureTobeNSIdentity(t)).Value}},{key:"setAttribute",value:function(t,e){this.forEach(function(n){n.setAttribute(t,e)})}},{key:"on",value:function(t,e){return this.forEach(function(n){n.on(t,e)}),this}},{key:"off",value:function(t,e){return this.forEach(function(n){n.removeListener(t,e)}),this}},{key:"append",value:function(t){return this.forEach(function(e){var n=p.default.parseXML(t);n.forEach(function(t){var n=y.default.parse(t,null,null);e.addChild(n)})}),this}},{key:"remove",value:function(){return this.forEach(function(t){t.delete()}),this}},{key:"forEach",value:function(t){return this.nodes.forEach(function(e,n){e.forEach(function(e,r){t(e,n,r)})}),this}},{key:"setEnable",value:function(t){return this.forEach(function(e){e.enabled=!!t}),this}},{key:"find",value:function(t){console.warn("'find' is obsolate.use componentInterface instead.");var e=[];return this._queryComponents(t).forEach(function(t){t.forEach(function(t){t.forEach(function(t){e.push(t)})})}),e}},{key:"children",value:function e(){var e=this.nodes.map(function(t){return t.map(function(t){return t.children}).reduce(function(t,e){return t.concat(e)})});return new t(e)}},{key:"addComponent",value:function(t){return this.forEach(function(e){e.addComponent(t)}),this}},{key:"first",value:function(){return 0===this.count()?null:this.nodes[0][0]}},{key:"single",value:function(){if(1!==this.count())throw new Error("this nodeInterface is not single.");return this.first()}},{key:"count",value:function(){if(0===this.nodes.length)return 0;var t=this.nodes.map(function(t){return t.length});return t.reduce(function(t,e){return t+e},0)}}]),t}();e.default=M},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),o=r(a),i=n(40),u=r(i),s=n(152),l=r(s),f=n(138),c=r(f),d=function(){function t(){(0,o.default)(this,t)}return(0,u.default)(t,null,[{key:"parse",value:function(e,n,r){var a=t._createNode(e);if(!a)return console.warn('"'+e.tagName+'" was not parsed.'),null;var o=e.childNodes,i=[];if(o&&0!==o.length){for(var u=[],s=0;s<o.length;s++){var l=o.item(s);t._isElement(l)?this._isComponentsTag(l)?(t._parseComponents(a,l),u.push(l)):i.push(l):u.push(l)}for(var f=0;f<u.length;f++)e.removeChild(u[f])}return n&&n.addChild(a,null,!1),i.forEach(function(e){t.parse(e,a,null)}),a}},{key:"_createNode",value:function(t){var e=t.localName,n=c.default.nodeDeclarations.get(t);if(!n)throw new Error('Tag "'+e+'" is not found.');return new l.default(n,t)}},{key:"_parseComponents",value:function(e,n){var r=n.childNodes;if(r)for(var a=0;a<r.length;a++){var o=r.item(a);if(t._isElement(o)){var i=c.default.componentDeclarations.get(o);if(!i)throw new Error("Component "+o.tagName+" is not found.");var u=i.generateInstance(o);e._addComponentDirectly(u,!1)}}}},{key:"_isElement",value:function(t){return t.nodeType===Node.ELEMENT_NODE}},{key:"_isComponentsTag",value:function(t){var e=/\.COMPONENTS$/im;return e.test(t.nodeName)}}]),t}();e.default=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(51),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(55),c=r(f),d=n(88),h=r(d),v=n(151),p=r(v),m=n(133),y=r(m),g=n(148),_=r(g),M=n(138),b=r(M),x=n(44),w=r(x),S=n(136),E=r(S),I=n(100),F=r(I),k=n(99),D=r(k),A=n(98),C=r(A),P=function(t){function e(t,n){(0,u.default)(this,e);var r=(0,c.default)(this,(e.__proto__||(0,o.default)(e)).call(this));if(r.children=[],r._parent=null,r._root=null,r._mounted=!1,r._messageBuffer=[],r._tree=null,r._companion=new F.default,r._deleted=!1,r._attrBuffer={},r._defaultValueResolved=!1,!t)throw new Error("recipe must not be null");r.nodeDeclaration=t,r.element=n?n:document.createElementNS(t.name.ns,t.name.name),r.componentsElement=document.createElement("COMPONENTS"),r._root=r,r._tree=(0,_.default)([r]),r._components=[],r.attributes=new F.default,r.element.setAttribute("x-gr-id",r.id);var a=t.defaultComponentsActual;return a.toArray().map(function(t){r.addComponent(t,null,!0)}),b.default.nodeDictionary[r.id]=r,r}return(0,h.default)(e,t),(0,l.default)(e,[{key:"getChildrenByClass",value:function(t){var n=this.element.getElementsByClassName(t);return new Array(n.length).map(function(t,r){return e.fromElement(n.item(r))})}},{key:"getChildrenByNodeName",value:function(t){var n=this.element.getElementsByTagName(t);return new Array(n.length).map(function(t,r){return e.fromElement(n.item(r))})}},{key:"delete",value:function(){console.warn("delete is obsolate. please use remove() instead of"),this.remove()}},{key:"remove",value:function(){this.children.forEach(function(t){t.delete()}),b.default.nodeDictionary[this.id]=null,this._parent?this._parent.detachChild(this):(this.setMounted(!1),this.element.parentNode&&this.element.parentNode.removeChild(this.element)),this._deleted=!0}},{key:"sendMessage",value:function(t,e){return!!this.isActive&&(this._sendMessage(t,e),!0)}},{key:"broadcastMessage",value:function(t,e,n){if(this.enabled&&this.mounted)if("number"==typeof t){var r=t,a=e,o=n;if(this.sendMessage(a,o),r>0)for(var i=0;i<this.children.length;i++)this.children[i].broadcastMessage(r-1,a,o)}else{var u=t,s=e;this.sendMessage(u,s);for(var l=0;l<this.children.length;l++)this.children[l].broadcastMessage(u,s)}}},{key:"append",value:function(t){var e=this,n=y.default.parseXML(t),r=[];return n.forEach(function(t){var n=p.default.parse(t,null,null);e.addChild(n),r.push(n)}),r}},{key:"addChildByName",value:function(t,n){if("string"!=typeof t){var r=b.default.nodeDeclarations.get(t),a=new e(r,null);if(n)for(var o in n){var i=o.indexOf("|")!==-1?D.default.fromFQN(o):new D.default(o);a.setValue(i,n[o])}return this.addChild(a),a}this.addChildByName(new D.default(t),n)}},{key:"addChild",value:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t._deleted)throw new Error("deleted node never use.");if(null!=e&&"number"!=typeof e)throw new Error("insert index should be number or null or undefined.");t._parent=this;var r=null==e?this.children.length:e;this.children.splice(r,0,t);var a=t.checkTreeConstraints(),o=this._callRecursively(function(t){return t.checkTreeConstraints()},function(t){return t._parent?[t._parent]:[]}).reduce(function(t,e){return t.concat(e)}),i=a.concat(o).filter(function(t){return t});if(0!==i.length){var u=i.reduce(function(t,e){return t+"\n"+e});throw new Error("tree constraint is not satisfied.\n"+u)}if(n){var s=this.element[E.default.getNodeListIndexByElementIndex(this.element,r)];this.element.insertBefore(t.element,s)}t._tree=this._tree,t._companion=this._companion,this.mounted&&t.setMounted(!0)}},{key:"callRecursively",value:function(t){return this._callRecursively(t,function(t){return t.children})}},{key:"removeChild",value:function(t){var e=this.detachChild(t);e&&e.delete()}},{key:"detachChild",value:function(t){var e=this.children.indexOf(t);if(e===-1)return null;t.setMounted(!1),t._parent=null,this.children.splice(e,1),this.element.removeChild(t.element);var n=this._callRecursively(function(t){return t.checkTreeConstraints()},function(t){return t._parent?[t._parent]:[]}).reduce(function(t,e){return t.concat(e)}).filter(function(t){return t});if(0!==n.length){var r=n.reduce(function(t,e){return t+"\n"+e});throw new Error("tree constraint is not satisfied.\n"+r)}return t}},{key:"detach",value:function(){if(!this.parent)throw new Error("root Node cannot be detached.");this.parent.detachChild(this)}},{key:"getValue",value:function(t){return console.warn("getValue is obsolate. please use getAttribute instead of"),this.getAttribute(t)}},{key:"getAttribute",value:function(t){t=C.default.ensureTobeNSIdentity(t);var e=this.attributes.get(t);if(e)return e.Value;var n=this._attrBuffer[t.fqn];return void 0!==n?n:void console.warn('attribute "'+t.name+'" is not found.')}},{key:"setValue",value:function(t,e){console.warn("setValue is obsolate. please use setAttribute instead of"),this.setAttribute(t,e)}},{key:"setAttribute",value:function(t,e){t=C.default.ensureTobeNSIdentity(t);var n=this.attributes.get(t);n?n.Value=e:(console.warn('attribute "'+t.name+'" is not found.'),this._attrBuffer[t.fqn]=e)}},{key:"addAttribute",value:function(t){this.attributes.set(t.name,t);var e=this._attrBuffer[t.name.fqn];void 0!==e&&(t.Value=e,delete this._attrBuffer[t.name.fqn])}},{key:"setMounted",value:function(t){this._mounted!==t&&(t?(this._mounted=t,this._clearMessageBuffer("unmount"),this._sendMessageForced("awake"),this._sendMessageBuffer("mount"),this.children.forEach(function(e){e.setMounted(t)})):(this._clearMessageBuffer("mount"),this.children.forEach(function(e){e.setMounted(t)}),this._sendMessageBuffer("unmount"),this._sendMessageForced("dispose"),this._tree=null,this._companion=null,this._mounted=t))}},{key:"index",value:function(){return this._parent?this._parent.children.indexOf(this):-1}},{key:"removeAttribute",value:function(t){this.attributes.delete(t.name)}},{key:"addComponent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=b.default.componentDeclarations.get(t),a=r.generateInstance();e=e||{};for(var o in e)a.setValue(o,e[o]);return this._addComponentDirectly(a,n),a}},{key:"_addComponentDirectly",value:function(t,e){var n=this;if(t.node)throw new Error("component never change attached node");t.isDefaultComponent=!!e,t.node=this;var r=this.componentsElement[E.default.getNodeListIndexByElementIndex(this.componentsElement,this._components.length)];this.componentsElement.insertBefore(t.element,r),this._components.push(t),t.addEnabledObserver(function(t){t.enabled&&(n._resolveBufferdMessageTo(t,"mount"),n._resolveBufferdMessageTo(t,"unmount"))}),e&&(t.attributes.forEach(function(t){return n.addAttribute(t)}),this._defaultValueResolved&&t.attributes.forEach(function(t){return t.resolveDefaultValue(E.default.getAttributes(n.element))})),this._mounted&&(this._sendMessageForcedTo(t,"awake"),this._sendMessageBufferTo(t,"mount"))}},{key:"getComponents",value:function(){return this._components}},{key:"getComponent",value:function(t){if("string"==typeof t)return this.getComponent(C.default.ensureTobeNSIdentity(t));for(var e=0;e<this._components.length;e++)if(this._components[e].name.fqn===t.fqn)return this._components[e];return null}},{key:"resolveAttributesValue",value:function(){var t=this;this._defaultValueResolved=!0,this._components.forEach(function(e){e.resolveDefaultAttributes(E.default.getAttributes(t.element))})}},{key:"checkTreeConstraints",value:function(){var t=this,e=this.nodeDeclaration.treeConstraints;if(!e)return[];var n=e.map(function(e){return e(t)}).filter(function(t){return null!==t});return 0===n.length?null:n}},{key:"notifyActivenessUpdate",value:function(){this.isActive&&(this._resolveBufferdMessage(this.mounted?"mount":"unmount"),this.children.forEach(function(t){t.notifyActivenessUpdate()}))}},{key:"_sendMessageToComponent",value:function(t,e,n){if(e=C.default.ensureTobeMessage(e),!t.enabled||!this.isActive)return!1;var r=t[e];return"function"==typeof r&&r.bind(t)(n),!0}},{key:"_resolveBufferdMessageTo",value:function(t,e){if(!t.enabled||!this.isActive)return!1;e=C.default.ensureTobeMessage(e);var n=this._messageBuffer.findIndex(function(n){return n.message===e&&n.target===t});if(n>=0){var r=t[e];return"function"==typeof r&&r.bind(t)(),this._messageBuffer.splice(n,1),!0}return!1}},{key:"_sendMessage",value:function(t,e){var n=this;this._components.forEach(function(r){n._sendMessageToComponent(r,t,e)})}},{key:"_sendMessageForced",value:function(t){var e=this;this._components.forEach(function(n){e._sendMessageForcedTo(n,t)})}},{key:"_sendMessageBuffer",value:function(t){var e=this;this._components.forEach(function(n){e._sendMessageBufferTo(n,t)})}},{key:"_sendMessageBufferTo",value:function(t,e){e=C.default.ensureTobeMessage(e);var n=this._messageBuffer.findIndex(function(n){return n.message===e&&n.target===t});if(!t.enabled||!this.isActive)return n<0&&this._messageBuffer.push({message:e,target:t}),!1;var r=t[e];return"function"==typeof r&&r.bind(t)(),n>=0&&this._messageBuffer.splice(n,1),!0}},{key:"_sendMessageForcedTo",value:function(t,e){e=C.default.ensureTobeMessage(e);var n=t[e];"function"==typeof n&&n.bind(t)()}},{key:"_resolveBufferdMessage",value:function(t){var e=this;t=C.default.ensureTobeMessage(t);var n=this._messageBuffer.filter(function(e){return e.message===t});n.forEach(function(n){e._resolveBufferdMessageTo(n.target,t)})}},{key:"_clearMessageBuffer",value:function(t){t=C.default.ensureTobeMessage(t),this._messageBuffer=this._messageBuffer.filter(function(e){return e.message!==t})}},{key:"_callRecursively",value:function(t,e){var n=t(this),r=e(this),a=r.map(function(e){return e.callRecursively(t)}),o=a.reduce(function(t,e){return t.concat(e)},[]);return o.unshift(n),o}},{key:"name",get:function(){return this.nodeDeclaration.name}},{key:"tree",get:function(){if(!this.mounted)throw new Error("this node is not mounted");return this._tree}},{key:"deleted",get:function(){return this._deleted}},{key:"isActive",get:function(){return this._parent?this._parent.isActive&&this.enabled:this.enabled}},{key:"enabled",get:function(){return this.getAttribute("enabled")},set:function(t){this.setAttribute("enabled",t)}},{key:"companion",get:function(){return this._companion}},{key:"parent",get:function(){return this._parent}},{key:"hasChildren",get:function(){return this.children.length>0}},{key:"mounted",get:function(){return this._mounted}}],[{key:"fromElement",value:function(t){return b.default.nodeDictionary[t.getAttribute("x-gr-id")]}}]),e}(w.default);e.default=P},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentInterface=void 0;var a=n(39),o=r(a),i=n(40),u=r(i),s=e.ComponentInterface=function(){function t(e){(0,o.default)(this,t),this.components=e}return(0,u.default)(t,[{key:"get",value:function(t,e,n){var r=this.components;if(void 0===t){if(0===r.length||0===r[0].length||0===r[0][0].length)return null;if(1===r.length&&1===r[0].length||1===r[0][0].length)return r[0][0][0];throw new Error("There are too many candidate")}if(void 0===e){if(0===r.length||0===r[0].length||r[0][0].length<=t)return null;if(1===r.length&&1===r[0].length)return r[0][0][t];throw new Error("There are too many candidate")}if(void 0===n){if(0===r.length||r[0].length<=e||r[0][e].length<=t)return null;if(1===r.length)return r[0][e][t];throw new Error("There are too many candidate")}return r.length<=n||r[n].length<=e||r[n][e].length<=t?null:r[n][e][t]}},{key:"forEach",value:function(t){return this.components.forEach(function(e,n){e.forEach(function(e,r){e.forEach(function(e,a){t(e,a,r,n)})})}),this}},{key:"first",value:function(t){if(!t)return this.first(function(){return!0});for(var e=0;e<this.components.length;e++)for(var n=this.components[e],r=0;r<n.length;e++)for(var a=n[r],o=0;o<a.length;o++){var i=a[o];if(t(i,e,r,o))return i}return null}},{key:"isEmpty",value:function(){var t=!0;return this.forEach(function(e){t=!1}),t}},{key:"getAttribute",value:function(t){if(this.isEmpty())throw new Error("component interface is empty.");return this.components[0][0][0].getValue(t)}},{key:"setAttribute",value:function(t,e){this.forEach(function(n){n.setValue(t,e)})}},{key:"attr",value:function(t,e){return void 0===e?(console.warn("attr is obsolate. please use getAttribute instead of."),this.getAttribute(t)):(console.warn("attr is obsolate. please use setAttribute instead of."),void this.setAttribute(t,e))}},{key:"count",value:function(){return 0===this.components.length?0:this.components.map(function(t){return t.map(function(t){return t.length}).reduce(function(t,e){return t+e},0)}).reduce(function(t,e){return t+e},0)}}]),t}();e.default=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(139),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(125),c=r(f),d=n(138),h=r(d),v=n(151),p=r(v),m=n(133),y=r(m),g=n(124),_=r(g),M=function(t,e,n,r){return new(n||(n=c.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},b=function(){function t(){(0,u.default)(this,t)}return(0,l.default)(t,null,[{key:"loadFromScriptTag",value:function(t){return M(this,void 0,void 0,o.default.mark(function e(){var n,r,a,i,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getAttribute("src"),r=void 0,!n){e.next=10;break}return a=new XMLHttpRequest,a.open("GET",n),e.next=7,_.default.send(a);case 7:r=a.responseText,e.next=11;break;case 10:r=t.text;case 11:i=y.default.parseXML(r,"GOML"),u=p.default.parse(i[0],null,t),h.default.addRootNode(t,u);case 14:case"end":return e.stop()}},e,this)}))}},{key:"loadFromQuery",value:function(e){for(var n=document.querySelectorAll(e),r=[],a=0;a<n.length;a++)r[a]=t.loadFromScriptTag(n.item(a));return c.default.all(r)}},{key:"loadForPage",value:function(){return M(this,void 0,void 0,o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadFromQuery('script[type="text/goml"]');case 2:case"end":return e.stop()}},e,this)}))}}]),t}();e.default=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(139),o=r(a),i=n(39),u=r(i),s=n(40),l=r(s),f=n(125),c=r(f);e.default=function(){return y.initialize(),window.gr=window.GrimoireJS=h.default};var d=n(138),h=r(d),v=n(154),p=r(v),m=function(t,e,n,r){return new(n||(n=c.default))(function(a,o){function i(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?a(t.value):new n(function(e){e(t.value)}).then(i,u)}s((r=r.apply(t,e)).next())})},y=function(){function t(){(0,u.default)(this,t)}return(0,l.default)(t,null,[{key:"initialize",value:function(){return m(this,void 0,void 0,o.default.mark(function e(){
return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t._copyGLConstants(),h.default.initialize(),e.next=5,t._waitForDOMLoading();case 5:return e.next=7,h.default.resolvePlugins();case 7:return e.next=9,p.default.loadForPage();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}},e,this,[[0,11]])}))}},{key:"_copyGLConstants",value:function(){if(!WebGLRenderingContext.ONE)for(var t in WebGLRenderingContext.prototype)if(/^[A-Z]/.test(t)){var e=WebGLRenderingContext.prototype[t];WebGLRenderingContext[t]=e}}},{key:"_waitForDOMLoading",value:function(){return new c.default(function(t){window.addEventListener("DOMContentLoaded",function(){t()})})}}]),t}()}])})}])});
//# sourceMappingURL=grimoire-preset-basic.min.js.map